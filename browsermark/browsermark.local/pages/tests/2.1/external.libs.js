/*
 PluginDetect v0.7.7 www.pinlady.net/PluginDetect | www.pinlady.net/PluginDetect/license
 [ getVersion isMinVersion ]
 [ Silverlight ]
 */
var PluginDetect={version:"0.7.7",rDate:"04/11/2012",name:"PluginDetect",handler:function(c,b,a){return function(){c(b,a)}},isDefined:function(b){return typeof b!="undefined"},isArray:function(b){return(/array/i).test(Object.prototype.toString.call(b))},isFunc:function(b){return typeof b=="function"},isString:function(b){return typeof b=="string"},isNum:function(b){return typeof b=="number"},isStrNum:function(b){return(typeof b=="string"&&(/\d/).test(b))},getNumRegx:/[\d][\d\.\_,-]*/,splitNumRegx:/[\.\_,-]/g,getNum:function(b,c){var d=this,a=d.isStrNum(b)?(d.isDefined(c)?new RegExp(c):d.getNumRegx).exec(b):null;return a?a[0]:null},compareNums:function(h,f,d){var e=this,c,b,a,g=parseInt;if(e.isStrNum(h)&&e.isStrNum(f)){if(e.isDefined(d)&&d.compareNums){return d.compareNums(h,f)}c=h.split(e.splitNumRegx);b=f.split(e.splitNumRegx);for(a=0;a<Math.min(c.length,b.length);a++){if(g(c[a],10)>g(b[a],10)){return 1}if(g(c[a],10)<g(b[a],10)){return -1}}}return 0},formatNum:function(b,c){var d=this,a,e;if(!d.isStrNum(b)){return null}if(!d.isNum(c)){c=4}c--;e=b.replace(/\s/g,"").split(d.splitNumRegx).concat(["0","0","0","0"]);for(a=0;a<4;a++){if(/^(0+)(.+)$/.test(e[a])){e[a]=RegExp.$2}if(a>c||!(/\d/).test(e[a])){e[a]="0"}}return e.slice(0,4).join(",")},$$hasMimeType:function(a){return function(c){if(!a.isIE&&c){var f,e,b,d=a.isArray(c)?c:(a.isString(c)?[c]:[]);for(b=0;b<d.length;b++){if(a.isString(d[b])&&/[^\s]/.test(d[b])){f=navigator.mimeTypes[d[b]];e=f?f.enabledPlugin:0;if(e&&(e.name||e.description)){return f}}}}return null}},findNavPlugin:function(l,e,c){var j=this,h=new RegExp(l,"i"),d=(!j.isDefined(e)||e)?/\d/:0,k=c?new RegExp(c,"i"):0,a=navigator.plugins,g="",f,b,m;for(f=0;f<a.length;f++){m=a[f].description||g;b=a[f].name||g;if((h.test(m)&&(!d||d.test(RegExp.leftContext+RegExp.rightContext)))||(h.test(b)&&(!d||d.test(RegExp.leftContext+RegExp.rightContext)))){if(!k||!(k.test(m)||k.test(b))){return a[f]}}}return null},getMimeEnabledPlugin:function(k,m,c){var e=this,f,b=new RegExp(m,"i"),h="",g=c?new RegExp(c,"i"):0,a,l,d,j=e.isString(k)?[k]:k;for(d=0;d<j.length;d++){if((f=e.hasMimeType(j[d]))&&(f=f.enabledPlugin)){l=f.description||h;a=f.name||h;if(b.test(l)||b.test(a)){if(!g||!(g.test(l)||g.test(a))){return f}}}}return 0},AXO:window.ActiveXObject,getAXO:function(a){var f=null,d,b=this,c={};try{f=new b.AXO(a)}catch(d){}return f},convertFuncs:function(f){var a,g,d,b=/^[\$][\$]/,c=this;for(a in f){if(b.test(a)){try{g=a.slice(2);if(g.length>0&&!f[g]){f[g]=f[a](f);delete f[a]}}catch(d){}}}},initObj:function(e,b,d){var a,c;if(e){if(e[b[0]]==1||d){for(a=0;a<b.length;a=a+2){e[b[a]]=b[a+1]}}for(a in e){c=e[a];if(c&&c[b[0]]==1){this.initObj(c,b)}}}},initScript:function(){var c=this,a=navigator,e="/",f,i=a.userAgent||"",g=a.vendor||"",b=a.platform||"",h=a.product||"";c.initObj(c,["$",c]);for(f in c.Plugins){if(c.Plugins[f]){c.initObj(c.Plugins[f],["$",c,"$$",c.Plugins[f]],1)}};c.OS=100;if(b){var d=["Win",1,"Mac",2,"Linux",3,"FreeBSD",4,"iPhone",21.1,"iPod",21.2,"iPad",21.3,"Win.*CE",22.1,"Win.*Mobile",22.2,"Pocket\\s*PC",22.3,"",100];for(f=d.length-2;f>=0;f=f-2){if(d[f]&&new RegExp(d[f],"i").test(b)){c.OS=d[f+1];break}}}c.convertFuncs(c);c.head=(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.body||null);c.isIE=(new Function("return "+e+"*@cc_on!@*"+e+"false"))();c.verIE=c.isIE&&(/MSIE\s*(\d+\.?\d*)/i).test(i)?parseFloat(RegExp.$1,10):null;c.ActiveXEnabled=false;if(c.isIE){var f,j=["Msxml2.XMLHTTP","Msxml2.DOMDocument","Microsoft.XMLDOM","ShockwaveFlash.ShockwaveFlash","TDCCtl.TDCCtl","Shell.UIHelper","Scripting.Dictionary","wmplayer.ocx"];for(f=0;f<j.length;f++){if(c.getAXO(j[f])){c.ActiveXEnabled=true;break}}}c.isGecko=(/Gecko/i).test(h)&&(/Gecko\s*\/\s*\d/i).test(i);c.verGecko=c.isGecko?c.formatNum((/rv\s*\:\s*([\.\,\d]+)/i).test(i)?RegExp.$1:"0.9"):null;c.isChrome=(/Chrome\s*\/\s*(\d[\d\.]*)/i).test(i);c.verChrome=c.isChrome?c.formatNum(RegExp.$1):null;c.isSafari=((/Apple/i).test(g)||(!g&&!c.isChrome))&&(/Safari\s*\/\s*(\d[\d\.]*)/i).test(i);c.verSafari=c.isSafari&&(/Version\s*\/\s*(\d[\d\.]*)/i).test(i)?c.formatNum(RegExp.$1):null;c.isOpera=(/Opera\s*[\/]?\s*(\d+\.?\d*)/i).test(i);c.verOpera=c.isOpera&&((/Version\s*\/\s*(\d+\.?\d*)/i).test(i)||1)?parseFloat(RegExp.$1,10):null},init:function(d){var c=this,b,d,a={status:-3,plugin:0};if(!c.isString(d)){return a}if(d.length==1){c.getVersionDelimiter=d;return a}d=d.toLowerCase().replace(/\s/g,"");b=c.Plugins[d];if(!b||!b.getVersion){return a}a.plugin=b;if(!c.isDefined(b.installed)){b.installed=null;b.version=null;b.version0=null;b.getVersionDone=null;b.pluginName=d}c.garbage=false;if(c.isIE&&!c.ActiveXEnabled&&d!=="java"){a.status=-2;return a}a.status=1;return a},$$isMinVersion:function(a){return function(h,g,d,c){var e=a.init(h),f,b=-1,j={};if(e.status<0){return e.status}f=e.plugin;g=a.formatNum(a.isNum(g)?g.toString():(a.isStrNum(g)?a.getNum(g):"0"));if(f.getVersionDone!=1){f.getVersion(g,d,c);if(f.getVersionDone===null){f.getVersionDone=1}}a.cleanup();if(f.installed!==null){b=f.installed<=0.5?f.installed:(f.installed==0.7?1:(f.version===null?0:(a.compareNums(f.version,g,f)>=0?1:-0.1)))};return b}},getVersionDelimiter:",",$$getVersion:function(a){return function(g,d,c){var e=a.init(g),f,b,h={};if(e.status<0){return null};f=e.plugin;if(f.getVersionDone!=1){f.getVersion(null,d,c);if(f.getVersionDone===null){f.getVersionDone=1}}a.cleanup();b=(f.version||f.version0);b=b?b.replace(a.splitNumRegx,a.getVersionDelimiter):b;return b}},cleanup:function(){},Plugins:{silverlight:{mimeType:"application/x-silverlight",progID:"AgControl.AgControl",digits:[20,20,9,12,31],getVersion:function(){var e=this,c=e.$,k=document,i=null,b=null,f=null,h=true,a=[1,0,1,1,1],r=[1,0,1,1,1],j=function(d){return(d<10?"0":"")+d.toString()},n=function(s,d,u,v,t){return(s+"."+d+"."+u+j(v)+j(t)+".0")},o=function(s,d,t){return q(s,(d==0?t:r[0]),(d==1?t:r[1]),(d==2?t:r[2]),(d==3?t:r[3]),(d==4?t:r[4]))},q=function(v,t,s,x,w,u){var u;try{return v.IsVersionSupported(n(t,s,x,w,u))}catch(u){}return false};if(!c.isIE){var g;if(c.hasMimeType(e.mimeType)){g=c.isGecko&&c.compareNums(c.verGecko,c.formatNum("1.6"))<=0;if(c.isGecko&&g){h=false}f=c.findNavPlugin("Silverlight.*Plug-?in",0);if(f&&f.description){i=c.formatNum(f.description)}if(i){r=i.split(c.splitNumRegx);if(parseInt(r[2],10)>=30226&&parseInt(r[0],10)<2){r[0]="2"}i=r.join(",")}}e.installed=f&&h&&i?1:(f&&h?0:(f?-0.2:-1))}else{b=c.getAXO(e.progID);var m,l,p;if(b&&q(b,a[0],a[1],a[2],a[3],a[4])){for(m=0;m<e.digits.length;m++){p=r[m];for(l=p+(m==0?0:1);l<=e.digits[m];l++){if(o(b,m,l)){h=true;r[m]=l}else{break}}if(!h){break}}if(h){i=n(r[0],r[1],r[2],r[3],r[4])}}e.installed=b&&h&&i?1:(b&&h?0:(b?-0.2:-1))}e.version=c.formatNum(i)}},zz:0}};PluginDetect.initScript();

/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2012 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
(function(e){function r(e){if(e in t.style)return e;var n=["Moz","Webkit","O","ms"];var r=e.charAt(0).toUpperCase()+e.substr(1);if(e in t.style){return e}for(var i=0;i<n.length;++i){var s=n[i]+r;if(s in t.style){return s}}}function i(){t.style[n.transform]="";t.style[n.transform]="rotateY(90deg)";return t.style[n.transform]!==""}function f(e){if(typeof e==="string"){this.parse(e)}return this}function l(e,t,n){if(t===true){e.queue(n)}else if(t){e.queue(t,n)}else{n()}}function c(t){var n=[];e.each(t,function(t){t=e.camelCase(t);t=e.transit.propertyMap[t]||e.cssProps[t]||t;t=d(t);if(e.inArray(t,n)===-1){n.push(t)}});return n}function h(t,n,r,i){var s=c(t);if(e.cssEase[r]){r=e.cssEase[r]}var o=""+m(n)+" "+r;if(parseInt(i,10)>0){o+=" "+m(i)}var u=[];e.each(s,function(e,t){u.push(t+" "+o)});return u.join(", ")}function p(t,r){if(!r){e.cssNumber[t]=true}e.transit.propertyMap[t]=n.transform;e.cssHooks[t]={get:function(n){var r=e(n).css("transit:transform");return r.get(t)},set:function(n,r){var i=e(n).css("transit:transform");i.setFromString(t,r);e(n).css({"transit:transform":i})}}}function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function v(e,t){if(typeof e==="string"&&!e.match(/^[\-0-9\.]+$/)){return e}else{return""+e+t}}function m(t){var n=t;if(typeof n==="string"&&!n.match(/^[\-0-9\.]+/)){n=e.fx.speeds[n]||e.fx.speeds._default}return v(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var t=document.createElement("div");var n={};var s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=r("transition");n.transitionDelay=r("transitionDelay");n.transform=r("transform");n.transformOrigin=r("transformOrigin");n.transform3d=i();var o={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var u=n.transitionEnd=o[n.transition]||null;for(var a in n){if(n.hasOwnProperty(a)&&typeof e.support[a]==="undefined"){e.support[a]=n[a]}}t=null;e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new f},set:function(t,r){var i=r;if(!(i instanceof f)){i=new f(i)}if(n.transform==="WebkitTransform"&&!s){t.style[n.transform]=i.toString(true)}else{t.style[n.transform]=i.toString()}e(t).data("transform",i)}};e.cssHooks.transform={set:e.cssHooks["transit:transform"].set};if(e.fn.jquery<"1.8"){e.cssHooks.transformOrigin={get:function(e){return e.style[n.transformOrigin]},set:function(e,t){e.style[n.transformOrigin]=t}};e.cssHooks.transition={get:function(e){return e.style[n.transition]},set:function(e,t){e.style[n.transition]=t}}}p("scale");p("translate");p("rotate");p("rotateX");p("rotateY");p("rotate3d");p("perspective");p("skewX");p("skewY");p("x",true);p("y",true);f.prototype={setFromString:function(e,t){var n=typeof t==="string"?t.split(","):t.constructor===Array?t:[t];n.unshift(e);f.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);if(this.setter[e]){this.setter[e].apply(this,t)}else{this[e]=t.join(",")}},get:function(e){if(this.getter[e]){return this.getter[e].apply(this)}else{return this[e]||0}},setter:{rotate:function(e){this.rotate=v(e,"deg")},rotateX:function(e){this.rotateX=v(e,"deg")},rotateY:function(e){this.rotateY=v(e,"deg")},scale:function(e,t){if(t===undefined){t=e}this.scale=e+","+t},skewX:function(e){this.skewX=v(e,"deg")},skewY:function(e){this.skewY=v(e,"deg")},perspective:function(e){this.perspective=v(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(e!==null&&e!==undefined){this._translateX=v(e,"px")}if(t!==null&&t!==undefined){this._translateY=v(t,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");if(e[0]){e[0]=parseFloat(e[0])}if(e[1]){e[1]=parseFloat(e[1])}return e[0]===e[1]?e[0]:e},rotate3d:function(){var e=(this.rotate3d||"0,0,0,0deg").split(",");for(var t=0;t<=3;++t){if(e[t]){e[t]=parseFloat(e[t])}}if(e[3]){e[3]=v(e[3],"deg")}return e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var r in this){if(this.hasOwnProperty(r)){if(!n.transform3d&&(r==="rotateX"||r==="rotateY"||r==="perspective"||r==="transformOrigin")){continue}if(r[0]!=="_"){if(e&&r==="scale"){t.push(r+"3d("+this[r]+",1)")}else if(e&&r==="translate"){t.push(r+"3d("+this[r]+",0)")}else{t.push(r+"("+this[r]+")")}}}}return t.join(" ")}};e.fn.transition=e.fn.transit=function(t,r,i,s){var o=this;var a=0;var f=true;var c=jQuery.extend(true,{},t);if(typeof r==="function"){s=r;r=undefined}if(typeof r==="object"){i=r.easing;a=r.delay||0;f=r.queue||true;s=r.complete;r=r.duration}if(typeof i==="function"){s=i;i=undefined}if(typeof c.easing!=="undefined"){i=c.easing;delete c.easing}if(typeof c.duration!=="undefined"){r=c.duration;delete c.duration}if(typeof c.complete!=="undefined"){s=c.complete;delete c.complete}if(typeof c.queue!=="undefined"){f=c.queue;delete c.queue}if(typeof c.delay!=="undefined"){a=c.delay;delete c.delay}if(typeof r==="undefined"){r=e.fx.speeds._default}if(typeof i==="undefined"){i=e.cssEase._default}r=m(r);var p=h(c,r,i,a);var d=e.transit.enabled&&n.transition;var v=d?parseInt(r,10)+parseInt(a,10):0;if(v===0){var g=function(e){o.css(c);if(s){s.apply(o)}if(e){e()}};l(o,f,g);return o}var y={};var b=function(r){var i=false;var a=function(){if(i){o.unbind(u,a)}if(v>0){o.each(function(){this.style[n.transition]=y[this]||null})}if(typeof s==="function"){s.apply(o)}if(typeof r==="function"){r()}};if(v>0&&u&&e.transit.useTransitionEnd){i=true;o.bind(u,a)}else{window.setTimeout(a,v)}o.each(function(){if(v>0){this.style[n.transition]=p}e(this).css(t)})};var w=function(e){this.offsetWidth;b(e)};l(o,f,w);return this};e.transit.getTransitionValue=h})(jQuery);

/*
 * SceneJS WebGL Scene Graph Library for JavaScript
 * http://scenejs.org/
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://scenejs.org/license
 * Copyright 2010, Lindsay Kay
 *
 * Includes WebGLTrace
 * Various functions for helping debug WebGL apps.
 * http://github.com/jackpal/webgltrace
 * Copyright (c) 2009 The Chromium Authors. All rights reserved.
 *
 * Includes WebGL-Debug
 * Various functions for helping debug WebGL apps.
 * http://khronos.org/webgl/wiki/Debugging
 * Copyright (c) 2009 The Chromium Authors. All rights reserved.
 */
/** Generic map of IDs to items - can generate own IDs or accept given IDs.
 * Given IDs should be strings in order to not clash with internally generated IDs, which are numbers.
 */
function SceneJS_webgl_ensureImageSizePowerOfTwo(a){if(!SceneJS_webgl_isPowerOfTwo(a.width)||!SceneJS_webgl_isPowerOfTwo(a.height)){var b=document.createElement("canvas");b.width=SceneJS_webgl_nextHighestPowerOfTwo(a.width);b.height=SceneJS_webgl_nextHighestPowerOfTwo(a.height);var c=b.getContext("2d");c.drawImage(a,0,0,a.width,a.height,0,0,b.width,b.height);a=b}return a}function SceneJS_webgl_isPowerOfTwo(a){return(a&a-1)==0}function SceneJS_webgl_nextHighestPowerOfTwo(a){--a;for(var b=1;b<32;b<<=1){a=a|a>>b}return a+1}var SceneJS_Map=function(){this.items=[];this.lastUniqueId=0;this.addItem=function(){var a;if(arguments.length==2){var b=arguments[0];a=arguments[1];if(this.items[b]){throw SceneJS_errorModule.fatalError(SceneJS.errors.ID_CLASH,"ID clash: '"+b+"'")}this.items[b]=a;return b}else{while(true){a=arguments[0];var c=this.lastUniqueId++;if(!this.items[c]){this.items[c]=a;return c}}}};this.removeItem=function(a){this.items[a]=null}};var SceneJS={VERSION:"2.0.0",SUPPORTED_WEBGL_CONTEXT_NAMES:["webgl","experimental-webgl","webkit-3d","moz-webgl","moz-glweb20"],_nodeTypes:{},_scenes:{},createNodeType:function(a,b){if(!a){throw SceneJS_errorModule.fatalError("createNodeType param 'type' is null or undefined")}if(typeof a!="string"){throw SceneJS_errorModule.fatalError("createNodeType param 'type' should be a string")}if(this._nodeTypes[a]){throw SceneJS_errorModule.fatalError("createNodeType node of param 'type' already defined: '"+b+"'")}var c=this._nodeTypes[b];if(!c){c=SceneJS._Node}var d=function(){c.apply(this,arguments);this.attr.type=a};SceneJS._inherit(d,c);this._nodeTypes[a]=d;return d},_registerNode:function(a,b){this._nodeTypes[a]=b},createScene:function(a){if(!a){throw SceneJS_errorModule.fatalError("createScene param 'json' is null or undefined")}a.type="scene";if(!a.id){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"createScene 'id' is mandatory for 'scene' node")}if(this._scenes[a.id]){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"createScene - scene id '"+a.id+"' already taken by another scene")}var b=this._parseNodeJSON(a,undefined);this._scenes[a.id]=b;SceneJS_eventModule.fireEvent(SceneJS_eventModule.NODE_CREATED,{nodeId:b.attr.id,json:a});return SceneJS._selectNode(b)},sceneExists:function(a){return this._scenes[a]?true:false},scene:function(a){var b=this._scenes[a];if(!b){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"withScene scene not found: '"+a+"'")}return SceneJS._selectNode(b)},_parseNodeJSON:function(a,b){var c=this._createNode(a,b);b=b||c;c.scene=b;if(a.nodes){var d=a.nodes.length;for(var e=0;e<d;e++){c.addNode(SceneJS._parseNodeJSON(a.nodes[e],b))}}return c},_createNode:function(a,b){a.type=a.type||"node";var c;if(a.type=="node"){c=SceneJS._Node}else{c=this._nodeTypes[a.type];if(!c){throw SceneJS_errorModule.fatalError("Scene node type not supported in SceneJS "+SceneJS.VERSION+": '"+a.type+"'")}}return new c(a,b)},_copyCfg:function(a){var b={};for(var c in a){if(a.hasOwnProperty(c)&&c!="nodes"){b[c]=a[c]}}return b},_destroyedNodes:[],_actionNodeDestroys:function(){if(this._destroyedNodes.length>0){var a;for(var b=this._destroyedNodes.length-1;b>=0;b--){a=this._destroyedNodes[b];a._doDestroy();SceneJS_eventModule.fireEvent(SceneJS_eventModule.NODE_DESTROYED,{nodeId:a.attr.id})}this._destroyedNodes=[]}},Message:new function(){this.sendMessage=function(a){if(!a){throw SceneJS_errorModule.fatalError("sendMessage param 'message' null or undefined")}var b=a.command;if(!b){throw SceneJS_errorModule.fatalError("Message element expected: 'command'")}var c=SceneJS.Services.getService(SceneJS.Services.COMMAND_SERVICE_ID);var d=c.getCommand(b);if(!d){throw SceneJS_errorModule.fatalError("Message command not supported: '"+b+"' - perhaps this command needs to be added to the SceneJS Command Service?")}var e={};d.execute(e,a)}},_inherit:function(a,b){a.prototype=new b;a.prototype.constructor=a},_namespace:function(){var a=arguments,o=null,i,j,d,rt;for(i=0;i<a.length;++i){d=a[i].split(".");rt=d[0];eval("if (typeof "+rt+' == "undefined"){'+rt+" = {};} o = "+rt+";");for(j=1;j<d.length;++j){o[d[j]]=o[d[j]]||{};o=o[d[j]]}}},_last_unique_id:0,_createKeyForMap:function(a,b){while(true){var c=b?b+SceneJS._last_unique_id++:SceneJS._last_unique_id++;if(!a[c]){return c}}},_createUUID:function(){var a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];var b=["8","9","A","B"];var c=[];for(var d=0;d<38;d++){switch(d){case 8:c.push("-");break;case 13:c.push("-");break;case 18:c.push("-");break;case 14:c.push("4");break;case 19:c.push(b[Math.round(Math.random()*3)]);break;default:c.push(a[Math.round(Math.random()*15)]);break}}return c.join("")},_getBaseURL:function(a){var b=a.lastIndexOf("/");if(b==0||b==-1){return""}return a.substr(0,b+1)},_isArray:function(a){return a&&!a.propertyIsEnumerable("length")&&typeof a==="object"&&typeof a.length==="number"},_shallowClone:function(a){var b={};for(var c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}return b},_applyIf:function(a,b){for(var c in a){if(a.hasOwnProperty(c)){if(b[c]==undefined||b[c]==null){b[c]=a[c]}}}return b},_apply:function(a,b,c){var d;if(c){for(d in b){if(b.hasOwnProperty(d)){delete b[d]}}}for(d in a){if(a.hasOwnProperty(d)){b[d]=a[d]}}return b},_compilationStates:new function(){var a={};this.setSupplier=function(b,c){a[b]=c};this.getState=function(b,c,d){var e=a[b];if(!e){throw SceneJS_errorModule.fatalError("Internal error - Compilation state supplier not found: '"+b+"'")}return e.get(c,d)}}};SceneJS._Node=function(a,b){this.attr={};this.attr.type="node";this.attr.sid=null;this.attr.data={};if(a){this.attr.id=a.id;this.attr.type=a.type||"node";this.attr.data=a.data;this.attr.enabled=a.enabled===false?false:true;this.attr.sid=a.sid;this.attr.info=a.info;this.scene=b||this}this.children=[];this.parent=null;this.listeners={};this.numListeners=0;this._compileMemoLevel=0;if(this.attr.id){}if(this.scene&&this.scene.nodeMap){if(this.attr.id){this.scene.nodeMap.addItem(this.attr.id,this)}else{this.attr.id=this.scene.nodeMap.addItem(this)}}if(a){this._createCore(a.coreId||a.resource);this.setTags(a.tags||{});if(this._init){this._init(a)}}};SceneJS._Node.prototype.constructor=SceneJS._Node;SceneJS._Node.prototype._cores={};SceneJS._Node.prototype._createCore=function(a){var b=this.scene.attr.id;var c=this._cores[b];if(!c){c=this._cores[b]={}}var d=c[this.attr.type];if(!d){d=c[this.attr.type]={}}if(a){this.core=d[a];if(this.core){this.core._nodeCount++}}else{a=SceneJS._createUUID()}if(!this.core){this.core=d[a]={_coreId:a,_nodeCount:1}}return this.core};SceneJS._Node.prototype.getCoreId=function(){return this.core._coreId};SceneJS._Node.prototype.getResource=SceneJS._Node.prototype.getCoreId;SceneJS._Node.prototype._tags={};SceneJS._Node.prototype.setTags=function(a){};SceneJS._Node.prototype._resetCompilationMemos=function(){this._compileMemoLevel=0};SceneJS._Node.prototype._resetTreeCompilationMemos=function(){this._resetCompilationMemos();for(var a=0;a<this.children.length;a++){this.children[a]._resetTreeCompilationMemos()}};SceneJS._Node.prototype._flagDirty=function(){this._compileMemoLevel=0};SceneJS._Node.prototype._compile=function(){this._compileNodes()};SceneJS._Node.prototype._compileNodes=function(){if(this.listeners["rendered"]){SceneJS_nodeEventsModule.preVisitNode(this)}var a=this.children;var b=a.length;var c;var d;if(b>0){for(d=0;d<b;d++){c=a[d];if(SceneJS_compileModule.preVisitNode(c)){c._compile()}SceneJS_compileModule.postVisitNode(c)}}if(this.listeners["rendered"]){SceneJS_nodeEventsModule.postVisitNode(this)}};SceneJS._Node.prototype.getID=function(){return this.attr.id};SceneJS._Node.prototype.getId=SceneJS._Node.prototype.getID;SceneJS._Node.prototype.getType=function(){return this.attr.type};SceneJS._Node.prototype.getData=function(){return this.attr.data};SceneJS._Node.prototype.setData=function(a){this.attr.data=a;return this};SceneJS._Node.prototype.getSID=function(){return this.attr.sid};SceneJS._Node.prototype.getScene=function(){return this.scene};SceneJS._Node.prototype.getNumNodes=function(){return this.children.length};SceneJS._Node.prototype.getNodes=function(){var a=new Array(this.children.length);var b=this.children.length;for(var c=0;c<b;c++){a[c]=this.children[c]}return a};SceneJS._Node.prototype.getNodeAt=function(a){if(a<0||a>=this.children.length){return null}return this.children[a]};SceneJS._Node.prototype.getFirstNode=function(){if(this.children.length==0){return null}return this.children[0]};SceneJS._Node.prototype.getLastNode=function(){if(this.children.length==0){return null}return this.children[this.children.length-1]};SceneJS._Node.prototype.getNode=function(a){for(var b=0;b<this.children.length;b++){if(this.children[b].attr.id==a){return this.children[b]}}return null};SceneJS._Node.prototype.disconnectNodeAt=function(a){var b=this.children.splice(a,1);this._resetCompilationMemos();if(b.length>0){b[0].parent=null;return b[0]}else{return null}};SceneJS._Node.prototype.disconnect=function(){if(this.parent){for(var a=0;a<this.parent.children.length;a++){if(this.parent.children[a]===this){return this.parent.disconnectNodeAt(a)}}}};SceneJS._Node.prototype.removeNodeAt=function(a){var b=this.disconnectNodeAt(a);if(b){b.destroy()}};SceneJS._Node.prototype.removeNode=function(a){if(!a){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#removeNode - node argument undefined")}if(!a._compile){if(typeof a=="string"){var b=this.scene.nodeMap.items[a];if(!b){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_NOT_FOUND,"Node#removeNode - node not found anywhere: '"+a+"'")}a=b}}if(a._compile){for(var c=0;c<this.children.length;c++){if(this.children[c]===a){return this.removeNodeAt(c)}}}throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_NOT_FOUND,"Node#removeNode - child node not found: "+(a._compile?": "+a.attr.id:a))};SceneJS._Node.prototype.disconnectNodes=function(){for(var a=0;a<this.children.length;a++){this.children[a].parent=null}var b=this.children;this.children=[];this._resetCompilationMemos();return b};SceneJS._Node.prototype.removeNodes=function(){var a=this.disconnectNodes();for(var b=0;b<a.length;b++){this.children[b].destroy()}};SceneJS._Node.prototype.splice=function(){var a,b;if(this.parent==null){return null}var c=this.parent;var d=this.disconnectNodes();for(a=0,b=d.length;a<b;a++){d[a].parent=this.parent}for(a=0,b=c.children.length;a<b;a++){if(c.children[a]===this){c.children.splice.apply(c.children,[a,1].concat(d));this.parent=null;this.destroy();c._resetTreeCompilationMemos();SceneJS_compileModule.nodeUpdated(c);return c}}};SceneJS._Node.prototype.addNodes=function(a){if(!a){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#addNodes - nodes argument is undefined")}for(var b=a.length-1;b>=0;b--){this.addNode(a[b])}this._resetCompilationMemos();return this};SceneJS._Node.prototype.addNode=function(a){if(!a){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#addNode - node argument is undefined")}if(!a._compile){if(typeof a=="string"){var b=this.scene.nodeMap.items[a];if(!b){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#addNode - node not found: '"+a+"'")}a=b}else{a=SceneJS._parseNodeJSON(a,this.scene)}}if(!a._compile){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#addNode - node argument is not a Node or subclass!")}if(a.parent!=null){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#addNode - node argument is still attached to another parent!")}this.children.push(a);a.parent=this;a._resetTreeCompilationMemos();return a};SceneJS._Node.prototype.insertNode=function(a,b){if(!a){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#insertNode - node argument is undefined")}if(!a._compile){a=SceneJS._parseNodeJSON(a,this.scene)}if(!a._compile){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#insertNode - node argument is not a Node or subclass!")}if(a.parent!=null){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#insertNode - node argument is still attached to another parent!")}if(b==undefined||b==null){var c=this.disconnectNodes();var d=a;while(d.getNumNodes()>0){d=d.getLastNode()}d.addNodes(c);this.addNode(a)}else if(b<0){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Node#insertNode - node index out of range: -1")}else if(b>=this.children.length){this.children.push(a)}else{this.children.splice(b,0,a)}a.parent=this;a._resetTreeCompilationMemos();return a};SceneJS._Node.prototype.mapNodes=function(a){if(a(this)){return this}var b;for(var c=0;c<this.children.length;c++){b=this.children[c].mapNodes(a);if(b){return b}}return null};SceneJS._Node.prototype.addListener=function(a,b,c){var d=this.listeners[a];if(!d){d=[];this.listeners[a]=d}d.push({eventName:a,fn:b,options:c||{}});this.numListeners++;this._resetCompilationMemos();return this};SceneJS._Node.prototype.destroy=function(){if(!this._destroyed){this._destroyed=true;this._scheduleNodeDestroy()}SceneJS_compileModule.nodeUpdated(this,"destroyed");return this};SceneJS._Node.prototype._scheduleNodeDestroy=function(){this.disconnect();this.scene.nodeMap.removeItem(this.attr.id);if(this.children.length>0){var a=this.children.slice(0);for(var b=0;b<a.length;b++){a[b]._scheduleNodeDestroy()}}SceneJS._destroyedNodes.push(this)};SceneJS._Node.prototype._doDestroy=function(){if(this._destroy){this._destroy()}if(--this.core._nodeCount<=0){this._cores[this.scene.attr.id][this.attr.type][this.core._coreId]=null}return this};SceneJS._Node.prototype._fireEvent=function(a,b,c){var d=this.listeners[a];if(d){if(!b){b={}}var e={name:a,params:b,options:c||{}};var f;for(var g=0,h=d.length;g<h;g++){f=d[g];if(f.options.scope){f.fn.call(f.options.scope,e)}else{f.fn.call(this,e)}}}};SceneJS._Node.prototype.removeListener=function(a,b){var c=this.listeners[a];if(!c){return null}for(var d=0;d<c.length;d++){if(c[d].fn==b){c.splice(d,1);return b}}this.numListeners--;return null};SceneJS._Node.prototype.hasListener=function(a){return this.listeners[a]};SceneJS._Node.prototype.hasListeners=function(){return this.numListeners>0};SceneJS._Node.prototype.removeListeners=function(){this.listeners={};this.numListeners=0;return this};SceneJS._Node.prototype.getParent=function(){return this.parent};SceneJS._Node.prototype.findNodesByType=function(a,b){return this._findNodesByType(a,[],b)};SceneJS._Node.prototype._findNodesByType=function(a,b,c){var d;for(d=0;d<this.children;d++){var e=this.children[d];if(e.type==a){b.add(e)}}if(c){for(d=0;d<this.children;d++){this.children[d]._findNodesByType(a,b,c)}}return b};SceneJS._Node.prototype.getJSON=function(){return this.attr};var SceneJS_State=function(a){this.core=a.core||{};this.state=a.state||{};if(a.parent){a.parent.addChild(this)}this.children=[];this.dirty=true;this._cleanFunc=a.cleanFunc};SceneJS_State.prototype.addChild=function(a){a.parent=this;this.children.push(a)};SceneJS_State.prototype.setDirty=function(){if(this.dirty){return}this.dirty=true;if(this.children.length>0){var a;for(var b=0,c=this.children.length;b<c;b++){a=this.children[b];if(!a.dirty){a.setDirty()}}}};SceneJS_State.prototype._cleanStack=[];SceneJS_State.prototype._cleanStackLen=0;SceneJS_State.prototype.setClean=function(){if(!this.dirty){return}if(!this._cleanFunc){return}if(!this.parent){this._cleanFunc(this.parent?this.parent:null,this);this.dirty=false;return}this._cleanStackLen=0;var a=this;while(a&&a.dirty){this._cleanStack[this._cleanStackLen++]=a;a=a.parent}if(a&&a.parent){this._cleanStack[this._cleanStackLen++]=a.parent}var b;for(var c=this._cleanStackLen-1;c>0;c--){b=this._cleanStack[c-1];a=this._cleanStack[c];this._cleanFunc(b,a);b.dirty=false;a.dirty=false}};SceneJS_State.prototype.reset=function(){this.children=[];this.dirty=true};SceneJS.Services=new function(){this.NODE_LOADER_SERVICE_ID="node-loader";this.GEO_LOADER_SERVICE_ID="geo-loader";this.MORPH_GEO_LOADER_SERVICE_ID="morph-geo-loader";this.COMMAND_SERVICE_ID="command";this._services={};this.addService=function(a,b){this._services[a]=b};this.hasService=function(a){var b=this._services[a];return b!=null&&b!=undefined};this.getService=function(a){return this._services[a]};this.addService(this.NODE_LOADER_SERVICE_ID,{loadNode:function(a,b){}});this.addService(this.GEO_LOADER_SERVICE_ID,{loadGeometry:function(a,b,c){throw SceneJS_errorModule.fatalError("SceneJS.Services service not installed: SceneJS.Services.GEO_LOADER_SERVICE_ID")}});this.addService(this.MORPH_GEO_LOADER_SERVICE_ID,{loadMorphGeometry:function(a,b,c){throw SceneJS_errorModule.fatalError("SceneJS.Services service not installed: SceneJS.Services.MORPH_GEO_LOADER_SERVICE_ID")}})};(function(){var a=function(a){this._targetNode=a;this._methods={}};SceneJS._selectNode=function(b){if(!b.__selector){b.__selector=new a(b)}return b.__selector};a.prototype.parent=function(){var a=this._targetNode.parent;if(!a){return null}return SceneJS._selectNode(a)};a.prototype.node=function(a){if(a===null||a===undefined){throw SceneJS_errorModule.fatalError("node param 'node' is null or undefined")}var b=typeof a;var c;if(b=="number"){c=this._targetNode.getNodeAt(a)}else if(b=="string"){c=this._targetNode.getNode(a)}else{throw SceneJS_errorModule.fatalError("node param 'node' should be either an index number or an ID string")}if(!c){throw"node not found: '"+a+"'"}return SceneJS._selectNode(c)};a.prototype.findNode=function(a){if(this._targetNode.attr.type!="scene"){throw SceneJS_errorModule.fatalError('findNode attempted on node that is not a "scene" type: \''+this._targetNode.attr.id+"'")}return this._targetNode.findNode(a)};a.prototype.findNodes=function(a){if(this._targetNode.attr.type!="scene"){throw SceneJS_errorModule.fatalError('findNode attempted on node that is not a "scene" type: \''+this._targetNode.attr.id+"'")}return this._targetNode.findNodes(a)};a.prototype.scene=function(){return SceneJS._selectNode(this._targetNode.scene)};a.prototype.hasNode=function(a){if(a===null||typeof a==="undefined"){throw SceneJS_errorModule.fatalError("hasNode param 'node' is null or undefined")}var b=typeof a;var c;if(b=="number"){c=this._targetNode.getNodeAt(a)}else if(b=="string"){c=this._targetNode.getNode(a)}else{throw SceneJS_errorModule.fatalError("hasNode param 'node' should be either an index number or an ID string")}return c!=undefined&&c!=null};a.prototype.eachParent=function(a){if(!a){throw SceneJS_errorModule.fatalError("eachParent param 'fn' is null or undefined")}var b;var c=0;var d=this._targetNode;while(d.parent){b=SceneJS._selectNode(d.parent);if(a.call(b,c++)===true){return b}d=d.parent}return undefined};a.prototype.eachNode=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("eachNode param 'fn' is null or undefined")}if(typeof a!="function"){throw SceneJS_errorModule.fatalError("eachNode param 'fn' should be a function")}var c;b=b||{};var d=0;if(b.andSelf){if(a.call(this,d++)===true){return this}}if(!b.depthFirst&&!b.breadthFirst){c=this._iterateEachNode(a,this._targetNode,d)}else if(b.depthFirst){c=this._iterateEachNodeDepthFirst(a,this._targetNode,d,false)}else{}if(c){return c}return undefined};a.prototype.numNodes=function(){return this._targetNode.children.length};a.prototype.set=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("set param 'attr' null or undefined")}if(typeof a=="string"){this._callNodeMethod("set",a,b,this._targetNode)}else{this._callNodeMethods("set",a,this._targetNode)}return this};a.prototype.add=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("add param 'attr' null or undefined")}if(typeof a=="string"){this._callNodeMethod("add",a,b,this._targetNode)}else{this._callNodeMethods("add",a,this._targetNode)}return this};a.prototype.inc=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("inc param 'attr' null or undefined")}if(typeof a=="string"){this._callNodeMethod("inc",a,b,this._targetNode)}else{this._callNodeMethods("inc",a,this._targetNode)}return this};a.prototype.insert=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("insert param 'attr' null or undefined")}if(typeof a=="string"){this._callNodeMethod("insert",a,b,this._targetNode)}else{this._callNodeMethods("insert",a,this._targetNode)}return this};a.prototype.remove=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("remove param 'attr' null or undefined")}if(typeof a=="string"){this._callNodeMethod("remove",a,b,this._targetNode)}else{this._callNodeMethods("remove",a,this._targetNode)}return this};a.prototype.get=function(a){if(!a){return this._targetNode.getJSON()}var b="get"+a.substr(0,1).toUpperCase()+a.substr(1);var c=this._targetNode[b];if(!c){throw SceneJS_errorModule.fatalError("Attribute '"+a+"' not found on node '"+this._targetNode.attr.id+"'")}return c.call(this._targetNode)};a.prototype.bind=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("bind param 'name' null or undefined")}if(typeof a!="string"){throw SceneJS_errorModule.fatalError("bind param 'name' should be a string")}if(!b){throw SceneJS_errorModule.fatalError("bind param 'handler' null or undefined")}if(typeof b!="function"){throw SceneJS_errorModule.fatalError("bind param 'handler' should be a function")}else{this._targetNode.addListener(a,b,{scope:this});SceneJS_compileModule.nodeUpdated(this._targetNode,"bind",a)}return this};a.prototype.unbind=function(a,b){if(!a){throw SceneJS_errorModule.fatalError("bind param 'name' null or undefined")}if(typeof a!="string"){throw SceneJS_errorModule.fatalError("bind param 'name' should be a string")}if(!b){throw SceneJS_errorModule.fatalError("bind param 'handler' null or undefined")}if(typeof b!="function"){throw SceneJS_errorModule.fatalError("bind param 'handler' should be a function")}else{this._targetNode.removeListener(a,b);SceneJS_compileModule.nodeUpdated(this._targetNode,"unbind",a)}return this};a.prototype.pick=function(a,b,c){if(!a){throw SceneJS_errorModule.fatalError("pick param 'offsetX' null or undefined")}if(typeof a!="number"){throw SceneJS_errorModule.fatalError("pick param 'offsetX' should be a number")}if(!b){throw SceneJS_errorModule.fatalError("pick param 'offsetY' null or undefined")}if(typeof b!="number"){throw SceneJS_errorModule.fatalError("pick param 'offsetY' should be a number")}if(this._targetNode.attr.type!="scene"){throw SceneJS_errorModule.fatalError('pick attempted on node that is not a "scene" type: \''+this._targetNode.attr.id+"'")}return this._targetNode.pick(a,b,c)};a.prototype.renderFrame=function(a){if(this._targetNode.attr.type!="scene"){throw SceneJS_errorModule.fatalError('renderFrame attempted on node that is not a "scene" type: \''+this._targetNode.attr.id+"'")}return this._targetNode.renderFrame(a)};a.prototype.start=function(a){if(this._targetNode.attr.type!="scene"){throw SceneJS_errorModule.fatalError('start attempted on node that is not a "scene" type: \''+this._targetNode.attr.id+"'")}a=a||{};var b=this;if(a.idleFunc){var c=a.idleFunc;a.idleFunc=function(a){c.call(b,a)}}if(a.frameFunc){var d=a.frameFunc;a.frameFunc=function(){d.call(b)}}if(a.sleepFunc){var e=a.sleepFunc;a.sleepFunc=function(){e.call(b)}}this._targetNode.start(a);return this};a.prototype.stop=function(){if(this._targetNode.attr.type!="scene"){throw SceneJS_errorModule.fatalError('stop attempted on node that is not a "scene" \''+this._targetNode.attr.id+"'")}this._targetNode.stop();return this};a.prototype.pause=function(a){if(this._targetNode.attr.type!="scene"){throw SceneJS_errorModule.fatalError('pause attempted on node that is not a "scene" \''+this._targetNode.attr.id+"'")}this._targetNode.pause(a);return this};a.prototype.splice=function(){this._targetNode.splice();return this};a.prototype.destroy=function(){this._targetNode.destroy();return this};a.prototype.data=function(a,b){if(!a){return this._targetNode.attr.data}this._targetNode.attr.data=this._targetNode.attr.data||{};if(typeof a=="string"){if(b!=undefined){this._targetNode.attr.data[a]=b;return this}else{return this._targetNode.attr.data[a]}}else{if(b!=undefined){this._targetNode.attr.data=b;return this}else{return this._targetNode.attr.data}}};a.prototype._iterateEachNode=function(a,b,c){var d=b.children.length;var e;for(var f=0;f<d;f++){e=SceneJS._selectNode(b.children[f]);if(a.call(e,c++)==true){return e}}return undefined};a.prototype._iterateEachNodeDepthFirst=function(a,b,c,d){var e;if(d){e=SceneJS._selectNode(b);if(a.call(e,c++)==true){return e}}d=true;var f=b.children.length;for(var g=0;g<f;g++){e=this._iterateEachNodeDepthFirst(a,b.children[g],c,d);if(e){return e}}return undefined};a.prototype._callNodeMethod=function(a,b,c,d){var e=this._methods[a];if(!e){e=this._methods[a]={}}var f=e[b];if(!f){b=b.replace(/^\s*/,"").replace(/\s*$/,"");var g=a+b.substr(0,1).toUpperCase()+b.substr(1);f=d[g];if(!f){throw SceneJS_errorModule.fatalError("Attribute '"+b+"' not found on node '"+d.attr.id+"' for "+a)}e[b]=f}f.call(d,c);var h={};h[b]=c;SceneJS_compileModule.nodeUpdated(d,a,b,c);d._fireEvent("updated",h)};a.prototype._callNodeMethods=function(a,b,c){var d=this._methods[a];if(!d){d=this._methods[a]={}}for(var e in b){if(b.hasOwnProperty(e)){var f=d[e];if(!f){e=e.replace(/^\s*/,"").replace(/\s*$/,"");var g=a+e.substr(0,1).toUpperCase()+e.substr(1);f=c[g];if(!f){throw SceneJS_errorModule.fatalError("Attribute '"+e+"' not found on node '"+c.attr.id+"' for "+a)}d[e]=f}f.call(c,b[e]);SceneJS_compileModule.nodeUpdated(c,a,e,b[e])}}c._fireEvent("updated",{attr:b})};a.prototype._parseAttr=function(a,b){var c=a.split(".");if(c.length<=1){return b}var d={};var e=d;var f;var g=0;var h=c.length-1;while(g<h){d[c[g++]]=b}d=d[f]={};return e}})();SceneJS.Services.addService(SceneJS.Services.COMMAND_SERVICE_ID,function(){var a={};return{addCommand:function(b,c){if(!c.execute){throw SceneJS_errorModule.fatalError("SceneJS Command Service (ID '"+SceneJS.Services.COMMAND_SERVICE_ID+") requires an 'execute' method on your '"+b+" command implementation")}a[b]=c},hasCommand:function(b){var c=a[b];return c!=null&&c!=undefined},getCommand:function(b){return a[b]},executeCommand:function(a,b){if(!b){throw SceneJS_errorModule.fatalError("sendMessage param 'message' null or undefined")}var c=b.command;if(!c){throw SceneJS_errorModule.fatalError("Message element expected: 'command'")}var d=SceneJS.Services.getService(SceneJS.Services.COMMAND_SERVICE_ID);var e=d.getCommand(c);if(!e){throw SceneJS_errorModule.fatalError("Message command not supported: '"+c+"' - perhaps this command needs to be added to the SceneJS Command Service?")}e.execute(a,b)}}}());(function(){function b(a,b,c){var d;var e;for(var f=0;f<c.length;f++){d=c[f];if(b){e=a.findNode(b);if(!e){continue}e.add("node",c[f])}else{a.addNode(c[f])}}}function c(a,b,c){var e=a.findNode(b);if(!e){return}var f=c["set"];if(f){d("set",f,e)}if(c.insert){d("insert",c.insert,e)}if(c.inc){d("inc",c.inc,e)}if(c.dec){d("dec",c.dec,e)}if(c.add){d("add",c.add,e)}if(c.remove){d("remove",c.remove,e)}}function d(a,b,c){for(var d in b){if(b.hasOwnProperty(d)){c[a](b)}}}var a=SceneJS.Services.getService(SceneJS.Services.COMMAND_SERVICE_ID);a.addCommand("create",function(){return{execute:function(a,c){var d=c.nodes;if(d){var e=c.target;var f;var g;if(a.scenes){f=a.scenes;for(var h=0,i=f.length;h<i;h++){g=f[h];if(g){b(g,e,d)}}}else{f=SceneJS._scenes;for(var j in f){if(f.hasOwnProperty(j)){g=f[j];if(g){b(g,e,d)}}}}}}}}());a.addCommand("update",{execute:function(b,d){var e,f;var g;var h=d.target;var i;if(b.scenes){g=b.scenes;for(e=0,f=g.length;e<f;e++){i=g[e];if(i){c(i,h,d)}}}else{g=SceneJS._scenes;for(var j in g){if(g.hasOwnProperty(j)){i=g[j];if(i){c(i,h,d)}}}}var k=d.messages;if(k&&k.length>0){for(e=0;e<k.length;e++){a.executeCommand(b,k[e])}}}});a.addCommand("selectScenes",{execute:function(b,c){var d,e;var f=c.scenes;if(f){var g=[];var h;var i;for(d=0,e=f.length;d<e;d++){h=f[d];if(SceneJS._scenes[h]){g.push(SceneJS.scene(h))}}b=SceneJS._shallowClone(b);b.scenes=g}var j=c.messages;if(j){for(d=0;d<j.length;d++){a.executeCommand(b,j[d])}}}})})();var SceneJS_debugModule=new function(){this.configs={};this.getConfigs=function(a){if(!a){return this.configs}else{var b=this.configs;var c=a.split(".");for(var d=0;b&&d<c.length;d++){b=b[c[d]]}return b||{}}};this.setConfigs=function(a,b){if(!a){this.configs=b}else{var c=a.split(".");var d=this.configs;var e;var f;for(var g=0;g<c.length-1;g++){f=c[g];e=d[f];if(!e){e=d[f]={}}d=e}d[c.length-1]=b}}};SceneJS.setConfigs=SceneJS.setDebugConfigs=function(){if(arguments.length==1){SceneJS_debugModule.setConfigs(null,arguments[0])}else if(arguments.length==2){SceneJS_debugModule.setConfigs(arguments[0],arguments[1])}else{throw SceneJS_errorModule.fatalError("Illegal arguments given to SceneJS.setDebugs - should be either ({String}:name, {Object}:cfg) or ({Object}:cfg)")}};SceneJS.getConfigs=SceneJS.getDebugConfigs=function(a){return SceneJS_debugModule.getConfigs(a)};SceneJS.errors={};SceneJS.errors.ERROR=0;SceneJS.errors.WEBGL_NOT_SUPPORTED=1;SceneJS.errors.NODE_CONFIG_EXPECTED=2;SceneJS.errors.ILLEGAL_NODE_CONFIG=3;SceneJS.errors.SHADER_COMPILATION_FAILURE=4;SceneJS.errors.SHADER_LINK_FAILURE=5;SceneJS.errors.CANVAS_NOT_FOUND=6;SceneJS.errors.OUT_OF_VRAM=7;SceneJS.errors.WEBGL_UNSUPPORTED_NODE_CONFIG=8;SceneJS.errors.INSTANCE_TARGET_NOT_FOUND=9;SceneJS.errors.INSTANCE_CYCLE=10;SceneJS.errors.NODE_NOT_FOUND=11;SceneJS.errors.NODE_ILLEGAL_STATE=12;SceneJS.errors.ID_CLASH=13;SceneJS.errors.ILLEGAL_MESSAGE=14;SceneJS.errors.SCENE_ILLEGAL_UPDATE=15;SceneJS.errors._getErrorName=function(a){for(var b in SceneJS.errors){if(SceneJS.errors.hasOwnProperty(b)&&SceneJS.errors[b]==a){return b}}return null};var SceneJS_math_divVec3=function(a,b,c){if(!c){c=a}c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];return c};var SceneJS_math_negateVector4=function(a,b){if(!b){b=a}b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};var SceneJS_math_addVec4=function(a,b,c){if(!c){c=a}c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};var SceneJS_math_addVec4s=function(a,b,c){if(!c){c=a}c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;c[3]=a[3]+b;return c};var SceneJS_math_addVec3=function(a,b,c){if(!c){c=a}c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};var SceneJS_math_addVec3s=function(a,b,c){if(!c){c=a}c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;return c};var SceneJS_math_addScalarVec4=function(a,b,c){return SceneJS_math_addVec4s(b,a,c)};var SceneJS_math_subVec4=function(a,b,c){if(!c){c=a}c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};var SceneJS_math_subVec3=function(a,b,c){if(!c){c=a}c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};var SceneJS_math_lerpVec3=function(a,b,c,d,e){var f=(a-b)/(c-b);var g=1-f;return{x:d.x*g+e.x*f,y:d.y*g+e.y*f,z:d.z*g+e.z*f}};var SceneJS_math_subVec2=function(a,b,c){if(!c){c=a}c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c};var SceneJS_math_subVec4Scalar=function(a,b,c){if(!c){c=a}c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]-b;c[3]=a[3]-b;return c};var SceneJS_math_subScalarVec4=function(a,b,c){if(!c){c=a}c[0]=b-a[0];c[1]=b-a[1];c[2]=b-a[2];c[3]=b-a[3];return c};var SceneJS_math_mulVec4=function(a,b,c){if(!c){c=a}c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c};var SceneJS_math_mulVec4Scalar=function(a,b,c){if(!c){c=a}c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};var SceneJS_math_mulVec3Scalar=function(a,b,c){if(!c){c=a}c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};var SceneJS_math_mulVec2Scalar=function(a,b,c){if(!c){c=a}c[0]=a[0]*b;c[1]=a[1]*b;return c};var SceneJS_math_divVec4=function(a,b,c){if(!c){c=a}c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c};var SceneJS_math_divScalarVec3=function(a,b,c){if(!c){c=b}c[0]=a/b[0];c[1]=a/b[1];c[2]=a/b[2];return c};var SceneJS_math_divVec3s=function(a,b,c){if(!c){c=a}c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;return c};var SceneJS_math_divVec4s=function(a,b,c){if(!c){c=a}c[0]=a[0]/b;c[1]=a[1]/b;c[2]=a[2]/b;c[3]=a[3]/b;return c};var SceneJS_math_divScalarVec4=function(a,b,c){if(!c){c=b}c[0]=a/b[0];c[1]=a/b[1];c[2]=a/b[2];c[3]=a/b[3];return c};var SceneJS_math_dotVector4=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};var SceneJS_math_cross3Vec4=function(a,b){var c=a[0],d=a[1],e=a[2];var f=b[0],g=b[1],h=b[2];return[d*h-e*g,e*f-c*h,c*g-d*f,0]};var SceneJS_math_cross3Vec3=function(a,b,c){if(!c){c=a}var d=a[0],e=a[1],f=a[2];var g=b[0],h=b[1],i=b[2];c[0]=e*i-f*h;c[1]=f*g-d*i;c[2]=d*h-e*g;return c};var SceneJS_math_sqLenVec4=function(a){return SceneJS_math_dotVector4(a,a)};var SceneJS_math_lenVec4=function(a){return Math.sqrt(SceneJS_math_sqLenVec4(a))};var SceneJS_math_dotVector3=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};var SceneJS_math_dotVector2=function(a,b){return a[0]*b[0]+a[1]*b[1]};var SceneJS_math_sqLenVec3=function(a){return SceneJS_math_dotVector3(a,a)};var SceneJS_math_sqLenVec2=function(a){return SceneJS_math_dotVector2(a,a)};var SceneJS_math_lenVec3=function(a){return Math.sqrt(SceneJS_math_sqLenVec3(a))};var SceneJS_math_lenVec2=function(a){return Math.sqrt(SceneJS_math_sqLenVec2(a))};var SceneJS_math_rcpVec3=function(a,b){return SceneJS_math_divScalarVec3(1,a,b)};var SceneJS_math_normalizeVec4=function(a,b){var c=1/SceneJS_math_lenVec4(a);return SceneJS_math_mulVec4Scalar(a,c,b)};var SceneJS_math_normalizeVec3=function(a,b){var c=1/SceneJS_math_lenVec3(a);return SceneJS_math_mulVec3Scalar(a,c,b)};var SceneJS_math_normalizeVec2=function(a,b){var c=1/SceneJS_math_lenVec2(a);return SceneJS_math_mulVec2Scalar(a,c,b)};var SceneJS_math_mat4=function(){return new Array(16)};var SceneJS_math_dupMat4=function(a){return a.slice(0,16)};var SceneJS_math_getCellMat4=function(a,b,c){return a[b+c*4]};var SceneJS_math_setCellMat4=function(a,b,c,d){a[b+c*4]=d};var SceneJS_math_getRowMat4=function(a,b){return[a[b],a[b+4],a[b+8],a[b+12]]};var SceneJS_math_setRowMat4=function(a,b,c){a[b]=c[0];a[b+4]=c[1];a[b+8]=c[2];a[b+12]=c[3]};var SceneJS_math_setRowMat4c=function(a,b,c,d,e,f){SceneJS_math_setRowMat4(a,b,[c,d,e,f])};var SceneJS_math_setRowMat4s=function(a,b,c){SceneJS_math_setRowMat4c(a,b,c,c,c,c)};var SceneJS_math_getColMat4=function(a,b){var c=b*4;return[a[c],a[c+1],a[c+2],a[c+3]]};var SceneJS_math_setColMat4v=function(a,b,c){var d=b*4;a[d]=c[0];a[d+1]=c[1];a[d+2]=c[2];a[d+3]=c[3]};var SceneJS_math_setColMat4c=function(a,b,c,d,e,f){SceneJS_math_setColMat4v(a,b,[c,d,e,f])};var SceneJS_math_setColMat4Scalar=function(a,b,c){SceneJS_math_setColMat4c(a,b,c,c,c,c)};var SceneJS_math_mat4To3=function(a){return[a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]]};var SceneJS_math_m4s=function(a){return[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a]};var SceneJS_math_setMat4ToZeroes=function(){return SceneJS_math_m4s(0)};var SceneJS_math_setMat4ToOnes=function(){return SceneJS_math_m4s(1)};var SceneJS_math_diagonalMat4v=function(a){return[a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,a[3]]};var SceneJS_math_diagonalMat4c=function(a,b,c,d){return SceneJS_math_diagonalMat4v([a,b,c,d])};var SceneJS_math_diagonalMat4s=function(a){return SceneJS_math_diagonalMat4c(a,a,a,a)};var SceneJS_math_identityMat4=function(){return SceneJS_math_diagonalMat4v([1,1,1,1])};var SceneJS_math_isIdentityMat4=function(a){if(a[0]!==1||a[1]!==0||a[2]!==0||a[3]!==0||a[4]!==0||a[5]!==1||a[6]!==0||a[7]!==0||a[8]!==0||a[9]!==0||a[10]!==1||a[11]!==0||a[12]!==0||a[13]!==0||a[14]!==0||a[15]!==1){return false}return true};var SceneJS_math_negateMat4=function(a,b){if(!b){b=a}b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];b[4]=-a[4];b[5]=-a[5];b[6]=-a[6];b[7]=-a[7];b[8]=-a[8];b[9]=-a[9];b[10]=-a[10];b[11]=-a[11];b[12]=-a[12];b[13]=-a[13];b[14]=-a[14];b[15]=-a[15];return b};var SceneJS_math_addMat4=function(a,b,c){if(!c){c=a}c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];c[9]=a[9]+b[9];c[10]=a[10]+b[10];c[11]=a[11]+b[11];c[12]=a[12]+b[12];c[13]=a[13]+b[13];c[14]=a[14]+b[14];c[15]=a[15]+b[15];return c};var SceneJS_math_addMat4Scalar=function(a,b,c){if(!c){c=a}c[0]=a[0]+b;c[1]=a[1]+b;c[2]=a[2]+b;c[3]=a[3]+b;c[4]=a[4]+b;c[5]=a[5]+b;c[6]=a[6]+b;c[7]=a[7]+b;c[8]=a[8]+b;c[9]=a[9]+b;c[10]=a[10]+b;c[11]=a[11]+b;c[12]=a[12]+b;c[13]=a[13]+b;c[14]=a[14]+b;c[15]=a[15]+b;return c};var SceneJS_math_addScalarMat4=function(a,b,c){return SceneJS_math_addMat4Scalar(b,a,c)};var SceneJS_math_subMat4=function(a,b,c){if(!c){c=a}c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];c[9]=a[9]-b[9];c[10]=a[10]-b[10];c[11]=a[11]-b[11];c[12]=a[12]-b[12];c[13]=a[13]-b[13];c[14]=a[14]-b[14];c[15]=a[15]-b[15];return c};var SceneJS_math_subMat4Scalar=function(a,b,c){if(!c){c=a}c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]-b;c[3]=a[3]-b;c[4]=a[4]-b;c[5]=a[5]-b;c[6]=a[6]-b;c[7]=a[7]-b;c[8]=a[8]-b;c[9]=a[9]-b;c[10]=a[10]-b;c[11]=a[11]-b;c[12]=a[12]-b;c[13]=a[13]-b;c[14]=a[14]-b;c[15]=a[15]-b;return c};var SceneJS_math_subScalarMat4=function(a,b,c){if(!c){c=b}c[0]=a-b[0];c[1]=a-b[1];c[2]=a-b[2];c[3]=a-b[3];c[4]=a-b[4];c[5]=a-b[5];c[6]=a-b[6];c[7]=a-b[7];c[8]=a-b[8];c[9]=a-b[9];c[10]=a-b[10];c[11]=a-b[11];c[12]=a-b[12];c[13]=a-b[13];c[14]=a-b[14];c[15]=a-b[15];return c};var SceneJS_math_mulMat4=function(a,b,c){if(!c){c=a}var d=a[0],e=a[1],f=a[2],g=a[3];var h=a[4],i=a[5],j=a[6],k=a[7];var l=a[8],m=a[9],n=a[10],o=a[11];var p=a[12],q=a[13],r=a[14],s=a[15];var t=b[0],u=b[1],v=b[2],w=b[3];var x=b[4],y=b[5],z=b[6],A=b[7];var B=b[8],C=b[9],D=b[10],E=b[11];var F=b[12],G=b[13],H=b[14],I=b[15];c[0]=t*d+u*h+v*l+w*p;c[1]=t*e+u*i+v*m+w*q;c[2]=t*f+u*j+v*n+w*r;c[3]=t*g+u*k+v*o+w*s;c[4]=x*d+y*h+z*l+A*p;c[5]=x*e+y*i+z*m+A*q;c[6]=x*f+y*j+z*n+A*r;c[7]=x*g+y*k+z*o+A*s;c[8]=B*d+C*h+D*l+E*p;c[9]=B*e+C*i+D*m+E*q;c[10]=B*f+C*j+D*n+E*r;c[11]=B*g+C*k+D*o+E*s;c[12]=F*d+G*h+H*l+I*p;c[13]=F*e+G*i+H*m+I*q;c[14]=F*f+G*j+H*n+I*r;c[15]=F*g+G*k+H*o+I*s;return c};var SceneJS_math_mulMat4s=function(a,b,c){if(!c){c=a}c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;c[6]=a[6]*b;c[7]=a[7]*b;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12]*b;c[13]=a[13]*b;c[14]=a[14]*b;c[15]=a[15]*b;return c};var SceneJS_math_mulMat4v4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];return[a[0]*c+a[4]*d+a[8]*e+a[12]*f,a[1]*c+a[5]*d+a[9]*e+a[13]*f,a[2]*c+a[6]*d+a[10]*e+a[14]*f,a[3]*c+a[7]*d+a[11]*e+a[15]*f]};var SceneJS_math_transposeMat4=function(a,b){var c=a[4],d=a[14],e=a[8];var f=a[13],g=a[12],h=a[9];if(!b||a==b){var i=a[1],j=a[2],k=a[3];var l=a[6],m=a[7];var n=a[11];a[1]=c;a[2]=e;a[3]=g;a[4]=i;a[6]=h;a[7]=f;a[8]=j;a[9]=l;a[11]=d;a[12]=k;a[13]=m;a[14]=n;return a}b[0]=a[0];b[1]=c;b[2]=e;b[3]=g;b[4]=a[1];b[5]=a[5];b[6]=h;b[7]=f;b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=d;b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b};var SceneJS_math_determinantMat4=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];var f=a[4],g=a[5],h=a[6],i=a[7];var j=a[8],k=a[9],l=a[10],m=a[11];var n=a[12],o=a[13],p=a[14],q=a[15];return n*k*h*e-j*o*h*e-n*g*l*e+f*o*l*e+j*g*p*e-f*k*p*e-n*k*d*i+j*o*d*i+n*c*l*i-b*o*l*i-j*c*p*i+b*k*p*i+n*g*d*m-f*o*d*m-n*c*h*m+b*o*h*m+f*c*p*m-b*g*p*m-j*g*d*q+f*k*d*q+j*c*h*q-b*k*h*q-f*c*l*q+b*g*l*q};var SceneJS_math_inverseMat4=function(a,b){if(!b){b=a}var c=a[0],d=a[1],e=a[2],f=a[3];var g=a[4],h=a[5],i=a[6],j=a[7];var k=a[8],l=a[9],m=a[10],n=a[11];var o=a[12],p=a[13],q=a[14],r=a[15];var s=c*h-d*g;var t=c*i-e*g;var u=c*j-f*g;var v=d*i-e*h;var w=d*j-f*h;var x=e*j-f*i;var y=k*p-l*o;var z=k*q-m*o;var A=k*r-n*o;var B=l*q-m*p;var C=l*r-n*p;var D=m*r-n*q;var E=1/(s*D-t*C+u*B+v*A-w*z+x*y);b[0]=(h*D-i*C+j*B)*E;b[1]=(-d*D+e*C-f*B)*E;b[2]=(p*x-q*w+r*v)*E;b[3]=(-l*x+m*w-n*v)*E;b[4]=(-g*D+i*A-j*z)*E;b[5]=(c*D-e*A+f*z)*E;b[6]=(-o*x+q*u-r*t)*E;b[7]=(k*x-m*u+n*t)*E;b[8]=(g*C-h*A+j*y)*E;b[9]=(-c*C+d*A-f*y)*E;b[10]=(o*w-p*u+r*s)*E;b[11]=(-k*w+l*u-n*s)*E;b[12]=(-g*B+h*z-i*y)*E;b[13]=(c*B-d*z+e*y)*E;b[14]=(-o*v+p*t-q*s)*E;b[15]=(k*v-l*t+m*s)*E;return b};var SceneJS_math_traceMat4=function(a){return a[0]+a[5]+a[10]+a[15]};var SceneJS_math_translationMat4v=function(a){var b=SceneJS_math_identityMat4();b[12]=a[0];b[13]=a[1];b[14]=a[2];return b};var SceneJS_math_translationMat4c=function(a,b,c){return SceneJS_math_translationMat4v([a,b,c])};var SceneJS_math_translationMat4s=function(a){return SceneJS_math_translationMat4c(a,a,a)};var SceneJS_math_rotationMat4v=function(a,b){var c=SceneJS_math_normalizeVec4([b[0],b[1],b[2],0]);var d=Math.sin(a);var e=Math.cos(a);var f=1-e;var g=c[0];var h=c[1];var i=c[2];var j,k,l,m,n,o;j=g*h;k=h*i;l=i*g;m=g*d;n=h*d;o=i*d;var p=SceneJS_math_mat4();p[0]=f*g*g+e;p[1]=f*j+o;p[2]=f*l-n;p[3]=0;p[4]=f*j-o;p[5]=f*h*h+e;p[6]=f*k+m;p[7]=0;p[8]=f*l+n;p[9]=f*k-m;p[10]=f*i*i+e;p[11]=0;p[12]=0;p[13]=0;p[14]=0;p[15]=1;return p};var SceneJS_math_rotationMat4c=function(a,b,c,d){return SceneJS_math_rotationMat4v(a,[b,c,d])};var SceneJS_math_scalingMat4v=function(a){var b=SceneJS_math_identityMat4();b[0]=a[0];b[5]=a[1];b[10]=a[2];return b};var SceneJS_math_scalingMat4c=function(a,b,c){return SceneJS_math_scalingMat4v([a,b,c])};var SceneJS_math_scalingMat4s=function(a){return SceneJS_math_scalingMat4c(a,a,a)};var SceneJS_math_LOOKAT_OBJ={eye:{x:0,y:0,z:1},look:{x:0,y:0,z:0},up:{x:0,y:1,z:0}};var SceneJS_math_LOOKAT_ARRAYS={eye:[0,0,1],look:[0,0,0],up:[0,1,0]};var SceneJS_math_ORTHO_OBJ={left:-1,right:1,bottom:-1,near:.1,top:1,far:5e3};var SceneJS_math_lookAtMat4v=function(a,b,c,d){if(!d){d=SceneJS_math_mat4()}var e=a[0],f=a[1],g=a[2],h=c[0],i=c[1],j=c[2],k=b[0],l=b[1],m=b[2];if(e==k&&f==l&&g==m){return SceneJS_math_identityMat4()}var n,o,p,q,r,s,t,u,v,w;n=e-k;o=f-l;p=g-m;w=1/Math.sqrt(n*n+o*o+p*p);n*=w;o*=w;p*=w;q=i*p-j*o;r=j*n-h*p;s=h*o-i*n;w=Math.sqrt(q*q+r*r+s*s);if(!w){q=0;r=0;s=0}else{w=1/w;q*=w;r*=w;s*=w}t=o*s-p*r;u=p*q-n*s;v=n*r-o*q;w=Math.sqrt(t*t+u*u+v*v);if(!w){t=0;u=0;v=0}else{w=1/w;t*=w;u*=w;v*=w}d[0]=q;d[1]=t;d[2]=n;d[3]=0;d[4]=r;d[5]=u;d[6]=o;d[7]=0;d[8]=s;d[9]=v;d[10]=p;d[11]=0;d[12]=-(q*e+r*f+s*g);d[13]=-(t*e+u*f+v*g);d[14]=-(n*e+o*f+p*g);d[15]=1;return d};var SceneJS_math_lookAtMat4c=function(a,b,c,d,e,f,g,h,i){return SceneJS_math_lookAtMat4v([a,b,c],[d,e,f],[g,h,i])};var SceneJS_math_orthoMat4c=function(a,b,c,d,e,f,g){if(!g){g=SceneJS_math_mat4()}var h=b-a;var i=d-c;var j=f-e;g[0]=2/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/i;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=-2/j;g[11]=0;g[12]=-(a+b)/h;g[13]=-(d+c)/i;g[14]=-(f+e)/j;g[15]=1;return g};var SceneJS_math_frustumMat4v=function(a,b){var c=[a[0],a[1],a[2],0];var d=[b[0],b[1],b[2],0];var e=SceneJS_math_mat4();SceneJS_math_addVec4(d,c,e);var f=SceneJS_math_mat4();SceneJS_math_subVec4(d,c,f);var g=2*c[2];var h=SceneJS_math_mat4();var i=f[0],j=f[1],k=f[2];h[0]=g/i;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=g/j;h[6]=0;h[7]=0;h[8]=e[0]/i;h[9]=e[1]/j;h[10]=-e[2]/k;h[11]=-1;h[12]=0;h[13]=0;h[14]=-g*d[2]/k;h[15]=0;return h};var SceneJS_math_frustumMatrix4=function(a,b,c,d,e,f,g){if(!g){g=SceneJS_math_mat4()}var h=b-a;var i=d-c;var j=f-e;g[0]=e*2/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=e*2/i;g[6]=0;g[7]=0;g[8]=(b+a)/h;g[9]=(d+c)/i;g[10]=-(f+e)/j;g[11]=-1;g[12]=0;g[13]=0;g[14]=-(f*e*2)/j;g[15]=0;return g};var SceneJS_math_perspectiveMatrix4=function(a,b,c,d){var e=new Array(4);var f=new Array(4);e[2]=c;f[2]=d;f[1]=e[2]*Math.tan(a/2);e[1]=-f[1];f[0]=f[1]*b;e[0]=-f[0];return SceneJS_math_frustumMat4v(e,f)};var SceneJS_math_transformPoint3=function(a,b){var c=b[0],d=b[1],e=b[2];return[a[0]*c+a[4]*d+a[8]*e+a[12],a[1]*c+a[5]*d+a[9]*e+a[13],a[2]*c+a[6]*d+a[10]*e+a[14],a[3]*c+a[7]*d+a[11]*e+a[15]]};var SceneJS_math_transformPoints3=function(a,b){var c=new Array(b.length);var d=b.length;var e,f,g;var h;var i=a[0],j=a[1],k=a[2],l=a[3];var m=a[4],n=a[5],o=a[6],p=a[7];var q=a[8],r=a[9],s=a[10],t=a[11];var u=a[12],v=a[13],w=a[14],x=a[15];for(var y=0;y<d;++y){h=b[y];e=h[0];f=h[1];g=h[2];c[y]=[i*e+m*f+q*g+u,j*e+n*f+r*g+v,k*e+o*f+s*g+w,l*e+p*f+t*g+x]}return c};var SceneJS_math_transformVector3=function(a,b){var c=b[0],d=b[1],e=b[2];return[a[0]*c+a[4]*d+a[8]*e,a[1]*c+a[5]*d+a[9]*e,a[2]*c+a[6]*d+a[10]*e]};var SceneJS_math_transformVector4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];return[a[0]*c+a[4]*d+a[8]*e+a[12]*f,a[1]*c+a[5]*d+a[9]*e+a[13]*f,a[2]*c+a[6]*d+a[10]*e+a[14]*f,a[3]*c+a[7]*d+a[11]*e+a[15]*f]};var SceneJS_math_projectVec4=function(a){var b=1/a[3];return[a[0]*b,a[1]*b,a[2]*b,1]};var SceneJS_math_Plane3=function(a,b,c){this.normal=[0,0,1];this.offset=0;if(a&&b){var d=a[0],e=a[1],f=a[2];this.offset=b;if(c){var g=Math.sqrt(d*d+e*e+f*f);if(g>0){g=1/g;this.normal[0]=d*g;this.normal[1]=e*g;this.normal[2]=f*g;this.offset*=g}}}};var SceneJS_math_MAX_DOUBLE=Number.POSITIVE_INFINITY;var SceneJS_math_MIN_DOUBLE=Number.NEGATIVE_INFINITY;var SceneJS_math_Box3=function(a,b){this.min=a||[SceneJS_math_MAX_DOUBLE,SceneJS_math_MAX_DOUBLE,SceneJS_math_MAX_DOUBLE];this.max=b||[SceneJS_math_MIN_DOUBLE,SceneJS_math_MIN_DOUBLE,SceneJS_math_MIN_DOUBLE];this.init=function(a,b){this.min[0]=a[0];this.min[1]=a[1];this.min[2]=a[2];this.max[0]=b[0];this.max[1]=b[1];this.max[2]=b[2];return this};this.fromPoints=function(a){var b=a.length;for(var c=0;c<b;++c){var d=a[c][3];var e=a[c][0]/d;var f=a[c][1]/d;var g=a[c][2]/d;if(e<this.min[0]){this.min[0]=e}if(f<this.min[1]){this.min[1]=f}if(g<this.min[2]){this.min[2]=g}if(e>this.max[0]){this.max[0]=e}if(f>this.max[1]){this.max[1]=f}if(g>this.max[2]){this.max[2]=g}}return this};this.isEmpty=function(){return this.min[0]>=this.max[0]&&this.min[1]>=this.max[1]&&this.min[2]>=this.max[2]};this.getCenter=function(){return[(this.max[0]+this.min[0])/2,(this.max[1]+this.min[1])/2,(this.max[2]+this.min[2])/2]};this.getSize=function(){return[this.max[0]-this.min[0],this.max[1]-this.min[1],this.max[2]-this.min[2]]};this.getFacesAreas=function(){var a=this.size;return[a[1]*a[2],a[0]*a[2],a[0]*a[1]]};this.getSurfaceArea=function(){var a=this.getFacesAreas();return(a[0]+a[1]+a[2])*2};this.getVolume=function(){var a=this.size;return a[0]*a[1]*a[2]};this.getOffset=function(a){this.min[0]-=a;this.min[1]-=a;this.min[2]-=a;this.max[0]+=a;this.max[1]+=a;this.max[2]+=a;return this}};var SceneJS_math_AxisBox3=function(a,b){var c=a[0],d=a[1],e=a[2];var f=b[0],g=b[1],h=b[2];this.verts=[[c,d,e],[f,d,e],[f,g,e],[c,g,e],[c,d,h],[f,d,h],[f,g,h],[c,g,h]];this.toBox3=function(){var a=new SceneJS_math_Box3;for(var b=0;b<8;++b){var c=this.verts[b];for(var d=0;d<3;++d){if(c[d]<a.min[d]){a.min[d]=c[d]}if(c[d]>a.max[d]){a.max[d]=c[d]}}}}};var SceneJS_math_Sphere3=function(a,b){this.center=[a[0],a[1],a[2]];this.radius=b;this.isEmpty=function(){return this.radius===0};this.surfaceArea=function(){return 4*Math.PI*this.radius*this.radius};this.getVolume=function(){var a=this.radius;return 4/3*Math.PI*a*a*a}};var SceneJS_math_billboardMat=function(a){var b=[SceneJS_math_getColMat4(a,0),SceneJS_math_getColMat4(a,1),SceneJS_math_getColMat4(a,2)];var c=[SceneJS_math_lenVec4(b[0]),SceneJS_math_lenVec4(b[1]),SceneJS_math_lenVec4(b[2])];var d=SceneJS_math_mat4();SceneJS_math_rcpVec3(c,d);var e=SceneJS_math_scalingMat4v(c);SceneJS_math_mulVec4Scalar(b[0],d[0]);SceneJS_math_mulVec4Scalar(b[1],d[1]);SceneJS_math_mulVec4Scalar(b[2],d[2]);var f=SceneJS_math_identityMat4();SceneJS_math_setRowMat4(f,0,b[0]);SceneJS_math_setRowMat4(f,1,b[1]);SceneJS_math_setRowMat4(f,2,b[2]);return SceneJS_math_mulMat4(f,e)};var SceneJS_math_FrustumPlane=function(a,b,c,d){var e=1/Math.sqrt(a*a+b*b+c*c);this.normal=[a*e,b*e,c*e];this.offset=d*e;this.testVertex=[this.normal[0]>=0?1:0,this.normal[1]>=0?1:0,this.normal[2]>=0?1:0]};var SceneJS_math_OUTSIDE_FRUSTUM=3;var SceneJS_math_INTERSECT_FRUSTUM=4;var SceneJS_math_INSIDE_FRUSTUM=5;var SceneJS_math_Frustum=function(a,b,c){var d=SceneJS_math_mat4();SceneJS_math_mulMat4(b,a,d);var e=d[0],f=d[1],g=d[2],h=d[3];var i=d[4],j=d[5],k=d[6],l=d[7];var m=d[8],n=d[9],o=d[10],p=d[11];var q=d[12],r=d[13],s=d[14],t=d[15];var u=[new SceneJS_math_FrustumPlane(h-e,l-i,p-m,t-q),new SceneJS_math_FrustumPlane(h+e,l+i,p+m,t+q),new SceneJS_math_FrustumPlane(h-f,l-j,p-n,t-r),new SceneJS_math_FrustumPlane(h+f,l+j,p+n,t+r),new SceneJS_math_FrustumPlane(h-g,l-k,p-o,t-s),new SceneJS_math_FrustumPlane(h+g,l+k,p+o,t+s)];var v=[SceneJS_math_getColMat4(a,0),SceneJS_math_getColMat4(a,1),SceneJS_math_getColMat4(a,2)];var w=[SceneJS_math_lenVec4(v[0]),SceneJS_math_lenVec4(v[1]),SceneJS_math_lenVec4(v[2])];var x=SceneJS_math_rcpVec3(w);var y=SceneJS_math_scalingMat4v(w);var z=SceneJS_math_scalingMat4v(x);SceneJS_math_mulVec4Scalar(v[0],x[0]);SceneJS_math_mulVec4Scalar(v[1],x[1]);SceneJS_math_mulVec4Scalar(v[2],x[2]);var A=SceneJS_math_identityMat4();SceneJS_math_setRowMat4(A,0,v[0]);SceneJS_math_setRowMat4(A,1,v[1]);SceneJS_math_setRowMat4(A,2,v[2]);if(!this.matrix){this.matrix=SceneJS_math_mat4()}SceneJS_math_mulMat4(b,a,this.matrix);if(!this.billboardMatrix){this.billboardMatrix=SceneJS_math_mat4()}SceneJS_math_mulMat4(z,SceneJS_math_mulMat4(A,y),this.billboardMatrix);this.viewport=c.slice(0,4);this.textAxisBoxIntersection=function(a){var b=SceneJS_math_INSIDE_FRUSTUM;var c=[a.min,a.max];var d=null;for(var e=0;e<6;++e){d=u[e];if(d.normal[0]*c[d.testVertex[0]][0]+d.normal[1]*c[d.testVertex[1]][1]+d.normal[2]*c[d.testVertex[2]][2]+d.offset<0){return SceneJS_math_OUTSIDE_FRUSTUM}if(d.normal[0]*c[1-d.testVertex[0]][0]+d.normal[1]*c[1-d.testVertex[1]][1]+d.normal[2]*c[1-d.testVertex[2]][2]+d.offset<0){b=SceneJS_math_INTERSECT_FRUSTUM}}return b};this.getProjectedSize=function(a){var b=SceneJS_math_mat4();SceneJS_math_subVec3(a.max,a.min,b);var d=SceneJS_math_lenVec3(b);var e=Math.abs(d);var f=[(a.min[0]+a.max[0])*.5,(a.min[1]+a.max[1])*.5,(a.min[2]+a.max[2])*.5,0];var g=e*.5;var h=[-g,0,0,1];var i=[g,0,0,1];h=SceneJS_math_mulMat4v4(this.billboardMatrix,h);h=SceneJS_math_addVec4(h,f);h=SceneJS_math_projectVec4(SceneJS_math_mulMat4v4(this.matrix,h));i=SceneJS_math_mulMat4v4(this.billboardMatrix,i);i=SceneJS_math_addVec4(i,f);i=SceneJS_math_projectVec4(SceneJS_math_mulMat4v4(this.matrix,i));return c[2]*Math.abs(i[0]-h[0])};this.getProjectedState=function(a){var b=SceneJS_math_transformPoints3(this.matrix,a);var d=1e7,e=1e7;var f=-1e7,g=-1e7;var h,i,j;var k=b.length;for(var l=0;l<k;++l){h=SceneJS_math_projectVec4(b[l]);i=h[0];j=h[1];if(i<-.5){i=-.5}if(j<-.5){j=-.5}if(i>.5){i=.5}if(j>.5){j=.5}if(i<d){d=i}if(j<e){e=j}if(i>f){f=i}if(j>g){g=j}}d+=.5;e+=.5;f+=.5;g+=.5;var m=c[2],n=c[3];d=d*(m+15);e=e*(n+15);f=f*(m+15);g=g*(n+15);var o=SceneJS_math_mat4();SceneJS_math_subVec2([f,g],[d,e],o);var p=SceneJS_math_lenVec2(o);if(d<0){d=0}if(f>m){f=m}if(e<0){e=0}if(g>n){g=n}return{canvasBox:{min:[d,e],max:[f,g]},canvasSize:p}}};var SceneJS_math_identityQuaternion=function(){return[0,0,0,1]};var SceneJS_math_angleAxisQuaternion=function(a,b,c,d){var e=d/180*Math.PI;var f=e/2;var g=Math.sin(f);return[g*a,g*b,g*c,Math.cos(f)]};var SceneJS_math_mulQuaternions=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3];var g=b[0],h=b[1],i=b[2],j=b[3];return[f*g+c*j+d*i-e*h,f*h+d*j+e*g-c*i,f*i+e*j+c*h-d*g,f*j-c*g-d*h-e*i]};var SceneJS_math_newMat4FromQuaternion=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];var f=2*b;var g=2*c;var h=2*d;var i=f*e;var j=g*e;var k=h*e;var l=f*b;var m=g*b;var n=h*b;var o=g*c;var p=h*c;var q=h*d;var r=SceneJS_math_identityMat4();SceneJS_math_setCellMat4(r,0,0,1-(o+q));SceneJS_math_setCellMat4(r,0,1,m-k);SceneJS_math_setCellMat4(r,0,2,n+j);SceneJS_math_setCellMat4(r,1,0,m+k);SceneJS_math_setCellMat4(r,1,1,1-(l+q));SceneJS_math_setCellMat4(r,1,2,p-i);SceneJS_math_setCellMat4(r,2,0,n-j);SceneJS_math_setCellMat4(r,2,1,p+i);SceneJS_math_setCellMat4(r,2,2,1-(l+o));return r};var SceneJS_math_slerp=function(a,b,c){var d=b[3]*.0174532925;var e=c[3]*.0174532925;var f=d*e+b[0]*c[0]+b[1]*c[1]+b[2]*c[2];if(Math.abs(f)>=1){return[b[0],b[1],b[2],b[3]]}else{var g=Math.acos(f);var h=Math.sqrt(1-f*f);if(Math.abs(h)<.001){return[b[0]*.5+c[0]*.5,b[1]*.5+c[1]*.5,b[2]*.5+c[2]*.5,b[3]*.5+c[3]*.5]}else{var i=Math.sin((1-a)*g)/h;var j=Math.sin(a*g)/h;return[b[0]*i+c[0]*j,b[1]*i+c[1]*j,b[2]*i+c[2]*j,(d*i+e*j)*57.295779579]}}};var SceneJS_math_normalizeQuaternion=function(a){var b=SceneJS_math_lenVec4([a[0],a[1],a[2],a[3]]);return[a[0]/b,a[1]/b,a[2]/b,a[3]/b]};var SceneJS_math_conjugateQuaternion=function(a){return[-a[0],-a[1],-a[2],a[3]]};var SceneJS_math_angleAxisFromQuaternion=function(a){a=SceneJS_math_normalizeQuaternion(a);var b=a[3];var c=2*Math.acos(b);var d=Math.sqrt(1-b*b);if(d<.001){return{x:a[0],y:a[1],z:a[2],angle:c*57.295779579}}else{return{x:a[0]/d,y:a[1]/d,z:a[2]/d,angle:c*57.295779579}}};var SceneJS_webgl_enumMap={funcAdd:"FUNC_ADD",funcSubtract:"FUNC_SUBTRACT",funcReverseSubtract:"FUNC_REVERSE_SUBTRACT",zero:"ZERO",one:"ONE",srcColor:"SRC_COLOR",oneMinusSrcColor:"ONE_MINUS_SRC_COLOR",dstColor:"DST_COLOR",oneMinusDstColor:"ONE_MINUS_DST_COLOR",srcAlpha:"SRC_ALPHA",oneMinusSrcAlpha:"ONE_MINUS_SRC_ALPHA",dstAlpha:"DST_ALPHA",oneMinusDstAlpha:"ONE_MINUS_DST_ALPHA",contantColor:"CONSTANT_COLOR",oneMinusConstantColor:"ONE_MINUS_CONSTANT_COLOR",constantAlpha:"CONSTANT_ALPHA",oneMinusConstantAlpha:"ONE_MINUS_CONSTANT_ALPHA",srcAlphaSaturate:"SRC_ALPHA_SATURATE",front:"FRONT",back:"BACK",frontAndBack:"FRONT_AND_BACK",never:"NEVER",less:"LESS",equal:"EQUAL",lequal:"LEQUAL",greater:"GREATER",notequal:"NOTEQUAL",gequal:"GEQUAL",always:"ALWAYS",cw:"CW",ccw:"CCW",linear:"LINEAR",nearest:"NEAREST",linearMipMapNearest:"LINEAR_MIPMAP_NEAREST",nearestMipMapNearest:"NEAREST_MIPMAP_NEAREST",nearestMipMapLinear:"NEAREST_MIPMAP_LINEAR",linearMipMapLinear:"LINEAR_MIPMAP_LINEAR",repeat:"REPEAT",clampToEdge:"CLAMP_TO_EDGE",mirroredRepeat:"MIRRORED_REPEAT",alpha:"ALPHA",rgb:"RGB",rgba:"RGBA",luminance:"LUMINANCE",luminanceAlpha:"LUMINANCE_ALPHA",textureBinding2D:"TEXTURE_BINDING_2D",textureBindingCubeMap:"TEXTURE_BINDING_CUBE_MAP",compareRToTexture:"COMPARE_R_TO_TEXTURE",unsignedByte:"UNSIGNED_BYTE"};var SceneJS_webgl_ProgramUniform=function(a,b,c,d,e,f,g){var h=null;if(d==a.BOOL){h=function(b){a.uniform1i(f,b)}}else if(d==a.BOOL_VEC2){h=function(b){a.uniform2iv(f,b)}}else if(d==a.BOOL_VEC3){h=function(b){a.uniform3iv(f,b)}}else if(d==a.BOOL_VEC4){h=function(b){a.uniform4iv(f,b)}}else if(d==a.INT){h=function(b){a.uniform1iv(f,b)}}else if(d==a.INT_VEC2){h=function(b){a.uniform2iv(f,b)}}else if(d==a.INT_VEC3){h=function(b){a.uniform3iv(f,b)}}else if(d==a.INT_VEC4){h=function(b){a.uniform4iv(f,b)}}else if(d==a.FLOAT){h=function(b){a.uniform1f(f,b)}}else if(d==a.FLOAT_VEC2){h=function(b){a.uniform2fv(f,b)}}else if(d==a.FLOAT_VEC3){h=function(b){a.uniform3fv(f,b)}}else if(d==a.FLOAT_VEC4){h=function(b){a.uniform4fv(f,b)}}else if(d==a.FLOAT_MAT2){h=function(b){a.uniformMatrix2fv(f,a.FALSE,b)}}else if(d==a.FLOAT_MAT3){h=function(b){a.uniformMatrix3fv(f,a.FALSE,b)}}else if(d==a.FLOAT_MAT4){h=function(b){a.uniformMatrix4fv(f,a.FALSE,b)}}else{throw"Unsupported shader uniform type: "+d}this.setValue=h;this.getValue=function(){return a.getUniform(b,f)};this.getLocation=function(){return f}};var SceneJS_webgl_ProgramSampler=function(a,b,c,d,e,f){this.bindTexture=function(b,c){if(b.bind(c)){a.uniform1i(f,c);return true}return false}};var SceneJS_webgl_ProgramAttribute=function(a,b,c,d,e,f){this.bindFloatArrayBuffer=function(b){b.bind();a.enableVertexAttribArray(f);a.vertexAttribPointer(f,b.itemSize,a.FLOAT,false,0,0)}};var SceneJS_webgl_Shader=function(a,b,c,d){this.handle=a.createShader(b);this.valid=true;a.shaderSource(this.handle,c);a.compileShader(this.handle);if(a.getShaderParameter(this.handle,a.COMPILE_STATUS)!=0){}else{this.valid=false;d.error("Shader compile failed:"+a.getShaderInfoLog(this.handle))}if(!this.valid){throw SceneJS_errorModule.fatalError(SceneJS.errors.SHADER_COMPILATION_FAILURE,"Shader program failed to compile")}};var SceneJS_webgl_Program=function(a,b,c,d,e){var f,g,h,i,j,k;this.hash=a;var l=[];for(g=0;g<c.length;g++){l.push(new SceneJS_webgl_Shader(b,b.VERTEX_SHADER,c[g],e))}for(g=0;g<d.length;g++){l.push(new SceneJS_webgl_Shader(b,b.FRAGMENT_SHADER,d[g],e))}var m=b.createProgram();for(g=0;g<l.length;g++){k=l[g];if(k.valid){b.attachShader(m,k.handle)}}b.linkProgram(m);this.valid=true;this.valid=this.valid&&b.getProgramParameter(m,b.LINK_STATUS)!=0;var n=SceneJS_debugModule.getConfigs("shading");if(n.validate!==false){b.validateProgram(m);this.valid=this.valid&&b.getProgramParameter(m,b.VALIDATE_STATUS)!=0}if(!this.valid){e.debug("Program link failed: "+b.getProgramInfoLog(m));throw SceneJS_errorModule.fatalError(SceneJS.errors.SHADER_LINK_FAILURE,"Shader program failed to link")}var o={};var p={};var q=b.getProgramParameter(m,b.ACTIVE_UNIFORMS);for(g=0;g<q;++g){h=b.getActiveUniform(m,g);if(h){i=h.name;if(i[i.length-1]=="\0"){i=i.substr(0,i.length-1)}j=b.getUniformLocation(m,i);if(h.type==b.SAMPLER_2D||h.type==b.SAMPLER_CUBE||h.type==35682){p[i]=new SceneJS_webgl_ProgramSampler(b,m,i,h.type,h.size,j,e)}else{o[i]=new SceneJS_webgl_ProgramUniform(b,m,i,h.type,h.size,j,e)}}}var r={};var s=b.getProgramParameter(m,b.ACTIVE_ATTRIBUTES);for(g=0;g<s;g++){f=b.getActiveAttrib(m,g);if(f){j=b.getAttribLocation(m,f.name);r[f.name]=new SceneJS_webgl_ProgramAttribute(b,m,f.name,f.type,f.size,j,e)}}this.setProfile=function(a){this._profile=a};this.bind=function(){b.useProgram(m);if(this._profile){this._profile.program++}};this.getUniformLocation=function(a){var b=o[a];if(b){return b.getLocation()}else{}};this.getUniform=function(a){var b=o[a];if(b){return b}else{}};this.setUniform=function(a,b){var c=o[a];if(c){c.setValue(b);if(this._profile){this._profile.uniform++}}else{}};this.getAttribute=function(a){var b=r[a];if(b){return b}else{}};this.bindFloatArrayBuffer=function(a,b){var c=r[a];if(c){c.bindFloatArrayBuffer(b);if(this._profile){this._profile.varying++}}else{}};this.bindTexture=function(a,b,c){var d=p[a];if(d){if(this._profile){this._profile.texture++}return d.bindTexture(b,c)}else{return false}};this.unbind=function(){};this.destroy=function(){if(this.valid){b.deleteProgram(m);for(var a in l){b.deleteShader(l[a].handle)}r=null;o=null;p=null;this.valid=false}}};var SceneJS_webgl_Texture2D=function(a,b,c){this._init=function(d){d=SceneJS_webgl_ensureImageSizePowerOfTwo(d);this.canvas=b.canvas;this.textureId=b.textureId;this.handle=a.createTexture();this.target=a.TEXTURE_2D;this.minFilter=b.minFilter;this.magFilter=b.magFilter;this.wrapS=b.wrapS;this.wrapT=b.wrapT;this.update=b.update;a.bindTexture(this.target,this.handle);try{a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d)}catch(e){a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,d,null)}this.format=a.RGBA;this.width=d.width;this.height=d.height;this.isDepth=false;this.depthMode=0;this.depthCompareMode=0;this.depthCompareFunc=0;if(b.minFilter){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,b.minFilter)}if(b.magFilter){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,b.magFilter)}if(b.wrapS){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,b.wrapS)}if(b.wrapT){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,b.wrapT)}if(b.minFilter==a.NEAREST_MIPMAP_NEAREST||b.minFilter==a.LINEAR_MIPMAP_NEAREST||b.minFilter==a.NEAREST_MIPMAP_LINEAR||b.minFilter==a.LINEAR_MIPMAP_LINEAR){a.generateMipmap(a.TEXTURE_2D)}a.bindTexture(this.target,null);if(c){c(this)}};if(b.image){this._init(b.image)}else{if(!b.url){throw"texture 'image' or 'url' expected"}var d=this;var e=new Image;e.crossOrigin="anonymous";e.onload=function(){d._init(e)};e.src=b.url}this.bind=function(b){if(this.handle){a.activeTexture(a["TEXTURE"+b]);a.bindTexture(this.target,this.handle);if(this.update){this.update(a)}return true}return false};this.unbind=function(b){if(this.handle){a.activeTexture(a["TEXTURE"+b]);a.bindTexture(this.target,null)}};this.generateMipmap=function(){if(this.handle){a.generateMipmap(a.TEXTURE_2D)}};this.destroy=function(){if(this.handle){a.deleteTexture(this.handle);this.handle=null}}};var SceneJS_webgl_ArrayBuffer;(function(){var a=new SceneJS_Map;SceneJS_webgl_ArrayBuffer=function(b,c,d,e,f,g){this.handle=b.createBuffer();this.id=a.addItem(this);b.bindBuffer(c,this.handle);b.bufferData(c,d,g);this.handle.numItems=e;this.handle.itemSize=f;b.bindBuffer(c,null);this.type=c;this.numItems=e;this.itemSize=f;this.bind=function(){b.bindBuffer(c,this.handle)};this.setData=function(a,d){if(d||d===0){b.bufferSubData(c,d,new Float32Array(a))}else{b.bufferData(c,new Float32Array(a))}};this.unbind=function(){b.bindBuffer(c,null)};this.destroy=function(){b.deleteBuffer(this.handle);a.removeItem(this.id)}}})();var SceneJS_webgl_VertexBuffer;(function(){var a=new SceneJS_Map;SceneJS_webgl_VertexBuffer=function(b,c){this.handle=b.createBuffer();this.id=a.addItem(this);b.bindBuffer(b.ARRAY_BUFFER,this.handle);b.bufferData(b.ARRAY_BUFFER,new Float32Array(c),b.STATIC_DRAW);b.bindBuffer(b.ARRAY_BUFFER,null);this.bind=function(){b.bindBuffer(b.ARRAY_BUFFER,this.handle)};this.setData=function(a,c){if(c){b.bufferSubData(b.ARRAY_BUFFER,c,new Float32Array(a))}else{b.bufferData(b.ARRAY_BUFFER,new Float32Array(a))}};this.unbind=function(){b.bindBuffer(b.ARRAY_BUFFER,null)};this.destroy=function(){b.deleteBuffer(this.handle);a.removeItem(this.id)}}})();var WebGLDebugUtils=function(){function d(a){if(c==null){c={};for(var b in a){if(typeof a[b]=="number"){c[a[b]]=b}}}}function e(){if(c==null){throw"WebGLDebugUtils.init(ctx) not called"}}function f(a){e();return c[a]!==undefined}function g(a,c,d){if(!f(d))return false;return a in b&&c in b[a]}function h(a){e();var b=c[a];return b!==undefined?b:"*UNKNOWN WebGL ENUM (0x"+a.toString(16)+")"}function i(b,c){function e(a,b){var c="";for(var d=0;d<b.length;++d){c+=(d==0?"":", ")+(f(b[d])?h(b[d]):b[d])}return a+"("+c+")"}function l(a){var b="'";var c=a.length;for(var d=0;d<c;d++){var e=a.charAt(d);var f=a.charCodeAt(d);var g=k[e];if(g!=undefined){b+=g}else if(f<32||f>=128){var h="000"+f.toString(16);b+="\\u"+h.substring(h.length-4)}else{b+=a.charAt(d)}}b+="'";return b}function m(a){var b=0;return function(){var c=a+b;b++;return c}}function q(a){var b=p[a];if(b===undefined){return undefined}var c="new "+b+"( [";c+="] )";return c}function r(a,b){var c="";for(var d=0;d<b.length;++d){var e=b[d];if(d>0){c+=", "}var f;try{if(e!==null&&e!==undefined){f=e[o]}}catch(i){alert(a);throw i}var j=q(e);if(f!=undefined){c+=f}else if(j!=undefined){c+=j}else if(typeof e=="string"){c+=l(e)}else if(g(a,d,e)){c+="gl."+h(e)}else{c+=e}}return"gl."+a+"("+c+");"}function s(b,d){return function(){var e;if(j){var f="";var g=n[d];if(g!=undefined){e=g();f="var "+e+" = "}a(f+r(d,arguments))}var h=b[d].apply(b,arguments);if(j&&e!=undefined){h[o]=e}var k=b.getError();if(k!=0){i[k]=true;c(k,d,arguments)}return h}}d(b);c=c||function(a,b,c){alert("WebGL error "+h(a)+" in "+e(b,c))};var i={};var j=false;b.setTracing=function(b){if(!j&&b){a("gl.setTracing("+b+");")}j=b};var k={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};var n={createBuffer:m("buffer"),createFrameBuffer:m("frameBuffer"),createProgram:m("program"),createRenderbuffer:m("renderBuffer"),createShader:m("shader"),createTexture:m("texture"),getUniformLocation:m("uniformLocation"),readPixels:m("pixels")};var o="__webgl_trace_name__";var p={"[object WebGLByteArray]":"WebGLByteArray","[object WebGLUnsignedByteArray]":"WebGLUnsignedByteArray","[object WebGLShortArray]":"WebGLShortArray","[object Uint16Array]":"Uint16Array","[object WebGLIntArray]":"WebGLIntArray","[object WebGLUnsignedIntArray]":"WebGLUnsignedIntArray","[object Float32Array]":"Float32Array"};var t={};for(var u in b){if(typeof b[u]=="function"){t[u]=s(b,u)}else{t[u]=b[u]}}t.getError=function(){for(var a in i){if(i[a]){i[a]=false;return a}}return b.NO_ERROR};return t}var a=function(a){if(window.console&&window.console.log){window.console.log(a)}};var b={enable:{0:true},disable:{0:true},getParameter:{0:true},drawArrays:{0:true},drawElements:{0:true,2:true},createShader:{0:true},getShaderParameter:{1:true},getProgramParameter:{1:true},getVertexAttrib:{1:true},vertexAttribPointer:{2:true},bindTexture:{0:true},activeTexture:{0:true},getTexParameter:{0:true,1:true},texParameterf:{0:true,1:true},texParameteri:{0:true,1:true,2:true},texImage2D:{0:true,2:true,6:true,7:true},texSubImage2D:{0:true,6:true,7:true},copyTexImage2D:{0:true,2:true},copyTexSubImage2D:{0:true},generateMipmap:{0:true},bindBuffer:{0:true},bufferData:{0:true,2:true},bufferSubData:{0:true},getBufferParameter:{0:true,1:true},pixelStorei:{0:true,1:true},readPixels:{4:true,5:true},bindRenderbuffer:{0:true},bindFramebuffer:{0:true},checkFramebufferStatus:{0:true},framebufferRenderbuffer:{0:true,1:true,2:true},framebufferTexture2D:{0:true,1:true,2:true},getFramebufferAttachmentParameter:{0:true,1:true,2:true},getRenderbufferParameter:{0:true,1:true},renderbufferStorage:{0:true,1:true},clear:{0:true},depthFunc:{0:true},blendFunc:{0:true,1:true},blendFuncSeparate:{0:true,1:true,2:true,3:true},blendEquation:{0:true},blendEquationSeparate:{0:true,1:true},stencilFunc:{0:true},stencilFuncSeparate:{0:true,1:true},stencilMaskSeparate:{0:true},stencilOp:{0:true,1:true,2:true},stencilOpSeparate:{0:true,1:true,2:true,3:true},cullFace:{0:true},frontFace:{0:true}};var c=null;return{init:d,mightBeEnum:f,glEnumToString:h,makeDebugContext:i}}();var SceneJS_eventModule=new function(){this.ERROR=0;this.INIT=1;this.RESET=2;this.TIME_UPDATED=3;this.SCENE_CREATED=4;this.SCENE_IDLE=5;this.SCENE_COMPILING=6;this.SCENE_COMPILED=7;this.SCENE_DESTROYED=8;this.RENDERER_UPDATED=9;this.RENDERER_EXPORTED=10;this.CANVAS_DEACTIVATED=11;this.GEOMETRY_UPDATED=13;this.GEOMETRY_EXPORTED=14;this.MODEL_TRANSFORM_UPDATED=15;this.MODEL_TRANSFORM_EXPORTED=16;this.PROJECTION_TRANSFORM_UPDATED=17;this.PROJECTION_TRANSFORM_EXPORTED=18;this.VIEW_TRANSFORM_UPDATED=19;this.VIEW_TRANSFORM_EXPORTED=20;this.LIGHTS_UPDATED=21;this.LIGHTS_EXPORTED=22;this.MATERIAL_UPDATED=23;this.MATERIAL_EXPORTED=24;this.TEXTURES_UPDATED=25;this.TEXTURES_EXPORTED=26;this.SHADER_ACTIVATE=27;this.SHADER_ACTIVATED=28;this.SCENE_RENDERING=29;this.LOGGING_ELEMENT_ACTIVATED=37;this.PICK_COLOR_EXPORTED=38;this.NODE_CREATED=39;this.NODE_UPDATED=40;this.NODE_DESTROYED=41;var a=new Array(37);this.addListener=function(b,c,d){var e=a[b];if(!e){e=[];a[b]=e}var f={command:c,priority:d==undefined?e.length:d};for(var g=0;g<e.length;g++){if(e[g].priority>f.priority){e.splice(g,0,f);return}}e.push(f)};this.fireEvent=function(b,c){var d=a[b];if(d){if(!c){c={}}for(var e=0;e<d.length;e++){d[e].command(c)}}}};SceneJS.bind=function(a,b){switch(a){case"error":SceneJS_eventModule.addListener(SceneJS_eventModule.ERROR,function(a){b({code:a.code,errorName:a.errorName,exception:a.exception,fatal:a.fatal})});break;case"reset":SceneJS_eventModule.addListener(SceneJS_eventModule.RESET,function(){b()});break;case"scene-created":SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_CREATED,function(a){b({sceneId:a.sceneId})});break;case"node-created":SceneJS_eventModule.addListener(SceneJS_eventModule.NODE_CREATED,function(a){b({nodeId:a.nodeId,json:a.json})});break;case"node-updated":SceneJS_eventModule.addListener(SceneJS_eventModule.NODE_UPDATED,function(a){b({nodeId:a.nodeId})});break;case"node-destroyed":SceneJS_eventModule.addListener(SceneJS_eventModule.NODE_DESTROYED,function(a){b({nodeId:a.nodeId})});break;case"scene-rendering":SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(a){b({sceneId:a.sceneId})});break;case"scene-rendered":SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILED,function(a){b({sceneId:a.sceneId})});break;case"scene-destroyed":SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_DESTROYED,function(a){b({sceneId:a.sceneId})});break;default:throw SceneJS_errorModule.fatalError("SceneJS.bind - this event type not supported: '"+a+"'")}};SceneJS.addListener=SceneJS.onEvent=SceneJS.bind;var SceneJS_compileCfg=new function(){this.COMPILE_NOTHING=-2;this.REDRAW=-1;this.COMPILE_SCENE=0;this.COMPILE_BRANCH=1;this.COMPILE_PATH=2;this.RESORT=3;this.levelNameStrings=["COMPILE_SCENE","COMPILE_BRANCH","COMPILE_SUBTREE","COMPILE_PATH","COMPILE_NODE"];this.config={node:{add:{attr:{node:{level:this.COMPILE_SCENE},nodes:{level:this.COMPILE_SCENE}},level:this.COMPILE_SCENE},remove:{attr:{node:{level:this.RESORT},nodes:{level:this.RESORT}},level:this.COMPILE_SCENE},insert:{attr:{node:{level:this.COMPILE_SCENE}},level:this.COMPILE_SCENE},bind:{attr:{rendered:{level:this.COMPILE_SCENE}}},unbind:{attr:{rendered:{level:this.COMPILE_SCENE}}},destroyed:{level:this.COMPILE_SCENE}},billboard:{alwaysCompile:true},clip:{set:{level:this.COMPILE_BRANCH},inc:{level:this.COMPILE_BRANCH}},colortrans:{set:{level:this.REDRAW},inc:{level:this.REDRAW},mul:{level:this.REDRAW}},layer:{set:{attr:{priority:{level:this.RESORT},enabled:{level:this.RESORT}}}},lights:{},scene:{created:{level:this.COMPILE_SCENE},start:{level:this.COMPILE_SCENE},set:{attr:{tagMask:{level:this.RESORT}}}},scale:{set:{level:this.COMPILE_BRANCH},inc:{level:this.COMPILE_BRANCH}},stationary:{alwaysCompile:true},tag:{set:{attr:{tag:{level:this.RESORT}}}},rotate:{set:{level:this.COMPILE_BRANCH},inc:{level:this.COMPILE_BRANCH}},translate:{set:{level:this.COMPILE_BRANCH},inc:{level:this.COMPILE_BRANCH}},quaternion:{set:{level:this.COMPILE_BRANCH},add:{level:this.COMPILE_BRANCH}},matrix:{set:{level:this.COMPILE_BRANCH}},xform:{set:{level:this.REDRAW}},material:{set:{level:this.REDRAW}},lookAt:{set:{level:this.COMPILE_PATH},inc:{level:this.COMPILE_PATH}},camera:{set:{level:this.COMPILE_PATH},inc:{level:this.COMPILE_PATH}},morphGeometry:{set:{level:this.REDRAW},loaded:{level:this.REDRAW}},texture:{set:{attr:{layers:{level:this.REDRAW}}},loaded:{level:this.REDRAW}},geometry:{set:{attr:{positions:{level:this.REDRAW},normals:{level:this.REDRAW},uv:{level:this.REDRAW},uv2:{level:this.REDRAW},indices:{level:this.REDRAW}}},loaded:{level:this.COMPILE_SCENE}},text:{loadedImage:{level:this.COMPILE_BRANCH}},shader:{set:{attr:{params:{level:this.REDRAW}}}},shaderParams:{set:{attr:{params:{level:this.REDRAW}}}},flags:{set:{attr:{flags:{level:this.RESORT}}},add:{attr:{flags:{attr:{level:this.RESORT}}}}}};this.getCompileLevel=function(a,b,c,d){var e=this.config[a];if(e){if(b){var f=e[b];if(f){if(f.attr){if(c){var g=f.attr[c];if(g){if(d){if(typeof d=="object"){var h=g.attr;if(h){var i;var j;for(var k in d){if(d.hasOwnProperty(k)){j=h[k];if(j){if(j.level!=undefined){if(i==undefined||j.level<i){i=j.level}}}}}if(i){return i}}}}if(g.level!=undefined){return g.level}}}}if(f.level!=undefined){return f.level}}}if(e.level!=undefined){return e.level}}return undefined}};var SceneJS_compileModule=new function(){this._debugCfg=null;this._enableCompiler=true;this._scenes={};this._scene=null;this._nodeStack=[];this._stackLen=0;var a=function(){this._bins=[];this.size=0;this.insert=function(a,b){var c=this._bins[a];if(!c){c=this._bins[a]=[];c.numNodes=0}var d=c[c.numNodes];if(!d){d=c[c.numNodes]={}}d.node=b;d.level=a;c.numNodes++;this.size++};this.remove=function(){var a;for(var b=SceneJS_compileCfg.COMPILE_NOTHING;b<=SceneJS_compileCfg.RESORT;b++){a=this._bins[b];if(a&&a.numNodes>0){this.size--;return a[--a.numNodes]}}return null};this.clear=function(){var a;for(var b=SceneJS_compileCfg.COMPILE_NOTHING;b<=SceneJS_compileCfg.RESORT;b++){a=this._bins[b];if(a){this._bins[b].numNodes=0}}this.size=0}};var b=this;SceneJS_eventModule.addListener(SceneJS_eventModule.INIT,function(){b._debugCfg=SceneJS_debugModule.getConfigs("compilation")});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_CREATED,function(c){b._scenes[c.sceneId]={flagSceneCompile:false,dirtyNodes:{},dirtyNodesWithinBranches:{},countTraversedSubtreesToCompile:0,compilationQueue:new a,nodeCompilationLevels:{},nodeAlwaysCompile:{},stats:{nodes:0}}});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_DESTROYED,function(a){b._scenes[a.sceneId]=null});this.redraw=function(a){if(!this._enableCompiler){return}var b=this._scenes[a];if(b.compilingScene){return}b.redraw=true};this.nodeUpdated=function(a,b,c,d){if(!this._enableCompiler){return}var e=a.scene;var f=this._scenes[e.attr.id];if(f.compilingScene){return}var g=a.attr.type;var h=a.attr.id;var i;if(g!="node"){i=SceneJS_compileCfg.getCompileLevel("node",b,c,d)}if(i===undefined){i=SceneJS_compileCfg.getCompileLevel(g,b,c,d)}if(i==SceneJS_compileCfg.REDRAW){f.redraw=true;return}if(i==SceneJS_compileCfg.COMPILE_NOTHING){return}if(i===undefined){i=SceneJS_compileCfg.COMPILE_SCENE}if(i==SceneJS_compileCfg.COMPILE_SCENE){f.compilingScene=true;f.compilationQueue.clear();return}if(f.nodeCompilationLevels[h]<=i){return}f.nodeCompilationLevels[h]=i;f.compilationQueue.insert(i,a)};this.COMPILE_NOTHING=0;this.REDRAW=1;this.COMPILE_PARTIAL=2;this.COMPILE_EVERYTHING=3;this.beginSceneCompile=function(a){var b=this._scenes[a];this._scene=b;this._stackLen=0;b.countTraversedSubtreesToCompile=0;if(!this._enableCompiler){return{level:this.COMPILE_EVERYTHING}}b.nodeCompilationLevels={};if(b.compilingScene){b.flagSceneCompile=true;b.compilingScene=false;return{level:this.COMPILE_EVERYTHING}}var c=b.compilationQueue;if(c.size==0){if(b.redraw){b.redraw=false;return{level:this.REDRAW}}return{level:this.COMPILE_NOTHING}}var d;var e;var f;var g;b.stats={scene:0,branch:0,path:0,subtree:0,nodes:0};var h=b.stats;var i={level:this.REDRAW,resort:false};while(c.size>0){d=c.remove();g=d.level;e=d.node;f=e.attr.id;if(g==SceneJS_compileCfg.COMPILE_BRANCH){this._flagCompilePath(b,e);b.dirtyNodesWithinBranches[f]=true;i.level=this.COMPILE_PARTIAL}else if(g==SceneJS_compileCfg.COMPILE_PATH){this._flagCompilePath(b,e);i.level=this.COMPILE_PARTIAL}else if(g==SceneJS_compileCfg.RESORT){i.resort=true}}return i};this._flagCompilePath=function(a,b){var c=a.dirtyNodes;var d;var e=b;while(e){d=e.attr.id;if(c[d]){return}if(a.dirtyNodesWithinBranches[d]){return}c[d]=true;e=e.parent}};this.preVisitNode=function(a){if(!this._enableCompiler){return true}var b=this._scene;var c=SceneJS_compileCfg.config[a.attr.type];var d=a.attr.id;b.stats.nodes++;if(b.flagSceneCompile){b.nodeAlwaysCompile[d]=false;if(c&&c.alwaysCompile){this._alwaysCompilePath(b,a)}}this._nodeStack[this._stackLen++]=a;if(b.dirtyNodesWithinBranches[d]===true||c&&c.alwaysCompile){b.countTraversedSubtreesToCompile++}if(b.flagSceneCompile){return true}if(b.nodeAlwaysCompile[d]){return true}if(b.countTraversedSubtreesToCompile>0){return true}if(b.dirtyNodes[d]===true){return true}b.stats.nodes--;return false};this._alwaysCompilePath=function(a,b){var c;var d=b;if(a.nodeAlwaysCompile[d.attr.id]){return}while(d){c=d.attr.id;a.nodeAlwaysCompile[c]=true;d=d.parent}};this.postVisitNode=function(a){if(this._stackLen>0){var b=this._scene;var c=a.attr.id;var d=this._nodeStack[this._stackLen-1];if(d.attr.id==c){this._stackLen--;var e=SceneJS_compileCfg.config[a.attr.type];if(b.dirtyNodesWithinBranches[c]===true||e&&e.alwaysCompile){b.countTraversedSubtreesToCompile--}}b.dirtyNodes[c]=false;b.dirtyNodesWithinBranches[c]=false}};this.finishSceneCompile=function(){this._scene.flagSceneCompile=false}};var SceneJS_loggingModule=new function(){function f(a,b){if(SceneJS._isArray(b)){g(a,i(b));for(var c=0;c<b.length;c++){h(b[c])}}else{g(a,b);h(b)}}function g(d,f){f=a?e+a+": "+f:e+f;var g=b?b[d]:null;if(g){g(f)}else{var h=c[d];if(!h){h=c[d]=[]}h.push(f)}}function h(b){if(typeof console=="object"){b=a?e+a+": "+b:e+b;console.log(b)}}function i(a){var b=[];for(var c=0;c<a.length;c++){var d=c<10?"   ":c<100?"  ":c<1e3?" ":"";b.push(c+d+": "+a[c])}return b.join("<br/>")}function j(a){for(var b=0;b<a.length;b++){h(a[b])}}function k(a){var d=c[a];if(d){var e=b?b[a]:null;if(e){for(var f=0;f<d.length;f++){e(d[f])}c[a]=[]}}}var a;var b=null;var c={};var d=0;var e="";SceneJS_eventModule.addListener(SceneJS_eventModule.LOGGING_ELEMENT_ACTIVATED,function(a){var c=a.loggingElement;if(c){b={warn:function(b){c.innerHTML+='<p style="color:orange;">'+b+"</p>"},error:function(b){c.innerHTML+='<p style="color:darkred;">'+b+"</p>"},debug:function(b){c.innerHTML+='<p style="color:darkblue;">'+b+"</p>"},info:function(b){c.innerHTML+='<p style="color:darkgreen;">'+b+"</p>"}}}else{b=null}});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(b){a=b.sceneId});SceneJS_eventModule.addListener(SceneJS_eventModule.RESET,function(){c={};b=null},1e5);this.setIndent=function(a){d=a;var b=[];for(var c=0;c<d;c++){b.push("----")}e=b.join("")};this.error=function(a){f("error",a)};this.warn=function(a){f("warn",a)};this.info=function(a){f("info",a)};this.debug=function(a){f("debug",a)};this.getFuncs=function(){return b};this.setFuncs=function(a){if(a){b=a;for(var d in c){k(d)}}}};var SceneJS_errorModule=new function(){this.fatalError=function(a,b){if(typeof a=="string"){b=a;a=SceneJS.errors.ERROR}SceneJS_eventModule.fireEvent(SceneJS_eventModule.ERROR,{errorName:SceneJS.errors._getErrorName(a)||"ERROR",code:a,exception:b,fatal:true});return b};this.error=function(a,b){SceneJS_eventModule.fireEvent(SceneJS_eventModule.ERROR,{errorName:SceneJS.errors._getErrorName(a)||"ERROR",code:a,exception:b,fatal:false})}};(function(){this.DEFAULT_LAYER_NAME="___default";var a=[];var b=[];var c=0;var d=true;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setLayer(b[c-1],a[c-1])}else{SceneJS_DrawList.setLayer()}d=false}});var e=SceneJS.createNodeType("layer");e.prototype._init=function(a){if(this.core._nodeCount==1){this.core.priority=a.priority||0;this.core.enabled=a.enabled!==false}};e.prototype.setPriority=function(a){this.core.priority=a};e.prototype.getPriority=function(){return this.core.priority};e.prototype.setEnabled=function(a){this.core.enabled=a};e.prototype.getEnabled=function(){return this.core.enabled};e.prototype._compile=function(){a[c]=this.core;b[c]=this.attr.id;c++;d=true;this._compileNodes();c--;d=true}})();(function(){var a=SceneJS.createNodeType("library");a.prototype._compile=function(){}})();new function(){function e(a){var b;if(!a){b=document.getElementById(d.DEFAULT_LOGGING_ELEMENT_ID);if(!b){SceneJS_loggingModule.info("SceneJS.Scene config 'loggingElementId' omitted and failed to find default logging element with ID '"+d.DEFAULT_LOGGING_ELEMENT_ID+"' - that's OK, logging to browser console instead")}}else{b=document.getElementById(a);if(!b){b=document.getElementById(d.DEFAULT_LOGGING_ELEMENT_ID);if(!b){SceneJS_loggingModule.info("SceneJS.Scene config 'loggingElementId' unresolved and failed to find default logging element with ID '"+d.DEFAULT_LOGGING_ELEMENT_ID+"' - that's OK, logging to browser console instead")}else{SceneJS_loggingModule.info("SceneJS.Scene config 'loggingElementId' unresolved - found default logging element with ID '"+d.DEFAULT_LOGGING_ELEMENT_ID+"' - logging to browser console also")}}else{SceneJS_loggingModule.info("SceneJS.Scene logging to element with ID '"+a+"' - logging to browser console also")}}return b}function f(a,b){var c;if(!a){SceneJS_loggingModule.info("Scene attribute 'canvasId' omitted - looking for default canvas with ID '"+d.DEFAULT_CANVAS_ID+"'");a=d.DEFAULT_CANVAS_ID;c=document.getElementById(a);if(!c){throw SceneJS_errorModule.fatalError(SceneJS.errors.CANVAS_NOT_FOUND,"Scene failed to find default canvas with ID '"+d.DEFAULT_CANVAS_ID+"'")}}else{c=document.getElementById(a);if(!c){SceneJS_loggingModule.warn("Scene config 'canvasId' unresolved - looking for default canvas with "+"ID '"+d.DEFAULT_CANVAS_ID+"'");a=d.DEFAULT_CANVAS_ID;c=document.getElementById(a);if(!c){throw SceneJS_errorModule.fatalError(SceneJS.errors.CANVAS_NOT_FOUND,"Scene attribute 'canvasId' does not match any elements in the page and no "+"default canvas found with ID '"+d.DEFAULT_CANVAS_ID+"'")}}}c.width=c.clientWidth;c.height=c.clientHeight;var e;var f=SceneJS.SUPPORTED_WEBGL_CONTEXT_NAMES;for(var g=0;!e&&g<f.length;g++){try{if(SceneJS_debugModule.getConfigs("webgl.logTrace")==true){e=c.getContext(f[g],b);if(e){e=WebGLDebugUtils.makeDebugContext(e,function(a,b,c){SceneJS_loggingModule.error("WebGL error calling "+b+" on WebGL canvas context - see console log for details")});e.setTracing(true)}}else{e=c.getContext(f[g],b)}}catch(h){}}if(!e){throw SceneJS_errorModule.fatalError(SceneJS.errors.WEBGL_NOT_SUPPORTED,"Canvas document element with ID '"+a+"' failed to provide a supported WebGL context")}try{e.clearColor(0,0,0,1);e.clearDepth(1);e.enable(e.DEPTH_TEST);e.disable(e.CULL_FACE);e.depthRange(0,1);e.disable(e.SCISSOR_TEST)}catch(h){throw SceneJS_errorModule.fatalError(SceneJS.errors.WEBGL_NOT_SUPPORTED,"Canvas document element with ID '"+a+"' provided a supported WebGL context, but functions appear to be missing")}return{canvas:c,context:e,canvasId:a}}function g(){var a=[];for(var c in b){var d=b[c];if(d){a.push(d.scene)}}return a}function h(){}var a=false;var b={};var c=0;var d=SceneJS.createNodeType("scene");SceneJS_eventModule.addListener(SceneJS_eventModule.RESET,function(){b={};c=0});d.prototype._init=function(d){if(!d.canvasId){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Scene canvasId expected")}this._loggingElementId=d.loggingElementId;this._destroyed=false;this.scene=this;this.nodeMap=new SceneJS_Map;if(d.tagMask){this.setTagMask(d.tagMask)}this.canvas=f(d.canvasId,d.contextAttr);var g=this.attr.id;b[g]={sceneId:g,scene:this,canvas:this.canvas,loggingElement:e(this._loggingElementId)};c++;if(!a){SceneJS_loggingModule.info("SceneJS V"+SceneJS.VERSION+" initialised");SceneJS_eventModule.fireEvent(SceneJS_eventModule.INIT);a=true}SceneJS_eventModule.fireEvent(SceneJS_eventModule.SCENE_CREATED,{sceneId:g,canvas:this.canvas});SceneJS_loggingModule.info("Scene defined: "+g);SceneJS_compileModule.nodeUpdated(this,"created")};d.DEFAULT_CANVAS_ID="_scenejs-default-canvas";d.DEFAULT_LOGGING_ELEMENT_ID="_scenejs-default-logging";d.prototype.getZBufferDepth=function(){if(this._destroyed){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_ILLEGAL_STATE,"Scene has been destroyed")}var a=this.canvas.context;return a.getParameter(a.DEPTH_BITS)};if(!self.Int32Array){self.Int32Array=Array;self.Float32Array=Array}(function(){var a=0;var b=["ms","moz","webkit","o"];for(var c=0;c<b.length&&!window.requestAnimationFrame;++c){window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"RequestCancelAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(b,c){var d=(new Date).getTime();var e=Math.max(0,16-(d-a));var f=window.setTimeout(function(){b(d+e)},e);a=d+e;return f};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(a){clearTimeout(a)}})();d.prototype.setTagMask=function(a){if(!this.tagSelector){this.tagSelector={}}this.tagSelector.mask=a;this.tagSelector.regex=a?new RegExp(a):null};d.prototype.getTagMask=function(){return this.tagSelector?this.tagSelector.mask:null};d.prototype._compileScene=function(){var a=SceneJS_compileModule.beginSceneCompile(this.attr.id);if(a.level!=SceneJS_compileModule.COMPILE_NOTHING){SceneJS_DrawList.bindScene({sceneId:this.attr.id},{compileMode:a.level==SceneJS_compileModule.COMPILE_EVERYTHING?SceneJS_DrawList.COMPILE_SCENE:SceneJS_DrawList.COMPILE_NODES,resort:a.resort});this._compile();SceneJS_compileModule.finishSceneCompile();return true}return false};d.prototype.renderFrame=function(a){if(this._compileScene()){SceneJS_DrawList.renderFrame({tagSelector:this.tagSelector});return true}if(a&&a.force){SceneJS_DrawList.bindScene({sceneId:this.attr.id},{compileMode:SceneJS_DrawList.COMPILE_NODES,resort:false});SceneJS_DrawList.renderFrame({tagSelector:this.tagSelector});return true}return false};d.prototype.start=function(a){if(this._destroyed){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_ILLEGAL_STATE,"Scene has been destroyed")}var b=this._setupFps();if(!this._running){a=a||{};this._running=true;this._paused=false;var c=this;var d="__scenejs_sceneLoop"+this.attr.id;var e=false;SceneJS_compileModule.nodeUpdated(this,"start");var f=c.attr.id;window[d]=function(){if(c._running&&!c._paused){if(a.idleFunc){a.idleFunc()}if(!c._running){return}SceneJS_eventModule.fireEvent(SceneJS_eventModule.SCENE_IDLE,{sceneId:f});if(c._compileScene()){e=false;SceneJS_DrawList.renderFrame({profileFunc:a.profileFunc,tagSelector:c.tagSelector});if(a.frameFunc){a.frameFunc({fps:b()})}window.requestAnimationFrame(window[d])}else{if(!e&&a.sleepFunc){a.sleepFunc()}e=true;window.requestAnimationFrame(window[d])}}else{window.requestAnimationFrame(window[d])}};this._startCfg=a;window.requestAnimationFrame(window[d])}};d.prototype._setupFps=function(){var a=new Date;var b=0;var c=0;return function(){b++;var d=new Date;if(d.getTime()-a.getTime()>1e3){var e=d.getTime()-a.getTime();c=Math.round(b*1e3/e);b=0;a=d}return c}};d.prototype.pause=function(a){if(this._destroyed){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_ILLEGAL_STATE,"Scene has been destroyed")}this._paused=a};d.prototype.isRunning=function(){return this._running};d.prototype.pick=function(a,b,c){if(this._destroyed){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_ILLEGAL_STATE,"Scene has been destroyed")}c=c||{};this._compileScene();var d=SceneJS_DrawList.pick({sceneId:this.attr.id,canvasX:a,canvasY:b,rayPick:c.rayPick,tagSelector:this.tagSelector});if(d){d.canvasX=a;d.canvasY=b}return d};d.prototype._compile=function(){SceneJS._actionNodeDestroys();var a=this.attr.id;var c=b[a];SceneJS_eventModule.fireEvent(SceneJS_eventModule.LOGGING_ELEMENT_ACTIVATED,{loggingElement:c.loggingElement});SceneJS_eventModule.fireEvent(SceneJS_eventModule.SCENE_COMPILING,{sceneId:a,nodeId:a,canvas:c.canvas});if(SceneJS_compileModule.preVisitNode(this)){this._compileNodes()}SceneJS_compileModule.postVisitNode(this);h()};d.prototype.destroy=function(){if(!this._destroyed){this.stop();this._destroyed=true;this._scheduleNodeDestroy();SceneJS._actionNodeDestroys();var a=this.attr.id;b[a]=null;c--;SceneJS_eventModule.fireEvent(SceneJS_eventModule.SCENE_DESTROYED,{sceneId:a});SceneJS_loggingModule.info("Scene destroyed: "+a);if(c==0){SceneJS_loggingModule.info("SceneJS reset");SceneJS_eventModule.fireEvent(SceneJS_eventModule.RESET)}}};d.prototype.isActive=function(){return!this._destroyed};d.prototype.stop=function(){if(this._destroyed){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_ILLEGAL_STATE,"Scene has been destroyed")}if(this._running){this._running=false;window["__scenejs_sceneLoop"+this.attr.id]=null}};d.prototype.containsNode=function(a){if(this._destroyed){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_ILLEGAL_STATE,"Scene has been destroyed")}var b=this.nodeMap.items[a];return b?true:false};d.prototype.findNodes=function(a){var b=new RegExp(a);var c=[];var d=this.nodeMap.items;for(var e in d){if(d.hasOwnProperty(e)){if(b.test(e)){c.push(d[e])}}}return c};d.prototype.findNode=function(a){var b=this.nodeMap.items[a];return b?SceneJS._selectNode(b):null};d.prototype.getStatus=function(){return this._destroyed?{destroyed:true}:SceneJS._shallowClone(SceneJS_sceneStatusModule.sceneStatus[this.attr.id])};SceneJS.reset=function(){var a=g();var b=[];for(var c=0;c<a.length;c++){b.push(a[c])}while(b.length>0){b.pop().destroy()}}};var SceneJS_PickBuffer=function(a){var b=a.canvas;var c=b.context;var d;this.bound=false;this._touch=function(){var a=b.canvas.width;var e=b.canvas.height;if(d){if(d.width==a&&d.height==e){return}else{c.deleteTexture(d.texture);c.deleteFramebuffer(d.frameBuf);c.deleteRenderbuffer(d.renderBuf)}}d={frameBuf:c.createFramebuffer(),renderBuf:c.createRenderbuffer(),texture:c.createTexture(),width:a,height:e};c.bindFramebuffer(c.FRAMEBUFFER,d.frameBuf);c.bindTexture(c.TEXTURE_2D,d.texture);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);try{c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,e,0,c.RGBA,c.UNSIGNED_BYTE,null)}catch(f){var g=new WebGLUnsignedByteArray(a*e*3);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,e,0,c.RGBA,c.UNSIGNED_BYTE,g)}c.bindRenderbuffer(c.RENDERBUFFER,d.renderBuf);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,a,e);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,d.texture,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,d.renderBuf);c.bindTexture(c.TEXTURE_2D,null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,d.frameBuf);if(!c.isFramebuffer(d.frameBuf)){throw SceneJS_errorModule.fatalError("Invalid framebuffer")}var h=c.checkFramebufferStatus(c.FRAMEBUFFER);switch(h){case c.FRAMEBUFFER_COMPLETE:break;case c.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case c.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case c.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case c.FRAMEBUFFER_UNSUPPORTED:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");default:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: "+h)}this.bound=false};this.bind=function(){this._touch();if(this.bound){return}c.bindFramebuffer(c.FRAMEBUFFER,d.frameBuf);this.bound=true};this.clear=function(){if(!this.bound){throw"Pick buffer not bound"}c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);c.disable(c.BLEND)};this.read=function(a,d){var e=a;var f=b.canvas.height-d;var g=new Uint8Array(4);c.readPixels(e,f,1,1,c.RGBA,c.UNSIGNED_BYTE,g);return g};this.unbind=function(){c.bindFramebuffer(c.FRAMEBUFFER,null);this.bound=false}};var SceneJS_DrawList=new function(){this.SORT_ORDER_TEXTURE=0;this.SORT_ORDER_VBO=1;this._sortOrder=[this.SORT_ORDER_TEXTURE,this.SORT_ORDER_VBO];this._GEO=0;this._CLIPS=1;this._COLORTRANS=2;this._FLAGS=3;this._LAYER=4;this._FRAMEBUF=5;this._LIGHTS=6;this._MATERIAL=7;this._MORPH=8;this._PICKCOLOR=9;this._TEXTURE=10;this._RENDERER=11;this._MODEL_TRANSFORM=12;this._PROJ_TRANSFORM=13;this._VIEW_TRANSFORM=14;this._PICK_LISTENERS=15;this._NAME=16;this._TAG=17;this._RENDER_LISTENERS=18;this._SHADER=19;this._SHADER_PARAMS=20;var a=function(){var a=-1;return function(b){b._id=a;b._stateId=a--;b._nodeCount=0;b._default=true;return b}}();this._DEFAULT_MAT=new Float32Array(SceneJS_math_identityMat4());this._DEFAULT_NORMAL_MAT=new Float32Array(SceneJS_math_transposeMat4(SceneJS_math_inverseMat4(SceneJS_math_identityMat4(),SceneJS_math_mat4())));this._DEFAULT_CLIP_STATE=a({clips:[],hash:""});this._DEFAULT_COLORTRANS_STATE=a({core:null,hash:"f"});this._DEFAULT_FLAGS_STATE=a({flags:{colortrans:true,picking:true,clipping:true,enabled:true,transparent:false,backfaces:true,frontface:"ccw"}});this._DEFAULT_LAYER_STATE=a({core:{priority:0,enabled:true}});this._DEFAULT_FRAMEBUF_STATE=a({frameBuf:null});this._DEFAULT_LIGHTS_STATE=a({lights:[],hash:""});this._DEFAULT_MATERIAL_STATE=a({material:{baseColor:[0,0,0],specularColor:[0,0,0],specular:1,shine:10,reflect:.8,alpha:1,emit:0}});this._DEFAULT_MORPH_STATE=a({morph:null,hash:""});this._DEFAULT_PICK_COLOR_STATE=a({pickColor:null,hash:""});this._DEFAULT_PICK_LISTENERS_STATE=a({listeners:[]});this._DEFAULT_NAME_STATE=a({core:null});this._DEFAULT_TAG_STATE=a({core:null});this._DEFAULT_TEXTURE_STATE=a({hash:""});this._DEFAULT_RENDERER_STATE=a({props:null});this._DEFAULT_MODEL_TRANSFORM_STATE=a({mat:this._DEFAULT_MAT,normalMat:this._DEFAULT_NORMAL_MAT});this._DEFAULT_PROJ_TRANSFORM_STATE=a({mat:new Float32Array(SceneJS_math_orthoMat4c(SceneJS_math_ORTHO_OBJ.left,SceneJS_math_ORTHO_OBJ.right,SceneJS_math_ORTHO_OBJ.bottom,SceneJS_math_ORTHO_OBJ.top,SceneJS_math_ORTHO_OBJ.near,SceneJS_math_ORTHO_OBJ.far)),optics:SceneJS_math_ORTHO_OBJ});this._DEFAULT_VIEW_TRANSFORM_STATE=a({mat:this._DEFAULT_MAT,normalMat:this._DEFAULT_NORMAL_MAT,lookAt:SceneJS_math_LOOKAT_ARRAYS});this._DEFAULT_RENDER_LISTENERS_STATE=a({listeners:[]});this._DEFAULT_SHADER_STATE=a({shader:{},hash:""});this._DEFAULT_SHADER_PARAMS_STATE=a({params:null});this._programs={};var b;this._sceneStates={};this._states=null;this._nodeMap=null;this._stateMap=null;var c;var d=0;this.COMPILE_SCENE=0;this.COMPILE_BRANCH=1;this.COMPILE_NODES=2;this.compileMode=null;var e;var f;var g;var h;var i;var j;var k;var l;var m;var n;var o;var p;var q;var r;var s;var t;var u;var v;var w;var x;var y;this._stateHash=null;var z=[];var A=this;SceneJS_eventModule.addListener(SceneJS_eventModule.INIT,function(){b=SceneJS_debugModule.getConfigs("shading")});SceneJS_eventModule.addListener(SceneJS_eventModule.RESET,function(){var a=A._programs;var b;for(var c in a){if(a.hasOwnProperty(c)){b=a[c];b.pick.destroy();b.render.destroy()}}A._programs={};d=0});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_CREATED,function(a){var b=a.sceneId;if(!A._sceneStates[b]){A._sceneStates[b]={sceneId:b,canvas:a.canvas,nodeRenderer:new SceneJS_DrawListRenderer({canvas:a.canvas.canvas,context:a.canvas.context}),bin:[],lenBin:0,visibleCacheBin:[],lenVisibleCacheBin:0,nodeMap:{},geoNodesMap:{},stateMap:{},pickCallListDirty:true,pickBufDirty:true}}});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_DESTROYED,function(a){});this.setStateSortDelay=function(a){a=typeof a=="number"?a==undefined:this._DEFAULT_STATE_SORT_DELAY};this.bindScene=function(a,b){b=b||{};this._states=this._sceneStates[a.sceneId];this._nodeMap=this._states.nodeMap;this._stateMap=this._states.stateMap;this._stateHash=null;if(b.compileMode==SceneJS_DrawList.COMPILE_SCENE||b.compileMode==SceneJS_DrawList.COMPILE_BRANCH){s=this._DEFAULT_CLIP_STATE;j=this._DEFAULT_COLORTRANS_STATE;f=this._DEFAULT_FLAGS_STATE;g=this._DEFAULT_LAYER_STATE;r=this._DEFAULT_FRAMEBUF_STATE;i=this._DEFAULT_LIGHTS_STATE;k=this._DEFAULT_MATERIAL_STATE;t=this._DEFAULT_MORPH_STATE;q=this._DEFAULT_PICK_COLOR_STATE;h=this._DEFAULT_RENDERER_STATE;l=this._DEFAULT_TEXTURE_STATE;n=this._DEFAULT_MODEL_TRANSFORM_STATE;p=this._DEFAULT_PROJ_TRANSFORM_STATE;o=this._DEFAULT_VIEW_TRANSFORM_STATE;u=this._DEFAULT_NAME_STATE;v=this._DEFAULT_TAG_STATE;w=this._DEFAULT_RENDER_LISTENERS_STATE;x=this._DEFAULT_SHADER_STATE;y=this._DEFAULT_SHADER_PARAMS_STATE;this._forceStateSort(true);if(b.compileMode==SceneJS_DrawList.COMPILE_SCENE){this._states.lenBin=0;c=0;this._nodeMap=this._states.nodeMap={};this._stateMap=this._states.stateMap={}}}if(b.compileMode==SceneJS_DrawList.COMPILE_NODES){this._nodeMap=this._states.nodeMap;this._stateMap=this._states.stateMap;if(b.resort){this._forceStateSort(true)}}this.compileMode=b.compileMode;e=false};this.marshallStates=function(){SceneJS_eventModule.fireEvent(SceneJS_eventModule.SCENE_RENDERING,{fullCompile:this.compileMode===SceneJS_DrawList.COMPILE_SCENE})};this._getState=function(a,b){var d;var e=this._stateMap[a];if(!e){e=this._stateMap[a]={}}if(this.compileMode!=SceneJS_DrawList.COMPILE_SCENE){d=e[b];if(!d){d={_id:b,_stateId:c++,_stateType:a,_nodeCount:0};e[b]=d}}else{d={_id:b,_stateId:c++,_stateType:a,_nodeCount:0};if(b){e[b]=d}}return d};this._releaseState=function(a){if(a._stateType==undefined){return}if(a._nodeCount<=0){return}if(--a._nodeCount==0){var b=this._stateMap[a._stateType];if(b){delete b[a.id]}}};this.setClips=function(a,b){if(!a){s=this._DEFAULT_CLIP_STATE;this._stateHash=null;return}s=this._getState(this._CLIPS,a);b=b||[];if(true&&this.compileMode==SceneJS_DrawList.COMPILE_SCENE){if(b.length>0){var c=[];for(var d=0;d<b.length;d++){var e=b[d];c.push(e.mode)}s.hash=c.join("")}else{s.hash=""}this._stateHash=null}s.clips=b};this.setColortrans=function(a,b){if(!a){j=this._DEFAULT_COLORTRANS_STATE;this._stateHash=null;return}j=this._getState(this._COLORTRANS,a,true);j.core=b;if(true&&this.compileMode==SceneJS_DrawList.COMPILE_SCENE){j.hash=b?"t":"f";this._stateHash=null}};this.setFlags=function(a,b){if(arguments.length==0){f=this._DEFAULT_FLAGS_STATE;return}f=this._getState(this._FLAGS,a);b=b||this._DEFAULT_FLAGS_STATE.flags;f.flags=b||this._DEFAULT_FLAGS_STATE.flags};this.setLayer=function(a,b){if(arguments.length==0){g=this._DEFAULT_LAYER_STATE;return}g=this._getState(this._LAYER,a);g.core=b};this.setFrameBuf=function(a,b){if(arguments.length==0){r=this._DEFAULT_FRAMEBUF_STATE;return}r=this._getState(this._FRAMEBUF,a);r.frameBuf=b};this.setLights=function(a,b){if(arguments.length==0){i=this._DEFAULT_LIGHTS_STATE;this._stateHash=null;return}i=this._getState(this._LIGHTS,a);b=b||[];if(true&&this.compileMode==SceneJS_DrawList.COMPILE_SCENE){var c=[];for(var d=0;d<b.length;d++){var e=b[d];c.push(e.mode);if(e.specular){c.push("s")}if(e.diffuse){c.push("d")}}i.hash=c.join("");this._stateHash=null}i.lights=b};this.setMaterial=function(a,b){if(arguments.length==0){k=this._DEFAULT_MATERIAL_STATE;return}k=this._getState(this._MATERIAL,a,true);k.material=b||this._DEFAULT_MATERIAL_STATE.material};this.setMorph=function(a,b){if(arguments.length==0){t=this._DEFAULT_MORPH_STATE;this._stateHash=null;return}t=this._getState(this._MORPH,a);if(true&&this.compileMode==SceneJS_DrawList.COMPILE_SCENE){if(b){var c=b.targets[0];t.hash=[c.vertexBuf?"t":"f",c.normalBuf?"t":"f",c.uvBuf?"t":"f",c.uvBuf2?"t":"f"].join("")}else{t.hash=""}this._stateHash=null}t.morph=b};this.setTexture=function(a,b){if(arguments.length==0){l=this._DEFAULT_TEXTURE_STATE;this._stateHash=null;return}l=this._getState(this._TEXTURE,a);if(true&&this.compileMode==SceneJS_DrawList.COMPILE_SCENE){var c;if(b&&b.layers.length>0){var d=b.layers;var e=[];for(var f=0,g=d.length;f<g;f++){var h=d[f];e.push("/");e.push(h.applyFrom);e.push("/");e.push(h.applyTo);e.push("/");e.push(h.blendMode);if(h.matrix){e.push("/anim")}}c=e.join("")}else{c="__scenejs_no_tex"}l.hash=c;this._stateHash=null}l.core=b};this.setRenderer=function(a,b){if(arguments.length==0){h=this._DEFAULT_RENDERER_STATE;return}h=this._getState(this._RENDERER,a);h.props=b;this._stateHash=null};this.setModelTransform=function(a,b,c){if(arguments.length==0){n=this._DEFAULT_MODEL_TRANSFORM_STATE;return}n=this._getState(this._MODEL_TRANSFORM,a);n.mat=b||this._DEFAULT_MAT;n.normalMat=c||this._DEFAULT_NORMAL_MAT};this.setProjectionTransform=function(a,b){if(arguments.length==0){p=this._DEFAULT_PROJ_TRANSFORM_STATE;return}p=this._getState(this._PROJ_TRANSFORM,a);p.mat=b.matrixAsArray||this._DEFAULT_PROJ_TRANSFORM_STATE.mat;p.optics=b.optics||this._DEFAULT_PROJ_TRANSFORM_STATE.optics};this.setViewTransform=function(a,b,c,d){if(arguments.length==0){o=this._DEFAULT_VIEW_TRANSFORM_STATE;return}o=this._getState(this._VIEW_TRANSFORM,a);o.mat=b||this._DEFAULT_MAT;o.normalMat=c||this._DEFAULT_NORMAL_MAT;o.lookAt=d||SceneJS_math_LOOKAT_ARRAYS};this.setName=function(a,b){if(arguments.length==0){u=this._DEFAULT_NAME_STATE;return}u=this._getState(this._NAME,a);u.name=b};this.setTag=function(a,b){if(arguments.length==0){v=this._DEFAULT_TAG_STATE;return}v=this._getState(this._TAG,a);v.core=b};this.setRenderListeners=function(a,b){if(arguments.length==0){w=this._DEFAULT_RENDER_LISTENERS_STATE;return}w=this._getState(this._RENDER_LISTENERS,a);w.listeners=b||[]};this.setShader=function(a,b){if(arguments.length==0){x=this._DEFAULT_SHADER_STATE;this._stateHash=null;return}x=this._getState(this._SHADER,a);x.shader=b||{};x.hash=b.hash;this._stateHash=null};this.setShaderParams=function(a,b){if(arguments.length==0){y=this._DEFAULT_SHADER_PARAMS_STATE;return}y=this._getState(this._SHADER_PARAMS,a);y.paramsStack=b};this.setGeometry=function(a,b){this.marshallStates();var c;if(this.compileMode!=SceneJS_DrawList.COMPILE_SCENE){c=this._nodeMap[a];if(c.renderListenersState._stateId!=w._stateId){this._releaseState(c.renderListenersState);c.renderListenersState=w;w._nodeCount++}if(c.flagsState._stateId!=f._stateId){this._releaseState(c.flagsState);c.flagsState=f;f._nodeCount++}return}m=this._getState(this._GEO,a);m.geo=b;m.hash=[b.normalBuf?"t":"f",b.uvBuf?"t":"f",b.uvBuf2?"t":"f",b.colorBuf?"t":"f",b.primitive].join("");if(!this._stateHash){this._stateHash=this._getSceneHash()}var d=this._getProgram(this._stateHash);m._nodeCount++;f._nodeCount++;g._nodeCount++;h._nodeCount++;i._nodeCount++;j._nodeCount++;k._nodeCount++;n._nodeCount++;o._nodeCount++;p._nodeCount++;l._nodeCount++;q._nodeCount++;r._nodeCount++;s._nodeCount++;t._nodeCount++;u._nodeCount++;v._nodeCount++;w._nodeCount++;x._nodeCount++;y._nodeCount++;c={id:a,sortId:0,stateHash:this._stateHash,program:d,geoState:m,layerState:g,flagsState:f,rendererState:h,lightState:i,colortransState:j,materialState:k,modelXFormState:n,viewXFormState:o,projXFormState:p,texState:l,pickColorState:q,frameBufState:r,clipState:s,morphState:t,nameState:u,tagState:v,renderListenersState:w,shaderState:x,shaderParamsState:y};this._states.nodeMap[a]=c;this._states.bin[this._states.lenBin++]=c;var e=this._states.geoNodesMap[a];if(!e){e=this._states.geoNodesMap[a]=[]}e.push(c)};this._attachState=function(a,b,c){var d=a[b];if(d&&d._stateId!=c._stateId){this._releaseState(d)}a[b]=c;c._nodeCount++;return c};this.removeGeometry=function(a,b){var c=this._sceneStates[a];var d=c.geoNodesMap;var e=d[b];if(!e){return}for(var f=0,g=e.length;f<g;f++){var h=e[f];h.destroyed=true;this._releaseProgram(h.program);this._releaseState(h.geoState);this._releaseState(h.flagsState);this._releaseState(h.layerState);this._releaseState(h.rendererState);this._releaseState(h.lightState);this._releaseState(h.colortransState);this._releaseState(h.materialState);this._releaseState(h.modelXFormState);this._releaseState(h.viewXFormState);this._releaseState(h.projXFormState);this._releaseState(h.texState);this._releaseState(h.pickColorState);this._releaseState(h.frameBufState);this._releaseState(h.clipState);this._releaseState(h.morphState);this._releaseState(h.nameState);this._releaseState(h.tagState);this._releaseState(h.renderListenersState);this._releaseState(h.shaderState);this._releaseState(h.shaderParamsState)}d[b]=null;c.lenVisibleCacheBin=0};this._createStateStateSortIDs=function(a){if(this._states.stateSortIDsDirty){var b;for(var c=0,d=a.length;c<d;c++){b=a[c];b.sortId=b.layerState.core.priority*1e5+b.program.id}this._states.stateSortIDsDirty=false}};this._createStateStateSortIDsNew=function(a){if(this._states.stateSortIDsDirty){var b;var c;var d;var e;var f=0;var g=0;var h=0;var i=a.length;while(i--){b=a[i];if(b.program.id!=c){b.program._sortId=f;c=b.program.id;f++}if(b.texState._stateId!=d){b.texState._sortId=g;d=b.texState._stateId;g++}if(b.geoState._stateId!=e){b.geoState._sortId=h;e=b.geoState._stateId;h++}}i=a.length;while(i--){b=a[i];b.sortId=b.layerState.core.priority*f*g+b.program.id*g+b.texState._sortId*h+b.geoState._sortId}this._states.stateSortIDsDirty=false}};this._forceStateSort=function(a){if(a){this._states.stateSortIDsDirty=a}this._states.stateSortDirty=true};this._stateSortBins=function(){var a=this._states;if(a.stateSortIDsDirty){this._createStateStateSortIDs(a.bin)}a.bin.length=a.lenBin;a.bin.sort(this._stateSortNodes);a.lenVisibleCacheBin=0};this._stateSortNodes=function(a,b){return a.sortId-b.sortId};this.renderFrame=function(a){var b=this._states;if(!b){throw SceneJS_errorModule.fatalError("No scene bound")}b.pickBufDirty=true;a=a||{};var c=false;if(b.stateSortDirty){this._stateSortBins();b.stateSortDirty=false;c=true}var d=c||this.compileMode==SceneJS_DrawList.COMPILE_SCENE||this.compileMode==SceneJS_DrawList.COMPILE_BRANCH;var e=this.compileMode==SceneJS_DrawList.COMPILE_SCENE;if(d){b.pickCallListDirty=d}if(d){b.pickCallFuncsDirty=e}var f=a.profileFunc?true:false;var g=b.nodeRenderer;g.init({doProfile:f,pciking:false,callListDirty:d,callFuncsDirty:e});this._renderDrawList(b,false,a.tagSelector);g.cleanup();if(f){a.profileFunc(g.profile)}this._states=null};this.pick=function(a){var b=this._sceneStates[a.sceneId];if(!b){throw"No drawList found for scene '"+a.sceneId+"'"}var c=b.canvas.canvas;var d=null;var e=a.canvasX;var f=a.canvasY;var g=b.pickBuf;if(!g){g=b.pickBuf=new SceneJS_PickBuffer({canvas:b.canvas});b.pickBufDirty=true}var h=b.nodeRenderer;g.bind();g.clear();h.init({picking:true,callListDirty:b.pickCallListDirty,callFuncsDirty:b.pickCallFuncsDirty});this._renderDrawList(b,true,a.tagSelector);h.cleanup();b.pickCallListDirty=false;b.pickCallFuncsDirty=false;b.pickBufDirty=false;var i=g.read(e,f);var j=i[0]+i[1]*256+i[2]*65536;var k=j>=1?j-1:-1;g.unbind();var l=h.pickNameStates[k];if(l){d={name:l.name};if(a.rayPick){var m=b.rayPickBuf;if(!m){m=b.rayPickBuf=new SceneJS_PickBuffer({canvas:b.canvas})}m.bind();m.clear();h.init({pick:false,rayPick:true,callListDirty:false,callFuncsDirty:false});var n=b.visibleCacheBin;var o=b.lenVisibleCacheBin;var p;var q;for(var r=0;r<o;r++){p=n[r];q=p.flagsState.flags;if(q.picking===false){continue}h.renderNode(p)}h.cleanup();i=m.read(e,f);m.unbind();var s=this._unpackDepth(i);var t=c.width;var u=c.height;var v=(e-t/2)/(t/2);var w=-(f-u/2)/(u/2);var x=p.viewXFormState.mat;var y=p.projXFormState.mat;var z=SceneJS_math_mulMat4(y,x,[]);var A=SceneJS_math_inverseMat4(z,[]);var B=SceneJS_math_transformVector4(A,[v,w,-1,1]);B=SceneJS_math_mulVec4Scalar(B,1/B[3]);var C=SceneJS_math_transformVector4(A,[v,w,1,1]);C=SceneJS_math_mulVec4Scalar(C,1/C[3]);var D=SceneJS_math_subVec3(C,B,[]);var E=p.viewXFormState.lookAt.eye;var F=SceneJS_math_addVec4(B,SceneJS_math_mulVec4Scalar(D,s,[]),[]);d.canvasPos=[e,f];d.worldPos=F}}return d};this._unpackDepth=function(a){var b=[a[0]/256,a[1]/256,a[2]/256,a[3]/256];var c=[1/(256*256*256),1/(256*256),1/256,1];return SceneJS_math_dotVector4(b,c)};this._renderDrawList=function(a,b,c){var d=a.canvas.context;var e=a.visibleCacheBin;var f=a.lenVisibleCacheBin;var g=a.nodeRenderer;var h=0;var i=z;if(f>0){for(var j=0;j<f;j++){l=e[j];n=l.flagsState.flags;if(b&&n.picking===false){continue}if(!b&&n.transparent===true){i[h++]=l}else{g.renderNode(l)}}}else{var k=a.bin;var l;var m=0;var n;var o;var p=b;var q;var r;if(c){q=c.mask;r=c.regex}for(var j=0,s=a.lenBin;j<s;j++){l=k[j];if(l.destroyed){if(j<s){m++;k[j]=k[j+m]}continue}if(m>0){k[j]=k[j+m]}n=l.flagsState.flags;if(n.enabled===false){continue}if(q){o=l.tagState.core;if(o){if(o.mask!=q){o.mask=q;o.matches=r.test(o.tag)}if(!o.matches){continue}}}if(!l.layerState.core.enabled){continue}if(p&&n.picking===false){continue}if(!p&&n.transparent===true){i[h++]=l}else{g.renderNode(l)}e[a.lenVisibleCacheBin++]=l}if(m>0){k.length-=m;a.lenBin=k.length;s=k.length}}if(h>0){d.enable(d.BLEND);d.blendFunc(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA);for(j=0,s=h;j<s;j++){g.renderNode(z[j])}d.disable(d.BLEND)}};this._getSceneHash=function(){return[this._states.canvas.canvasId,s.hash,j.hash,i.hash,t.hash,l.hash,x.hash,h.hash,m.hash].join(";")};this._getProgram=function(a){var c=this._programs[a];if(!c){if(b.logScripts===true){SceneJS_loggingModule.info("Creating render and pick shaders: '"+a+"'")}c=this._programs[a]={id:d++,render:this._createShader(this._composeRenderingVertexShader(),this._composeRenderingFragmentShader()),pick:this._createShader(this._composePickingVertexShader(),this._composePickingFragmentShader()),stateHash:a,refCount:0}}c.refCount++;return c};this._releaseProgram=function(a){if(--a.refCount<=0){}};this._createShader=function(a,b){try{return new SceneJS_webgl_Program(this._stateHash,this._states.canvas.context,[a.join("\n")],[b.join("\n")],SceneJS_loggingModule)}catch(c){console.error("-----------------------------------------------------------------------------------------:");console.error("Failed to create SceneJS Shader");console.error("SceneJS Version: "+SceneJS.VERSION);console.error("Error message: "+c);console.error("");console.error("Vertex shader:");console.error("");this._logShaderLoggingSource(a);console.error("");console.error("Fragment shader:");this._logShaderLoggingSource(b);console.error("-----------------------------------------------------------------------------------------:");throw SceneJS_errorModule.fatalError(SceneJS.errors.ERROR,"Failed to create SceneJS Shader: "+c)}};this._logShaderLoggingSource=function(a){for(var b=0,c=a.length;b<c;b++){console.error(a[b])}};this._writeHooks=function(a,b,c,d,e){for(var f=0,g=d.length;f<g;f++){if(e){a.push(b+"="+c+"("+b+");")}else{a.push(c+"("+b+");")}}};this._composePickingVertexShader=function(){var a=x.shader.shaders||{};var c=a.vertex||{};var d=c.hooks||{};var e=a.fragment||{};var f=e.hooks||{};var g=s.clips.length>0;var h=t.morph&&true;var i=this._hasNormals();var j=["precision mediump float;","attribute vec3 SCENEJS_aVertex;","attribute vec3 SCENEJS_aNormal;","uniform mat4 SCENEJS_uMMatrix;","uniform mat4 SCENEJS_uMNMatrix;","uniform mat4 SCENEJS_uVMatrix;","uniform mat4 SCENEJS_uVNMatrix;","uniform mat4 SCENEJS_uPMatrix;"];if(i&&(f.worldNormal||f.viewNormal)){j.push("varying   vec3 SCENEJS_vWorldNormal;");j.push("varying   vec3 SCENEJS_vViewNormal;")}j.push("varying vec4 SCENEJS_vModelVertex;");j.push("varying vec4 SCENEJS_vWorldVertex;");j.push("varying vec4 SCENEJS_vViewVertex;\n");j.push("varying vec4 SCENEJS_vProjVertex;\n");j.push("uniform vec3 SCENEJS_uEye;");j.push("varying vec3 SCENEJS_vEyeVec;");if(c.code){j.push("\n"+c.code+"\n")}if(h){j.push("uniform float SCENEJS_uMorphFactor;");if(t.morph.targets[0].vertexBuf){j.push("attribute vec3 SCENEJS_aMorphVertex;")}}j.push("void main(void) {");j.push("   vec4 tmpVertex=vec4(SCENEJS_aVertex, 1.0); ");if(i){j.push("  vec4 modelNormal = vec4(SCENEJS_aNormal, 0.0); ")}j.push("  SCENEJS_vModelVertex = tmpVertex; ");if(d.modelPos){j.push("tmpVertex="+d.modelPos+"(tmpVertex);")}if(h){if(t.morph.targets[0].vertexBuf){j.push("  vec4 vMorphVertex = vec4(SCENEJS_aMorphVertex, 1.0); ");if(d.modelPos){j.push("vMorphVertex="+d.modelPos+"(vMorphVertex);")}j.push("  tmpVertex = vec4(mix(tmpVertex.xyz, vMorphVertex.xyz, SCENEJS_uMorphFactor), 1.0); ")}}j.push("  tmpVertex = SCENEJS_uMMatrix * tmpVertex; ");if(d.worldPos){j.push("tmpVertex="+d.worldPos+"(tmpVertex);")}j.push("  SCENEJS_vWorldVertex = tmpVertex; ");j.push("SCENEJS_vEyeVec = normalize(SCENEJS_uEye - tmpVertex.xyz);");j.push("  tmpVertex = SCENEJS_uVMatrix * tmpVertex; ");if(d.viewPos){j.push("tmpVertex="+d.viewPos+"(tmpVertex);")}j.push("  SCENEJS_vViewVertex = tmpVertex;");if(i&&(f.worldNormal||f.viewNormal)){j.push("  vec3 worldNormal = normalize((SCENEJS_uMNMatrix * modelNormal).xyz); ");j.push("  SCENEJS_vWorldNormal = worldNormal;");j.push("  SCENEJS_vViewNormal = (SCENEJS_uVNMatrix * vec4(worldNormal, 1.0)).xyz;")}j.push("  SCENEJS_vProjVertex = SCENEJS_uPMatrix * tmpVertex;");j.push("  gl_Position = SCENEJS_vProjVertex;");j.push("}");if(b.logScripts==true){SceneJS_loggingModule.info(j)}return j};this._composePickingFragmentShader=function(){var a=x.shader.shaders||{};var c=a.fragment||{};var d=c.hooks||{};var e=s&&s.clips.length>0;var f=this._hasNormals();var g=["precision mediump float;"];g.push("vec4 packDepth(const in float depth) {");g.push("  const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);");g.push("  const vec4 bitMask  = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);");g.push("  vec4 res = fract(depth * bitShift);");g.push("  res -= res.xxyz * bitMask;");g.push("  return res;");g.push("}");g.push("varying vec4 SCENEJS_vModelVertex;");g.push("varying vec4 SCENEJS_vWorldVertex;");g.push("varying vec4 SCENEJS_vViewVertex;");g.push("varying vec4 SCENEJS_vProjVertex;");g.push("uniform bool SCENEJS_uRayPickMode;");g.push("uniform vec3 SCENEJS_uPickColor;");g.push("uniform float SCENEJS_uZNear;");g.push("uniform float SCENEJS_uZFar;");g.push("varying vec3 SCENEJS_vEyeVec;");if(f&&(d.worldNormal||d.viewNormal)){g.push("varying vec3 SCENEJS_vWorldNormal;");g.push("varying vec3 SCENEJS_vViewNormal;")}if(e){for(var h=0;h<s.clips.length;h++){g.push("uniform float SCENEJS_uClipMode"+h+";");g.push("uniform vec4  SCENEJS_uClipNormalAndDist"+h+";")}}if(c.code){g.push("\n"+c.code+"\n")}g.push("void main(void) {");if(d.worldPosClip){g.push("if ("+d.worldPosClip+"(SCENEJS_vWorldVertex) == false) { discard; };")}if(d.viewPosClip){g.push("if (!"+d.viewPosClip+"(SCENEJS_vViewVertex) == false) { discard; };")}if(e){g.push("  float   dist;");for(var h=0;h<s.clips.length;h++){g.push("    if (SCENEJS_uClipMode"+h+" != 0.0) {");g.push("        dist = dot(SCENEJS_vWorldVertex.xyz, SCENEJS_uClipNormalAndDist"+h+".xyz) - SCENEJS_uClipNormalAndDist"+h+".w;");g.push("        if (SCENEJS_uClipMode"+h+" == 1.0) {");g.push("            if (dist < 0.0) { discard; }");g.push("        }");g.push("        if (SCENEJS_uClipMode"+h+" == 2.0) {");g.push("            if (dist > 0.0) { discard; }");g.push("        }");g.push("    }")}}if(d.worldPos){g.push(d.worldPos+"(SCENEJS_vWorldVertex);")}if(d.viewPos){g.push(d.viewPos+"(SCENEJS_vViewVertex);")}if(d.worldEyeVec){g.push(d.worldEyeVec+"(SCENEJS_vEyeVec);")}if(f&&d.worldNormal){g.push(d.worldNormal+"(SCENEJS_vWorldNormal);")}if(f&&d.viewNormal){g.push(d.viewNormal+"(SCENEJS_vViewNormal);")}g.push("    if (SCENEJS_uRayPickMode) {");g.push("          float zNormalizedDepth = abs((SCENEJS_uZNear + SCENEJS_vViewVertex.z) / (SCENEJS_uZFar - SCENEJS_uZNear));");g.push("          gl_FragColor = packDepth(zNormalizedDepth); ");g.push("    } else {");g.push("          gl_FragColor = vec4(SCENEJS_uPickColor.rgb, 1.0);  ");g.push("    }");g.push("}");if(b.logScripts==true){SceneJS_loggingModule.info(g)}return g};this._isTexturing=function(){if(l.core&&l.core.layers.length>0){if(m.geo.uvBuf||m.geo.uvBuf2){return true}if(t.morph&&(t.morph.targets[0].uvBuf||t.morph.targets[0].uvBuf2)){return true}}return false};this._hasNormals=function(){if(m.geo.normalBuf){return true}if(t.morph&&t.morph.targets[0].normalBuf){return true}return false};this._composeRenderingVertexShader=function(){var a=x.shader.shaders||{};if(a.vertex&&a.vertex.code&&!a.vertex.hooks){return a.vertex.code}var c=a.vertex||{};var d=c.hooks||{};var e=a.fragment||{};var f=e.hooks||{};var g=this._isTexturing();var h=this._hasNormals();var j=s.clips.length>0;var k=t.morph&&true;var l=["precision mediump float;"];l.push("attribute vec3 SCENEJS_aVertex;");l.push("uniform vec3 SCENEJS_uEye;");l.push("varying vec3 SCENEJS_vEyeVec;");if(h){l.push("attribute vec3 SCENEJS_aNormal;");l.push("uniform   mat4 SCENEJS_uMNMatrix;");l.push("uniform   mat4 SCENEJS_uVNMatrix;");l.push("varying   vec3 SCENEJS_vWorldNormal;");l.push("varying   vec3 SCENEJS_vViewNormal;");for(var n=0;n<i.lights.length;n++){var o=i.lights[n];if(o.mode=="dir"){l.push("uniform vec3 SCENEJS_uLightDir"+n+";")}if(o.mode=="point"){l.push("uniform vec4 SCENEJS_uLightPos"+n+";")}if(o.mode=="spot"){l.push("uniform vec4 SCENEJS_uLightPos"+n+";")}l.push("varying vec4 SCENEJS_vLightVecAndDist"+n+";")}}if(g){if(m.geo.uvBuf){l.push("attribute vec2 SCENEJS_aUVCoord;")}if(m.geo.uvBuf2){l.push("attribute vec2 SCENEJS_aUVCoord2;")}}if(m.geo.colorBuf){l.push("attribute vec4 SCENEJS_aVertexColor;");l.push("varying vec4 SCENEJS_vColor;")}l.push("uniform mat4 SCENEJS_uMMatrix;");l.push("uniform mat4 SCENEJS_uVMatrix;");l.push("uniform mat4 SCENEJS_uPMatrix;");if(j||f.worldPos){l.push("varying vec4 SCENEJS_vWorldVertex;")}if(f.viewPos){l.push("varying vec4 SCENEJS_vViewVertex;")}if(g){if(m.geo.uvBuf){l.push("varying vec2 SCENEJS_vUVCoord;")}if(m.geo.uvBuf2){l.push("varying vec2 SCENEJS_vUVCoord2;")}}if(k){l.push("uniform float SCENEJS_uMorphFactor;");if(t.morph.targets[0].vertexBuf){l.push("attribute vec3 SCENEJS_aMorphVertex;")}if(h){if(t.morph.targets[0].normalBuf){l.push("attribute vec3 SCENEJS_aMorphNormal;")}}}if(c.code){l.push("\n"+c.code+"\n")}l.push("void main(void) {");l.push("vec4 tmpVertex=vec4(SCENEJS_aVertex, 1.0); ");if(d.modelPos){l.push("tmpVertex="+d.modelPos+"(tmpVertex);")}l.push("  vec4 modelVertex = tmpVertex; ");if(h){l.push("  vec4 modelNormal = vec4(SCENEJS_aNormal, 0.0); ")}if(k){if(t.morph.targets[0].vertexBuf){l.push("  vec4 vMorphVertex = vec4(SCENEJS_aMorphVertex, 1.0); ");l.push("  modelVertex = vec4(mix(modelVertex.xyz, vMorphVertex.xyz, SCENEJS_uMorphFactor), 1.0); ")}if(h){if(t.morph.targets[0].normalBuf){l.push("  vec4 vMorphNormal = vec4(SCENEJS_aMorphNormal, 1.0); ");l.push("  modelNormal = vec4( mix(modelNormal.xyz, vMorphNormal.xyz, 0.0), 1.0); ")}}}l.push("  vec4 worldVertex = SCENEJS_uMMatrix * modelVertex; ");if(d.worldPos){l.push("worldVertex="+d.worldPos+"(worldVertex);")}if(d.viewMatrix){l.push("vec4 viewVertex = "+d.viewMatrix+"(SCENEJS_uVMatrix) * worldVertex;")}else{l.push("vec4 viewVertex  = SCENEJS_uVMatrix * worldVertex; ")}if(d.viewPos){l.push("viewVertex="+d.viewPos+"(viewVertex);")}if(h){l.push("  vec3 worldNormal = normalize((SCENEJS_uMNMatrix * modelNormal).xyz); ");l.push("  SCENEJS_vWorldNormal = worldNormal;");l.push("  SCENEJS_vViewNormal = (SCENEJS_uVNMatrix * vec4(worldNormal, 1.0)).xyz;")}if(j||f.worldPos){l.push("  SCENEJS_vWorldVertex = worldVertex;")}if(f.viewPos){l.push("  SCENEJS_vViewVertex = viewVertex;")}if(d.projMatrix){l.push("gl_Position = "+d.projMatrix+"(SCENEJS_uPMatrix) * viewVertex;")}else{l.push("  gl_Position = SCENEJS_uPMatrix * viewVertex;")}l.push("  vec3 tmpVec3;");if(h){for(var n=0;n<i.lights.length;n++){o=i.lights[n];if(o.mode=="dir"){l.push("SCENEJS_vLightVecAndDist"+n+" = vec4(-normalize(SCENEJS_uLightDir"+n+"), 0.0);")}if(o.mode=="point"){l.push("tmpVec3 = (SCENEJS_uLightPos"+n+".xyz - worldVertex.xyz);");l.push("SCENEJS_vLightVecAndDist"+n+" = vec4(normalize(tmpVec3), length(tmpVec3));")}if(o.mode=="spot"){}}}l.push("SCENEJS_vEyeVec = normalize(SCENEJS_uEye - worldVertex.xyz);");if(g){if(m.geo.uvBuf){l.push("SCENEJS_vUVCoord = SCENEJS_aUVCoord;")}if(m.geo.uvBuf2){l.push("SCENEJS_vUVCoord2 = SCENEJS_aUVCoord2;")}}if(m.geo.colorBuf){l.push("SCENEJS_vColor = SCENEJS_aVertexColor;")}l.push("}");if(b.logScripts===true){SceneJS_loggingModule.info(l)}return l};this._composeRenderingFragmentShader=function(){var a=x.shader.shaders||{};if(a.fragment&&a.fragment.code&&!a.fragment.hooks){return a.fragment.code}var c=a.fragment||{};var d=c.hooks||{};var e=this._isTexturing();var f=this._hasNormals();var g=s&&s.clips.length>0;var h=j&&j.core;var k=["\n"];k.push("precision mediump float;");if(g||d.worldPos){k.push("varying vec4 SCENEJS_vWorldVertex;")}if(d.viewPos){k.push("varying vec4 SCENEJS_vViewVertex;")}if(g){for(var n=0;n<s.clips.length;n++){k.push("uniform float SCENEJS_uClipMode"+n+";");k.push("uniform vec4  SCENEJS_uClipNormalAndDist"+n+";")}}if(e){if(m.geo.uvBuf){k.push("varying vec2 SCENEJS_vUVCoord;")}if(m.geo.uvBuf2){k.push("varying vec2 SCENEJS_vUVCoord2;")}var o;for(var n=0,p=l.core.layers.length;n<p;n++){o=l.core.layers[n];k.push("uniform sampler2D SCENEJS_uSampler"+n+";");if(o.matrix){k.push("uniform mat4 SCENEJS_uLayer"+n+"Matrix;")}k.push("uniform float SCENEJS_uLayer"+n+"BlendFactor;")}}k.push("uniform bool  SCENEJS_uBackfaceTexturing;");k.push("uniform bool  SCENEJS_uBackfaceLighting;");k.push("uniform bool  SCENEJS_uSpecularLighting;");k.push("uniform bool  SCENEJS_uTransparent;");if(m.geo.colorBuf){k.push("varying vec4 SCENEJS_vColor;")}k.push("uniform vec3  SCENEJS_uAmbient;");k.push("uniform vec3  SCENEJS_uMaterialBaseColor;");k.push("uniform float SCENEJS_uMaterialAlpha;");k.push("uniform float SCENEJS_uMaterialEmit;");k.push("uniform vec3  SCENEJS_uMaterialSpecularColor;");k.push("uniform float SCENEJS_uMaterialSpecular;");k.push("uniform float SCENEJS_uMaterialShine;");k.push("  vec3    ambientValue=SCENEJS_uAmbient;");k.push("  float   emit    = SCENEJS_uMaterialEmit;");k.push("varying vec3 SCENEJS_vEyeVec;");if(f){k.push("varying vec3 SCENEJS_vWorldNormal;");k.push("varying vec3 SCENEJS_vViewNormal;");var q;for(var n=0;n<i.lights.length;n++){q=i.lights[n];k.push("uniform vec3  SCENEJS_uLightColor"+n+";");if(q.mode=="point"){k.push("uniform vec3  SCENEJS_uLightAttenuation"+n+";")}k.push("varying vec4  SCENEJS_vLightVecAndDist"+n+";")}}if(h){k.push("uniform float  SCENEJS_uColorTransMode ;");k.push("uniform vec4   SCENEJS_uColorTransAdd;");k.push("uniform vec4   SCENEJS_uColorTransScale;");k.push("uniform float  SCENEJS_uColorTransSaturation;")}if(c.code){k.push("\n"+c.code+"\n")}k.push("void main(void) {");if(g){k.push("  float   dist;");for(var n=0;n<s.clips.length;n++){k.push("    if (SCENEJS_uClipMode"+n+" != 0.0) {");k.push("        dist = dot(SCENEJS_vWorldVertex.xyz, SCENEJS_uClipNormalAndDist"+n+".xyz) - SCENEJS_uClipNormalAndDist"+n+".w;");k.push("        if (SCENEJS_uClipMode"+n+" == 1.0) {");k.push("            if (dist < 0.0) { discard; }");k.push("        }");k.push("        if (SCENEJS_uClipMode"+n+" == 2.0) {");k.push("            if (dist > 0.0) { discard; }");k.push("        }");k.push("    }")}}if(d.worldPos){k.push(d.worldPos+"(SCENEJS_vWorldVertex);")}if(d.viewPos){k.push(d.viewPos+"(SCENEJS_vViewVertex);")}if(d.worldEyeVec){k.push(d.worldEyeVec+"(SCENEJS_vEyeVec);")}if(f&&d.worldNormal){k.push(d.worldNormal+"(SCENEJS_vWorldNormal);")}if(f&&d.viewNormal){k.push(d.viewNormal+"(SCENEJS_vViewNormal);")}if(m.geo.colorBuf){k.push("  vec3    color   = SCENEJS_vColor.rgb;")}else{k.push("  vec3    color   = SCENEJS_uMaterialBaseColor;")}k.push("  float alpha         = SCENEJS_uMaterialAlpha;");k.push("  float emit          = SCENEJS_uMaterialEmit;");k.push("  float specular      = SCENEJS_uMaterialSpecular;");k.push("  vec3  specularColor = SCENEJS_uMaterialSpecularColor;");k.push("  float shine         = SCENEJS_uMaterialShine;");if(d.materialBaseColor){k.push("color="+d.materialBaseColor+"(color);")}if(d.materialAlpha){k.push("alpha="+d.materialAlpha+"(alpha);")}if(d.materialEmit){k.push("emit="+d.materialEmit+"(emit);")}if(d.materialSpecular){k.push("specular="+d.materialSpecular+"(specular);")}if(d.materialSpecularColor){k.push("specularColor="+d.materialSpecularColor+"(specularColor);")}if(d.materialShine){k.push("shine="+d.materialShine+"(shine);")}if(f){k.push("  float   attenuation = 1.0;");k.push("  vec3    normalVec=SCENEJS_vWorldNormal;")}var o;if(e){if(f){k.push("if (SCENEJS_uBackfaceTexturing || dot(SCENEJS_vWorldNormal, SCENEJS_vEyeVec) > 0.0) {")}k.push("  vec4    texturePos;");k.push("  vec2    textureCoord=vec2(0.0,0.0);");for(var n=0,p=l.core.layers.length;n<p;n++){o=l.core.layers[n];if(o.applyFrom=="normal"&&f){if(m.geo.normalBuf){k.push("texturePos=vec4(normalVec.xyz, 1.0);")}else{SceneJS_loggingModule.warn("Texture layer applyFrom='normal' but geo has no normal vectors");continue}}if(o.applyFrom=="uv"){if(m.geo.uvBuf){k.push("texturePos = vec4(SCENEJS_vUVCoord.s, SCENEJS_vUVCoord.t, 1.0, 1.0);")}else{SceneJS_loggingModule.warn("Texture layer applyTo='uv' but geometry has no UV coordinates");continue}}if(o.applyFrom=="uv2"){if(m.geo.uvBuf2){k.push("texturePos = vec4(SCENEJS_vUVCoord2.s, SCENEJS_vUVCoord2.t, 1.0, 1.0);")}else{SceneJS_loggingModule.warn("Texture layer applyTo='uv2' but geometry has no UV2 coordinates");continue}}if(o.matrix){k.push("textureCoord=(SCENEJS_uLayer"+n+"Matrix * texturePos).xy;")}else{k.push("textureCoord=texturePos.xy;")}if(o.applyTo=="alpha"){if(o.blendMode=="multiply"){k.push("alpha = alpha * (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).b);")}else if(o.blendMode=="add"){k.push("alpha = ((1.0 - SCENEJS_uLayer"+n+"BlendFactor) * alpha) + (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).b);")}}if(o.applyTo=="baseColor"){if(o.blendMode=="multiply"){k.push("color = color * (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).rgb);")}else{k.push("color = ((1.0 - SCENEJS_uLayer"+n+"BlendFactor) * color) + (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).rgb);")}}if(o.applyTo=="emit"){if(o.blendMode=="multiply"){k.push("emit  = emit * (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).r);")}else{k.push("emit = ((1.0 - SCENEJS_uLayer"+n+"BlendFactor) * emit) + (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).r);")}}if(o.applyTo=="specular"&&f){if(o.blendMode=="multiply"){k.push("specular  = specular * (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).r);")}else{k.push("specular = ((1.0 - SCENEJS_uLayer"+n+"BlendFactor) * specular) + (SCENEJS_uLayer"+n+"BlendFactor * texture2D(SCENEJS_uSampler"+n+", vec2(textureCoord.x, 1.0 - textureCoord.y)).r);")}}if(o.applyTo=="normals"&&f){k.push("vec3 bump = normalize(texture2D(SCENEJS_uSampler"+n+", textureCoord).xyz * 2.0 - 1.0);");k.push("normalVec *= -bump;")}}if(f){k.push("}")}}k.push("  vec4    fragColor;");if(f){k.push("if (SCENEJS_uBackfaceLighting || dot(SCENEJS_vWorldNormal, SCENEJS_vEyeVec) > 0.0) {");k.push("  vec3    lightValue      = SCENEJS_uAmbient;");k.push("  vec3    specularValue   = vec3(0.0, 0.0, 0.0);");k.push("  vec3    lightVec;");k.push("  float   dotN;");k.push("  float   lightDist;");var q;for(var n=0;n<i.lights.length;n++){q=i.lights[n];k.push("lightVec = SCENEJS_vLightVecAndDist"+n+".xyz;");if(q.mode=="point"){k.push("dotN = max(dot(normalVec, lightVec) ,0.0);");k.push("lightDist = SCENEJS_vLightVecAndDist"+n+".w;");k.push("  attenuation = 1.0 / ("+"  SCENEJS_uLightAttenuation"+n+"[0] + "+"  SCENEJS_uLightAttenuation"+n+"[1] * lightDist + "+"  SCENEJS_uLightAttenuation"+n+"[2] * lightDist * lightDist);");if(q.diffuse){k.push("  lightValue += dotN *  SCENEJS_uLightColor"+n+" * attenuation;")}if(q.specular){k.push("if (SCENEJS_uSpecularLighting) specularValue += attenuation * specularColor * SCENEJS_uLightColor"+n+" * specular  * pow(max(dot(reflect(lightVec, normalVec), SCENEJS_vEyeVec),0.0), shine);")}}if(q.mode=="dir"){k.push("dotN = max(dot(normalVec,lightVec),0.0);");if(q.diffuse){k.push("lightValue += dotN * SCENEJS_uLightColor"+n+";")}if(q.specular){k.push("if (SCENEJS_uSpecularLighting) specularValue += specularColor * SCENEJS_uLightColor"+n+" * specular  * pow(max(dot(reflect(lightVec, normalVec),SCENEJS_vEyeVec),0.0), shine);")}}}k.push("      fragColor = vec4((specularValue.rgb + color.rgb * lightValue.rgb) + (emit * color.rgb), alpha);");k.push("   } else {");k.push("      fragColor = vec4(color.rgb + (emit * color.rgb), alpha);");k.push("   }")}else{k.push("fragColor = vec4((emit * color.rgb) + (emit * color.rgb), alpha);")}if(h){}if(d.pixelColor){k.push("fragColor="+d.pixelColor+"(fragColor);")}if(b.whitewash==true){k.push("    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);")}else{k.push("    gl_FragColor = fragColor;")}k.push("}");if(b.logScripts==true){SceneJS_loggingModule.info(k)}return k}};var SceneJS_DrawListRenderer=function(a){this._canvas=a.canvas;this._context=a.context;this.pickNameStates=[];this._callCtx={};var b=this;this._queryFacade={_node:null,_setNode:function(a){this._node=a;this._mem={}},getCameraMatrix:function(){return this._mem.camMat?this._mem.camMat:this._mem.camMat=this._node.projXFormState.mat.slice(0)},getViewMatrix:function(){return this._mem.viewMat?this._mem.viewMat:this._mem.viewMat=this._node.viewXFormState.mat.slice(0)},getModelMatrix:function(){return this._mem.modelMat?this._mem.modelMat:this._mem.modelMat=this._node.modelXFormState.mat.slice(0)},getCanvasPos:function(a){this.getProjPos(a);if(!this._mem.canvasWidth){this._mem.canvasWidth=b._canvas.width;this._mem.canvasHeight=b._canvas.height}var c=this._mem.pc;var d=c[0]/c[3]*this._mem.canvasWidth*.5;var e=c[1]/c[3]*this._mem.canvasHeight*.5;return this._mem.canvasPos={x:d+b._canvas.width*.5,y:this._mem.canvasHeight-e-this._mem.canvasHeight*.5}},getCameraPos:function(a){this.getProjPos(a);this._mem.camPos=SceneJS_math_normalizeVec3(this._mem.pc,[0,0,0]);return{x:this._mem.camPos[0],y:this._mem.camPos[1],z:this._mem.camPos[2]}},getProjPos:function(a){this.getViewPos(a);this._mem.pc=SceneJS_math_transformPoint3(this._node.projXFormState.mat,this._mem.vc);return{x:this._mem.pc[0],y:this._mem.pc[1],z:this._mem.pc[2],w:this._mem.pc[3]}},getViewPos:function(a){this.getWorldPos(a);this._mem.vc=SceneJS_math_transformPoint3(this._node.viewXFormState.mat,this._mem.wc);return{x:this._mem.vc[0],y:this._mem.vc[1],z:this._mem.vc[2],w:this._mem.vc[3]}},getWorldPos:function(a){this._mem.wc=SceneJS_math_transformPoint3(this._node.modelXFormState.mat,a||[0,0,0]);return{x:this._mem.wc[0],y:this._mem.wc[1],z:this._mem.wc[2],w:this._mem.wc[3]}}};this.init=function(a){a=a||{};this._picking=a.picking;this._rayPicking=a.rayPick;this._callListDirty=a.callListDirty;this._callFuncsDirty=a.callFuncsDirty;this._program=null;this._lastFramebuf=null;this._lastFlagsState=null;this._lastRendererState=null;this._lastRenderListenersState=null;this._pickIndex=0;this._callCtx.picking=this._picking;this._callCtx.rayPicking=this._rayPicking;this._callCtx.lastFrameBuf=null;this._callCtx.lastRendererProps=null;this._callCtx.lastFlagsState=null;this.stateSortProfile={numTextures:0,numGeometries:0}};this.createCall=function(a){if(this._picking){this._node.__pickCallList[this._node.__pickCallListLen++]=a}else{this._node.__drawCallList[this._node.__drawCallListLen++]=a}a()};this.renderNode=function(a){var d,e,f;if(this._picking||this._rayPicking){if(!(this._callListDirty||this._callFuncsDirty)){var g=a.__pickCallList;for(d=0,e=a.__pickCallListLen;d<e;d++){g[d]()}return}if(!a.__pickCallList){a._pickCallFuncs=a._pickCallFuncs||{};a.__pickCallList=[]}a.__pickCallListLen=0;if(this._callFuncsDirty){a._pickCallFuncs={}}}else{this._queryFacade._setNode(a);if(!(this._callListDirty||this._callFuncsDirty)){var h=a.__drawCallList;for(d=0,e=a.__drawCallListLen;d<e;d++){h[d]()}return}if(!a.__drawCallList){a._drawCallFuncs=a._drawCallFuncs||{};a.__drawCallList=[]}a.__drawCallListLen=0;if(this._callFuncsDirty){a._drawCallFuncs={}}}this._node=a;this._callFuncs=this._picking?a._pickCallFuncs:a._drawCallFuncs;var i=a.flagsState;var j=a.geoState;if(!this._program||a.program.id!=this._lastProgramId){if(this._picking){this._program=a.program.pick}else{this._program=a.program.render}if(this.stateSortProfile){this._program.setProfile(this.profile)}if(this._picking){this.createCall(this._callFuncs["pickShader"]||(this._callFuncs["pickShader"]=function(){var c=a.program.pick;var d=b._context;var e=b._callCtx;var f;return function(){if(e.program){e.program.unbind()}c.bind();if(!f){f=c.getUniformLocation("SCENEJS_uRayPickMode")}d.uniform1i(f,!!e.rayPicking);e.program=c}}()))}else{this.createCall(this._callFuncs["renderShader"]||(this._callFuncs["renderShader"]=function(){var c=a.program.render;var d=b._callCtx;return function(){if(d.program){d.program.unbind()}c.bind();d.program=c}}()))}this._lastProgramId=a.program.id;this._lastShaderStateId=-1;this._lastShaderParamsStateId=-1;this._lastGeoStateId=-1;this._lastFlagsStateId=-1;this._lastColortransStateId=-1;this._lastLightStateId=-1;this._lastClipStateId=-1;this._lastMorphStateId=-1;this._lastTexStateId=-1;this._lastMaterialStateId=-1;this._lastViewXFormStateId=-1;this._lastModelXFormStateId=-1;this._lastProjXFormStateId=-1;this._lastPickStateId=-1;this._lastFramebufStateId=-1;this._lastRenderListenersStateId=-1;if(a.shaderState.shader&&a.shaderState.shader.paramsStack){if(this._lastShaderStateId!=a.shaderState._stateId){this.createCall(this._callFuncs["shader"]||(this._callFuncs["shader"]=function(){var c=b._program;var d=a.shaderState.shader.paramsStack;return function(){var a;var b;for(var e=0,f=d.length;e<f;e++){a=d[e];for(b in a){if(a.hasOwnProperty(b)){c.setUniform(b,a[b])}}}}}()));this._lastShaderStateId=a.shaderState._stateId}}}if(a.shaderParamsState.paramsStack){if(this._lastShaderParamsStateId!=a.shaderParamsState._stateId){this.createCall(this._callFuncs["shaderParams"]||(this._callFuncs["shaderParams"]=function(){var c=b._program;var d=a.shaderParamsState.paramsStack;return function(){var a;var b;for(var e=0,f=d.length;e<f;e++){a=d[e];for(b in a){if(a.hasOwnProperty(b)){c.setUniform(b,a[b])}}}}}()));this._lastShaderParamsStateId=a.shaderParamsState._stateId}}if(!this._lastFrameBuf||this._lastFramebufStateId!=a.frameBufState._stateId){this.createCall(this._callFuncs["frameBuf"]||(this._callFuncs["frameBuf"]=function(){var c=b._context;var d=b._callCtx;var e=a.frameBufState.frameBuf;return function(){if(d.lastFrameBuf){c.finish();d.lastFrameBuf.unbind()}if(e){e.bind()}d.lastFrameBuf=e}}()));this._lastFramebufStateId=a.frameBufState._stateId}if(!this._picking){if(a.texState._stateId!=this._lastTexStateId){var k=a.texState.core;if(k){this.createCall(this._callFuncs["texture"]||(this._callFuncs["texture"]=function(){var a=b._program;var c=k.layers.length;var d=k.layers;var e=[];for(var f=0;f<c;f++){e.push({texSamplerName:"SCENEJS_uSampler"+f,texMatrixName:"SCENEJS_uLayer"+f+"Matrix",texBlendFactorName:"SCENEJS_uLayer"+f+"BlendFactor"})}return function(){var b,f;for(var g=0,h=c;g<h;g++){b=d[g];f=e[g];if(b.texture){a.bindTexture(f.texSamplerName,b.texture,g);if(b.matrixAsArray){a.setUniform(f.texMatrixName,b.matrixAsArray)}a.setUniform(f.texBlendFactorName,b.blendFactor)}}}}()))}}this._lastTexStateId=a.texState._stateId}if(j._stateId!=this._lastGeoStateId||a.morphState.morph&&a.morphState._stateId!=this._lastMorphStateId){this.createCall(this._callFuncs["unbindVBOs"]||(this._callFuncs["unbindVBOs"]=function(){var a=b._context;return function(){for(var b=0;b<8;b++){a.disableVertexAttribArray(b)}}}()));var l=false;var m=false;var n=false;var o=false;if(a.morphState.morph&&a.morphState._stateId!=this._lastMorphStateId){this.createCall(this._callFuncs["morph"]||(this._callFuncs["morph"]=function(){var c=b._program;var d=b._context;var e=c.getAttribute("SCENEJS_aVertex");var f=c.getAttribute("SCENEJS_aMorphVertex");var g=c.getAttribute("SCENEJS_aNormal");var h=c.getAttribute("SCENEJS_aMorphNormal");var i=c.getAttribute("SCENEJS_aMorphUVCoord");var j=c.getUniformLocation("SCENEJS_uMorphFactor");var k=a.morphState.morph;return function(){var a=k.targets[k.key1];var b=k.targets[k.key2];if(e){e.bindFloatArrayBuffer(a.vertexBuf);f.bindFloatArrayBuffer(b.vertexBuf);l=true}if(h){g.bindFloatArrayBuffer(a.normalBuf);h.bindFloatArrayBuffer(b.normalBuf);m=true}else if(g&&a.normalBuf){g.bindFloatArrayBuffer(a.normalBuf);m=true}if(i&&a.uvBuf){c.bindFloatArrayBuffer(a.uvBuf);c.bindFloatArrayBuffer(b.uvBuf);n=true}if(j){d.uniform1f(j,k.factor)}}}()));this._lastMorphStateId=a.morphState._stateId}this.createCall(this._callFuncs["geo"]||(this._callFuncs["geo"]=function(){var a=b._program;var c=j.geo;var d=c.vertexBuf;var e=c.normalBuf;var f=c.colorBuf;var g=!l&&d?a.getAttribute("SCENEJS_aVertex"):undefined;var h=!m&&e?a.getAttribute("SCENEJS_aNormal"):undefined;var i=f?a.getAttribute("SCENEJS_aVertexColor"):undefined;return function(){if(g){g.bindFloatArrayBuffer(d)}if(h){h.bindFloatArrayBuffer(e)}if(i){i.bindFloatArrayBuffer(f)}}}()));if(!this._picking){if(a.texState&&a.texState.core&&a.texState.core.layers.length>0){this.createCall(this._callFuncs["uvs"]||(this._callFuncs["uvs"]=function(){var a=b._program;var c=j.geo;var d=c.uvBuf;var e=c.uvBuf2;var f=d?a.getAttribute("SCENEJS_aUVCoord"):undefined;var g=d?a.getAttribute("SCENEJS_aUVCoord2"):undefined;return function(){if(f){f.bindFloatArrayBuffer(d)}if(g){g.bindFloatArrayBuffer(e)}}}()))}}this.createCall(this._callFuncs["ibo"]||(this._callFuncs["ibo"]=function(){var a=j.geo.indexBuf;return function(){a.bind()}}()));this.stateSortProfile.numGeometries++;this._lastGeoStateId=j._stateId}if(!this._lastRendererState||a.rendererState._stateId!=this._lastRendererState._stateId){this.createCall(this._callFuncs["bindProps"]||(this._callFuncs["bindProps"]=function(){var c=b._context;var d=b._callCtx;var e=a.rendererState;return function(){if(d.lastRendererProps){d.lastRendererProps.restoreProps(c)}if(e.props){e.props.setProps(c)}d.lastRendererProps=e.props}}()));this.createCall(this._callFuncs["ambient"]||(this._callFuncs["ambient"]=function(){var c=b._context;var d=b._program;var e=a.rendererState;var f=[0,0,0];var g=d.getUniformLocation("SCENEJS_uAmbient");return function(){if(g){var a=e.props;if(a&&a.clearColor){var b=a.clearColor;c.uniform3fv(g,[b.r,b.g,b.b])}else{c.uniform3fv(g,f)}}}}()));this._lastRendererState=a.rendererState}if(a.viewXFormState._stateId!=this._lastViewXFormStateId){this.createCall(this._callFuncs["lookAt"]||(this._callFuncs["lookAt"]=function(){var c=b._program;var d=b._context;var e=a.viewXFormState;var f=c.getUniformLocation("SCENEJS_uVMatrix");var g=c.getUniformLocation("SCENEJS_uVNMatrix");var h=c.getUniformLocation("SCENEJS_uEye");return function(){var a=e.mat;var b=e.normalMat;var c=e.lookAt;if(f){d.uniformMatrix4fv(f,d.FALSE,a)}if(g){d.uniformMatrix4fv(g,d.FALSE,b)}if(h){d.uniform3fv(h,c.eye)}}}()));this._lastViewXFormStateId=a.viewXFormState._stateId}if(a.modelXFormState._stateId!=this._lastModelXFormStateId){this.createCall(this._callFuncs["modelXF"]||(this._callFuncs["modelXF"]=function(){var c=b._program;var d=b._context;var e=a.modelXFormState;var f=c.getUniformLocation("SCENEJS_uMMatrix");var g=c.getUniformLocation("SCENEJS_uMNMatrix");return function(){var a=e.mat;var b=e.normalMat;if(f){d.uniformMatrix4fv(f,d.FALSE,a)}if(g){d.uniformMatrix4fv(g,d.FALSE,b)}}}()));this._lastModelXFormStateId=a.modelXFormState._stateId}if(a.projXFormState._stateId!=this._lastProjXFormStateId){this.createCall(this._callFuncs["camera"]||(this._callFuncs["camera"]=function(){var c=b._program;var d=b._context;var e=b._callCtx;var f=a.projXFormState;var g=c.getUniformLocation("SCENEJS_uPMatrix");var h=c.getUniformLocation("SCENEJS_uZNear");var i=c.getUniformLocation("SCENEJS_uZFar");return function(){var a=f.mat;var b=f.optics;if(g){d.uniformMatrix4fv(g,d.FALSE,a)}if(e.rayPicking){if(i){d.uniform1f(h,b.near)}if(i){d.uniform1f(i,b.far)}}}}()));this._lastProjXFormStateId=a.projXFormState._stateId}if(a.clipState&&(a.clipState._stateId!=this._lastClipStateId||i._stateId!=this._lastFlagsStateId)){var p=a.clipState.clips;for(f=0,e=p.length;f<e;f++){this.createCall(function(){var a=b._context;var c=b._program;var d=p[f];var e=i.flags;var g=c.getUniformLocation("SCENEJS_uClipMode"+f);var h=c.getUniformLocation("SCENEJS_uClipNormalAndDist"+f);return function(){if(g&&h){if(e.clipping===false){a.uniform1f(g,0)}else if(d.mode=="inside"){a.uniform1f(g,2)}else if(d.mode=="outside"){a.uniform1f(g,1)}else{a.uniform1f(g,0)}a.uniform4fv(h,d.normalAndDist)}}}())}this._lastClipStateId=a.clipState._stateId}if(!this._picking&&!this._rayPicking){if(a.colortransState&&a.colortransState.core&&(a.colortransState._stateId!=this._lastColortransStateId||i._stateId!=this._lastFlagsStateId)){this.createCall(this._callFuncs["colortrans"]||(this._callFuncs["colortrans"]=function(){var c=b._program;var d=i.flags;var e=a.colortransState.core;return function(){if(d.colortrans===false){c.setUniform("SCENEJS_uColorTransMode",0)}else{var a=e.scale;var b=e.add;c.setUniform("SCENEJS_uColorTransMode",1);c.setUniform("SCENEJS_uColorTransScale",[a.r,a.g,a.b,a.a]);c.setUniform("SCENEJS_uColorTransAdd",[b.r,b.g,b.b,b.a]);c.setUniform("SCENEJS_uColorTransSaturation",e.saturation)}}}()));this._lastColortransStateId=a.colortransState._stateId}}if(!this._picking){if(a.materialState&&a.materialState!=this._lastMaterialStateId){this.createCall(this._callFuncs["material"]||(this._callFuncs["material"]=function(){var c=b._program;var d=b._context;var e=c.getUniformLocation("SCENEJS_uMaterialBaseColor");var f=c.getUniformLocation("SCENEJS_uMaterialSpecularColor");var g=c.getUniformLocation("SCENEJS_uMaterialSpecular");var h=c.getUniformLocation("SCENEJS_uMaterialShine");var i=c.getUniformLocation("SCENEJS_uMaterialEmit");var j=c.getUniformLocation("SCENEJS_uMaterialAlpha");return function(){var b=a.materialState.material;if(e){d.uniform3fv(e,b.baseColor)}if(f){d.uniform3fv(f,b.specularColor)}if(g){d.uniform1f(g,b.specular)}if(h){d.uniform1f(h,b.shine)}if(i){d.uniform1f(i,b.emit)}if(j){d.uniform1f(j,b.alpha)}}}()));this._lastMaterialStateId=a.materialState._stateId}}if(!this._picking){if(a.lightState&&a.lightState._stateId!=this._lastLightStateId){var q=a.lightState.lights;for(f=0,e=q.length;f<e;f++){this.createCall(this._callFuncs["light"+f]||(this._callFuncs["light"+f]=function(){var a=b._program;var c=b._context;var d=a.getUniformLocation("SCENEJS_uLightColor"+f);var e=a.getUniformLocation("SCENEJS_uLightDir"+f);var g=a.getUniformLocation("SCENEJS_uLightPos"+f);var h=a.getUniformLocation("SCENEJS_uLightCutOff"+f);var i=a.getUniformLocation("SCENEJS_uLightSpotExpOff"+f);var j=a.getUniformLocation("SCENEJS_uLightAttenuation"+f);var k=q[f];switch(k.mode){case"ambient":return function(){if(d){c.uniform3fv(d,k.color)}};case"dir":return function(){if(d){c.uniform3fv(d,k.color)}if(e){c.uniform3fv(e,k.worldDir)}};case"point":return function(){if(d){c.uniform3fv(d,k.color)}if(g){c.uniform3fv(g,k.worldPos)}};case"spot":return function(){}}}()))}this._lastLightStateId=a.lightState._stateId}}if(this._picking){if(!this._lastNameState||a.nameState._stateId!=this._lastNameState._stateId){this.createCall(this._callFuncs["name"]||(this._callFuncs["name"]=function(){var c=b._program;var d=b._context;var e=b._callCtx;var f=a.nameState;var g=c.getUniformLocation("SCENEJS_uPickColor");return function(){if(e.picking){if(f.name){b.pickNameStates[b._pickIndex++]=f;var a=b._pickIndex>>16&255;var c=b._pickIndex>>8&255;var h=b._pickIndex&255;d.uniform3fv(g,[h/255,c/255,a/255])}}}}()));this._lastNameState=a.nameState}}if(!this._picking){if(!this._lastRenderListenersState||a.renderListenersState._stateId!=this._lastRenderListenersState._stateId){this.createCall(this._callFuncs["rendered"]||(this._callFuncs["rendered"]=function(){var c=a.renderListenersState.listeners;var d=b._queryFacade;return function(){for(var a=c.length-1;a>=0;a--){c[a](d)}}}()));this._lastRenderListenersState=a.renderListenersState}}if(!this._lastFlagsState||i._stateId!=this._lastFlagsState._stateId){this.createCall(this._callFuncs["flags"]||(this._callFuncs["flags"]=function(){var a=b._context;var d=b._program;var e=b._callCtx;var f=d.getUniformLocation("SCENEJS_uBackfaceTexturing");var g=d.getUniformLocation("SCENEJS_uBackfaceLighting");var h=d.getUniformLocation("SCENEJS_uSpecularLighting");var j=i;return function(){var b=j.flags;var d=e.lastFlagsState;var i=d?d.flags:null;if(!i||b.backfaces!=i.backfaces){if(b.backfaces){a.disable(a.CULL_FACE)}else{a.enable(a.CULL_FACE)}}if(!i||b.frontface!=i.frontface){if(b.frontface=="cw"){a.frontFace(a.CW)}else{a.frontFace(a.CCW)}}if(!i||b.blendFunc!=i.blendFunc){if(b.blendFunc){a.blendFunc(c(a,b.blendFunc.sfactor||"one"),c(a,b.blendFunc.dfactor||"zero"))}else{a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA)}}a.uniform1i(f,b.backfaceTexturing==undefined?true:!!b.backfaceTexturing);a.uniform1i(g,b.backfaceLighting==undefined?true:!!b.backfaceLighting);a.uniform1i(h,b.specular==undefined?true:!!b.specular)}}()));this._lastFlagsState=i}this.createCall(this._callFuncs["draw"]||(this._callFuncs["draw"]=function(){var a=b._context;var c=j.geo.primitive;var d=j.geo.indexBuf.numItems;return function(){a.drawElements(c,d,a.UNSIGNED_SHORT,0)}}()))};var c=function(a,b){if(!b){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,'Null SceneJS.renderer node config: "'+b+'"')}var c=SceneJS_webgl_enumMap[b];if(!c){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,'Unrecognised SceneJS.renderer node config value: "'+b+'"')}var d=a[c];if(!d){throw SceneJS_errorModule.fatalError(SceneJS.errors.WEBGL_UNSUPPORTED_NODE_CONFIG,"This browser's WebGL does not support renderer node config value: \""+b+'"')}return d};this.cleanup=function(){this._context.flush();var a=this._callCtx;this._lastRendererState=null;if(a.lastRendererProps){a.lastRendererProps.restoreProps(this._context)}this._lastFlagsState=null;this._lastFrameBufState=null;this._lastNameState=null;if(a.lastFrameBuf){a.lastFrameBuf.unbind();a.lastFrameBuf=null}this._lastProgramId=-1;this._program=null}};new function(){function f(a){var b;if(d>0){b={};for(var c in a){if(a.hasOwnProperty(c)){if(!(a[c]==undefined)){b[c]=g(c)}}}}a=h(a);return{props:a,setProps:function(b){i(b,a)},restoreProps:function(a){if(b){j(a,b)}}}}function h(a){var b;for(var c in a){if(a.hasOwnProperty(c)){b=a[c];if(b!=undefined&&b!=null){if(m[c]){a[c]=m[c](null,b)}else if(n[c]){a[c]=n[c](null,b)}}}}return a}function k(a,f){b[d]=a;c[d]=f;d++;e=true}function o(){var a=c[d-1];d--;var b=c[d-1];e=true}var a;var b=[];var c=[];var d=0;var e;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(b){d=0;e=true;a=b.canvas;d=0;var c=f({clear:{depth:true,color:true},clearDepth:1,enableDepthTest:true,enableCullFace:false,frontFace:"ccw",cullFace:"back",depthFunc:"less",depthRange:{zNear:0,zFar:1},enableScissorTest:false,viewport:{x:1,y:1,width:a.canvas.width,height:a.canvas.height},wireframe:false,highlight:false,enableClip:undefined,enableBlend:false,blendFunc:{sfactor:"srcAlpha",dfactor:"one"}});i(a.context,c.props);k("__scenejs_default_props",c)});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(e){if(d>0){SceneJS_DrawList.setRenderer(b[d-1],c[d-1])}else{SceneJS_DrawList.setRenderer()}e=false}});var g=function(a){var b;var e;for(var f=d-1;f>=0;f--){b=c[f].props;e=b[a];if(e!=undefined&&e!=null){return b[a]}}return null};var i=function(a,b){for(var c in b){if(b.hasOwnProperty(c)){var d=m[c];if(d){d(a,b[c])}}}if(b.viewport){n.viewport(a,b.viewport)}if(b.scissor){n.clear(a,b.scissor)}if(b.clear){n.clear(a,b.clear)}};var j=function(a,b){var c;for(var d in b){if(b.hasOwnProperty(d)){c=b[d];if(c!=undefined&&c!=null){var e=m[d];if(e){e(a,c)}}}}if(b.viewport){n.viewport(a,b.viewport)}if(b.scissor){n.clear(a,b.scissor)}};var l=function(a,b){if(!b){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,'Null SceneJS.renderer node config: "'+b+'"')}var c=SceneJS_webgl_enumMap[b];if(!c){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,'Unrecognised SceneJS.renderer node config value: "'+b+'"')}var d=a[c];if(!d){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"This browser's WebGL does not support renderer node config value: \""+b+'"')}return d};var m={enableBlend:function(a,b){if(!a){if(b==null||b==undefined){b=false}return b}if(b){a.enable(a.BLEND)}else{a.disable(a.BLEND)}},blendColor:function(a,b){if(!a){b=b||{};return{r:b.r||0,g:b.g||0,b:b.b||0,a:b.a==undefined||b.a==null?1:b.a}}a.blendColor(b.r,b.g,b.b,b.a)},blendEquation:function(a,b){if(!a){return b||"funcAdd"}a.blendEquation(a,l(a,b))},blendEquationSeparate:function(a,b){if(!a){b=b||{};return{rgb:b.rgb||"funcAdd",alpha:b.alpha||"funcAdd"}}a.blendEquation(l(a,b.rgb),l(a,b.alpha))},blendFunc:function(a,b){if(!a){b=b||{};return{sfactor:b.sfactor||"srcAlpha",dfactor:b.dfactor||"oneMinusSrcAlpha"}}a.blendFunc(l(a,b.sfactor||"srcAlpha"),l(a,b.dfactor||"oneMinusSrcAlpha"))},blendFuncSeparate:function(a,b){if(!a){b=b||{};return{srcRGB:b.srcRGB||"zero",dstRGB:b.dstRGB||"zero",srcAlpha:b.srcAlpha||"zero",dstAlpha:b.dstAlpha||"zero"}}a.blendFuncSeparate(l(a,b.srcRGB||"zero"),l(a,b.dstRGB||"zero"),l(a,b.srcAlpha||"zero"),l(a,b.dstAlpha||"zero"))},clearColor:function(a,b){if(!a){b=b||{};return{r:b.r||0,g:b.g||0,b:b.b||0,a:b.a==undefined||b.a==null?1:b.a}}a.clearColor(b.r,b.g,b.b,b.a)},clearDepth:function(a,b){if(!a){return b==null||b==undefined?1:b}a.clearDepth(b)},clearStencil:function(a,b){if(!a){return b||0}a.clearStencil(b)},colorMask:function(a,b){if(!a){b=b||{};return{r:b.r||0,g:b.g||0,b:b.b||0,a:b.a==undefined||b.a==null?1:b.a}}a.colorMask(b.r,b.g,b.b,b.a)},enableCullFace:function(a,b){if(!a){return b}if(b){a.enable(a.CULL_FACE)}else{a.disable(a.CULL_FACE)}},cullFace:function(a,b){if(!a){return b||"back"}a.cullFace(l(a,b))},enableDepthTest:function(a,b){if(!a){if(b==null||b==undefined){b=true}return b}if(b){a.enable(a.DEPTH_TEST)}else{a.disable(a.DEPTH_TEST)}},depthFunc:function(a,b){if(!a){return b||"less"}a.depthFunc(l(a,b))},enableDepthMask:function(a,b){if(!a){if(b==null||b==undefined){b=true}return b}a.depthMask(b)},depthRange:function(a,b){if(!a){b=b||{};return{zNear:b.zNear==undefined||b.zNear==null?0:b.zNear,zFar:b.zFar==undefined||b.zFar==null?1:b.zFar}}a.depthRange(b.zNear,b.zFar)},frontFace:function(a,b){if(!a){return b||"ccw"}a.frontFace(l(a,b))},lineWidth:function(a,b){if(!a){return b||1}a.lineWidth(b)},enableScissorTest:function(a,b){if(!a){return b}if(b){a.enable(a.SCISSOR_TEST)}else{b=false;a.disable(a.SCISSOR_TEST)}}};var n={viewport:function(b,c){if(!b){c=c||{};return{x:c.x||1,y:c.y||1,width:c.width||a.canvas.width,height:c.height||a.canvas.height}}b.viewport(c.x,c.y,c.width,c.height)},scissor:function(a,b){if(!a){b=b||{};return{x:b.x||0,y:b.y||0,width:b.width||1,height:b.height||1}}a.scissor(b.x,b.y,b.width,b.height)},clear:function(a,b){if(!a){b=b||{};return b}var c;if(b.color){c=a.COLOR_BUFFER_BIT}if(b.depth){c=c|a.DEPTH_BUFFER_BIT}if(b.stencil){c=c|a.STENCIL_BUFFER_BIT}if(c){a.clear(c)}}};var p=SceneJS.createNodeType("renderer");p.prototype._init=function(a){if(this.core._nodeCount==1){for(var b in a){if(a.hasOwnProperty(b)){this.core[b]=a[b]}}}};p.prototype.setViewport=function(a){this.core.viewport=a?{x:a.x||1,y:a.y||1,width:a.width||1e3,height:a.height||1e3}:undefined};p.prototype.getViewport=function(){return this.core.viewport?{x:this.core.viewport.x,y:this.core.viewport.y,width:this.core.viewport.width,height:this.core.viewport.height}:undefined};p.prototype.setScissor=function(a){this.core.scissor=a?{x:a.x||1,y:a.y||1,width:a.width||1e3,height:a.height||1e3}:undefined};p.prototype.getScissor=function(){return this.core.scissor?{x:this.core.scissor.x,y:this.core.scissor.y,width:this.core.scissor.width,height:this.core.scissor.height}:undefined};p.prototype.setClear=function(a){this.core.clear=a?{r:a.r||0,g:a.g||0,b:a.b||0}:undefined};p.prototype.getClear=function(){return this.core.clear?{r:this.core.clear.r,g:this.core.clear.g,b:this.core.clear.b}:null};p.prototype.setEnableBlend=function(a){this.core.enableBlend=a};p.prototype.getEnableBlend=function(){return this.core.enableBlend};p.prototype.setBlendColor=function(a){this.core.blendColor=a?{r:a.r||0,g:a.g||0,b:a.b||0,a:a.a==undefined||a.a==null?1:a.a}:undefined};p.prototype.getBlendColor=function(){return this.core.blendColor?{r:this.core.blendColor.r,g:this.core.blendColor.g,b:this.core.blendColor.b,a:this.core.blendColor.a}:undefined};p.prototype.setBlendEquation=function(a){this.core.blendEquation=a};p.prototype.getBlendEquation=function(){return this.core.blendEquation};p.prototype.setBlendEquationSeparate=function(a){this.core.blendEquationSeparate=a?{rgb:a.rgb||"funcAdd",alpha:a.alpha||"funcAdd"}:undefined};p.prototype.getBlendEquationSeparate=function(){return this.core.blendEquationSeparate?{rgb:this.core.rgb,alpha:this.core.alpha}:undefined};p.prototype.setBlendFunc=function(a){this.core.blendFunc=a?{sfactor:a.sfactor||"srcAlpha",dfactor:a.dfactor||"one"}:undefined};p.prototype.getBlendFunc=function(){return this.core.blendFunc?{sfactor:this.core.sfactor,dfactor:this.core.dfactor}:undefined};p.prototype.setBlendFuncSeparate=function(a){this.core.blendFuncSeparate=a?{srcRGB:a.srcRGB||"zero",dstRGB:a.dstRGB||"zero",srcAlpha:a.srcAlpha||"zero",dstAlpha:a.dstAlpha||"zero"}:undefined};p.prototype.getBlendFuncSeparate=function(){return this.core.blendFuncSeparate?{srcRGB:this.core.blendFuncSeparate.srcRGB,dstRGB:this.core.blendFuncSeparate.dstRGB,srcAlpha:this.core.blendFuncSeparate.srcAlpha,dstAlpha:this.core.blendFuncSeparate.dstAlpha}:undefined};p.prototype.setEnableCullFace=function(a){this.core.enableCullFace=a};p.prototype.getEnableCullFace=function(){return this.core.enableCullFace};p.prototype.setCullFace=function(a){this.core.cullFace=a};p.prototype.getCullFace=function(){return this.core.cullFace};p.prototype.setEnableDepthTest=function(a){this.core.enableDepthTest=a};p.prototype.getEnableDepthTest=function(){return this.core.enableDepthTest};p.prototype.setDepthFunc=function(a){this.core.depthFunc=a};p.prototype.getDepthFunc=function(){return this.core.depthFunc};p.prototype.setEnableDepthMask=function(a){this.core.enableDepthMask=a};p.prototype.getEnableDepthMask=function(){return this.core.enableDepthMask};p.prototype.setClearDepth=function(a){this.core.clearDepth=a};p.prototype.getClearDepth=function(){return this.core.clearDepth};p.prototype.setDepthRange=function(a){this.core.depthRange=a?{zNear:a.zNear==undefined||a.zNear==null?0:a.zNear,zFar:a.zFar==undefined||a.zFar==null?1:a.zFar}:undefined};p.prototype.getDepthRange=function(){return this.core.depthRange?{zNear:this.core.depthRange.zNear,zFar:this.core.depthRange.zFar}:undefined};p.prototype.setFrontFace=function(a){this.core.frontFace=a};p.prototype.getFrontFace=function(){return this.core.frontFace};p.prototype.setLineWidth=function(a){this.core.lineWidth=a};p.prototype.getLineWidth=function(){return this.core.lineWidth};p.prototype.setEnableScissorTest=function(a){this.core.enableScissorTest=a};p.prototype.getEnableScissorTest=function(){return this.core.enableScissorTest};p.prototype.setClearStencil=function(a){this.core.clearStencil=a};p.prototype.getClearStencil=function(){return this.core.clearStencil};p.prototype.setColorMask=function(a){this.core.colorMask=a?{r:a.r||0,g:a.g||0,b:a.b||0,a:a.a==undefined||a.a==null?1:a.a}:undefined};p.prototype.getColorMask=function(){return this.core.colorMask?{r:this.core.colorMask.r,g:this.core.colorMask.g,b:this.core.colorMask.b,a:this.core.colorMask.a}:undefined};p.prototype.setWireframe=function(a){this.core.wireframe=a};p.prototype.getWireframe=function(){return this.core.wireframe};p.prototype.setHighlight=function(a){this.core.highlight=a};p.prototype.getHighlight=function(){return this.core.highlight};p.prototype.setEnableClip=function(a){this.core.enableClip=a};p.prototype.getEnableClip=function(){return this.core.enableClip};p.prototype.setEnableFog=function(a){this.core.enableFog=a};p.prototype.getEnableFog=function(){return this.core.enableFog};p.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};p.prototype._preCompile=function(){if(this._compileMemoLevel==0){this._props=f(this.core);this._compileMemoLevel=1}k(this.core.id,this._props)};p.prototype._postCompile=function(){o()}};(function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(e){if(d){if(c>0){SceneJS_DrawList.setFlags(a[c-1],b[c-1])}else{SceneJS_DrawList.setFlags()}d=false}});var e=SceneJS.createNodeType("flags");e.prototype._init=function(a){if(this.core._nodeCount==1){if(!a.flags){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"flags node 'flags' attribute missing ")}this.core.flags={};this.setFlags(a.flags)}};e.prototype.setFlags=function(a){SceneJS._apply(a,this.core.flags,true)};e.prototype.addFlags=function(a){SceneJS._apply(a,this.core.flags)};e.prototype.getFlags=function(){return SceneJS._shallowClone(this.core.flags)};e.prototype._compile=function(){a[c]=this.attr.id;b[c]=this.core.flags;c++;d=true;this._compileNodes();c--;d=true}})();(function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(e){if(d){if(c>0){SceneJS_DrawList.setTag(a[c-1],b[c-1])}else{SceneJS_DrawList.setTag()}d=false}});var e=SceneJS.createNodeType("tag");e.prototype._init=function(a){if(this.core._nodeCount==1){if(!a.tag){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"tag node attribute missing : 'tag'")}this.core.tag="enabled";this.setTag(a.tag)}};e.prototype.setTag=function(a){var b=this.core;b.tag=a;b.pattern=null;b.matched=false};e.prototype.getTag=function(){return this.core.tag};e.prototype._compile=function(){a[c]=this.attr.id;b[c]=this.core;c++;d=true;this._compileNodes();c--;d=true}})();var SceneJS_sceneStatusModule=new function(){this.sceneStatus={};var a=this;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_CREATED,function(b){a.sceneStatus[b.sceneId]={numLoading:0}});this.nodeLoading=function(a){this.sceneStatus[a.scene.attr.id].numLoading++};this.nodeLoaded=function(a){this.sceneStatus[a.scene.attr.id].numLoading--}};new function(){function c(a){if(document.getElementById(a.canvas.canvasId)){if(a.vertexBuf){a.vertexBuf.destroy()}if(a.normalBuf){a.normalBuf.destroy()}if(a.indexBuf){a.indexBuf.destroy()}if(a.uvBuf){a.uvBuf.destroy()}if(a.uvBuf2){a.uvBuf2.destroy()}if(a.colorBuf){a.colorBuf.destroy()}}}function d(a,b){switch(b){case"points":return a.POINTS;case"lines":return a.LINES;case"line-loop":return a.LINE_LOOP;case"line-strip":return a.LINE_STRIP;case"triangles":return a.TRIANGLES;case"triangle-strip":return a.TRIANGLE_STRIP;case"triangle-fan":return a.TRIANGLE_FAN;default:throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"SceneJS.geometry primitive unsupported: '"+b+"' - supported types are: 'points', 'lines', 'line-loop', "+"'line-strip', 'triangles', 'triangle-strip' and 'triangle-fan'")}}function e(a,b,c,d){if(typeof b=="string"){var e=SceneJS.Services.getService(SceneJS.Services.GEO_LOADER_SERVICE_ID);e.loadGeometry(b,function(b){c(g(a,b,d))})}else{var h=f(b,d);h.primitive=b.primitive;return g(a,h)}}function f(a,b){return{positions:a.positions?new Float32Array(b.scale||b.origin?h(a.positions,b):a.positions):undefined,normals:a.normals?new Float32Array(a.normals):undefined,uv:a.uv?new Float32Array(a.uv):undefined,uv2:a.uv2?new Float32Array(a.uv2):undefined,colors:a.colors?new Float32Array(a.colors):undefined,indices:a.indices?new Int32Array(a.indices):undefined}}function g(a,b){var c=a.canvas.context;if(!b.primitive){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"SceneJS.geometry node property expected : primitive")}var e=c.STATIC_DRAW;var f;var g;var h;var i;var j;var k;try{if(b.positions&&b.positions.length>0){f=new SceneJS_webgl_ArrayBuffer(c,c.ARRAY_BUFFER,b.positions,b.positions.length,3,e)}if(b.normals&&b.normals.length>0){g=new SceneJS_webgl_ArrayBuffer(c,c.ARRAY_BUFFER,b.normals,b.normals.length,3,e)}if(b.uv&&b.uv.length>0){if(b.uv){h=new SceneJS_webgl_ArrayBuffer(c,c.ARRAY_BUFFER,b.uv,b.uv.length,2,e)}}if(b.uv2&&b.uv2.length>0){if(b.uv2){i=new SceneJS_webgl_ArrayBuffer(c,c.ARRAY_BUFFER,b.uv2,b.uv2.length,2,e)}}if(b.colors&&b.colors.length>0){if(b.colors){j=new SceneJS_webgl_ArrayBuffer(c,c.ARRAY_BUFFER,b.colors,b.colors.length,4,e)}}var l;if(b.indices&&b.indices.length>0){l=d(c,b.primitive);k=new SceneJS_webgl_ArrayBuffer(c,c.ELEMENT_ARRAY_BUFFER,new Uint16Array(b.indices),b.indices.length,3,e)}var m={fixed:true,primitive:l,scene:a,canvas:a.canvas,context:c,vertexBuf:f,normalBuf:g,indexBuf:k,uvBuf:h,uvBuf2:i,colorBuf:j,arrays:b};if(b.positions){}return m}catch(n){if(f){f.destroy()}if(g){g.destroy()}if(h){h.destroy()}if(i){i.destroy()}if(j){j.destroy()}if(k){k.destroy()}throw n}}function h(a,b){var c=a.slice(0);if(b.scale){var d=b.scale.x!=undefined?b.scale.x:1;var e=b.scale.y!=undefined?b.scale.y:1;var f=b.scale.z!=undefined?b.scale.z:1;for(var g=0,h=c.length;g<h;g+=3){c[g+0]*=d;c[g+1]*=e;c[g+2]*=f}}if(b.origin){var i=b.origin.x!=undefined?b.origin.x:0;var j=b.origin.y!=undefined?b.origin.y:0;var k=b.origin.z!=undefined?b.origin.z:0;for(var g=0,h=c.length;g<h;g+=3){c[g+0]-=i;c[g+1]-=j;c[g+2]-=k}}return c}function i(a){c(a)}function j(c,d){if(!d.vertexBuf){d=k(d)}if(d.indexBuf){SceneJS_DrawList.setGeometry(c,d)}a[b++]=d}function k(c){var d={primitive:c.primitive,boundary:c.boundary,normalBuf:c.normalBuf,uvBuf:c.uvBuf,uvBuf2:c.uvBuf2,colorBuf:c.colorBuf,indexBuf:c.indexBuf};for(var e=b-1;e>=0;e--){if(a[e].vertexBuf){d.vertexBuf=a[e].vertexBuf;d.boundary=a[e].boundary;d.normalBuf=a[e].normalBuf;d.uvBuf=a[e].uvBuf;d.uvBuf2=a[e].uvBuf2;d.colorBuf=a[e].colorBuf;return d}}return d}function l(){b--}var a=[];var b=0;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_CREATED,function(){b=0});window.SceneJS_geometry=SceneJS.createNodeType("geometry");SceneJS_geometry.prototype._init=function(a){if(this.core._nodeCount==1){var b={origin:a.origin,scale:a.scale};if(a.create instanceof Function){var c=a.create();SceneJS._apply(e(this.scene,c,null,b),this.core)}else if(a.stream){this._stream=a.stream;this.core._loading=true;var d=this;e(this.scene,this._stream,function(a){SceneJS._apply(a,d.core);d.core._loading=false;SceneJS_compileModule.nodeUpdated(d,"loaded")},b)}else{var f={positions:a.positions||[],normals:a.normals||[],colors:a.colors||[],indices:a.indices||[],uv:a.uv||[],uv2:a.uv2||[],primitive:a.primitive||"triangles"};SceneJS._apply(e(this.scene,f,null,b),this.core)}}};SceneJS_geometry.prototype.getStream=function(){return this._stream};SceneJS_geometry.prototype.getPositions=function(){return this._getArrays().positions};SceneJS_geometry.prototype.setPositions=function(a){this.core.vertexBuf.bind();this.core.vertexBuf.setData(a.positions,a.offset||0)};SceneJS_geometry.prototype.getNormals=function(){return this._getArrays().normals};SceneJS_geometry.prototype.setNormals=function(a){this.core.normalBuf.bind();this.core.normalBuf.setData(a.normals,a.offset||0)};SceneJS_geometry.prototype.getColors=function(){return this._getArrays().colors};SceneJS_geometry.prototype.setColors=function(a){this.core.colorBuf.bind();this.core.colorBuf.setData(a.colors,a.offset||0)};SceneJS_geometry.prototype.getIndices=function(){return this._getArrays().indices};SceneJS_geometry.prototype.getUv=function(){return this._getArrays().uv};SceneJS_geometry.prototype.setUv=function(a){this.core.uvBuf.bind();this.core.uvBuf.setData(a.uv,a.offset||0)};SceneJS_geometry.prototype.getUv2=function(){return this._getArrays().uv2};SceneJS_geometry.prototype.setUv2=function(a){this.core.uvBuf2.bind();this.core.uvBuf2.setData(a.uv2,a.offset||0)};SceneJS_geometry.prototype.getPrimitive=function(){return this.attr.primitive};SceneJS_geometry.prototype._getArrays=function(){if(this.attr.positions){return this.attr}else{if(!this.core){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_ILLEGAL_STATE,"Invalid node state exception: geometry stream not loaded yet - can't query geometry data yet")}return this.core.arrays}};SceneJS_geometry.prototype.getBoundary=function(){if(this._boundary){return this._boundary}var a=this._getArrays().positions;this._boundary={xmin:SceneJS_math_MAX_DOUBLE,ymin:SceneJS_math_MAX_DOUBLE,zmin:SceneJS_math_MAX_DOUBLE,xmax:SceneJS_math_MIN_DOUBLE,ymax:SceneJS_math_MIN_DOUBLE,zmax:SceneJS_math_MIN_DOUBLE};var b,c,d;for(var e=0,f=a.length-2;e<f;e+=3){b=a[e];c=a[e+1];d=a[e+2];if(b<this._boundary.xmin){this._boundary.xmin=b}if(c<this._boundary.ymin){this._boundary.ymin=c}if(d<this._boundary.zmin){this._boundary.zmin=d}if(b>this._boundary.xmax){this._boundary.xmax=b}if(c>this._boundary.ymax){this._boundary.ymax=c}if(d>this._boundary.zmax){this._boundary.zmax=d}}return this._boundary};SceneJS_geometry.prototype._compile=function(){if(!this.core._loading){j(this.attr.id,this.core)}this._compileNodes();if(!this.core._loading){l()}};SceneJS_geometry.prototype._destroy=function(){if(this.core._nodeCount==1){i(this.core);SceneJS_DrawList.removeGeometry(this.scene.attr.id,this.attr.id)}}};(function(){function a(){var a=[[-3,1.65,0],[-2.98711,1.65,-.098438],[-2.98711,1.65,.098438],[-2.98538,1.56732,-.049219],[-2.98538,1.56732,.049219],[-2.9835,1.48308,0],[-2.98189,1.72347,-.049219],[-2.98189,1.72347,.049219],[-2.97656,1.79853,0],[-2.9709,1.48621,-.098438],[-2.9709,1.48621,.098438],[-2.96388,1.79534,-.098438],[-2.96388,1.79534,.098438],[-2.96221,1.57017,-.133594],[-2.96221,1.57017,.133594],[-2.95864,1.72057,-.133594],[-2.95864,1.72057,.133594],[-2.95313,1.65,-.16875],[-2.95313,1.65,.16875],[-2.95247,1.40374,-.049219],[-2.95247,1.40374,.049219],[-2.9377,1.49447,-.16875],[-2.9377,1.49447,.16875],[-2.93523,1.85215,-.049219],[-2.93523,1.85215,.049219],[-2.93359,1.32012,0],[-2.93045,1.78693,-.16875],[-2.93045,1.78693,.16875],[-2.93037,1.4115,-.133594],[-2.93037,1.4115,.133594],[-2.92188,1.32553,-.098438],[-2.92188,1.32553,.098438],[-2.91278,1.84417,-.133594],[-2.91278,1.84417,.133594],[-2.90625,1.91016,0],[-2.89423,1.90457,-.098438],[-2.89423,1.90457,.098438],[-2.89138,1.5791,-.196875],[-2.89138,1.5791,.196875],[-2.89099,1.3398,-.16875],[-2.89099,1.3398,.16875],[-2.89065,1.71208,-.196875],[-2.89065,1.71208,.196875],[-2.88346,1.24579,-.048343],[-2.88346,1.24579,.048343],[-2.86346,1.25713,-.132718],[-2.86346,1.25713,.132718],[-2.86266,1.43483,-.196875],[-2.86266,1.43483,.196875],[-2.86255,1.88983,-.16875],[-2.86255,1.88983,.16875],[-2.85,1.65,-.225],[-2.85,1.65,.225],[-2.84971,1.16155,0],[-2.8471,1.82082,-.196875],[-2.8471,1.82082,.196875],[-2.84194,1.94692,-.049219],[-2.84194,1.94692,.049219],[-2.829,1.7614,-.225],[-2.829,1.7614,.225],[-2.82867,1.17598,-.094933],[-2.82867,1.17598,.094933],[-2.8247,1.52194,-.225],[-2.8247,1.52194,.225],[-2.82115,1.9352,-.133594],[-2.82115,1.9352,.133594],[-2.81231,1.18719,-.16875],[-2.81231,1.18719,.16875],[-2.80501,1.28997,-.196875],[-2.80501,1.28997,.196875],[-2.79727,1.38311,-.225],[-2.79727,1.38311,.225],[-2.78906,1.99014,0],[-2.78836,1.69932,-.196875],[-2.78836,1.69932,.196875],[-2.77821,1.98283,-.098438],[-2.77821,1.98283,.098438],[-2.77442,1.52738,-.196875],[-2.77442,1.52738,.196875],[-2.77356,1.0986,-.084375],[-2.77356,1.0986,.084375],[-2.76641,1.84512,-.225],[-2.76641,1.84512,.225],[-2.76034,1.9009,-.196875],[-2.76034,1.9009,.196875],[-2.7496,1.96356,-.16875],[-2.7496,1.96356,.16875],[-2.74831,1.7857,-.196875],[-2.74831,1.7857,.196875],[-2.74688,1.65,-.16875],[-2.74688,1.65,.16875],[-2.73125,1.00781,0],[-2.72756,1.73587,-.16875],[-2.72756,1.73587,.16875],[-2.72036,1.69083,-.133594],[-2.72036,1.69083,.133594],[-2.71948,1.24977,-.225],[-2.71948,1.24977,.225],[-2.71678,1.14468,-.196875],[-2.71678,1.14468,.196875],[-2.71289,1.65,-.098438],[-2.71289,1.65,.098438],[-2.70899,1.54177,-.133594],[-2.70899,1.54177,.133594],[-2.70354,1.42641,-.16875],[-2.70354,1.42641,.16875],[-2.70098,1.03784,-.16875],[-2.70098,1.03784,.16875],[-2.7,1.65,0],[-2.69965,2.01079,-.048346],[-2.69965,2.01079,.048346],[-2.69712,1.68793,-.049219],[-2.69712,1.68793,.049219],[-2.69413,1.72746,-.098438],[-2.69413,1.72746,.098438],[-2.68662,1.54669,-.049219],[-2.68662,1.54669,.049219],[-2.68263,1.76235,-.133594],[-2.68263,1.76235,.133594],[-2.68148,1.99646,-.132721],[-2.68148,1.99646,.132721],[-2.68144,1.72427,0],[-2.67574,1.27085,-.196875],[-2.67574,1.27085,.196875],[-2.67265,1.44068,-.098438],[-2.67265,1.44068,.098438],[-2.67026,1.8004,-.16875],[-2.67026,1.8004,.16875],[-2.6678,1.84623,-.196875],[-2.6678,1.84623,.196875],[-2.66279,1.9051,-.225],[-2.66279,1.9051,.225],[-2.66094,1.44609,0],[-2.66018,1.75437,-.049219],[-2.66018,1.75437,.049219],[-2.63858,1.78567,-.098438],[-2.63858,1.78567,.098438],[-2.63438,1.10391,-.225],[-2.63438,1.10391,.225],[-2.63074,1.95674,-.196875],[-2.63074,1.95674,.196875],[-2.62656,1.78008,0],[-2.625,2.04375,0],[-2.62464,1.30502,-.132813],[-2.62464,1.30502,.132813],[-2.60642,1.31745,-.048438],[-2.60642,1.31745,.048438],[-2.60632,2.02644,-.094945],[-2.60632,2.02644,.094945],[-2.5918,2.01299,-.16875],[-2.5918,2.01299,.16875],[-2.57173,1.83429,-.16875],[-2.57173,1.83429,.16875],[-2.56777,1.16997,-.16875],[-2.56777,1.16997,.16875],[-2.5546,1.18304,-.095315],[-2.5546,1.18304,.095315],[-2.54975,1.89059,-.196875],[-2.54975,1.89059,.196875],[-2.54954,.878984,-.084375],[-2.54954,.878984,.084375],[-2.54643,1.83197,-.132721],[-2.54643,1.83197,.132721],[-2.5375,1.2,0],[-2.52721,1.8192,-.048346],[-2.52721,1.8192,.048346],[-2.51875,1.94531,-.225],[-2.51875,1.94531,.225],[-2.51683,.932671,-.196875],[-2.51683,.932671,.196875],[-2.47184,1.00649,-.196875],[-2.47184,1.00649,.196875],[-2.4457,1.87764,-.16875],[-2.4457,1.87764,.16875],[-2.43913,1.06018,-.084375],[-2.43913,1.06018,.084375],[-2.43118,1.86418,-.094945],[-2.43118,1.86418,.094945],[-2.4125,1.84687,0],[-2.38828,.716602,0],[-2.38225,.737663,-.095854],[-2.38225,.737663,.095854],[-2.37884,2.05202,-.084375],[-2.37884,2.05202,.084375],[-2.37766,.75368,-.16875],[-2.37766,.75368,.16875],[-2.36475,.798761,-.199836],[-2.36475,.798761,.199836],[-2.3543,.835254,-.225],[-2.3543,.835254,.225],[-2.34384,.871747,-.199836],[-2.34384,.871747,.199836],[-2.34115,1.99972,-.196875],[-2.34115,1.99972,.196875],[-2.33093,.916827,-.16875],[-2.33093,.916827,.16875],[-2.32031,.953906,0],[-2.28932,1.92782,-.196875],[-2.28932,1.92782,.196875],[-2.25162,1.87552,-.084375],[-2.25162,1.87552,.084375],[-2.24741,.882285,-.084375],[-2.24741,.882285,.084375],[-2.17363,.844043,0],[-2.16853,.826951,-.097184],[-2.16853,.826951,.097184],[-2.16477,.814364,-.16875],[-2.16477,.814364,.16875],[-2.15688,.786694,-.187068],[-2.15688,.786694,.187068],[-2.15625,2.09297,0],[-2.15412,.74052,-.215193],[-2.15412,.74052,.215193],[-2.15017,.694734,-.215193],[-2.15017,.694734,.215193],[-2.14742,.64856,-.187068],[-2.14742,.64856,.187068],[-2.14496,.612777,-.132948],[-2.14496,.612777,.132948],[-2.14371,.591789,-.048573],[-2.14371,.591789,.048573],[-2.14233,2.05836,-.16875],[-2.14233,2.05836,.16875],[-2.11172,1.98223,-.225],[-2.11172,1.98223,.225],[-2.08447,.789526,-.048905],[-2.08447,.789526,.048905],[-2.0811,1.90609,-.16875],[-2.0811,1.90609,.16875],[-2.07834,.770387,-.13328],[-2.07834,.770387,.13328],[-2.06719,1.87148,0],[-2,.75,0],[-1.9957,.737109,-.098438],[-1.9957,.737109,.098438],[-1.98438,.703125,-.16875],[-1.98438,.703125,.16875],[-1.97852,.59165,0],[-1.96937,.670825,-.202656],[-1.96937,.670825,.202656],[-1.96836,.655078,-.210938],[-1.96836,.655078,.210938],[-1.96,.75,-.4075],[-1.96,.75,.4075],[-1.95873,.925195,-.201561],[-1.95873,.925195,.201561],[-1.95703,1.10039,0],[-1.95,.6,-.225],[-1.95,.6,.225],[-1.93895,.59165,-.403123],[-1.93895,.59165,.403123],[-1.93164,.544922,-.210938],[-1.93164,.544922,.210938],[-1.93069,.522583,-.198676],[-1.93069,.522583,.198676],[-1.92188,.453516,0],[-1.91789,1.10039,-.398745],[-1.91789,1.10039,.398745],[-1.91562,.496875,-.16875],[-1.91562,.496875,.16875],[-1.9043,.462891,-.098438],[-1.9043,.462891,.098438],[-1.9,.45,0],[-1.89228,.670825,-.593047],[-1.89228,.670825,.593047],[-1.88344,.453516,-.391582],[-1.88344,.453516,.391582],[-1.88206,.925195,-.589845],[-1.88206,.925195,.589845],[-1.88139,1.28613,-.193602],[-1.88139,1.28613,.193602],[-1.85512,.522583,-.581402],[-1.85512,.522583,.581402],[-1.845,.75,-.785],[-1.845,.75,.785],[-1.84375,1.47187,0],[-1.83317,1.89068,-.084375],[-1.83317,1.89068,.084375],[-1.8318,1.94649,-.196875],[-1.8318,1.94649,.196875],[-1.82992,2.02323,-.196875],[-1.82992,2.02323,.196875],[-1.82855,2.07904,-.084375],[-1.82855,2.07904,.084375],[-1.82518,.59165,-.776567],[-1.82518,.59165,.776567],[-1.81758,.343945,-.187036],[-1.81758,.343945,.187036],[-1.80775,1.28613,-.566554],[-1.80775,1.28613,.566554],[-1.80687,1.47187,-.375664],[-1.80687,1.47187,.375664],[-1.80536,1.10039,-.768135],[-1.80536,1.10039,.768135],[-1.77293,.453516,-.754336],[-1.77293,.453516,.754336],[-1.75,.234375,0],[-1.74644,.343945,-.547339],[-1.74644,.343945,.547339],[-1.74433,.670825,-.949871],[-1.74433,.670825,.949871],[-1.73491,.925195,-.944741],[-1.73491,.925195,.944741],[-1.715,.234375,-.356563],[-1.715,.234375,.356562],[-1.71008,.522583,-.931218],[-1.71008,.522583,.931218],[-1.70086,1.47187,-.723672],[-1.70086,1.47187,.723672],[-1.6664,1.28613,-.907437],[-1.6664,1.28613,.907437],[-1.6625,.75,-1.125],[-1.6625,.75,1.125],[-1.65516,1.86094,-.170322],[-1.65516,1.86094,.170322],[-1.64742,.159961,-.169526],[-1.64742,.159961,.169526],[-1.64464,.59165,-1.11292],[-1.64464,.59165,1.11292],[-1.62678,1.10039,-1.10083],[-1.62678,1.10039,1.10083],[-1.61437,.234375,-.686875],[-1.61437,.234375,.686875],[-1.60989,.343945,-.87666],[-1.60989,.343945,.87666],[-1.6,1.875,0],[-1.59756,.453516,-1.08106],[-1.59756,.453516,1.08106],[-1.59037,1.86094,-.498428],[-1.59037,1.86094,.498428],[-1.58438,1.91016,-.16875],[-1.58438,1.91016,.16875],[-1.58294,.159961,-.496099],[-1.58294,.159961,.496099],[-1.57813,.085547,0],[-1.55,1.9875,-.225],[-1.55,1.9875,.225],[-1.54656,.085547,-.321543],[-1.54656,.085547,.321543],[-1.53297,.670825,-1.26567],[-1.53297,.670825,1.26567],[-1.53262,1.47187,-1.03711],[-1.53262,1.47187,1.03711],[-1.52469,.925195,-1.25883],[-1.52469,.925195,1.25883],[-1.52367,.042773,-.156792],[-1.52367,.042773,.156792],[-1.51563,2.06484,-.16875],[-1.51563,2.06484,.16875],[-1.50287,.522583,-1.24081],[-1.50287,.522583,1.24081],[-1.5,0,0],[-1.5,2.1,0],[-1.5,2.25,0],[-1.47,0,-.305625],[-1.47,0,.305625],[-1.47,2.25,-.305625],[-1.47,2.25,.305625],[-1.46602,1.86094,-.79832],[-1.46602,1.86094,.79832],[-1.46449,1.28613,-1.20912],[-1.46449,1.28613,1.20912],[-1.46403,.042773,-.458833],[-1.46403,.042773,.458833],[-1.45986,2.28691,-.150226],[-1.45986,2.28691,.150226],[-1.45917,.159961,-.79459],[-1.45917,.159961,.79459],[-1.45582,.085547,-.619414],[-1.45582,.085547,.619414],[-1.45469,.234375,-.984375],[-1.45469,.234375,.984375],[-1.44922,2.32383,0],[-1.42023,2.32383,-.295278],[-1.42023,2.32383,.295278],[-1.42,.75,-1.42],[-1.42,.75,1.42],[-1.41482,.343945,-1.16812],[-1.41482,.343945,1.16812],[-1.41191,2.33613,-.145291],[-1.41191,2.33613,.145291],[-1.40475,.59165,-1.40475],[-1.40475,.59165,1.40475],[-1.40313,2.34844,0],[-1.40272,2.28691,-.439618],[-1.40272,2.28691,.439618],[-1.4,2.25,0],[-1.38949,1.10039,-1.38949],[-1.38949,1.10039,1.38949],[-1.38375,0,-.58875],[-1.38375,0,.58875],[-1.38375,2.25,-.58875],[-1.38375,2.25,.58875],[-1.38047,2.32383,0],[-1.37788,2.33613,-.141789],[-1.37788,2.33613,.141789],[-1.37633,2.28691,-.14163],[-1.37633,2.28691,.14163],[-1.37506,2.34844,-.285887],[-1.37506,2.34844,.285887],[-1.372,2.25,-.28525],[-1.372,2.25,.28525],[-1.36453,.453516,-1.36453],[-1.36453,.453516,1.36453],[-1.35665,2.33613,-.425177],[-1.35665,2.33613,.425177],[-1.35286,2.32383,-.281271],[-1.35286,2.32383,.281271],[-1.34957,.042773,-.734902],[-1.34957,.042773,.734902],[-1.3369,2.32383,-.568818],[-1.3369,2.32383,.568818],[-1.32395,2.33613,-.414929],[-1.32395,2.33613,.414929],[-1.32246,2.28691,-.414464],[-1.32246,2.28691,.414464],[-1.31182,.085547,-.887695],[-1.31182,.085547,.887695],[-1.30906,1.47187,-1.30906],[-1.30906,1.47187,1.30906],[-1.3,2.25,0],[-1.29438,2.34844,-.550727],[-1.29438,2.34844,.550727],[-1.29305,2.28691,-.704126],[-1.29305,2.28691,.704126],[-1.2915,2.25,-.5495],[-1.2915,2.25,.5495],[-1.28839,1.86094,-1.06373],[-1.28839,1.86094,1.06373],[-1.28237,.159961,-1.05876],[-1.28237,.159961,1.05876],[-1.274,2.25,-.264875],[-1.274,2.25,.264875],[-1.27348,2.32383,-.541834],[-1.27348,2.32383,.541834],[-1.26766,2.2749,-.130448],[-1.26766,2.2749,.130448],[-1.26567,.670825,-1.53297],[-1.26567,.670825,1.53297],[-1.26094,2.2998,0],[-1.25883,.925195,-1.52469],[-1.25883,.925195,1.52469],[-1.25057,2.33613,-.680997],[-1.25057,2.33613,.680997],[-1.24688,0,-.84375],[-1.24688,0,.84375],[-1.24688,2.25,-.84375],[-1.24688,2.25,.84375],[-1.2425,.234375,-1.2425],[-1.2425,.234375,1.2425],[-1.24081,.522583,-1.50287],[-1.24081,.522583,1.50287],[-1.23572,2.2998,-.256916],[-1.23572,2.2998,.256916],[-1.22043,2.33613,-.664583],[-1.22043,2.33613,.664583],[-1.21906,2.28691,-.663837],[-1.21906,2.28691,.663837],[-1.21805,2.2749,-.38174],[-1.21805,2.2749,.38174],[-1.20912,1.28613,-1.46449],[-1.20912,1.28613,1.46449],[-1.20466,2.32383,-.815186],[-1.20466,2.32383,.815186],[-1.19925,2.25,-.51025],[-1.19925,2.25,.51025],[-1.19651,2.31943,-.123125],[-1.19651,2.31943,.123125],[-1.18604,.042773,-.979229],[-1.18604,.042773,.979229],[-1.16812,.343945,-1.41482],[-1.16812,.343945,1.41482],[-1.16635,2.34844,-.789258],[-1.16635,2.34844,.789258],[-1.16375,2.25,-.7875],[-1.16375,2.25,.7875],[-1.16322,2.2998,-.494918],[-1.16322,2.2998,.494918],[-1.15625,2.33906,0],[-1.14968,2.31943,-.360312],[-1.14968,2.31943,.360312],[-1.14752,2.32383,-.776514],[-1.14752,2.32383,.776514],[-1.13637,2.28691,-.93822],[-1.13637,2.28691,.93822],[-1.13312,2.33906,-.235586],[-1.13312,2.33906,.235586],[-1.125,.75,-1.6625],[-1.125,.75,1.6625],[-1.12281,2.2749,-.611424],[-1.12281,2.2749,.611424],[-1.12047,.085547,-1.12047],[-1.12047,.085547,1.12047],[-1.11292,.59165,-1.64464],[-1.11292,.59165,1.64464],[-1.10083,1.10039,-1.62678],[-1.10083,1.10039,1.62678],[-1.09904,2.33613,-.907402],[-1.09904,2.33613,.907402],[-1.08106,.453516,-1.59756],[-1.08106,.453516,1.59756],[-1.08063,2.25,-.73125],[-1.08063,2.25,.73125],[-1.07255,2.33613,-.885531],[-1.07255,2.33613,.885531],[-1.07135,2.28691,-.884537],[-1.07135,2.28691,.884537],[-1.06664,2.33906,-.453828],[-1.06664,2.33906,.453828],[-1.065,0,-1.065],[-1.065,0,1.065],[-1.065,2.25,-1.065],[-1.065,2.25,1.065],[-1.06373,1.86094,-1.28839],[-1.06373,1.86094,1.28839],[-1.05979,2.31943,-.577104],[-1.05979,2.31943,.577104],[-1.05876,.159961,-1.28237],[-1.05876,.159961,1.28237],[-1.04815,2.2998,-.709277],[-1.04815,2.2998,.709277],[-1.03711,1.47187,-1.53262],[-1.03711,1.47187,1.53262],[-1.02894,2.32383,-1.02894],[-1.02894,2.32383,1.02894],[-.996219,2.34844,-.996219],[-.996219,2.34844,.996219],[-.994,2.25,-.994],[-.994,2.25,.994],[-.986761,2.2749,-.814698],[-.986761,2.2749,.814698],[-.984375,.234375,-1.45469],[-.984375,.234375,1.45469],[-.980719,2.36953,-.10092],[-.980719,2.36953,.10092],[-.980133,2.32383,-.980133],[-.980133,2.32383,.980133],[-.979229,.042773,-1.18604],[-.979229,.042773,1.18604],[-.961133,2.33906,-.650391],[-.961133,2.33906,.650391],[-.949871,.670825,-1.74433],[-.949871,.670825,1.74433],[-.944741,.925195,-1.73491],[-.944741,.925195,1.73491],[-.942332,2.36953,-.29533],[-.942332,2.36953,.29533],[-.93822,2.28691,-1.13637],[-.93822,2.28691,1.13637],[-.931373,2.31943,-.768968],[-.931373,2.31943,.768968],[-.931218,.522583,-1.71008],[-.931218,.522583,1.71008],[-.923,2.25,-.923],[-.923,2.25,.923],[-.907437,1.28613,-1.6664],[-.907437,1.28613,1.6664],[-.907402,2.33613,-1.09904],[-.907402,2.33613,1.09904],[-.895266,2.2998,-.895266],[-.895266,2.2998,.895266],[-.887695,.085547,-1.31182],[-.887695,.085547,1.31182],[-.885531,2.33613,-1.07255],[-.885531,2.33613,1.07255],[-.884537,2.28691,-1.07135],[-.884537,2.28691,1.07135],[-.87666,.343945,-1.60989],[-.87666,.343945,1.60989],[-.868654,2.36953,-.473023],[-.868654,2.36953,.473023],[-.84375,0,-1.24688],[-.84375,0,1.24688],[-.84375,2.25,-1.24688],[-.84375,2.25,1.24688],[-.825,2.4,0],[-.820938,2.33906,-.820938],[-.820938,2.33906,.820938],[-.815186,2.32383,-1.20466],[-.815186,2.32383,1.20466],[-.814698,2.2749,-.986761],[-.814698,2.2749,.986761],[-.8085,2.4,-.168094],[-.8085,2.4,.168094],[-.79832,1.86094,-1.46602],[-.79832,1.86094,1.46602],[-.79459,.159961,-1.45917],[-.79459,.159961,1.45917],[-.789258,2.34844,-1.16635],[-.789258,2.34844,1.16635],[-.7875,2.25,-1.16375],[-.7875,2.25,1.16375],[-.785,.75,-1.845],[-.785,.75,1.845],[-.776567,.59165,-1.82518],[-.776567,.59165,1.82518],[-.776514,2.32383,-1.14752],[-.776514,2.32383,1.14752],[-.768968,2.31943,-.931373],[-.768968,2.31943,.931373],[-.768135,1.10039,-1.80536],[-.768135,1.10039,1.80536],[-.7634,2.36953,-.630285],[-.7634,2.36953,.630285],[-.761063,2.4,-.323813],[-.761063,2.4,.323813],[-.754336,.453516,-1.77293],[-.754336,.453516,1.77293],[-.734902,.042773,-1.34957],[-.734902,.042773,1.34957],[-.73125,2.25,-1.08063],[-.73125,2.25,1.08063],[-.723672,1.47187,-1.70086],[-.723672,1.47187,1.70086],[-.709277,2.2998,-1.04815],[-.709277,2.2998,1.04815],[-.704126,2.28691,-1.29305],[-.704126,2.28691,1.29305],[-.686875,.234375,-1.61437],[-.686875,.234375,1.61437],[-.685781,2.4,-.464063],[-.685781,2.4,.464063],[-.680997,2.33613,-1.25057],[-.680997,2.33613,1.25057],[-.664583,2.33613,-1.22043],[-.664583,2.33613,1.22043],[-.663837,2.28691,-1.21906],[-.663837,2.28691,1.21906],[-.650391,2.33906,-.961133],[-.650391,2.33906,.961133],[-.631998,2.43047,-.064825],[-.631998,2.43047,.064825],[-.630285,2.36953,-.7634],[-.630285,2.36953,.7634],[-.619414,.085547,-1.45582],[-.619414,.085547,1.45582],[-.611424,2.2749,-1.12281],[-.611424,2.2749,1.12281],[-.607174,2.43047,-.190548],[-.607174,2.43047,.190548],[-.593047,.670825,-1.89228],[-.593047,.670825,1.89228],[-.589845,.925195,-1.88206],[-.589845,.925195,1.88206],[-.58875,0,-1.38375],[-.58875,0,1.38375],[-.58875,2.25,-1.38375],[-.58875,2.25,1.38375],[-.58575,2.4,-.58575],[-.58575,2.4,.58575],[-.581402,.522583,-1.85512],[-.581402,.522583,1.85512],[-.577104,2.31943,-1.05979],[-.577104,2.31943,1.05979],[-.568818,2.32383,-1.3369],[-.568818,2.32383,1.3369],[-.566554,1.28613,-1.80775],[-.566554,1.28613,1.80775],[-.559973,2.43047,-.304711],[-.559973,2.43047,.304711],[-.550727,2.34844,-1.29438],[-.550727,2.34844,1.29438],[-.5495,2.25,-1.2915],[-.5495,2.25,1.2915],[-.547339,.343945,-1.74644],[-.547339,.343945,1.74644],[-.541834,2.32383,-1.27348],[-.541834,2.32383,1.27348],[-.51025,2.25,-1.19925],[-.51025,2.25,1.19925],[-.498428,1.86094,-1.59037],[-.498428,1.86094,1.59037],[-.496099,.159961,-1.58294],[-.496099,.159961,1.58294],[-.494918,2.2998,-1.16322],[-.494918,2.2998,1.16322],[-.491907,2.43047,-.40641],[-.491907,2.43047,.40641],[-.473023,2.36953,-.868654],[-.473023,2.36953,.868654],[-.464063,2.4,-.685781],[-.464063,2.4,.685781],[-.458833,.042773,-1.46403],[-.458833,.042773,1.46403],[-.45625,2.46094,0],[-.453828,2.33906,-1.06664],[-.453828,2.33906,1.06664],[-.439618,2.28691,-1.40272],[-.439618,2.28691,1.40272],[-.438241,2.46094,-.091207],[-.438241,2.46094,.091207],[-.425177,2.33613,-1.35665],[-.425177,2.33613,1.35665],[-.420891,2.46094,-.179078],[-.420891,2.46094,.179078],[-.414929,2.33613,-1.32395],[-.414929,2.33613,1.32395],[-.414464,2.28691,-1.32246],[-.414464,2.28691,1.32246],[-.4075,.75,-1.96],[-.4075,.75,1.96],[-.40641,2.43047,-.491907],[-.40641,2.43047,.491907],[-.403123,.59165,-1.93895],[-.403123,.59165,1.93895],[-.398745,1.10039,-1.91789],[-.398745,1.10039,1.91789],[-.391582,.453516,-1.88344],[-.391582,.453516,1.88344],[-.38174,2.2749,-1.21805],[-.38174,2.2749,1.21805],[-.375664,1.47187,-1.80687],[-.375664,1.47187,1.80687],[-.372159,2.46094,-.251889],[-.372159,2.46094,.251889],[-.362109,2.89717,0],[-.360312,2.31943,-1.14968],[-.360312,2.31943,1.14968],[-.356563,.234375,1.715],[-.356562,.234375,-1.715],[-.340625,2.95078,0],[-.337859,2.92397,-.069278],[-.337859,2.92397,.069278],[-.334238,2.89717,-.142705],[-.334238,2.89717,.142705],[-.330325,2.86421,-.067672],[-.330325,2.86421,.067672],[-.325,2.83125,0],[-.323938,2.46094,-.323938],[-.323938,2.46094,.323938],[-.323813,2.4,-.761063],[-.323813,2.4,.761063],[-.321543,.085547,-1.54656],[-.321543,.085547,1.54656],[-.31541,2.50547,-.064395],[-.31541,2.50547,.064395],[-.314464,2.95078,-.134407],[-.314464,2.95078,.134407],[-.305625,0,-1.47],[-.305625,0,1.47],[-.305625,2.25,-1.47],[-.305625,2.25,1.47],[-.304711,2.43047,-.559973],[-.304711,2.43047,.559973],[-.299953,2.83125,-.127984],[-.299953,2.83125,.127984],[-.29533,2.36953,-.942332],[-.29533,2.36953,.942332],[-.295278,2.32383,-1.42023],[-.295278,2.32383,1.42023],[-.287197,2.92397,-.1943],[-.287197,2.92397,.1943],[-.285887,2.34844,-1.37506],[-.285887,2.34844,1.37506],[-.28525,2.25,-1.372],[-.28525,2.25,1.372],[-.281271,2.32383,-1.35286],[-.281271,2.32383,1.35286],[-.280732,2.86421,-.189856],[-.280732,2.86421,.189856],[-.274421,2.9688,-.05638],[-.274421,2.9688,.05638],[-.267832,2.50547,-.180879],[-.267832,2.50547,.180879],[-.264875,2.25,-1.274],[-.264875,2.25,1.274],[-.25761,2.89717,-.25761],[-.25761,2.89717,.25761],[-.256916,2.2998,-1.23572],[-.256916,2.2998,1.23572],[-.251889,2.46094,-.372159],[-.251889,2.46094,.372159],[-.250872,2.75742,-.051347],[-.250872,2.75742,.051347],[-.242477,2.95078,-.242477],[-.242477,2.95078,.242477],[-.235586,2.33906,-1.13312],[-.235586,2.33906,1.13312],[-.233382,2.9688,-.158018],[-.233382,2.9688,.158018],[-.231125,2.83125,-.231125],[-.231125,2.83125,.231125],[-.230078,2.98682,0],[-.213159,2.75742,-.144103],[-.213159,2.75742,.144103],[-.212516,2.98682,-.091113],[-.212516,2.98682,.091113],[-.202656,.670825,-1.96937],[-.202656,.670825,1.96937],[-.201561,.925195,-1.95873],[-.201561,.925195,1.95873],[-.2,2.55,0],[-.198676,.522583,-1.93069],[-.198676,.522583,1.93069],[-.196875,2.68359,0],[-.1943,2.92397,-.287197],[-.1943,2.92397,.287197],[-.193602,1.28613,-1.88139],[-.193602,1.28613,1.88139],[-.190548,2.43047,-.607174],[-.190548,2.43047,.607174],[-.189856,2.86421,-.280732],[-.189856,2.86421,.280732],[-.187036,.343945,-1.81758],[-.187036,.343945,1.81758],[-.1845,2.55,-.0785],[-.1845,2.55,.0785],[-.181661,2.68359,-.077405],[-.181661,2.68359,.077405],[-.180879,2.50547,-.267832],[-.180879,2.50547,.267832],[-.179078,2.46094,-.420891],[-.179078,2.46094,.420891],[-.176295,2.5812,-.036001],[-.176295,2.5812,.036001],[-.174804,2.648,-.035727],[-.174804,2.648,.035727],[-.170322,1.86094,-1.65516],[-.170322,1.86094,1.65516],[-.169526,.159961,-1.64742],[-.169526,.159961,1.64742],[-.168094,2.4,-.8085],[-.168094,2.4,.8085],[-.166797,2.6124,0],[-.164073,2.98682,-.164073],[-.164073,2.98682,.164073],[-.158018,2.9688,-.233382],[-.158018,2.9688,.233382],[-.156792,.042773,-1.52367],[-.156792,.042773,1.52367],[-.153882,2.6124,-.065504],[-.153882,2.6124,.065504],[-.150226,2.28691,-1.45986],[-.150226,2.28691,1.45986],[-.14971,2.5812,-.101116],[-.14971,2.5812,.101116],[-.148475,2.648,-.100316],[-.148475,2.648,.100316],[-.145291,2.33613,-1.41191],[-.145291,2.33613,1.41191],[-.144103,2.75742,-.213159],[-.144103,2.75742,.213159],[-.142705,2.89717,-.334238],[-.142705,2.89717,.334238],[-.142,2.55,-.142],[-.142,2.55,.142],[-.141789,2.33613,-1.37788],[-.141789,2.33613,1.37788],[-.14163,2.28691,-1.37633],[-.14163,2.28691,1.37633],[-.139898,2.68359,-.139898],[-.139898,2.68359,.139898],[-.134407,2.95078,-.314464],[-.134407,2.95078,.314464],[-.130448,2.2749,-1.26766],[-.130448,2.2749,1.26766],[-.127984,2.83125,-.299953],[-.127984,2.83125,.299953],[-.123125,2.31943,-1.19651],[-.123125,2.31943,1.19651],[-.118458,2.6124,-.118458],[-.118458,2.6124,.118458],[-.110649,2.99341,-.022778],[-.110649,2.99341,.022778],[-.101116,2.5812,-.14971],[-.101116,2.5812,.14971],[-.10092,2.36953,-.980719],[-.10092,2.36953,.980719],[-.100316,2.648,-.148475],[-.100316,2.648,.148475],[-.094147,2.99341,-.063797],[-.094147,2.99341,.063797],[-.091207,2.46094,-.438241],[-.091207,2.46094,.438241],[-.091113,2.98682,-.212516],[-.091113,2.98682,.212516],[-.0785,2.55,-.1845],[-.0785,2.55,.1845],[-.077405,2.68359,-.181661],[-.077405,2.68359,.181661],[-.069278,2.92397,-.337859],[-.069278,2.92397,.337859],[-.067672,2.86421,-.330325],[-.067672,2.86421,.330325],[-.065504,2.6124,-.153882],[-.065504,2.6124,.153882],[-.064825,2.43047,-.631998],[-.064825,2.43047,.631998],[-.064395,2.50547,-.31541],[-.064395,2.50547,.31541],[-.063797,2.99341,-.094147],[-.063797,2.99341,.094147],[-.05638,2.9688,-.274421],[-.05638,2.9688,.274421],[-.051347,2.75742,-.250872],[-.051347,2.75742,.250872],[-.036001,2.5812,-.176295],[-.036001,2.5812,.176295],[-.035727,2.648,-.174804],[-.035727,2.648,.174804],[-.022778,2.99341,-.110649],[-.022778,2.99341,.110649],[0,0,-1.5],[0,0,1.5],[0,.085547,-1.57813],[0,.085547,1.57813],[0,.234375,-1.75],[0,.234375,1.75],[0,.453516,-1.92188],[0,.453516,1.92188],[0,.59165,-1.97852],[0,.59165,1.97852],[0,.75,-2],[0,.75,2],[0,1.10039,-1.95703],[0,1.10039,1.95703],[0,1.47187,-1.84375],[0,1.47187,1.84375],[0,2.25,-1.5],[0,2.25,-1.4],[0,2.25,-1.3],[0,2.25,1.3],[0,2.25,1.4],[0,2.25,1.5],[0,2.2998,-1.26094],[0,2.2998,1.26094],[0,2.32383,-1.44922],[0,2.32383,-1.38047],[0,2.32383,1.38047],[0,2.32383,1.44922],[0,2.33906,-1.15625],[0,2.33906,1.15625],[0,2.34844,-1.40313],[0,2.34844,1.40313],[0,2.4,-.825],[0,2.4,.825],[0,2.46094,-.45625],[0,2.46094,.45625],[0,2.55,-.2],[0,2.55,.2],[0,2.6124,-.166797],[0,2.6124,.166797],[0,2.68359,-.196875],[0,2.68359,.196875],[0,2.83125,-.325],[0,2.83125,.325],[0,2.89717,-.362109],[0,2.89717,.362109],[0,2.95078,-.340625],[0,2.95078,.340625],[0,2.98682,-.230078],[0,2.98682,.230078],[0,3,0],[.022778,2.99341,-.110649],[.022778,2.99341,.110649],[.035727,2.648,-.174804],[.035727,2.648,.174804],[.036001,2.5812,-.176295],[.036001,2.5812,.176295],[.051347,2.75742,-.250872],[.051347,2.75742,.250872],[.05638,2.9688,-.274421],[.05638,2.9688,.274421],[.063797,2.99341,-.094147],[.063797,2.99341,.094147],[.064395,2.50547,-.31541],[.064395,2.50547,.31541],[.064825,2.43047,-.631998],[.064825,2.43047,.631998],[.065504,2.6124,-.153882],[.065504,2.6124,.153882],[.067672,2.86421,-.330325],[.067672,2.86421,.330325],[.069278,2.92397,-.337859],[.069278,2.92397,.337859],[.077405,2.68359,-.181661],[.077405,2.68359,.181661],[.0785,2.55,-.1845],[.0785,2.55,.1845],[.091113,2.98682,-.212516],[.091113,2.98682,.212516],[.091207,2.46094,-.438241],[.091207,2.46094,.438241],[.094147,2.99341,-.063797],[.094147,2.99341,.063797],[.100316,2.648,-.148475],[.100316,2.648,.148475],[.10092,2.36953,-.980719],[.10092,2.36953,.980719],[.101116,2.5812,-.14971],[.101116,2.5812,.14971],[.110649,2.99341,-.022778],[.110649,2.99341,.022778],[.118458,2.6124,-.118458],[.118458,2.6124,.118458],[.123125,2.31943,-1.19651],[.123125,2.31943,1.19651],[.127984,2.83125,-.299953],[.127984,2.83125,.299953],[.130448,2.2749,-1.26766],[.130448,2.2749,1.26766],[.134407,2.95078,-.314464],[.134407,2.95078,.314464],[.139898,2.68359,-.139898],[.139898,2.68359,.139898],[.14163,2.28691,-1.37633],[.14163,2.28691,1.37633],[.141789,2.33613,-1.37788],[.141789,2.33613,1.37788],[.142,2.55,-.142],[.142,2.55,.142],[.142705,2.89717,-.334238],[.142705,2.89717,.334238],[.144103,2.75742,-.213159],[.144103,2.75742,.213159],[.145291,2.33613,-1.41191],[.145291,2.33613,1.41191],[.148475,2.648,-.100316],[.148475,2.648,.100316],[.14971,2.5812,-.101116],[.14971,2.5812,.101116],[.150226,2.28691,-1.45986],[.150226,2.28691,1.45986],[.153882,2.6124,-.065504],[.153882,2.6124,.065504],[.156792,.042773,-1.52367],[.156792,.042773,1.52367],[.158018,2.9688,-.233382],[.158018,2.9688,.233382],[.164073,2.98682,-.164073],[.164073,2.98682,.164073],[.166797,2.6124,0],[.168094,2.4,-.8085],[.168094,2.4,.8085],[.169526,.159961,-1.64742],[.169526,.159961,1.64742],[.170322,1.86094,-1.65516],[.170322,1.86094,1.65516],[.174804,2.648,-.035727],[.174804,2.648,.035727],[.176295,2.5812,-.036001],[.176295,2.5812,.036001],[.179078,2.46094,-.420891],[.179078,2.46094,.420891],[.180879,2.50547,-.267832],[.180879,2.50547,.267832],[.181661,2.68359,-.077405],[.181661,2.68359,.077405],[.1845,2.55,-.0785],[.1845,2.55,.0785],[.187036,.343945,-1.81758],[.187036,.343945,1.81758],[.189856,2.86421,-.280732],[.189856,2.86421,.280732],[.190548,2.43047,-.607174],[.190548,2.43047,.607174],[.193602,1.28613,-1.88139],[.193602,1.28613,1.88139],[.1943,2.92397,-.287197],[.1943,2.92397,.287197],[.196875,2.68359,0],[.198676,.522583,-1.93069],[.198676,.522583,1.93069],[.2,2.55,0],[.201561,.925195,-1.95873],[.201561,.925195,1.95873],[.202656,.670825,-1.96937],[.202656,.670825,1.96937],[.212516,2.98682,-.091113],[.212516,2.98682,.091113],[.213159,2.75742,-.144103],[.213159,2.75742,.144103],[.230078,2.98682,0],[.231125,2.83125,-.231125],[.231125,2.83125,.231125],[.233382,2.9688,-.158018],[.233382,2.9688,.158018],[.235586,2.33906,-1.13312],[.235586,2.33906,1.13312],[.242477,2.95078,-.242477],[.242477,2.95078,.242477],[.250872,2.75742,-.051347],[.250872,2.75742,.051347],[.251889,2.46094,-.372159],[.251889,2.46094,.372159],[.256916,2.2998,-1.23572],[.256916,2.2998,1.23572],[.25761,2.89717,-.25761],[.25761,2.89717,.25761],[.264875,2.25,-1.274],[.264875,2.25,1.274],[.267832,2.50547,-.180879],[.267832,2.50547,.180879],[.274421,2.9688,-.05638],[.274421,2.9688,.05638],[.280732,2.86421,-.189856],[.280732,2.86421,.189856],[.281271,2.32383,-1.35286],[.281271,2.32383,1.35286],[.28525,2.25,-1.372],[.28525,2.25,1.372],[.285887,2.34844,-1.37506],[.285887,2.34844,1.37506],[.287197,2.92397,-.1943],[.287197,2.92397,.1943],[.295278,2.32383,-1.42023],[.295278,2.32383,1.42023],[.29533,2.36953,-.942332],[.29533,2.36953,.942332],[.299953,2.83125,-.127984],[.299953,2.83125,.127984],[.304711,2.43047,-.559973],[.304711,2.43047,.559973],[.305625,0,-1.47],[.305625,0,1.47],[.305625,2.25,-1.47],[.305625,2.25,1.47],[.314464,2.95078,-.134407],[.314464,2.95078,.134407],[.31541,2.50547,-.064395],[.31541,2.50547,.064395],[.321543,.085547,-1.54656],[.321543,.085547,1.54656],[.323813,2.4,-.761063],[.323813,2.4,.761063],[.323938,2.46094,-.323938],[.323938,2.46094,.323938],[.325,2.83125,0],[.330325,2.86421,-.067672],[.330325,2.86421,.067672],[.334238,2.89717,-.142705],[.334238,2.89717,.142705],[.337859,2.92397,-.069278],[.337859,2.92397,.069278],[.340625,2.95078,0],[.356562,.234375,1.715],[.356563,.234375,-1.715],[.360312,2.31943,-1.14968],[.360312,2.31943,1.14968],[.362109,2.89717,0],[.372159,2.46094,-.251889],[.372159,2.46094,.251889],[.375664,1.47187,-1.80687],[.375664,1.47187,1.80687],[.38174,2.2749,-1.21805],[.38174,2.2749,1.21805],[.391582,.453516,-1.88344],[.391582,.453516,1.88344],[.398745,1.10039,-1.91789],[.398745,1.10039,1.91789],[.403123,.59165,-1.93895],[.403123,.59165,1.93895],[.40641,2.43047,-.491907],[.40641,2.43047,.491907],[.4075,.75,-1.96],[.4075,.75,1.96],[.414464,2.28691,-1.32246],[.414464,2.28691,1.32246],[.414929,2.33613,-1.32395],[.414929,2.33613,1.32395],[.420891,2.46094,-.179078],[.420891,2.46094,.179078],[.425177,2.33613,-1.35665],[.425177,2.33613,1.35665],[.438241,2.46094,-.091207],[.438241,2.46094,.091207],[.439618,2.28691,-1.40272],[.439618,2.28691,1.40272],[.453828,2.33906,-1.06664],[.453828,2.33906,1.06664],[.45625,2.46094,0],[.458833,.042773,-1.46403],[.458833,.042773,1.46403],[.464063,2.4,-.685781],[.464063,2.4,.685781],[.473023,2.36953,-.868654],[.473023,2.36953,.868654],[.491907,2.43047,-.40641],[.491907,2.43047,.40641],[.494918,2.2998,-1.16322],[.494918,2.2998,1.16322],[.496099,.159961,-1.58294],[.496099,.159961,1.58294],[.498428,1.86094,-1.59037],[.498428,1.86094,1.59037],[.51025,2.25,-1.19925],[.51025,2.25,1.19925],[.541834,2.32383,-1.27348],[.541834,2.32383,1.27348],[.547339,.343945,-1.74644],[.547339,.343945,1.74644],[.5495,2.25,-1.2915],[.5495,2.25,1.2915],[.550727,2.34844,-1.29438],[.550727,2.34844,1.29438],[.559973,2.43047,-.304711],[.559973,2.43047,.304711],[.566554,1.28613,-1.80775],[.566554,1.28613,1.80775],[.568818,2.32383,-1.3369],[.568818,2.32383,1.3369],[.577104,2.31943,-1.05979],[.577104,2.31943,1.05979],[.581402,.522583,-1.85512],[.581402,.522583,1.85512],[.58575,2.4,-.58575],[.58575,2.4,.58575],[.58875,0,-1.38375],[.58875,0,1.38375],[.58875,2.25,-1.38375],[.58875,2.25,1.38375],[.589845,.925195,-1.88206],[.589845,.925195,1.88206],[.593047,.670825,-1.89228],[.593047,.670825,1.89228],[.607174,2.43047,-.190548],[.607174,2.43047,.190548],[.611424,2.2749,-1.12281],[.611424,2.2749,1.12281],[.619414,.085547,-1.45582],[.619414,.085547,1.45582],[.630285,2.36953,-.7634],[.630285,2.36953,.7634],[.631998,2.43047,-.064825],[.631998,2.43047,.064825],[.650391,2.33906,-.961133],[.650391,2.33906,.961133],[.663837,2.28691,-1.21906],[.663837,2.28691,1.21906],[.664583,2.33613,-1.22043],[.664583,2.33613,1.22043],[.680997,2.33613,-1.25057],[.680997,2.33613,1.25057],[.685781,2.4,-.464063],[.685781,2.4,.464063],[.686875,.234375,-1.61437],[.686875,.234375,1.61437],[.704126,2.28691,-1.29305],[.704126,2.28691,1.29305],[.709277,2.2998,-1.04815],[.709277,2.2998,1.04815],[.723672,1.47187,-1.70086],[.723672,1.47187,1.70086],[.73125,2.25,-1.08063],[.73125,2.25,1.08063],[.734902,.042773,-1.34957],[.734902,.042773,1.34957],[.754336,.453516,-1.77293],[.754336,.453516,1.77293],[.761063,2.4,-.323813],[.761063,2.4,.323813],[.7634,2.36953,-.630285],[.7634,2.36953,.630285],[.768135,1.10039,-1.80536],[.768135,1.10039,1.80536],[.768968,2.31943,-.931373],[.768968,2.31943,.931373],[.776514,2.32383,-1.14752],[.776514,2.32383,1.14752],[.776567,.59165,-1.82518],[.776567,.59165,1.82518],[.785,.75,-1.845],[.785,.75,1.845],[.7875,2.25,-1.16375],[.7875,2.25,1.16375],[.789258,2.34844,-1.16635],[.789258,2.34844,1.16635],[.79459,.159961,-1.45917],[.79459,.159961,1.45917],[.79832,1.86094,-1.46602],[.79832,1.86094,1.46602],[.8085,2.4,-.168094],[.8085,2.4,.168094],[.814698,2.2749,-.986761],[.814698,2.2749,.986761],[.815186,2.32383,-1.20466],[.815186,2.32383,1.20466],[.820938,2.33906,-.820938],[.820938,2.33906,.820938],[.825,2.4,0],[.84375,0,-1.24688],[.84375,0,1.24688],[.84375,2.25,-1.24688],[.84375,2.25,1.24688],[.868654,2.36953,-.473023],[.868654,2.36953,.473023],[.87666,.343945,-1.60989],[.87666,.343945,1.60989],[.884537,2.28691,-1.07135],[.884537,2.28691,1.07135],[.885531,2.33613,-1.07255],[.885531,2.33613,1.07255],[.887695,.085547,-1.31182],[.887695,.085547,1.31182],[.895266,2.2998,-.895266],[.895266,2.2998,.895266],[.907402,2.33613,-1.09904],[.907402,2.33613,1.09904],[.907437,1.28613,-1.6664],[.907437,1.28613,1.6664],[.923,2.25,-.923],[.923,2.25,.923],[.931218,.522583,-1.71008],[.931218,.522583,1.71008],[.931373,2.31943,-.768968],[.931373,2.31943,.768968],[.93822,2.28691,-1.13637],[.93822,2.28691,1.13637],[.942332,2.36953,-.29533],[.942332,2.36953,.29533],[.944741,.925195,-1.73491],[.944741,.925195,1.73491],[.949871,.670825,-1.74433],[.949871,.670825,1.74433],[.961133,2.33906,-.650391],[.961133,2.33906,.650391],[.979229,.042773,-1.18604],[.979229,.042773,1.18604],[.980133,2.32383,-.980133],[.980133,2.32383,.980133],[.980719,2.36953,-.10092],[.980719,2.36953,.10092],[.984375,.234375,-1.45469],[.984375,.234375,1.45469],[.986761,2.2749,-.814698],[.986761,2.2749,.814698],[.994,2.25,-.994],[.994,2.25,.994],[.996219,2.34844,-.996219],[.996219,2.34844,.996219],[1.02894,2.32383,-1.02894],[1.02894,2.32383,1.02894],[1.03711,1.47187,-1.53262],[1.03711,1.47187,1.53262],[1.04815,2.2998,-.709277],[1.04815,2.2998,.709277],[1.05876,.159961,-1.28237],[1.05876,.159961,1.28237],[1.05979,2.31943,-.577104],[1.05979,2.31943,.577104],[1.06373,1.86094,-1.28839],[1.06373,1.86094,1.28839],[1.065,0,-1.065],[1.065,0,1.065],[1.065,2.25,-1.065],[1.065,2.25,1.065],[1.06664,2.33906,-.453828],[1.06664,2.33906,.453828],[1.07135,2.28691,-.884537],[1.07135,2.28691,.884537],[1.07255,2.33613,-.885531],[1.07255,2.33613,.885531],[1.08063,2.25,-.73125],[1.08063,2.25,.73125],[1.08106,.453516,-1.59756],[1.08106,.453516,1.59756],[1.09904,2.33613,-.907402],[1.09904,2.33613,.907402],[1.10083,1.10039,-1.62678],[1.10083,1.10039,1.62678],[1.11292,.59165,-1.64464],[1.11292,.59165,1.64464],[1.12047,.085547,-1.12047],[1.12047,.085547,1.12047],[1.12281,2.2749,-.611424],[1.12281,2.2749,.611424],[1.125,.75,-1.6625],[1.125,.75,1.6625],[1.13312,2.33906,-.235586],[1.13312,2.33906,.235586],[1.13637,2.28691,-.93822],[1.13637,2.28691,.93822],[1.14752,2.32383,-.776514],[1.14752,2.32383,.776514],[1.14968,2.31943,-.360312],[1.14968,2.31943,.360312],[1.15625,2.33906,0],[1.16322,2.2998,-.494918],[1.16322,2.2998,.494918],[1.16375,2.25,-.7875],[1.16375,2.25,.7875],[1.16635,2.34844,-.789258],[1.16635,2.34844,.789258],[1.16812,.343945,-1.41482],[1.16812,.343945,1.41482],[1.18604,.042773,-.979229],[1.18604,.042773,.979229],[1.19651,2.31943,-.123125],[1.19651,2.31943,.123125],[1.19925,2.25,-.51025],[1.19925,2.25,.51025],[1.20466,2.32383,-.815186],[1.20466,2.32383,.815186],[1.20912,1.28613,-1.46449],[1.20912,1.28613,1.46449],[1.21805,2.2749,-.38174],[1.21805,2.2749,.38174],[1.21906,2.28691,-.663837],[1.21906,2.28691,.663837],[1.22043,2.33613,-.664583],[1.22043,2.33613,.664583],[1.23572,2.2998,-.256916],[1.23572,2.2998,.256916],[1.24081,.522583,-1.50287],[1.24081,.522583,1.50287],[1.2425,.234375,-1.2425],[1.2425,.234375,1.2425],[1.24688,0,-.84375],[1.24688,0,.84375],[1.24688,2.25,-.84375],[1.24688,2.25,.84375],[1.25057,2.33613,-.680997],[1.25057,2.33613,.680997],[1.25883,.925195,-1.52469],[1.25883,.925195,1.52469],[1.26094,2.2998,0],[1.26567,.670825,-1.53297],[1.26567,.670825,1.53297],[1.26766,2.2749,-.130448],[1.26766,2.2749,.130448],[1.27348,2.32383,-.541834],[1.27348,2.32383,.541834],[1.274,2.25,-.264875],[1.274,2.25,.264875],[1.28237,.159961,-1.05876],[1.28237,.159961,1.05876],[1.28839,1.86094,-1.06373],[1.28839,1.86094,1.06373],[1.2915,2.25,-.5495],[1.2915,2.25,.5495],[1.29305,2.28691,-.704126],[1.29305,2.28691,.704126],[1.29438,2.34844,-.550727],[1.29438,2.34844,.550727],[1.3,2.25,0],[1.30906,1.47187,-1.30906],[1.30906,1.47187,1.30906],[1.31182,.085547,-.887695],[1.31182,.085547,.887695],[1.32246,2.28691,-.414464],[1.32246,2.28691,.414464],[1.32395,2.33613,-.414929],[1.32395,2.33613,.414929],[1.3369,2.32383,-.568818],[1.3369,2.32383,.568818],[1.34957,.042773,-.734902],[1.34957,.042773,.734902],[1.35286,2.32383,-.281271],[1.35286,2.32383,.281271],[1.35665,2.33613,-.425177],[1.35665,2.33613,.425177],[1.36453,.453516,-1.36453],[1.36453,.453516,1.36453],[1.372,2.25,-.28525],[1.372,2.25,.28525],[1.37506,2.34844,-.285887],[1.37506,2.34844,.285887],[1.37633,2.28691,-.14163],[1.37633,2.28691,.14163],[1.37788,2.33613,-.141789],[1.37788,2.33613,.141789],[1.38047,2.32383,0],[1.38375,0,-.58875],[1.38375,0,.58875],[1.38375,2.25,-.58875],[1.38375,2.25,.58875],[1.38949,1.10039,-1.38949],[1.38949,1.10039,1.38949],[1.4,2.25,0],[1.40272,2.28691,-.439618],[1.40272,2.28691,.439618],[1.40313,2.34844,0],[1.40475,.59165,-1.40475],[1.40475,.59165,1.40475],[1.41191,2.33613,-.145291],[1.41191,2.33613,.145291],[1.41482,.343945,-1.16812],[1.41482,.343945,1.16812],[1.42,.75,-1.42],[1.42,.75,1.42],[1.42023,2.32383,-.295278],[1.42023,2.32383,.295278],[1.44922,2.32383,0],[1.45469,.234375,-.984375],[1.45469,.234375,.984375],[1.45582,.085547,-.619414],[1.45582,.085547,.619414],[1.45917,.159961,-.79459],[1.45917,.159961,.79459],[1.45986,2.28691,-.150226],[1.45986,2.28691,.150226],[1.46403,.042773,-.458833],[1.46403,.042773,.458833],[1.46449,1.28613,-1.20912],[1.46449,1.28613,1.20912],[1.46602,1.86094,-.79832],[1.46602,1.86094,.79832],[1.47,0,-.305625],[1.47,0,.305625],[1.47,2.25,-.305625],[1.47,2.25,.305625],[1.5,0,0],[1.5,2.25,0],[1.50287,.522583,-1.24081],[1.50287,.522583,1.24081],[1.52367,.042773,-.156792],[1.52367,.042773,.156792],[1.52469,.925195,-1.25883],[1.52469,.925195,1.25883],[1.53262,1.47187,-1.03711],[1.53262,1.47187,1.03711],[1.53297,.670825,-1.26567],[1.53297,.670825,1.26567],[1.54656,.085547,-.321543],[1.54656,.085547,.321543],[1.57813,.085547,0],[1.58294,.159961,-.496099],[1.58294,.159961,.496099],[1.59037,1.86094,-.498428],[1.59037,1.86094,.498428],[1.59756,.453516,-1.08106],[1.59756,.453516,1.08106],[1.60989,.343945,-.87666],[1.60989,.343945,.87666],[1.61437,.234375,-.686875],[1.61437,.234375,.686875],[1.62678,1.10039,-1.10083],[1.62678,1.10039,1.10083],[1.64464,.59165,-1.11292],[1.64464,.59165,1.11292],[1.64742,.159961,-.169526],[1.64742,.159961,.169526],[1.65516,1.86094,-.170322],[1.65516,1.86094,.170322],[1.6625,.75,-1.125],[1.6625,.75,1.125],[1.6664,1.28613,-.907437],[1.6664,1.28613,.907437],[1.7,.45,0],[1.7,.485449,-.216563],[1.7,.485449,.216563],[1.7,.578906,-.37125],[1.7,.578906,.37125],[1.7,.711035,-.464063],[1.7,.711035,.464063],[1.7,.8625,-.495],[1.7,.8625,.495],[1.7,1.01397,-.464063],[1.7,1.01397,.464063],[1.7,1.14609,-.37125],[1.7,1.14609,.37125],[1.7,1.23955,-.216563],[1.7,1.23955,.216563],[1.7,1.275,0],[1.70086,1.47187,-.723672],[1.70086,1.47187,.723672],[1.71008,.522583,-.931218],[1.71008,.522583,.931218],[1.715,.234375,-.356562],[1.715,.234375,.356563],[1.73491,.925195,-.944741],[1.73491,.925195,.944741],[1.74433,.670825,-.949871],[1.74433,.670825,.949871],[1.74644,.343945,-.547339],[1.74644,.343945,.547339],[1.75,.234375,0],[1.77293,.453516,-.754336],[1.77293,.453516,.754336],[1.80536,1.10039,-.768135],[1.80536,1.10039,.768135],[1.80687,1.47187,-.375664],[1.80687,1.47187,.375664],[1.80775,1.28613,-.566554],[1.80775,1.28613,.566554],[1.80868,.66944,-.415335],[1.80868,.66944,.415335],[1.81523,.556498,-.292881],[1.81523,.556498,.292881],[1.81758,.343945,-.187036],[1.81758,.343945,.187036],[1.8185,.493823,-.107904],[1.8185,.493823,.107904],[1.82518,.59165,-.776567],[1.82518,.59165,.776567],[1.84375,1.47187,0],[1.84408,1.27311,-.106836],[1.84408,1.27311,.106836],[1.845,.75,-.785],[1.845,.75,.785],[1.84989,1.21245,-.289984],[1.84989,1.21245,.289984],[1.85512,.522583,-.581402],[1.85512,.522583,.581402],[1.86007,1.10628,-.412082],[1.86007,1.10628,.412082],[1.87286,.97282,-.473131],[1.87286,.97282,.473131],[1.88139,1.28613,-.193602],[1.88139,1.28613,.193602],[1.88206,.925195,-.589845],[1.88206,.925195,.589845],[1.88344,.453516,-.391582],[1.88344,.453516,.391582],[1.88652,.830257,-.473131],[1.88652,.830257,.473131],[1.89228,.670825,-.593047],[1.89228,.670825,.593047],[1.90898,.762851,-.457368],[1.90898,.762851,.457368],[1.91789,1.10039,-.398745],[1.91789,1.10039,.398745],[1.92188,.453516,0],[1.92572,.624968,-.36866],[1.92572,.624968,.36866],[1.93069,.522583,-.198676],[1.93069,.522583,.198676],[1.9352,.536667,-.215052],[1.9352,.536667,.215052],[1.93879,.503174,0],[1.93895,.59165,-.403123],[1.93895,.59165,.403123],[1.95703,1.10039,0],[1.95873,.925195,-.201561],[1.95873,.925195,.201561],[1.96,.75,-.4075],[1.96,.75,.4075],[1.96937,.670825,-.202656],[1.96937,.670825,.202656],[1.97852,.59165,0],[1.98496,1.30459,0],[1.99136,1.27331,-.210782],[1.99136,1.27331,.210782],[2,.75,0],[2.00799,.721263,-.409761],[2.00799,.721263,.409761],[2.00821,1.19084,-.36134],[2.00821,1.19084,.36134],[2.02471,.614949,-.288958],[2.02471,.614949,.288958],[2.03205,1.07424,-.451675],[2.03205,1.07424,.451675],[2.03379,.556062,-.106458],[2.03379,.556062,.106458],[2.05938,.940576,-.481787],[2.05938,.940576,.481787],[2.08644,1.33048,-.101581],[2.08644,1.33048,.101581],[2.0867,.806915,-.451675],[2.0867,.806915,.451675],[2.10141,1.27815,-.27572],[2.10141,1.27815,.27572],[2.11053,.690317,-.36134],[2.11053,.690317,.36134],[2.12739,.607845,-.210782],[2.12739,.607845,.210782],[2.1276,1.18656,-.391812],[2.1276,1.18656,.391812],[2.13379,.576563,0],[2.16054,1.07143,-.449859],[2.16054,1.07143,.449859],[2.16922,.790259,-.39936],[2.16922,.790259,.39936],[2.17969,1.38516,0],[2.18976,1.35887,-.195542],[2.18976,1.35887,.195542],[2.19481,.691761,-.281559],[2.19481,.691761,.281559],[2.19571,.948444,-.449859],[2.19571,.948444,.449859],[2.20837,.637082,-.103732],[2.20837,.637082,.103732],[2.21631,1.28957,-.335215],[2.21631,1.28957,.335215],[2.2202,.891314,-.434457],[2.2202,.891314,.434457],[2.24857,1.433,-.092384],[2.24857,1.433,.092384],[2.25384,1.1916,-.419019],[2.25384,1.1916,.419019],[2.25944,.772489,-.349967],[2.25944,.772489,.349967],[2.26857,1.39016,-.250758],[2.26857,1.39016,.250758],[2.28189,.696393,-.204147],[2.28189,.696393,.204147],[2.29041,.667529,0],[2.29688,1.0793,-.446953],[2.29688,1.0793,.446953],[2.29925,.874953,-.384664],[2.29925,.874953,.384664],[2.30358,1.3152,-.35634],[2.30358,1.3152,.35634],[2.30644,1.5044,0],[2.31838,1.48356,-.173996],[2.31838,1.48356,.173996],[2.33069,.784406,-.271218],[2.33069,.784406,.271218],[2.33991,.966989,-.419019],[2.33991,.966989,.419019],[2.34759,.734271,-.099922],[2.34759,.734271,.099922],[2.34759,1.22096,-.409131],[2.34759,1.22096,.409131],[2.34984,1.42864,-.298279],[2.34984,1.42864,.298279],[2.35318,1.56816,-.080823],[2.35318,1.56816,.080823],[2.37575,1.53531,-.219377],[2.37575,1.53531,.219377],[2.37744,.869019,-.335215],[2.37744,.869019,.335215],[2.3875,1.65,0],[2.39432,1.35098,-.372849],[2.39432,1.35098,.372849],[2.3946,1.1203,-.409131],[2.3946,1.1203,.409131],[2.40039,1.63469,-.149297],[2.40039,1.63469,.149297],[2.40399,.799722,-.195542],[2.40399,.799722,.195542],[2.41406,.773438,0],[2.41524,1.47781,-.311747],[2.41524,1.47781,.311747],[2.43438,1.59434,-.255938],[2.43438,1.59434,.255938],[2.43861,1.02606,-.35634],[2.43861,1.02606,.35634],[2.44531,1.26196,-.397705],[2.44531,1.26196,.397705],[2.45168,1.80534,-.063087],[2.45168,1.80534,.063087],[2.46489,1.40552,-.357931],[2.46489,1.40552,.357931],[2.47362,.951099,-.250758],[2.47362,.951099,.250758],[2.47768,1.78638,-.171237],[2.47768,1.78638,.171237],[2.48242,1.53728,-.319922],[2.48242,1.53728,.319922],[2.49362,.908264,-.092384],[2.49362,.908264,.092384],[2.4963,1.17295,-.372849],[2.4963,1.17295,.372849],[2.50156,1.97109,0],[2.51727,1.96555,-.103052],[2.51727,1.96555,.103052],[2.51792,1.32831,-.357931],[2.51792,1.32831,.357931],[2.52318,1.75322,-.243336],[2.52318,1.75322,.243336],[2.5375,1.47187,-.34125],[2.5375,1.47187,.34125],[2.54078,1.09529,-.298279],[2.54078,1.09529,.298279],[2.54911,2.04464,-.047716],[2.54911,2.04464,.047716],[2.55869,1.95095,-.17666],[2.55869,1.95095,.17666],[2.56757,1.25603,-.311747],[2.56757,1.25603,.311747],[2.57225,1.04036,-.173996],[2.57225,1.04036,.173996],[2.5791,2.12197,0],[2.58039,1.71153,-.279386],[2.58039,1.71153,.279386],[2.58101,2.03773,-.129515],[2.58101,2.03773,.129515],[2.58418,1.01953,0],[2.59258,1.40647,-.319922],[2.59258,1.40647,.319922],[2.59849,2.11992,-.087812],[2.59849,2.11992,.087812],[2.60178,1.55472,-.304019],[2.60178,1.55472,.304019],[2.60707,1.19853,-.219377],[2.60707,1.19853,.219377],[2.61162,1.69128,-.287908],[2.61162,1.69128,.287908],[2.61725,1.93031,-.220825],[2.61725,1.93031,.220825],[2.62963,1.16568,-.080823],[2.62963,1.16568,.080823],[2.63788,2.02555,-.180818],[2.63788,2.02555,.180818],[2.64063,1.34941,-.255938],[2.64063,1.34941,.255938],[2.6496,2.11451,-.150535],[2.6496,2.11451,.150535],[2.65084,2.18547,-.042461],[2.65084,2.18547,.042461],[2.65391,1.5042,-.264113],[2.65391,1.5042,.264113],[2.66542,1.64925,-.266995],[2.66542,1.64925,.266995],[2.67461,1.30906,-.149297],[2.67461,1.30906,.149297],[2.67823,1.78254,-.252819],[2.67823,1.78254,.252819],[2.68438,1.90664,-.235547],[2.68438,1.90664,.235547],[2.6875,1.29375,0],[2.6919,2.18361,-.115251],[2.6919,2.18361,.115251],[2.69645,1.4638,-.185857],[2.69645,1.4638,.185857],[2.7,2.25,0],[2.70808,2.01037,-.208084],[2.70808,2.01037,.208084],[2.71703,1.61167,-.213596],[2.71703,1.61167,.213596],[2.72076,1.44072,-.068474],[2.72076,1.44072,.068474],[2.72578,2.25,-.082031],[2.72578,2.25,.082031],[2.72599,2.10643,-.17525],[2.72599,2.10643,.17525],[2.736,1.75155,-.219519],[2.736,1.75155,.219519],[2.75021,2.26919,-.039734],[2.75021,2.26919,.039734],[2.7515,1.88297,-.220825],[2.7515,1.88297,.220825],[2.75354,1.58508,-.124598],[2.75354,1.58508,.124598],[2.76738,1.575,0],[2.77556,2.284,0],[2.78099,1.99437,-.208084],[2.78099,1.99437,.208084],[2.78303,1.7267,-.154476],[2.78303,1.7267,.154476],[2.79375,2.25,-.140625],[2.79375,2.25,.140625],[2.79782,2.27175,-.107849],[2.79782,2.27175,.107849],[2.79949,2.29275,-.076904],[2.79949,2.29275,.076904],[2.8,2.25,0],[2.80469,2.0981,-.200713],[2.80469,2.0981,.200713],[2.8099,1.7125,-.056912],[2.8099,1.7125,.056912],[2.81006,1.86233,-.17666],[2.81006,1.86233,.17666],[2.81201,2.17815,-.169843],[2.81201,2.17815,.169843],[2.81274,2.29754,-.035632],[2.81274,2.29754,.035632],[2.81719,2.25,-.049219],[2.81719,2.25,.049219],[2.825,2.30625,0],[2.83011,2.27129,-.025891],[2.83011,2.27129,.025891],[2.84063,2.29219,0],[2.84479,2.29964,-.029993],[2.84479,2.29964,.029993],[2.85092,2.30716,-.065625],[2.85092,2.30716,.065625],[2.85118,1.97919,-.180818],[2.85118,1.97919,.180818],[2.85148,1.84773,-.103052],[2.85148,1.84773,.103052],[2.86048,2.30093,-.096716],[2.86048,2.30093,.096716],[2.8625,2.25,-.084375],[2.8625,2.25,.084375],[2.86263,2.29298,-.054346],[2.86263,2.29298,.054346],[2.86574,2.27201,-.070276],[2.86574,2.27201,.070276],[2.86719,1.84219,0],[2.87228,2.29425,-.131836],[2.87228,2.29425,.131836],[2.88339,2.08977,-.17525],[2.88339,2.08977,.17525],[2.88836,2.30119,-.081409],[2.88836,2.30119,.081409],[2.89827,2.17088,-.194382],[2.89827,2.17088,.194382],[2.90805,1.967,-.129515],[2.90805,1.967,.129515],[2.91924,2.30955,-.1125],[2.91924,2.30955,.1125],[2.92064,2.29507,-.093164],[2.92064,2.29507,.093164],[2.93279,2.13103,-.172211],[2.93279,2.13103,.172211],[2.9398,2.27326,-.158936],[2.9398,2.27326,.158936],[2.93996,1.9601,-.047716],[2.93996,1.9601,.047716],[2.95978,2.08168,-.150535],[2.95978,2.08168,.150535],[2.96995,2.27412,-.103564],[2.96995,2.27412,.103564],[3,2.25,-.1875],[3,2.25,-.1125],[3,2.25,.1125],[3,2.25,.1875],[3.00281,2.30484,-.142529],[3.00281,2.30484,.142529],[3.01089,2.07627,-.087812],[3.01089,2.07627,.087812],[3.01578,2.30571,-.119971],[3.01578,2.30571,.119971],[3.03027,2.07422,0],[3.0415,2.12567,-.116276],[3.0415,2.12567,.116276],[3.04323,2.21108,-.166431],[3.04323,2.21108,.166431],[3.06842,2.17345,-.143215],[3.06842,2.17345,.143215],[3.07929,2.12306,-.042838],[3.07929,2.12306,.042838],[3.09316,2.29878,-.175781],[3.09316,2.29878,.175781],[3.09668,2.30142,-.124219],[3.09668,2.30142,.124219],[3.12656,2.3168,-.15],[3.12656,2.3168,.15],[3.12672,2.27729,-.103564],[3.12672,2.27729,.103564],[3.12691,2.17128,-.083542],[3.12691,2.17128,.083542],[3.1375,2.25,-.084375],[3.1375,2.25,.084375],[3.1491,2.17046,0],[3.15337,2.27552,-.158936],[3.15337,2.27552,.158936],[3.16895,2.21118,-.112353],[3.16895,2.21118,.112353],[3.18281,2.25,-.049219],[3.18281,2.25,.049219],[3.2,2.25,0],[3.20625,2.25,-.140625],[3.20625,2.25,.140625],[3.20746,2.31251,-.119971],[3.20746,2.31251,.119971],[3.21256,2.21043,-.041393],[3.21256,2.21043,.041393],[3.21692,2.31073,-.142529],[3.21692,2.31073,.142529],[3.23094,2.2794,-.070276],[3.23094,2.2794,.070276],[3.26724,2.27814,-.025891],[3.26724,2.27814,.025891],[3.27272,2.30776,-.093164],[3.27272,2.30776,.093164],[3.27422,2.25,-.082031],[3.27422,2.25,.082031],[3.29534,2.27703,-.107849],[3.29534,2.27703,.107849],[3.3,2.25,0],[3.31405,2.30331,-.131836],[3.31405,2.30331,.131836],[3.33073,2.30985,-.054346],[3.33073,2.30985,.054346],[3.33389,2.32405,-.1125],[3.33389,2.32405,.1125],[3.33489,2.31702,-.081409],[3.33489,2.31702,.081409],[3.34236,2.28006,-.039734],[3.34236,2.28006,.039734],[3.35543,2.3027,0],[3.35925,2.31465,-.096716],[3.35925,2.31465,.096716],[3.37912,2.31658,-.029993],[3.37912,2.31658,.029993],[3.38684,2.30481,-.076904],[3.38684,2.30481,.076904],[3.40221,2.32644,-.065625],[3.40221,2.32644,.065625],[3.40639,2.3185,-.035632],[3.40639,2.3185,.035632],[3.40838,2.31543,0],[3.42812,2.32734,0]];var b=[[1454,1468,1458],[1448,1454,1458],[1461,1448,1458],[1468,1461,1458],[1429,1454,1440],[1421,1429,1440],[1448,1421,1440],[1454,1448,1440],[1380,1429,1398],[1373,1380,1398],[1421,1373,1398],[1429,1421,1398],[1327,1380,1349],[1319,1327,1349],[1373,1319,1349],[1380,1373,1349],[1448,1461,1460],[1456,1448,1460],[1471,1456,1460],[1461,1471,1460],[1421,1448,1442],[1433,1421,1442],[1456,1433,1442],[1448,1456,1442],[1373,1421,1400],[1382,1373,1400],[1433,1382,1400],[1421,1433,1400],[1319,1373,1351],[1329,1319,1351],[1382,1329,1351],[1373,1382,1351],[1264,1327,1289],[1258,1264,1289],[1319,1258,1289],[1327,1319,1289],[1192,1264,1228],[1188,1192,1228],[1258,1188,1228],[1264,1258,1228],[1100,1192,1157],[1098,1100,1157],[1188,1098,1157],[1192,1188,1157],[922,1100,1006],[928,922,1006],[1098,928,1006],[1100,1098,1006],[1258,1319,1291],[1266,1258,1291],[1329,1266,1291],[1319,1329,1291],[1188,1258,1230],[1194,1188,1230],[1266,1194,1230],[1258,1266,1230],[1098,1188,1159],[1102,1098,1159],[1194,1102,1159],[1188,1194,1159],[928,1098,1008],[933,928,1008],[1102,933,1008],[1098,1102,1008],[1456,1471,1475],[1481,1456,1475],[1482,1481,1475],[1471,1482,1475],[1433,1456,1450],[1444,1433,1450],[1481,1444,1450],[1456,1481,1450],[1382,1433,1412],[1392,1382,1412],[1444,1392,1412],[1433,1444,1412],[1329,1382,1357],[1331,1329,1357],[1392,1331,1357],[1382,1392,1357],[1481,1482,1490],[1500,1481,1490],[1502,1500,1490],[1482,1502,1490],[1444,1481,1470],[1465,1444,1470],[1500,1465,1470],[1481,1500,1470],[1392,1444,1431],[1410,1392,1431],[1465,1410,1431],[1444,1465,1431],[1331,1392,1371],[1345,1331,1371],[1410,1345,1371],[1392,1410,1371],[1266,1329,1297],[1276,1266,1297],[1331,1276,1297],[1329,1331,1297],[1194,1266,1232],[1200,1194,1232],[1276,1200,1232],[1266,1276,1232],[1102,1194,1163],[1106,1102,1163],[1200,1106,1163],[1194,1200,1163],[933,1102,1016],[929,933,1016],[1106,929,1016],[1102,1106,1016],[1276,1331,1307],[1283,1276,1307],[1345,1283,1307],[1331,1345,1307],[1200,1276,1238],[1210,1200,1238],[1283,1210,1238],[1276,1283,1238],[1106,1200,1167],[1116,1106,1167],[1210,1116,1167],[1200,1210,1167],[929,1106,1022],[923,929,1022],[1116,923,1022],[1106,1116,1022],[755,922,849],[757,755,849],[928,757,849],[922,928,849],[663,755,698],[667,663,698],[757,667,698],[755,757,698],[591,663,627],[597,591,627],[667,597,627],[663,667,627],[528,591,566],[536,528,566],[597,536,566],[591,597,566],[757,928,847],[753,757,847],[933,753,847],[928,933,847],[667,757,696],[661,667,696],[753,661,696],[757,753,696],[597,667,625],[589,597,625],[661,589,625],[667,661,625],[536,597,564],[526,536,564],[589,526,564],[597,589,564],[475,528,506],[482,475,506],[536,482,506],[528,536,506],[426,475,457],[434,426,457],[482,434,457],[475,482,457],[401,426,415],[407,401,415],[434,407,415],[426,434,415],[386,401,397],[393,386,397],[407,393,397],[401,407,397],[482,536,504],[473,482,504],[526,473,504],[536,526,504],[434,482,455],[422,434,455],[473,422,455],[482,473,455],[407,434,413],[399,407,413],[422,399,413],[434,422,413],[393,407,395],[383,393,395],[399,383,395],[407,399,395],[753,933,839],[749,753,839],[929,749,839],[933,929,839],[661,753,692],[655,661,692],[749,655,692],[753,749,692],[589,661,623],[579,589,623],[655,579,623],[661,655,623],[526,589,558],[524,526,558],[579,524,558],[589,579,558],[749,929,833],[741,749,833],[923,741,833],[929,923,833],[655,749,688],[647,655,688],[741,647,688],[749,741,688],[579,655,617],[574,579,617],[647,574,617],[655,647,617],[524,579,548],[512,524,548],[574,512,548],[579,574,548],[473,526,498],[463,473,498],[524,463,498],[526,524,498],[422,473,443],[411,422,443],[463,411,443],[473,463,443],[399,422,405],[374,399,405],[411,374,405],[422,411,405],[383,399,380],[372,383,380],[374,372,380],[399,374,380],[463,524,484],[447,463,484],[512,447,484],[524,512,484],[411,463,424],[392,411,424],[447,392,424],[463,447,424],[374,411,385],[357,374,385],[392,357,385],[411,392,385],[372,374,365],[353,372,365],[357,353,365],[374,357,365],[400,386,396],[406,400,396],[393,406,396],[386,393,396],[425,400,414],[433,425,414],[406,433,414],[400,406,414],[474,425,456],[481,474,456],[433,481,456],[425,433,456],[527,474,505],[535,527,505],[481,535,505],[474,481,505],[406,393,394],[398,406,394],[383,398,394],[393,383,394],[433,406,412],[421,433,412],[398,421,412],[406,398,412],[481,433,454],[472,481,454],[421,472,454],[433,421,454],[535,481,503],[525,535,503],[472,525,503],[481,472,503],[590,527,565],[596,590,565],[535,596,565],[527,535,565],[662,590,626],[666,662,626],[596,666,626],[590,596,626],[754,662,697],[756,754,697],[666,756,697],[662,666,697],[919,754,848],[927,919,848],[756,927,848],[754,756,848],[596,535,563],[588,596,563],[525,588,563],[535,525,563],[666,596,624],[660,666,624],[588,660,624],[596,588,624],[756,666,695],[752,756,695],[660,752,695],[666,660,695],[927,756,846],[932,927,846],[752,932,846],[756,752,846],[398,383,379],[373,398,379],[372,373,379],[383,372,379],[421,398,404],[410,421,404],[373,410,404],[398,373,404],[472,421,442],[462,472,442],[410,462,442],[421,410,442],[525,472,497],[523,525,497],[462,523,497],[472,462,497],[373,372,364],[356,373,364],[353,356,364],[372,353,364],[410,373,384],[391,410,384],[356,391,384],[373,356,384],[462,410,423],[446,462,423],[391,446,423],[410,391,423],[523,462,483],[511,523,483],[446,511,483],[462,446,483],[588,525,557],[578,588,557],[523,578,557],[525,523,557],[660,588,622],[654,660,622],[578,654,622],[588,578,622],[752,660,691],[748,752,691],[654,748,691],[660,654,691],[932,752,838],[926,932,838],[748,926,838],[752,748,838],[578,523,547],[573,578,547],[511,573,547],[523,511,547],[654,578,616],[646,654,616],[573,646,616],[578,573,616],[748,654,687],[740,748,687],[646,740,687],[654,646,687],[926,748,832],[918,926,832],[740,918,832],[748,740,832],[1099,919,1005],[1097,1099,1005],[927,1097,1005],[919,927,1005],[1191,1099,1156],[1187,1191,1156],[1097,1187,1156],[1099,1097,1156],[1263,1191,1227],[1257,1263,1227],[1187,1257,1227],[1191,1187,1227],[1326,1263,1288],[1318,1326,1288],[1257,1318,1288],[1263,1257,1288],[1097,927,1007],[1101,1097,1007],[932,1101,1007],[927,932,1007],[1187,1097,1158],[1193,1187,1158],[1101,1193,1158],[1097,1101,1158],[1257,1187,1229],[1265,1257,1229],[1193,1265,1229],[1187,1193,1229],[1318,1257,1290],[1328,1318,1290],[1265,1328,1290],[1257,1265,1290],[1379,1326,1348],[1372,1379,1348],[1318,1372,1348],[1326,1318,1348],[1428,1379,1397],[1420,1428,1397],[1372,1420,1397],[1379,1372,1397],[1453,1428,1439],[1447,1453,1439],[1420,1447,1439],[1428,1420,1439],[1468,1453,1457],[1461,1468,1457],[1447,1461,1457],[1453,1447,1457],[1372,1318,1350],[1381,1372,1350],[1328,1381,1350],[1318,1328,1350],[1420,1372,1399],[1432,1420,1399],[1381,1432,1399],[1372,1381,1399],[1447,1420,1441],[1455,1447,1441],[1432,1455,1441],[1420,1432,1441],[1461,1447,1459],[1471,1461,1459],[1455,1471,1459],[1447,1455,1459],[1101,932,1015],[1105,1101,1015],[926,1105,1015],[932,926,1015],[1193,1101,1162],[1199,1193,1162],[1105,1199,1162],[1101,1105,1162],[1265,1193,1231],[1275,1265,1231],[1199,1275,1231],[1193,1199,1231],[1328,1265,1296],[1330,1328,1296],[1275,1330,1296],[1265,1275,1296],[1105,926,1021],[1115,1105,1021],[918,1115,1021],[926,918,1021],[1199,1105,1166],[1209,1199,1166],[1115,1209,1166],[1105,1115,1166],[1275,1199,1237],[1282,1275,1237],[1209,1282,1237],[1199,1209,1237],[1330,1275,1306],[1344,1330,1306],[1282,1344,1306],[1275,1282,1306],[1381,1328,1356],[1391,1381,1356],[1330,1391,1356],[1328,1330,1356],[1432,1381,1411],[1443,1432,1411],[1391,1443,1411],[1381,1391,1411],[1455,1432,1449],[1480,1455,1449],[1443,1480,1449],[1432,1443,1449],[1471,1455,1474],[1482,1471,1474],[1480,1482,1474],[1455,1480,1474],[1391,1330,1370],[1409,1391,1370],[1344,1409,1370],[1330,1344,1370],[1443,1391,1430],[1464,1443,1430],[1409,1464,1430],[1391,1409,1430],[1480,1443,1469],[1499,1480,1469],[1464,1499,1469],[1443,1464,1469],[1482,1480,1489],[1502,1482,1489],[1499,1502,1489],[1480,1499,1489],[1500,1502,1533],[1572,1500,1533],[1585,1572,1533],[1502,1585,1533],[1465,1500,1519],[1555,1465,1519],[1572,1555,1519],[1500,1572,1519],[1410,1465,1496],[1510,1410,1496],[1555,1510,1496],[1465,1555,1496],[1345,1410,1427],[1436,1345,1427],[1510,1436,1427],[1410,1510,1427],[1283,1345,1341],[1333,1283,1341],[1436,1333,1341],[1345,1436,1341],[1210,1283,1270],[1242,1210,1270],[1333,1242,1270],[1283,1333,1270],[1116,1210,1184],[1143,1116,1184],[1242,1143,1184],[1210,1242,1184],[923,1116,1037],[917,923,1037],[1143,917,1037],[1116,1143,1037],[1572,1585,1599],[1611,1572,1599],[1622,1611,1599],[1585,1622,1599],[1555,1572,1574],[1570,1555,1574],[1611,1570,1574],[1572,1611,1574],[1510,1555,1537],[1527,1510,1537],[1570,1527,1537],[1555,1570,1537],[1436,1510,1494],[1467,1436,1494],[1527,1467,1494],[1510,1527,1494],[1611,1622,1624],[1626,1611,1624],[1633,1626,1624],[1622,1633,1624],[1570,1611,1601],[1589,1570,1601],[1626,1589,1601],[1611,1626,1601],[1527,1570,1561],[1535,1527,1561],[1589,1535,1561],[1570,1589,1561],[1467,1527,1508],[1479,1467,1508],[1535,1479,1508],[1527,1535,1508],[1333,1436,1394],[1359,1333,1394],[1467,1359,1394],[1436,1467,1394],[1242,1333,1299],[1254,1242,1299],[1359,1254,1299],[1333,1359,1299],[1143,1242,1198],[1149,1143,1198],[1254,1149,1198],[1242,1254,1198],[917,1143,1057],[915,917,1057],[1149,915,1057],[1143,1149,1057],[1359,1467,1414],[1367,1359,1414],[1479,1367,1414],[1467,1479,1414],[1254,1359,1311],[1262,1254,1311],[1367,1262,1311],[1359,1367,1311],[1149,1254,1212],[1155,1149,1212],[1262,1155,1212],[1254,1262,1212],[915,1149,1065],[913,915,1065],[1155,913,1065],[1149,1155,1065],[741,923,818],[712,741,818],[917,712,818],[923,917,818],[647,741,671],[613,647,671],[712,613,671],[741,712,671],[574,647,585],[522,574,585],[613,522,585],[647,613,585],[512,574,514],[419,512,514],[522,419,514],[574,522,514],[447,512,428],[342,447,428],[419,342,428],[512,419,428],[392,447,359],[308,392,359],[342,308,359],[447,342,359],[357,392,329],[291,357,329],[308,291,329],[392,308,329],[353,357,314],[275,353,314],[291,275,314],[357,291,314],[712,917,798],[706,712,798],[915,706,798],[917,915,798],[613,712,657],[601,613,657],[706,601,657],[712,706,657],[522,613,556],[496,522,556],[601,496,556],[613,601,556],[419,522,461],[388,419,461],[496,388,461],[522,496,461],[706,915,790],[700,706,790],[913,700,790],[915,913,790],[601,706,643],[593,601,643],[700,593,643],[706,700,643],[496,601,544],[488,496,544],[593,488,544],[601,593,544],[388,496,441],[376,388,441],[488,376,441],[496,488,441],[342,419,361],[320,342,361],[388,320,361],[419,388,361],[308,342,310],[293,308,310],[320,293,310],[342,320,310],[291,308,289],[257,291,289],[293,257,289],[308,293,289],[275,291,270],[246,275,270],[257,246,270],[291,257,270],[320,388,344],[312,320,344],[376,312,344],[388,376,344],[293,320,302],[274,293,302],[312,274,302],[320,312,302],[257,293,268],[243,257,268],[274,243,268],[293,274,268],[246,257,245],[232,246,245],[243,232,245],[257,243,245],[356,353,313],[290,356,313],[275,290,313],[353,275,313],[391,356,328],[307,391,328],[290,307,328],[356,290,328],[446,391,358],[341,446,358],[307,341,358],[391,307,358],[511,446,427],[418,511,427],[341,418,427],[446,341,427],[573,511,513],[521,573,513],[418,521,513],[511,418,513],[646,573,584],[612,646,584],[521,612,584],[573,521,584],[740,646,670],[711,740,670],[612,711,670],[646,612,670],[918,740,817],[916,918,817],[711,916,817],[740,711,817],[290,275,269],[256,290,269],[246,256,269],[275,246,269],[307,290,288],[292,307,288],[256,292,288],[290,256,288],[341,307,309],[319,341,309],[292,319,309],[307,292,309],[418,341,360],[387,418,360],[319,387,360],[341,319,360],[256,246,244],[242,256,244],[232,242,244],[246,232,244],[292,256,267],[273,292,267],[242,273,267],[256,242,267],[319,292,301],[311,319,301],[273,311,301],[292,273,301],[387,319,343],[375,387,343],[311,375,343],[319,311,343],[521,418,460],[495,521,460],[387,495,460],[418,387,460],[612,521,555],[600,612,555],[495,600,555],[521,495,555],[711,612,656],[705,711,656],[600,705,656],[612,600,656],[916,711,797],[914,916,797],[705,914,797],[711,705,797],[495,387,440],[487,495,440],[375,487,440],[387,375,440],[600,495,543],[592,600,543],[487,592,543],[495,487,543],[705,600,642],[699,705,642],[592,699,642],[600,592,642],[914,705,789],[912,914,789],[699,912,789],[705,699,789],[1115,918,1036],[1142,1115,1036],[916,1142,1036],[918,916,1036],[1209,1115,1183],[1241,1209,1183],[1142,1241,1183],[1115,1142,1183],[1282,1209,1269],[1332,1282,1269],[1241,1332,1269],[1209,1241,1269],[1344,1282,1340],[1435,1344,1340],[1332,1435,1340],[1282,1332,1340],[1409,1344,1426],[1509,1409,1426],[1435,1509,1426],[1344,1435,1426],[1464,1409,1495],[1554,1464,1495],[1509,1554,1495],[1409,1509,1495],[1499,1464,1518],[1571,1499,1518],[1554,1571,1518],[1464,1554,1518],[1502,1499,1532],[1585,1502,1532],[1571,1585,1532],[1499,1571,1532],[1142,916,1056],[1148,1142,1056],[914,1148,1056],[916,914,1056],[1241,1142,1197],[1253,1241,1197],[1148,1253,1197],[1142,1148,1197],[1332,1241,1298],[1358,1332,1298],[1253,1358,1298],[1241,1253,1298],[1435,1332,1393],[1466,1435,1393],[1358,1466,1393],[1332,1358,1393],[1148,914,1064],[1154,1148,1064],[912,1154,1064],[914,912,1064],[1253,1148,1211],[1261,1253,1211],[1154,1261,1211],[1148,1154,1211],[1358,1253,1310],[1366,1358,1310],[1261,1366,1310],[1253,1261,1310],[1466,1358,1413],[1478,1466,1413],[1366,1478,1413],[1358,1366,1413],[1509,1435,1493],[1526,1509,1493],[1466,1526,1493],[1435,1466,1493],[1554,1509,1536],[1569,1554,1536],[1526,1569,1536],[1509,1526,1536],[1571,1554,1573],[1610,1571,1573],[1569,1610,1573],[1554,1569,1573],[1585,1571,1598],[1622,1585,1598],[1610,1622,1598],[1571,1610,1598],[1526,1466,1507],[1534,1526,1507],[1478,1534,1507],[1466,1478,1507],[1569,1526,1560],[1588,1569,1560],[1534,1588,1560],[1526,1534,1560],[1610,1569,1600],[1625,1610,1600],[1588,1625,1600],[1569,1588,1600],[1622,1610,1623],[1633,1622,1623],[1625,1633,1623],[1610,1625,1623],[1626,1633,1628],[1621,1626,1628],[1629,1621,1628],[1633,1629,1628],[1589,1626,1607],[1584,1589,1607],[1621,1584,1607],[1626,1621,1607],[1621,1629,1616],[1603,1621,1616],[1612,1603,1616],[1629,1612,1616],[1584,1621,1593],[1568,1584,1593],[1603,1568,1593],[1621,1603,1593],[1535,1589,1563],[1529,1535,1563],[1584,1529,1563],[1589,1584,1563],[1479,1535,1512],[1473,1479,1512],[1529,1473,1512],[1535,1529,1512],[1529,1584,1557],[1521,1529,1557],[1568,1521,1557],[1584,1568,1557],[1473,1529,1504],[1452,1473,1504],[1521,1452,1504],[1529,1521,1504],[1603,1612,1580],[1559,1603,1580],[1566,1559,1580],[1612,1566,1580],[1568,1603,1565],[1525,1568,1565],[1559,1525,1565],[1603,1559,1565],[1521,1568,1523],[1484,1521,1523],[1525,1484,1523],[1568,1525,1523],[1452,1521,1477],[1406,1452,1477],[1484,1406,1477],[1521,1484,1477],[1367,1479,1417],[1361,1367,1417],[1473,1361,1417],[1479,1473,1417],[1262,1367,1313],[1260,1262,1313],[1361,1260,1313],[1367,1361,1313],[1361,1473,1404],[1355,1361,1404],[1452,1355,1404],[1473,1452,1404],[1260,1361,1303],[1248,1260,1303],[1355,1248,1303],[1361,1355,1303],[1155,1262,1214],[1151,1155,1214],[1260,1151,1214],[1262,1260,1214],[913,1155,1067],[911,913,1067],[1151,911,1067],[1155,1151,1067],[1151,1260,1204],[1147,1151,1204],[1248,1147,1204],[1260,1248,1204],[911,1151,1062],[909,911,1062],[1147,909,1062],[1151,1147,1062],[1355,1452,1384],[1323,1355,1384],[1406,1323,1384],[1452,1406,1384],[1248,1355,1287],[1236,1248,1287],[1323,1236,1287],[1355,1323,1287],[1147,1248,1190],[1135,1147,1190],[1236,1135,1190],[1248,1236,1190],[909,1147,1051],[907,909,1051],[1135,907,1051],[1147,1135,1051],[1559,1566,1531],[1514,1559,1531],[1515,1514,1531],[1566,1515,1531],[1525,1559,1517],[1486,1525,1517],[1514,1486,1517],[1559,1514,1517],[1484,1525,1488],[1438,1484,1488],[1486,1438,1488],[1525,1486,1488],[1406,1484,1425],[1363,1406,1425],[1438,1363,1425],[1484,1438,1425],[1514,1515,1506],[1498,1514,1506],[1501,1498,1506],[1515,1501,1506],[1486,1514,1492],[1463,1486,1492],[1498,1463,1492],[1514,1498,1492],[1438,1486,1446],[1408,1438,1446],[1463,1408,1446],[1486,1463,1446],[1363,1438,1386],[1343,1363,1386],[1408,1343,1386],[1438,1408,1386],[1323,1406,1337],[1293,1323,1337],[1363,1293,1337],[1406,1363,1337],[1236,1323,1268],[1220,1236,1268],[1293,1220,1268],[1323,1293,1268],[1135,1236,1182],[1122,1135,1182],[1220,1122,1182],[1236,1220,1182],[907,1135,1035],[905,907,1035],[1122,905,1035],[1135,1122,1035],[1293,1363,1317],[1281,1293,1317],[1343,1281,1317],[1363,1343,1317],[1220,1293,1246],[1208,1220,1246],[1281,1208,1246],[1293,1281,1246],[1122,1220,1172],[1114,1122,1172],[1208,1114,1172],[1220,1208,1172],[905,1122,1026],[903,905,1026],[1114,903,1026],[1122,1114,1026],[700,913,788],[704,700,788],[911,704,788],[913,911,788],[593,700,641],[595,593,641],[704,595,641],[700,704,641],[704,911,793],[708,704,793],[909,708,793],[911,909,793],[595,704,651],[607,595,651],[708,607,651],[704,708,651],[488,593,542],[494,488,542],[595,494,542],[593,595,542],[376,488,438],[382,376,438],[494,382,438],[488,494,438],[494,595,552],[500,494,552],[607,500,552],[595,607,552],[382,494,451],[403,382,451],[500,403,451],[494,500,451],[708,909,804],[718,708,804],[907,718,804],[909,907,804],[607,708,665],[619,607,665],[718,619,665],[708,718,665],[500,607,568],[532,500,568],[619,532,568],[607,619,568],[403,500,471],[449,403,471],[532,449,471],[500,532,471],[312,376,340],[318,312,340],[382,318,340],[376,382,340],[274,312,300],[285,274,300],[318,285,300],[312,318,300],[318,382,350],[327,318,350],[403,327,350],[382,403,350],[285,318,306],[295,285,306],[327,295,306],[318,327,306],[243,274,264],[250,243,264],[285,250,264],[274,285,264],[232,243,239],[237,232,239],[250,237,239],[243,250,239],[250,285,272],[266,250,272],[295,266,272],[285,295,272],[237,250,254],[255,237,254],[266,255,254],[250,266,254],[327,403,378],[371,327,378],[449,371,378],[403,449,378],[295,327,324],[322,295,324],[371,322,324],[327,371,324],[266,295,298],[304,266,298],[322,304,298],[295,322,298],[255,266,287],[296,255,287],[304,296,287],[266,304,287],[718,907,820],[733,718,820],[905,733,820],[907,905,820],[619,718,673],[635,619,673],[733,635,673],[718,733,673],[532,619,587],[562,532,587],[635,562,587],[619,635,587],[449,532,518],[492,449,518],[562,492,518],[532,562,518],[733,905,829],[739,733,829],[903,739,829],[905,903,829],[635,733,683],[645,635,683],[739,645,683],[733,739,683],[562,635,609],[572,562,609],[645,572,609],[635,645,609],[492,562,538],[510,492,538],[572,510,538],[562,572,538],[371,449,430],[417,371,430],[492,417,430],[449,492,430],[322,371,367],[369,322,367],[417,369,367],[371,417,367],[304,322,333],[338,304,333],[369,338,333],[322,369,333],[296,304,316],[334,296,316],[338,334,316],[304,338,316],[417,492,469],[445,417,469],[510,445,469],[492,510,469],[369,417,409],[390,369,409],[445,390,409],[417,445,409],[338,369,363],[355,338,363],[390,355,363],[369,390,363],[334,338,346],[351,334,346],[355,351,346],[338,355,346],[242,232,238],[249,242,238],[237,249,238],[232,237,238],[273,242,263],[284,273,263],[249,284,263],[242,249,263],[249,237,253],[265,249,253],[255,265,253],[237,255,253],[284,249,271],[294,284,271],[265,294,271],[249,265,271],[311,273,299],[317,311,299],[284,317,299],[273,284,299],[375,311,339],[381,375,339],[317,381,339],[311,317,339],[317,284,305],[326,317,305],[294,326,305],[284,294,305],[381,317,349],[402,381,349],[326,402,349],[317,326,349],[265,255,286],[303,265,286],[296,303,286],[255,296,286],[294,265,297],[321,294,297],[303,321,297],[265,303,297],[326,294,323],[370,326,323],[321,370,323],[294,321,323],[402,326,377],[448,402,377],[370,448,377],[326,370,377],[487,375,437],[493,487,437],[381,493,437],[375,381,437],[592,487,541],[594,592,541],[493,594,541],[487,493,541],[493,381,450],[499,493,450],[402,499,450],[381,402,450],[594,493,551],[606,594,551],[499,606,551],[493,499,551],[699,592,640],[703,699,640],[594,703,640],[592,594,640],[912,699,787],[910,912,787],[703,910,787],[699,703,787],[703,594,650],[707,703,650],[606,707,650],[594,606,650],[910,703,792],[908,910,792],[707,908,792],[703,707,792],[499,402,470],[531,499,470],[448,531,470],[402,448,470],[606,499,567],[618,606,567],[531,618,567],[499,531,567],[707,606,664],[719,707,664],[618,719,664],[606,618,664],[908,707,803],[906,908,803],[719,906,803],[707,719,803],[303,296,315],[337,303,315],[334,337,315],[296,334,315],[321,303,332],[368,321,332],[337,368,332],[303,337,332],[370,321,366],[416,370,366],[368,416,366],[321,368,366],[448,370,429],[491,448,429],[416,491,429],[370,416,429],[337,334,345],[354,337,345],[351,354,345],[334,351,345],[368,337,362],[389,368,362],[354,389,362],[337,354,362],[416,368,408],[444,416,408],[389,444,408],[368,389,408],[491,416,468],[509,491,468],[444,509,468],[416,444,468],[531,448,517],[561,531,517],[491,561,517],[448,491,517],[618,531,586],[634,618,586],[561,634,586],[531,561,586],[719,618,672],[732,719,672],[634,732,672],[618,634,672],[906,719,819],[904,906,819],[732,904,819],[719,732,819],[561,491,537],[571,561,537],[509,571,537],[491,509,537],[634,561,608],[644,634,608],[571,644,608],[561,571,608],[732,634,682],[738,732,682],[644,738,682],[634,644,682],[904,732,828],[902,904,828],[738,902,828],[732,738,828],[1154,912,1066],[1150,1154,1066],[910,1150,1066],[912,910,1066],[1261,1154,1213],[1259,1261,1213],[1150,1259,1213],[1154,1150,1213],[1150,910,1061],[1146,1150,1061],[908,1146,1061],[910,908,1061],[1259,1150,1203],[1247,1259,1203],[1146,1247,1203],[1150,1146,1203],[1366,1261,1312],[1360,1366,1312],[1259,1360,1312],[1261,1259,1312],[1478,1366,1416],[1472,1478,1416],[1360,1472,1416],[1366,1360,1416],[1360,1259,1302],[1354,1360,1302],[1247,1354,1302],[1259,1247,1302],[1472,1360,1403],[1451,1472,1403],[1354,1451,1403],[1360,1354,1403],[1146,908,1050],[1136,1146,1050],[906,1136,1050],[908,906,1050],[1247,1146,1189],[1235,1247,1189],[1136,1235,1189],[1146,1136,1189],[1354,1247,1286],[1322,1354,1286],[1235,1322,1286],[1247,1235,1286],[1451,1354,1383],[1405,1451,1383],[1322,1405,1383],[1354,1322,1383],[1534,1478,1511],[1528,1534,1511],[1472,1528,1511],[1478,1472,1511],[1588,1534,1562],[1583,1588,1562],[1528,1583,1562],[1534,1528,1562],[1528,1472,1503],[1520,1528,1503],[1451,1520,1503],[1472,1451,1503],[1583,1528,1556],[1567,1583,1556],[1520,1567,1556],[1528,1520,1556],[1625,1588,1606],[1620,1625,1606],[1583,1620,1606],[1588,1583,1606],[1633,1625,1627],[1629,1633,1627],[1620,1629,1627],[1625,1620,1627],[1620,1583,1592],[1602,1620,1592],[1567,1602,1592],[1583,1567,1592],[1629,1620,1615],[1612,1629,1615],[1602,1612,1615],[1620,1602,1615],[1520,1451,1476],[1483,1520,1476],[1405,1483,1476],[1451,1405,1476],[1567,1520,1522],[1524,1567,1522],[1483,1524,1522],[1520,1483,1522],[1602,1567,1564],[1558,1602,1564],[1524,1558,1564],[1567,1524,1564],[1612,1602,1579],[1566,1612,1579],[1558,1566,1579],[1602,1558,1579],[1136,906,1034],[1121,1136,1034],[904,1121,1034],[906,904,1034],[1235,1136,1181],[1219,1235,1181],[1121,1219,1181],[1136,1121,1181],[1322,1235,1267],[1292,1322,1267],[1219,1292,1267],[1235,1219,1267],[1405,1322,1336],[1362,1405,1336],[1292,1362,1336],[1322,1292,1336],[1121,904,1025],[1113,1121,1025],[902,1113,1025],[904,902,1025],[1219,1121,1171],[1207,1219,1171],[1113,1207,1171],[1121,1113,1171],[1292,1219,1245],[1280,1292,1245],[1207,1280,1245],[1219,1207,1245],[1362,1292,1316],[1342,1362,1316],[1280,1342,1316],[1292,1280,1316],[1483,1405,1424],[1437,1483,1424],[1362,1437,1424],[1405,1362,1424],[1524,1483,1487],[1485,1524,1487],[1437,1485,1487],[1483,1437,1487],[1558,1524,1516],[1513,1558,1516],[1485,1513,1516],[1524,1485,1516],[1566,1558,1530],[1515,1566,1530],[1513,1515,1530],[1558,1513,1530],[1437,1362,1385],[1407,1437,1385],[1342,1407,1385],[1362,1342,1385],[1485,1437,1445],[1462,1485,1445],[1407,1462,1445],[1437,1407,1445],[1513,1485,1491],[1497,1513,1491],[1462,1497,1491],[1485,1462,1491],[1515,1513,1505],[1501,1515,1505],[1497,1501,1505],[1513,1497,1505],[331,325,277],[228,331,277],[231,228,277],[325,231,277],[336,331,279],[224,336,279],[228,224,279],[331,228,279],[228,231,200],[173,228,200],[178,173,200],[231,178,200],[224,228,198],[167,224,198],[173,167,198],[228,173,198],[348,336,281],[222,348,281],[224,222,281],[336,224,281],[352,348,283],[210,352,283],[222,210,283],[348,222,283],[222,224,193],[150,222,193],[167,150,193],[224,167,193],[210,222,183],[142,210,183],[150,142,183],[222,150,183],[177,178,165],[136,177,165],[141,136,165],[178,141,165],[173,177,162],[127,173,162],[136,127,162],[177,136,162],[167,173,158],[131,167,158],[152,131,158],[173,152,158],[131,152,129],[82,131,129],[127,82,129],[152,127,129],[136,141,134],[114,136,134],[121,114,134],[141,121,134],[127,136,118],[93,127,118],[114,93,118],[136,114,118],[114,121,112],[101,114,112],[108,101,112],[121,108,112],[93,114,95],[90,93,95],[101,90,95],[114,101,95],[82,127,88],[59,82,88],[93,59,88],[127,93,88],[59,93,74],[52,59,74],[90,52,74],[93,90,74],[150,167,140],[86,150,140],[131,86,140],[167,131,140],[86,131,84],[50,86,84],[82,50,84],[131,82,84],[148,150,120],[76,148,120],[86,76,120],[150,86,120],[142,148,110],[72,142,110],[76,72,110],[148,76,110],[76,86,65],[36,76,65],[50,36,65],[86,50,65],[72,76,57],[34,72,57],[36,34,57],[76,36,57],[50,82,55],[27,50,55],[59,27,55],[82,59,55],[27,59,42],[18,27,42],[52,18,42],[59,52,42],[36,50,33],[12,36,33],[27,12,33],[50,27,33],[34,36,24],[8,34,24],[12,8,24],[36,12,24],[12,27,16],[2,12,16],[18,2,16],[27,18,16],[8,12,7],[0,8,7],[2,0,7],[12,2,7],[347,352,282],[221,347,282],[210,221,282],[352,210,282],[335,347,280],[223,335,280],[221,223,280],[347,221,280],[221,210,182],[149,221,182],[142,149,182],[210,142,182],[223,221,192],[166,223,192],[149,166,192],[221,149,192],[330,335,278],[227,330,278],[223,227,278],[335,223,278],[325,330,276],[231,325,276],[227,231,276],[330,227,276],[227,223,197],[172,227,197],[166,172,197],[223,166,197],[231,227,199],[178,231,199],[172,178,199],[227,172,199],[147,142,109],[75,147,109],[72,75,109],[142,72,109],[149,147,119],[85,149,119],[75,85,119],[147,75,119],[75,72,56],[35,75,56],[34,35,56],[72,34,56],[85,75,64],[49,85,64],[35,49,64],[75,35,64],[166,149,139],[130,166,139],[85,130,139],[149,85,139],[130,85,83],[81,130,83],[49,81,83],[85,49,83],[35,34,23],[11,35,23],[8,11,23],[34,8,23],[49,35,32],[26,49,32],[11,26,32],[35,11,32],[11,8,6],[1,11,6],[0,1,6],[8,0,6],[26,11,15],[17,26,15],[1,17,15],[11,1,15],[81,49,54],[58,81,54],[26,58,54],[49,26,54],[58,26,41],[51,58,41],[17,51,41],[26,17,41],[172,166,157],[151,172,157],[130,151,157],[166,130,157],[151,130,128],[126,151,128],[81,126,128],[130,81,128],[176,172,161],[135,176,161],[126,135,161],[172,126,161],[178,176,164],[141,178,164],[135,141,164],[176,135,164],[126,81,87],[92,126,87],[58,92,87],[81,58,87],[92,58,73],[89,92,73],[51,89,73],[58,51,73],[135,126,117],[113,135,117],[92,113,117],[126,92,117],[141,135,133],[121,141,133],[113,121,133],[135,113,133],[113,92,94],[100,113,94],[89,100,94],[92,89,94],[121,113,111],[108,121,111],[100,108,111],[113,100,111],[101,108,116],[125,101,116],[132,125,116],[108,132,116],[90,101,103],[105,90,103],[125,105,103],[101,125,103],[52,90,78],[71,52,78],[105,71,78],[90,105,78],[125,132,146],[156,125,146],[163,156,146],[132,163,146],[105,125,144],[154,105,144],[156,154,144],[125,156,144],[71,105,123],[138,71,123],[154,138,123],[105,154,123],[18,52,38],[22,18,38],[63,22,38],[52,63,38],[22,63,48],[40,22,48],[71,40,48],[63,71,48],[2,18,14],[10,2,14],[22,10,14],[18,22,14],[0,2,4],[5,0,4],[10,5,4],[2,10,4],[10,22,29],[31,10,29],[40,31,29],[22,40,29],[5,10,20],[25,5,20],[31,25,20],[10,31,20],[40,71,69],[67,40,69],[97,67,69],[71,97,69],[67,97,99],[107,67,99],[138,107,99],[97,138,99],[31,40,46],[61,31,46],[67,61,46],[40,67,46],[25,31,44],[53,25,44],[61,53,44],[31,61,44],[53,67,80],[91,53,80],[107,91,80],[67,107,80],[154,163,175],[195,154,175],[196,195,175],[163,196,175],[138,154,171],[189,138,171],[195,189,171],[154,195,171],[195,196,202],[207,195,202],[203,207,202],[196,203,202],[205,203,226],[234,205,226],[232,234,226],[203,232,226],[207,205,230],[236,207,230],[234,236,230],[205,234,230],[191,195,209],[241,191,209],[236,241,209],[195,236,209],[189,191,212],[248,189,212],[241,248,212],[191,241,212],[107,138,169],[185,107,169],[189,185,169],[138,189,169],[91,107,160],[179,91,160],[185,179,160],[107,185,160],[187,189,214],[252,187,214],[248,252,214],[189,248,214],[185,187,216],[259,185,216],[252,259,216],[187,252,216],[181,185,218],[261,181,218],[259,261,218],[185,259,218],[179,181,220],[262,179,220],[261,262,220],[181,261,220],[1,0,3],[9,1,3],[5,9,3],[0,5,3],[17,1,13],[21,17,13],[9,21,13],[1,9,13],[9,5,19],[30,9,19],[25,30,19],[5,25,19],[21,9,28],[39,21,28],[30,39,28],[9,30,28],[51,17,37],[62,51,37],[21,62,37],[17,21,37],[62,21,47],[70,62,47],[39,70,47],[21,39,47],[30,25,43],[60,30,43],[53,60,43],[25,53,43],[39,30,45],[66,39,45],[60,66,45],[30,60,45],[66,53,79],[106,66,79],[91,106,79],[53,91,79],[70,39,68],[96,70,68],[66,96,68],[39,66,68],[96,66,98],[137,96,98],[106,137,98],[66,106,98],[89,51,77],[104,89,77],[70,104,77],[51,70,77],[100,89,102],[124,100,102],[104,124,102],[89,104,102],[108,100,115],[132,108,115],[124,132,115],[100,124,115],[104,70,122],[153,104,122],[137,153,122],[70,137,122],[124,104,143],[155,124,143],[153,155,143],[104,153,143],[132,124,145],[163,132,145],[155,163,145],[124,155,145],[106,91,159],[184,106,159],[179,184,159],[91,179,159],[137,106,168],[188,137,168],[184,188,168],[106,184,168],[180,179,219],[260,180,219],[262,260,219],[179,262,219],[184,180,217],[258,184,217],[260,258,217],[180,260,217],[186,184,215],[251,186,215],[258,251,215],[184,258,215],[188,186,213],[247,188,213],[251,247,213],[186,251,213],[153,137,170],[194,153,170],[188,194,170],[137,188,170],[163,153,174],[196,163,174],[194,196,174],[153,194,174],[190,188,211],[240,190,211],[247,240,211],[188,247,211],[194,190,208],[235,194,208],[240,235,208],[190,240,208],[196,194,201],[203,196,201],[206,203,201],[194,206,201],[204,206,229],[233,204,229],[235,233,229],[206,235,229],[203,204,225],[232,203,225],[233,232,225],[204,233,225],[1552,1553,1587],[1632,1552,1587],[1630,1632,1587],[1553,1630,1587],[1550,1552,1591],[1637,1550,1591],[1632,1637,1591],[1552,1632,1591],[1632,1630,1647],[1665,1632,1647],[1663,1665,1647],[1630,1663,1647],[1637,1632,1651],[1673,1637,1651],[1665,1673,1651],[1632,1665,1651],[1548,1550,1595],[1641,1548,1595],[1637,1641,1595],[1550,1637,1595],[1546,1548,1597],[1645,1546,1597],[1641,1645,1597],[1548,1641,1597],[1641,1637,1657],[1679,1641,1657],[1673,1679,1657],[1637,1673,1657],[1645,1641,1660],[1688,1645,1660],[1679,1688,1660],[1641,1679,1660],[1665,1663,1677],[1695,1665,1677],[1693,1695,1677],[1663,1693,1677],[1673,1665,1683],[1705,1673,1683],[1695,1705,1683],[1665,1695,1683],[1695,1693,1707],[1718,1695,1707],[1712,1718,1707],[1693,1712,1707],[1705,1695,1709],[1725,1705,1709],[1718,1725,1709],[1695,1718,1709],[1679,1673,1692],[1714,1679,1692],[1705,1714,1692],[1673,1705,1692],[1688,1679,1703],[1729,1688,1703],[1714,1729,1703],[1679,1714,1703],[1714,1705,1723],[1739,1714,1723],[1725,1739,1723],[1705,1725,1723],[1729,1714,1733],[1752,1729,1733],[1739,1752,1733],[1714,1739,1733],[1544,1546,1605],[1649,1544,1605],[1645,1649,1605],[1546,1645,1605],[1542,1544,1576],[1614,1542,1576],[1609,1614,1576],[1544,1609,1576],[1614,1609,1635],[1653,1614,1635],[1649,1653,1635],[1609,1649,1635],[1649,1645,1669],[1699,1649,1669],[1688,1699,1669],[1645,1688,1669],[1653,1649,1662],[1681,1653,1662],[1675,1681,1662],[1649,1675,1662],[1681,1675,1690],[1711,1681,1690],[1699,1711,1690],[1675,1699,1690],[1540,1542,1578],[1618,1540,1578],[1614,1618,1578],[1542,1614,1578],[1618,1614,1639],[1655,1618,1639],[1653,1655,1639],[1614,1653,1639],[1538,1540,1582],[1619,1538,1582],[1618,1619,1582],[1540,1618,1582],[1619,1618,1643],[1658,1619,1643],[1655,1658,1643],[1618,1655,1643],[1655,1653,1667],[1685,1655,1667],[1681,1685,1667],[1653,1681,1667],[1685,1681,1697],[1720,1685,1697],[1711,1720,1697],[1681,1711,1697],[1658,1655,1671],[1686,1658,1671],[1685,1686,1671],[1655,1685,1671],[1686,1685,1701],[1721,1686,1701],[1720,1721,1701],[1685,1720,1701],[1699,1688,1716],[1743,1699,1716],[1729,1743,1716],[1688,1729,1716],[1711,1699,1727],[1754,1711,1727],[1743,1754,1727],[1699,1743,1727],[1743,1729,1748],[1770,1743,1748],[1752,1770,1748],[1729,1752,1748],[1754,1743,1760],[1786,1754,1760],[1770,1786,1760],[1743,1770,1760],[1720,1711,1735],[1762,1720,1735],[1754,1762,1735],[1711,1754,1735],[1721,1720,1741],[1768,1721,1741],[1762,1768,1741],[1720,1762,1741],[1762,1754,1776],[1796,1762,1776],[1786,1796,1776],[1754,1786,1776],[1768,1762,1782],[1801,1768,1782],[1796,1801,1782],[1762,1796,1782],[1718,1712,1731],[1746,1718,1731],[1744,1746,1731],[1712,1744,1731],[1725,1718,1737],[1758,1725,1737],[1746,1758,1737],[1718,1746,1737],[1739,1725,1750],[1780,1739,1750],[1758,1780,1750],[1725,1758,1750],[1752,1739,1765],[1800,1752,1765],[1780,1800,1765],[1739,1780,1765],[1746,1744,1756],[1772,1746,1756],[1763,1772,1756],[1744,1763,1756],[1758,1746,1767],[1788,1758,1767],[1772,1788,1767],[1746,1772,1767],[1772,1763,1790],[1814,1772,1790],[1806,1814,1790],[1763,1806,1790],[1788,1772,1803],[1832,1788,1803],[1814,1832,1803],[1772,1814,1803],[1780,1758,1784],[1816,1780,1784],[1788,1816,1784],[1758,1788,1784],[1800,1780,1808],[1839,1800,1808],[1816,1839,1808],[1780,1816,1808],[1839,1788,1845],[1898,1839,1845],[1832,1898,1845],[1788,1832,1845],[1770,1752,1774],[1794,1770,1774],[1778,1794,1774],[1752,1778,1774],[1786,1770,1792],[1810,1786,1792],[1794,1810,1792],[1770,1794,1792],[1794,1778,1798],[1822,1794,1798],[1800,1822,1798],[1778,1800,1798],[1810,1794,1818],[1843,1810,1818],[1822,1843,1818],[1794,1822,1818],[1796,1786,1805],[1824,1796,1805],[1810,1824,1805],[1786,1810,1805],[1801,1796,1812],[1825,1801,1812],[1824,1825,1812],[1796,1824,1812],[1824,1810,1830],[1861,1824,1830],[1843,1861,1830],[1810,1843,1830],[1825,1824,1841],[1870,1825,1841],[1861,1870,1841],[1824,1861,1841],[1822,1800,1828],[1874,1822,1828],[1839,1874,1828],[1800,1839,1828],[1843,1822,1859],[1892,1843,1859],[1874,1892,1859],[1822,1874,1859],[1892,1839,1886],[1911,1892,1886],[1878,1911,1886],[1839,1878,1886],[1911,1878,1909],[1935,1911,1909],[1898,1935,1909],[1878,1898,1909],[1861,1843,1880],[1902,1861,1880],[1892,1902,1880],[1843,1892,1880],[1870,1861,1890],[1905,1870,1890],[1902,1905,1890],[1861,1902,1890],[1902,1892,1907],[1923,1902,1907],[1911,1923,1907],[1892,1911,1907],[1923,1911,1930],[1949,1923,1930],[1935,1949,1930],[1911,1935,1930],[1905,1902,1913],[1926,1905,1913],[1923,1926,1913],[1902,1923,1913],[1926,1923,1939],[1952,1926,1939],[1949,1952,1939],[1923,1949,1939],[1539,1538,1581],[1617,1539,1581],[1619,1617,1581],[1538,1619,1581],[1617,1619,1642],[1654,1617,1642],[1658,1654,1642],[1619,1658,1642],[1541,1539,1577],[1613,1541,1577],[1617,1613,1577],[1539,1617,1577],[1613,1617,1638],[1652,1613,1638],[1654,1652,1638],[1617,1654,1638],[1654,1658,1670],[1684,1654,1670],[1686,1684,1670],[1658,1686,1670],[1684,1686,1700],[1719,1684,1700],[1721,1719,1700],[1686,1721,1700],[1652,1654,1666],[1680,1652,1666],[1684,1680,1666],[1654,1684,1666],[1680,1684,1696],[1710,1680,1696],[1719,1710,1696],[1684,1719,1696],[1543,1541,1575],[1608,1543,1575],[1613,1608,1575],[1541,1613,1575],[1608,1613,1634],[1648,1608,1634],[1652,1648,1634],[1613,1652,1634],[1545,1543,1604],[1644,1545,1604],[1648,1644,1604],[1543,1648,1604],[1648,1652,1661],[1674,1648,1661],[1680,1674,1661],[1652,1680,1661],[1674,1680,1689],[1698,1674,1689],[1710,1698,1689],[1680,1710,1689],[1644,1648,1668],[1687,1644,1668],[1698,1687,1668],[1648,1698,1668],[1719,1721,1740],[1761,1719,1740],[1768,1761,1740],[1721,1768,1740],[1710,1719,1734],[1753,1710,1734],[1761,1753,1734],[1719,1761,1734],[1761,1768,1781],[1795,1761,1781],[1801,1795,1781],[1768,1801,1781],[1753,1761,1775],[1785,1753,1775],[1795,1785,1775],[1761,1795,1775],[1698,1710,1726],[1742,1698,1726],[1753,1742,1726],[1710,1753,1726],[1687,1698,1715],[1728,1687,1715],[1742,1728,1715],[1698,1742,1715],[1742,1753,1759],[1769,1742,1759],[1785,1769,1759],[1753,1785,1759],[1728,1742,1747],[1751,1728,1747],[1769,1751,1747],[1742,1769,1747],[1547,1545,1596],[1640,1547,1596],[1644,1640,1596],[1545,1644,1596],[1549,1547,1594],[1636,1549,1594],[1640,1636,1594],[1547,1640,1594],[1640,1644,1659],[1678,1640,1659],[1687,1678,1659],[1644,1687,1659],[1636,1640,1656],[1672,1636,1656],[1678,1672,1656],[1640,1678,1656],[1551,1549,1590],[1631,1551,1590],[1636,1631,1590],[1549,1636,1590],[1553,1551,1586],[1630,1553,1586],[1631,1630,1586],[1551,1631,1586],[1631,1636,1650],[1664,1631,1650],[1672,1664,1650],[1636,1672,1650],[1630,1631,1646],[1663,1630,1646],[1664,1663,1646],[1631,1664,1646],[1678,1687,1702],[1713,1678,1702],[1728,1713,1702],[1687,1728,1702],[1672,1678,1691],[1704,1672,1691],[1713,1704,1691],[1678,1713,1691],[1713,1728,1732],[1738,1713,1732],[1751,1738,1732],[1728,1751,1732],[1704,1713,1722],[1724,1704,1722],[1738,1724,1722],[1713,1738,1722],[1664,1672,1682],[1694,1664,1682],[1704,1694,1682],[1672,1704,1682],[1663,1664,1676],[1693,1663,1676],[1694,1693,1676],[1664,1694,1676],[1694,1704,1708],[1717,1694,1708],[1724,1717,1708],[1704,1724,1708],[1693,1694,1706],[1712,1693,1706],[1717,1712,1706],[1694,1717,1706],[1795,1801,1811],[1823,1795,1811],[1825,1823,1811],[1801,1825,1811],[1785,1795,1804],[1809,1785,1804],[1823,1809,1804],[1795,1823,1804],[1823,1825,1840],[1860,1823,1840],[1870,1860,1840],[1825,1870,1840],[1809,1823,1829],[1842,1809,1829],[1860,1842,1829],[1823,1860,1829],[1769,1785,1791],[1793,1769,1791],[1809,1793,1791],[1785,1809,1791],[1751,1769,1773],[1777,1751,1773],[1793,1777,1773],[1769,1793,1773],[1793,1809,1817],[1821,1793,1817],[1842,1821,1817],[1809,1842,1817],[1777,1793,1797],[1799,1777,1797],[1821,1799,1797],[1793,1821,1797],[1860,1870,1889],[1901,1860,1889],[1905,1901,1889],[1870,1905,1889],[1842,1860,1879],[1891,1842,1879],[1901,1891,1879],[1860,1901,1879],[1901,1905,1912],[1922,1901,1912],[1926,1922,1912],[1905,1926,1912],[1922,1926,1938],[1948,1922,1938],[1952,1948,1938],[1926,1952,1938],[1891,1901,1906],[1910,1891,1906],[1922,1910,1906],[1901,1922,1906],[1910,1922,1929],[1934,1910,1929],[1948,1934,1929],[1922,1948,1929],[1821,1842,1858],[1873,1821,1858],[1891,1873,1858],[1842,1891,1858],[1799,1821,1827],[1838,1799,1827],[1873,1838,1827],[1821,1873,1827],[1838,1891,1885],[1877,1838,1885],[1910,1877,1885],[1891,1910,1885],[1877,1910,1908],[1895,1877,1908],[1934,1895,1908],[1910,1934,1908],[1738,1751,1764],[1779,1738,1764],[1799,1779,1764],[1751,1799,1764],[1724,1738,1749],[1757,1724,1749],[1779,1757,1749],[1738,1779,1749],[1717,1724,1736],[1745,1717,1736],[1757,1745,1736],[1724,1757,1736],[1712,1717,1730],[1744,1712,1730],[1745,1744,1730],[1717,1745,1730],[1779,1799,1807],[1815,1779,1807],[1838,1815,1807],[1799,1838,1807],[1757,1779,1783],[1787,1757,1783],[1815,1787,1783],[1779,1815,1783],[1787,1838,1844],[1831,1787,1844],[1895,1831,1844],[1838,1895,1844],[1745,1757,1766],[1771,1745,1766],[1787,1771,1766],[1757,1787,1766],[1744,1745,1755],[1763,1744,1755],[1771,1763,1755],[1745,1771,1755],[1771,1787,1802],[1813,1771,1802],[1831,1813,1802],[1787,1831,1802],[1763,1771,1789],[1806,1763,1789],[1813,1806,1789],[1771,1813,1789],[1814,1806,1820],[1836,1814,1820],[1826,1836,1820],[1806,1826,1820],[1832,1814,1834],[1872,1832,1834],[1836,1872,1834],[1814,1836,1834],[1898,1832,1888],[1915,1898,1888],[1872,1915,1888],[1832,1872,1888],[1836,1826,1847],[1857,1836,1847],[1850,1857,1847],[1826,1850,1847],[1872,1836,1863],[1882,1872,1863],[1857,1882,1863],[1836,1857,1863],[1915,1872,1900],[1919,1915,1900],[1882,1919,1900],[1872,1882,1900],[1935,1898,1928],[1954,1935,1928],[1915,1954,1928],[1898,1915,1928],[1949,1935,1951],[1969,1949,1951],[1954,1969,1951],[1935,1954,1951],[1952,1949,1962],[1974,1952,1962],[1969,1974,1962],[1949,1969,1962],[1954,1915,1941],[1958,1954,1941],[1919,1958,1941],[1915,1919,1941],[1969,1954,1965],[1971,1969,1965],[1958,1971,1965],[1954,1958,1965],[1974,1969,1973],[1975,1974,1973],[1971,1975,1973],[1969,1971,1973],[1857,1850,1855],[1867,1857,1855],[1853,1867,1855],[1850,1853,1855],[1882,1857,1876],[1884,1882,1876],[1867,1884,1876],[1857,1867,1876],[1919,1882,1904],[1917,1919,1904],[1884,1917,1904],[1882,1884,1904],[1867,1853,1852],[1849,1867,1852],[1837,1849,1852],[1853,1837,1852],[1884,1867,1869],[1865,1884,1869],[1849,1865,1869],[1867,1849,1869],[1917,1884,1894],[1897,1917,1894],[1865,1897,1894],[1884,1865,1894],[1958,1919,1937],[1947,1958,1937],[1917,1947,1937],[1919,1917,1937],[1971,1958,1960],[1956,1971,1960],[1947,1956,1960],[1958,1947,1960],[1975,1971,1967],[1963,1975,1967],[1956,1963,1967],[1971,1956,1967],[1947,1917,1921],[1925,1947,1921],[1897,1925,1921],[1917,1897,1921],[1956,1947,1943],[1932,1956,1943],[1925,1932,1943],[1947,1925,1943],[1963,1956,1945],[1933,1963,1945],[1932,1933,1945],[1956,1932,1945],[1948,1952,1961],[1968,1948,1961],[1974,1968,1961],[1952,1974,1961],[1934,1948,1950],[1953,1934,1950],[1968,1953,1950],[1948,1968,1950],[1895,1934,1927],[1914,1895,1927],[1953,1914,1927],[1934,1953,1927],[1968,1974,1972],[1970,1968,1972],[1975,1970,1972],[1974,1975,1972],[1953,1968,1964],[1957,1953,1964],[1970,1957,1964],[1968,1970,1964],[1914,1953,1940],[1918,1914,1940],[1957,1918,1940],[1953,1957,1940],[1831,1895,1887],[1871,1831,1887],[1914,1871,1887],[1895,1914,1887],[1813,1831,1833],[1835,1813,1833],[1871,1835,1833],[1831,1871,1833],[1806,1813,1819],[1826,1806,1819],[1835,1826,1819],[1813,1835,1819],[1871,1914,1899],[1881,1871,1899],[1918,1881,1899],[1914,1918,1899],[1835,1871,1862],[1856,1835,1862],[1881,1856,1862],[1871,1881,1862],[1826,1835,1846],[1850,1826,1846],[1856,1850,1846],[1835,1856,1846],[1970,1975,1966],[1955,1970,1966],[1963,1955,1966],[1975,1963,1966],[1957,1970,1959],[1946,1957,1959],[1955,1946,1959],[1970,1955,1959],[1918,1957,1936],[1916,1918,1936],[1946,1916,1936],[1957,1946,1936],[1955,1963,1944],[1931,1955,1944],[1933,1931,1944],[1963,1933,1944],[1946,1955,1942],[1924,1946,1942],[1931,1924,1942],[1955,1931,1942],[1916,1946,1920],[1896,1916,1920],[1924,1896,1920],[1946,1924,1920],[1881,1918,1903],[1883,1881,1903],[1916,1883,1903],[1918,1916,1903],[1856,1881,1875],[1866,1856,1875],[1883,1866,1875],[1881,1883,1875],[1850,1856,1854],[1853,1850,1854],[1866,1853,1854],[1856,1866,1854],[1883,1916,1893],[1864,1883,1893],[1896,1864,1893],[1916,1896,1893],[1866,1883,1868],[1848,1866,1868],[1864,1848,1868],[1883,1864,1868],[1853,1866,1851],[1837,1853,1851],[1848,1837,1851],[1866,1848,1851],[1069,952,992],[1072,1069,992],[952,1072,992],[1069,1072,1094],[1118,1069,1094],[1134,1118,1094],[1072,1134,1094],[1030,952,984],[1069,1030,984],[952,1069,984],[1030,1069,1076],[1080,1030,1076],[1118,1080,1076],[1069,1118,1076],[1118,1134,1133],[1131,1118,1133],[1139,1131,1133],[1134,1139,1133],[1131,1139,1129],[1110,1131,1129],[1127,1110,1129],[1139,1127,1129],[1080,1118,1104],[1088,1080,1104],[1131,1088,1104],[1118,1131,1104],[1088,1131,1096],[1074,1088,1096],[1110,1074,1096],[1131,1110,1096],[980,952,964],[1030,980,964],[952,1030,964],[980,1030,1028],[1002,980,1028],[1080,1002,1028],[1030,1080,1028],[951,952,954],[980,951,954],[952,980,954],[951,980,962],[949,951,962],[1002,949,962],[980,1002,962],[1002,1080,1059],[1012,1002,1059],[1088,1012,1059],[1080,1088,1059],[1012,1088,1053],[998,1012,1053],[1074,998,1053],[1088,1074,1053],[949,1002,974],[947,949,974],[1012,947,974],[1002,1012,974],[947,1012,972],[945,947,972],[998,945,972],[1012,998,972],[1110,1127,1082],[1047,1110,1082],[1060,1047,1082],[1127,1060,1082],[1074,1110,1071],[1004,1074,1071],[1047,1004,1071],[1110,1047,1071],[1047,1060,1039],[1024,1047,1039],[1031,1024,1039],[1060,1031,1039],[1024,1031,1041],[1049,1024,1041],[1063,1049,1041],[1031,1063,1041],[1004,1047,1018],[994,1004,1018],[1024,994,1018],[1047,1024,1018],[994,1024,1020],[1010,994,1020],[1049,1010,1020],[1024,1049,1020],[998,1074,1014],[976,998,1014],[1004,976,1014],[1074,1004,1014],[945,998,960],[943,945,960],[976,943,960],[998,976,960],[976,1004,986],[970,976,986],[994,970,986],[1004,994,986],[970,994,990],[978,970,990],[1010,978,990],[994,1010,990],[943,976,956],[941,943,956],[970,941,956],[976,970,956],[941,970,958],[939,941,958],[978,939,958],[970,978,958],[875,952,901],[951,875,901],[952,951,901],[875,951,893],[853,875,893],[949,853,893],[951,949,893],[825,952,891],[875,825,891],[952,875,891],[825,875,827],[775,825,827],[853,775,827],[875,853,827],[853,949,881],[843,853,881],[947,843,881],[949,947,881],[843,947,883],[857,843,883],[945,857,883],[947,945,883],[775,853,796],[767,775,796],[843,767,796],[853,843,796],[767,843,802],[781,767,802],[857,781,802],[843,857,802],[786,952,871],[825,786,871],[952,825,871],[786,825,779],[737,786,779],[775,737,779],[825,775,779],[782,952,863],[786,782,863],[952,786,863],[782,786,761],[720,782,761],[737,720,761],[786,737,761],[737,775,751],[724,737,751],[767,724,751],[775,767,751],[724,767,759],[745,724,759],[781,745,759],[767,781,759],[720,737,722],[715,720,722],[724,715,722],[737,724,722],[715,724,726],[727,715,726],[745,727,726],[724,745,726],[857,945,895],[879,857,895],[943,879,895],[945,943,895],[781,857,841],[851,781,841],[879,851,841],[857,879,841],[879,943,899],[885,879,899],[941,885,899],[943,941,899],[885,941,897],[877,885,897],[939,877,897],[941,939,897],[851,879,869],[861,851,869],[885,861,869],[879,885,869],[861,885,865],[845,861,865],[877,845,865],[885,877,865],[745,781,784],[808,745,784],[851,808,784],[781,851,784],[727,745,773],[794,727,773],[808,794,773],[745,808,773],[808,851,837],[831,808,837],[861,831,837],[851,861,837],[831,861,835],[806,831,835],[845,806,835],[861,845,835],[794,808,816],[823,794,816],[831,823,816],[808,831,816],[823,831,814],[791,823,814],[806,791,814],[831,806,814],[785,952,862],[782,785,862],[952,782,862],[785,782,760],[736,785,760],[720,736,760],[782,720,760],[824,952,870],[785,824,870],[952,785,870],[824,785,778],[774,824,778],[736,774,778],[785,736,778],[736,720,721],[723,736,721],[715,723,721],[720,715,721],[723,715,725],[744,723,725],[727,744,725],[715,727,725],[774,736,750],[766,774,750],[723,766,750],[736,723,750],[766,723,758],[780,766,758],[744,780,758],[723,744,758],[874,952,890],[824,874,890],[952,824,890],[874,824,826],[852,874,826],[774,852,826],[824,774,826],[950,952,900],[874,950,900],[952,874,900],[950,874,892],[948,950,892],[852,948,892],[874,852,892],[852,774,795],[842,852,795],[766,842,795],[774,766,795],[842,766,801],[856,842,801],[780,856,801],[766,780,801],[948,852,880],[946,948,880],[842,946,880],[852,842,880],[946,842,882],[944,946,882],[856,944,882],[842,856,882],[744,727,772],[807,744,772],[794,807,772],[727,794,772],[780,744,783],[850,780,783],[807,850,783],[744,807,783],[807,794,815],[830,807,815],[823,830,815],[794,823,815],[830,823,813],[805,830,813],[791,805,813],[823,791,813],[850,807,836],[860,850,836],[830,860,836],[807,830,836],[860,830,834],[844,860,834],[805,844,834],[830,805,834],[856,780,840],[878,856,840],[850,878,840],[780,850,840],[944,856,894],[942,944,894],[878,942,894],[856,878,894],[878,850,868],[884,878,868],[860,884,868],[850,860,868],[884,860,864],[876,884,864],[844,876,864],[860,844,864],[942,878,898],[940,942,898],[884,940,898],[878,884,898],[940,884,896],[938,940,896],[876,938,896],[884,876,896],[979,952,953],[950,979,953],[952,950,953],[979,950,961],[1001,979,961],[948,1001,961],[950,948,961],[1029,952,963],[979,1029,963],[952,979,963],[1029,979,1027],[1079,1029,1027],[1001,1079,1027],[979,1001,1027],[1001,948,973],[1011,1001,973],[946,1011,973],[948,946,973],[1011,946,971],[997,1011,971],[944,997,971],[946,944,971],[1079,1001,1058],[1087,1079,1058],[1011,1087,1058],[1001,1011,1058],[1087,1011,1052],[1073,1087,1052],[997,1073,1052],[1011,997,1052],[1068,952,983],[1029,1068,983],[952,1029,983],[1068,1029,1075],[1117,1068,1075],[1079,1117,1075],[1029,1079,1075],[1072,952,991],[1068,1072,991],[952,1068,991],[1072,1068,1093],[1134,1072,1093],[1117,1134,1093],[1068,1117,1093],[1117,1079,1103],[1130,1117,1103],[1087,1130,1103],[1079,1087,1103],[1130,1087,1095],[1109,1130,1095],[1073,1109,1095],[1087,1073,1095],[1134,1117,1132],[1139,1134,1132],[1130,1139,1132],[1117,1130,1132],[1139,1130,1128],[1127,1139,1128],[1109,1127,1128],[1130,1109,1128],[997,944,959],[975,997,959],[942,975,959],[944,942,959],[1073,997,1013],[1003,1073,1013],[975,1003,1013],[997,975,1013],[975,942,955],[969,975,955],[940,969,955],[942,940,955],[969,940,957],[977,969,957],[938,977,957],[940,938,957],[1003,975,985],[993,1003,985],[969,993,985],[975,969,985],[993,969,989],[1009,993,989],[977,1009,989],[969,977,989],[1109,1073,1070],[1046,1109,1070],[1003,1046,1070],[1073,1003,1070],[1127,1109,1081],[1060,1127,1081],[1046,1060,1081],[1109,1046,1081],[1046,1003,1017],[1023,1046,1017],[993,1023,1017],[1003,993,1017],[1023,993,1019],[1048,1023,1019],[1009,1048,1019],[993,1009,1019],[1060,1046,1038],[1031,1060,1038],[1023,1031,1038],[1046,1023,1038],[1031,1023,1040],[1063,1031,1040],[1048,1063,1040],[1023,1048,1040],[1049,1063,1120],[1161,1049,1120],[1170,1161,1120],[1063,1170,1120],[1010,1049,1092],[1126,1010,1092],[1161,1126,1092],[1049,1161,1092],[1165,1170,1224],[1272,1165,1224],[1279,1272,1224],[1170,1279,1224],[1161,1165,1216],[1250,1161,1216],[1272,1250,1216],[1165,1272,1216],[1141,1161,1196],[1234,1141,1196],[1250,1234,1196],[1161,1250,1196],[1126,1141,1178],[1206,1126,1178],[1234,1206,1178],[1141,1234,1178],[978,1010,1045],[1043,978,1045],[1126,1043,1045],[1010,1126,1045],[939,978,966],[937,939,966],[1043,937,966],[978,1043,966],[1084,1126,1153],[1174,1084,1153],[1206,1174,1153],[1126,1206,1153],[1043,1084,1112],[1124,1043,1112],[1174,1124,1112],[1084,1174,1112],[982,1043,1055],[1033,982,1055],[1124,1033,1055],[1043,1124,1055],[937,982,968],[935,937,968],[1033,935,968],[982,1033,968],[1272,1279,1321],[1369,1272,1321],[1376,1369,1321],[1279,1376,1321],[1250,1272,1309],[1347,1250,1309],[1369,1347,1309],[1272,1369,1309],[1234,1250,1285],[1315,1234,1285],[1347,1315,1285],[1250,1347,1285],[1206,1234,1252],[1278,1206,1252],[1315,1278,1252],[1234,1315,1252],[1369,1376,1388],[1402,1369,1388],[1415,1402,1388],[1376,1415,1388],[1347,1369,1375],[1378,1347,1375],[1402,1378,1375],[1369,1402,1375],[1402,1415,1419],[1423,1402,1419],[1434,1423,1419],[1415,1434,1419],[1378,1402,1396],[1390,1378,1396],[1423,1390,1396],[1402,1423,1396],[1315,1347,1339],[1335,1315,1339],[1378,1335,1339],[1347,1378,1339],[1278,1315,1305],[1295,1278,1305],[1335,1295,1305],[1315,1335,1305],[1335,1378,1365],[1353,1335,1365],[1390,1353,1365],[1378,1390,1365],[1295,1335,1325],[1301,1295,1325],[1353,1301,1325],[1335,1353,1325],[1174,1206,1222],[1226,1174,1222],[1278,1226,1222],[1206,1278,1222],[1124,1174,1176],[1169,1124,1176],[1226,1169,1176],[1174,1226,1176],[1033,1124,1108],[1078,1033,1108],[1169,1078,1108],[1124,1169,1108],[935,1033,988],[931,935,988],[1078,931,988],[1033,1078,988],[1226,1278,1256],[1240,1226,1256],[1295,1240,1256],[1278,1295,1256],[1169,1226,1202],[1180,1169,1202],[1240,1180,1202],[1226,1240,1202],[1240,1295,1274],[1244,1240,1274],[1301,1244,1274],[1295,1301,1274],[1180,1240,1218],[1186,1180,1218],[1244,1186,1218],[1240,1244,1218],[1078,1169,1138],[1086,1078,1138],[1180,1086,1138],[1169,1180,1138],[931,1078,996],[925,931,996],[1086,925,996],[1078,1086,996],[1086,1180,1145],[1090,1086,1145],[1186,1090,1145],[1180,1186,1145],[925,1086,1e3],[921,925,1e3],[1090,921,1e3],[1086,1090,1e3],[877,939,889],[812,877,889],[937,812,889],[939,937,889],[845,877,810],[729,845,810],[812,729,810],[877,812,810],[873,937,887],[822,873,887],[935,822,887],[937,935,887],[812,873,800],[731,812,800],[822,731,800],[873,822,800],[771,812,743],[681,771,743],[731,681,743],[812,731,743],[729,771,702],[649,729,702],[681,649,702],[771,681,702],[806,845,763],[694,806,763],[729,694,763],[845,729,763],[791,806,735],[684,791,735],[694,684,735],[806,694,735],[714,729,677],[621,714,677],[649,621,677],[729,649,677],[694,714,659],[605,694,659],[621,605,659],[714,621,659],[690,694,639],[583,690,639],[605,583,639],[694,605,639],[684,690,631],[575,684,631],[583,575,631],[690,583,631],[822,935,867],[777,822,867],[931,777,867],[935,931,867],[731,822,747],[686,731,747],[777,686,747],[822,777,747],[681,731,679],[629,681,679],[686,629,679],[731,686,679],[649,681,633],[577,649,633],[629,577,633],[681,629,633],[777,931,859],[769,777,859],[925,769,859],[931,925,859],[686,777,717],[675,686,717],[769,675,717],[777,769,717],[769,925,855],[765,769,855],[921,765,855],[925,921,855],[675,769,710],[669,675,710],[765,669,710],[769,765,710],[629,686,653],[615,629,653],[675,615,653],[686,675,653],[577,629,599],[560,577,599],[615,560,599],[629,615,599],[615,675,637],[611,615,637],[669,611,637],[675,669,637],[560,615,581],[554,560,581],[611,554,581],[615,611,581],[621,649,603],[540,621,603],[577,540,603],[649,577,603],[605,621,570],[508,605,570],[540,508,570],[621,540,570],[583,605,546],[486,583,546],[508,486,546],[605,508,546],[575,583,534],[478,575,534],[486,478,534],[583,486,534],[540,577,550],[520,540,550],[560,520,550],[577,560,550],[508,540,516],[477,508,516],[520,477,516],[540,520,516],[520,560,530],[502,520,530],[554,502,530],[560,554,530],[477,520,490],[465,477,490],[502,465,490],[520,502,490],[486,508,480],[453,486,480],[477,453,480],[508,477,480],[478,486,467],[439,478,467],[453,439,467],[486,453,467],[453,477,459],[432,453,459],[465,432,459],[477,465,459],[439,453,436],[420,439,436],[432,420,436],[453,432,436],[805,791,734],[693,805,734],[684,693,734],[791,684,734],[844,805,762],[728,844,762],[693,728,762],[805,693,762],[689,684,630],[582,689,630],[575,582,630],[684,575,630],[693,689,638],[604,693,638],[582,604,638],[689,582,638],[713,693,658],[620,713,658],[604,620,658],[693,604,658],[728,713,676],[648,728,676],[620,648,676],[713,620,676],[876,844,809],[811,876,809],[728,811,809],[844,728,809],[938,876,888],[936,938,888],[811,936,888],[876,811,888],[770,728,701],[680,770,701],[648,680,701],[728,648,701],[811,770,742],[730,811,742],[680,730,742],[770,680,742],[872,811,799],[821,872,799],[730,821,799],[811,730,799],[936,872,886],[934,936,886],[821,934,886],[872,821,886],[582,575,533],[485,582,533],[478,485,533],[575,478,533],[604,582,545],[507,604,545],[485,507,545],[582,485,545],[620,604,569],[539,620,569],[507,539,569],[604,507,569],[648,620,602],[576,648,602],[539,576,602],[620,539,602],[485,478,466],[452,485,466],[439,452,466],[478,439,466],[507,485,479],[476,507,479],[452,476,479],[485,452,479],[452,439,435],[431,452,435],[420,431,435],[439,420,435],[476,452,458],[464,476,458],[431,464,458],[452,431,458],[539,507,515],[519,539,515],[476,519,515],[507,476,515],[576,539,549],[559,576,549],[519,559,549],[539,519,549],[519,476,489],[501,519,489],[464,501,489],[476,464,489],[559,519,529],[553,559,529],[501,553,529],[519,501,529],[680,648,632],[628,680,632],[576,628,632],[648,576,632],[730,680,678],[685,730,678],[628,685,678],[680,628,678],[821,730,746],[776,821,746],[685,776,746],[730,685,746],[934,821,866],[930,934,866],[776,930,866],[821,776,866],[628,576,598],[614,628,598],[559,614,598],[576,559,598],[685,628,652],[674,685,652],[614,674,652],[628,614,652],[614,559,580],[610,614,580],[553,610,580],[559,553,580],[674,614,636],[668,674,636],[610,668,636],[614,610,636],[776,685,716],[768,776,716],[674,768,716],[685,674,716],[930,776,858],[924,930,858],[768,924,858],[776,768,858],[768,674,709],[764,768,709],[668,764,709],[674,668,709],[924,768,854],[920,924,854],[764,920,854],[768,764,854],[977,938,965],[1042,977,965],[936,1042,965],[938,936,965],[1009,977,1044],[1125,1009,1044],[1042,1125,1044],[977,1042,1044],[981,936,967],[1032,981,967],[934,1032,967],[936,934,967],[1042,981,1054],[1123,1042,1054],[1032,1123,1054],[981,1032,1054],[1083,1042,1111],[1173,1083,1111],[1123,1173,1111],[1042,1123,1111],[1125,1083,1152],[1205,1125,1152],[1173,1205,1152],[1083,1173,1152],[1048,1009,1091],[1160,1048,1091],[1125,1160,1091],[1009,1125,1091],[1063,1048,1119],[1170,1063,1119],[1160,1170,1119],[1048,1160,1119],[1140,1125,1177],[1233,1140,1177],[1205,1233,1177],[1125,1205,1177],[1160,1140,1195],[1249,1160,1195],[1233,1249,1195],[1140,1233,1195],[1164,1160,1215],[1271,1164,1215],[1249,1271,1215],[1160,1249,1215],[1170,1164,1223],[1279,1170,1223],[1271,1279,1223],[1164,1271,1223],[1032,934,987],[1077,1032,987],[930,1077,987],[934,930,987],[1123,1032,1107],[1168,1123,1107],[1077,1168,1107],[1032,1077,1107],[1173,1123,1175],[1225,1173,1175],[1168,1225,1175],[1123,1168,1175],[1205,1173,1221],[1277,1205,1221],[1225,1277,1221],[1173,1225,1221],[1077,930,995],[1085,1077,995],[924,1085,995],[930,924,995],[1168,1077,1137],[1179,1168,1137],[1085,1179,1137],[1077,1085,1137],[1085,924,999],[1089,1085,999],[920,1089,999],[924,920,999],[1179,1085,1144],[1185,1179,1144],[1089,1185,1144],[1085,1089,1144],[1225,1168,1201],[1239,1225,1201],[1179,1239,1201],[1168,1179,1201],[1277,1225,1255],[1294,1277,1255],[1239,1294,1255],[1225,1239,1255],[1239,1179,1217],[1243,1239,1217],[1185,1243,1217],[1179,1185,1217],[1294,1239,1273],[1300,1294,1273],[1243,1300,1273],[1239,1243,1273],[1233,1205,1251],[1314,1233,1251],[1277,1314,1251],[1205,1277,1251],[1249,1233,1284],[1346,1249,1284],[1314,1346,1284],[1233,1314,1284],[1271,1249,1308],[1368,1271,1308],[1346,1368,1308],[1249,1346,1308],[1279,1271,1320],[1376,1279,1320],[1368,1376,1320],[1271,1368,1320],[1314,1277,1304],[1334,1314,1304],[1294,1334,1304],[1277,1294,1304],[1346,1314,1338],[1377,1346,1338],[1334,1377,1338],[1314,1334,1338],[1334,1294,1324],[1352,1334,1324],[1300,1352,1324],[1294,1300,1324],[1377,1334,1364],[1389,1377,1364],[1352,1389,1364],[1334,1352,1364],[1368,1346,1374],[1401,1368,1374],[1377,1401,1374],[1346,1377,1374],[1376,1368,1387],[1415,1376,1387],[1401,1415,1387],[1368,1401,1387],[1401,1377,1395],[1422,1401,1395],[1389,1422,1395],[1377,1389,1395],[1415,1401,1418],[1434,1415,1418],[1422,1434,1418],[1401,1422,1418]];var c=function(a,b){var c=new Array(a.length);for(var d=0;d<b.length;d++){var e=b[d][0];var f=b[d][1];var g=b[d][2];var h=a[e];var i=a[f];var j=a[g];i=SceneJS_math_subVec4(i,h,[0,0,0,0]);j=SceneJS_math_subVec4(j,h,[0,0,0,0]);var k=SceneJS_math_normalizeVec4(SceneJS_math_cross3Vec4(i,j,[0,0,0,0]),[0,0,0,0]);if(!c[e])c[e]=[];if(!c[f])c[f]=[];if(!c[g])c[g]=[];c[e].push(k);c[f].push(k);c[g].push(k)}var l=new Array(a.length);for(var d=0;d<c.length;d++){var m=c[d].length;var n=0;var o=0;var p=0;for(var q=0;q<m;q++){n+=c[d][q][0];o+=c[d][q][1];p+=c[d][q][2]}l[d]=[-(n/m),-(o/m),-(p/m)]}return l};var d=function(a,b){var c=[];for(var d=0;d<a.length;d++){if(b&&a[d].length!=b)throw SceneJS_errorModule.fatalError("Bad geometry array element");for(var e=0;e<a[d].length;e++)c.push(a[d][e])}return c};return{primitive:"triangles",positions:d(a,3),indices:d(b,3),normals:d(c(a,b),3)}}var b=SceneJS.createNodeType("teapot","geometry");b.prototype._init=function(){this.attr.type="teapot";SceneJS_geometry.prototype._init.call(this,{coreId:"teapot",create:a})}})();(function(){var a=SceneJS.createNodeType("box","geometry");a.prototype._init=function(a){this.attr.type="box";var b=a.xSize||1;var c=a.ySize||1;var d=a.zSize||1;var e=a.solid!=undefined?a.solid:true;SceneJS_geometry.prototype._init.call(this,{resource:"box_"+b+"_"+c+"_"+d+(e?"_solid":"wire"),create:function(){var a=[b,c,d,-b,c,d,-b,-c,d,b,-c,d,b,c,d,b,-c,d,b,-c,-d,b,c,-d,b,c,d,b,c,-d,-b,c,-d,-b,c,d,-b,c,d,-b,c,-d,-b,-c,-d,-b,-c,d,-b,-c,-d,b,-c,-d,b,-c,d,-b,-c,d,b,-c,-d,-b,-c,-d,-b,c,-d,b,c,-d];var f=[0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1];var g=[b,c,0,c,0,0,b,0,0,c,0,0,b,0,b,c,b,0,b,c,0,c,0,0,b,c,0,c,0,0,b,0,0,0,b,0,b,c,0,c,0,0,b,0,b,c,0,c];var h=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];return{primitive:e?"triangles":"lines",positions:a,normals:f,uv:g,indices:h,colors:[]}}})};SceneJS.createNodeType("cube","box")})();(function(){var a=SceneJS.createNodeType("sphere","geometry");a.prototype._init=function(a){var b=a.slices||30;var c=a.rings||30;var d=a.radius||1;var e=a.semiMajorAxis||1;var f=1/e;var g=a.sweep||1;if(g>1){g=1}var h=a.sliceDepth||1;if(h>1){h=1}var i=c*g;var j=b*h;SceneJS_geometry.prototype._init.call(this,{coreId:a.coreId||"sphere_"+d+"_"+c+"_"+b+"_"+e+"_"+g+"_"+h,scale:a.scale,origin:a.origin,create:function(){var a=[];var g=[];var k=[];var l,m,n;for(m=0;m<=b;m++){if(m>j)break;var o=m*Math.PI/b;var p=Math.sin(o);var q=Math.cos(o);for(l=0;l<=c;l++){if(l>i)break;var r=l*2*Math.PI/c;var s=f*Math.sin(r);var t=e*Math.cos(r);var u=t*p;var v=q;var w=s*p;var x=1-l/c;var y=m/b;g.push(u);g.push(v);g.push(w);k.push(x);k.push(y);a.push(d*u);a.push(d*v);a.push(d*w)}}if(h<1){var z=Math.cos((m-1)*Math.PI/b)*d;a.push(0,z,0);g.push(1,1,1);k.push(1,1)}else{a.push(0,0,0);g.push(1,1,1);k.push(1,1)}var A=a.length/3-1;var B=[];for(m=0;m<b;m++){if(m>=j)break;for(l=0;l<c;l++){if(l>=i)break;var C=m*(i+1)+l;var D=C+i+1;B.push(C);B.push(D);B.push(C+1);B.push(D);B.push(D+1);B.push(C+1)}if(c>=i){n=(i+1)*m;B.push(n,n+i+1,A);B.push(n+i,n+i*2+1,A)}}if(b>j){for(l=1;l<=i;l++){n=m*i+l;B.push(n,n+1,A)}B.push(n+1,m*i+1,A)}return{primitive:"triangles",positions:a,normals:g,uv:k,indices:B}}})}})();(function(){var a=SceneJS.createNodeType("quad","geometry");a.prototype._init=function(a){this.attr.type="quad";var b=a.solid!=undefined?a.solid:true;var c=a.xSize||1;var d=a.ySize||1;SceneJS_geometry.prototype._init.call(this,{coreId:a.coreId||"quad_"+c+"_"+d+(b?"_solid":"_wire"),create:function(){var e=a.xDiv||1;var f=a.yDiv||1;var g,h,i,j;if(e==1&&f==1){g=[c,d,0,-c,d,0,-c,-d,0,c,-d,0];h=[0,0,1,0,0,1,0,0,1,0,0,1];i=[1,1,0,1,0,0,1,0];j=[2,1,0,3,2,0]}else{if(e<0){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"quad xDiv should be greater than zero")}if(f<0){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"quad yDiv should be greater than zero")}g=[];h=[];i=[];j=[];var k=c*2/e;var l=d*2/f;var m=.5/e;var n=.5/f;var o=0;for(var p=-d,q=0;p<=d;p+=l,q+=n){for(var r=-c,s=0;r<=c;r+=k,s+=m){g.push(r);g.push(p);g.push(0);h.push(0);h.push(0);h.push(1);i.push(s);i.push(q);if(p<d&&r<c){j.push(o+2);j.push(o+1);j.push(o);j.push(o+3);j.push(o+2);j.push(o)}o+=3}}}return{primitive:b?"triangles":"lines",positions:g,normals:h,uv:i,indices:j,colors:[]}}})}})();(function(){var a=SceneJS.createNodeType("disk","geometry");a.prototype._init=function(a){this.attr.type="disk";var b=a.radius||1;var c=a.height||1;var d=a.rings||30;var e=a.innerRadius||0;if(e>b){e=b}var f=a.semiMajorAxis||1;var g=1/f;var h=a.sweep||1;if(h>1){h=1}var i=d*h;SceneJS_geometry.prototype._init.call(this,{coreId:a.coreId||"disk_"+b+"_"+c+"_"+d+"_"+e+"_"+f+"_"+h,create:function(){var a=[];var h=[];var j=[];var k=c*-.5;var l=c*.5;if(e<=0){h.push(0);h.push(-1);h.push(0);j.push(s);j.push(t);a.push(0);a.push(k);a.push(0);h.push(0);h.push(1);h.push(0);j.push(s);j.push(t);a.push(0);a.push(l);a.push(0)}for(var m=0;m<=d;m++){if(m>i)break;var n=m*2*Math.PI/d;var o=g*Math.sin(n);var p=f*Math.cos(n);var q=p;var r=o;var s=1-m/d;var t=.5;h.push(0);h.push(-1);h.push(0);j.push(s);j.push(t);a.push(b*q);a.push(k);a.push(b*r);h.push(q);h.push(0);h.push(r);j.push(s);j.push(t);a.push(b*q);a.push(k);a.push(b*r);h.push(0);h.push(1);h.push(0);j.push(s);j.push(t);a.push(b*q);a.push(l);a.push(b*r);h.push(q);h.push(0);h.push(r);j.push(s);j.push(t);a.push(b*q);a.push(l);a.push(b*r);if(e>0){h.push(0);h.push(-1);h.push(0);j.push(s);j.push(t);a.push(e*q);a.push(k);a.push(e*r);h.push(-q);h.push(0);h.push(-r);j.push(s);j.push(t);a.push(e*q);a.push(k);a.push(e*r);h.push(0);h.push(1);h.push(0);j.push(s);j.push(t);a.push(e*q);a.push(l);a.push(e*r);h.push(-q);h.push(0);h.push(-r);j.push(s);j.push(t);a.push(e*q);a.push(l);a.push(e*r)}if(m+1>i){h.push(0);h.push(0);h.push(-1);j.push(s);j.push(t);a.push(b*f);a.push(k);a.push(0);h.push(0);h.push(0);h.push(-1);j.push(s);j.push(t);a.push(b*f);a.push(l);a.push(0);h.push(-r);h.push(0);h.push(q);j.push(s);j.push(t);a.push(b*q);a.push(k);a.push(b*r);h.push(-r);h.push(0);h.push(q);j.push(s);j.push(t);a.push(b*q);a.push(l);a.push(b*r);if(e>0){h.push(0);h.push(0);h.push(-1);j.push(s);j.push(t);a.push(e*f);a.push(k);a.push(0);h.push(0);h.push(0);h.push(-1);j.push(s);j.push(t);a.push(e*f);a.push(l);a.push(0);h.push(-r);h.push(0);h.push(q);j.push(s);j.push(t);a.push(e*q);a.push(k);a.push(e*r);h.push(-r);h.push(0);h.push(q);j.push(s);j.push(t);a.push(e*q);a.push(l);a.push(e*r)}else{h.push(0);h.push(0);h.push(-1);j.push(s);j.push(t);a.push(0);a.push(k);a.push(0);h.push(0);h.push(0);h.push(-1);j.push(s);j.push(t);a.push(0);a.push(l);a.push(0);h.push(-r);h.push(0);h.push(q);j.push(s);j.push(t);a.push(0);a.push(k);a.push(0);h.push(-r);h.push(0);h.push(q);j.push(s);j.push(t);a.push(0);a.push(l);a.push(0)}break}}var u=[];if(e>0){var v;for(var m=0;m<d;m++){if(m+1>i){v=(m+1)*8;u.push(v);u.push(v+4);u.push(v+5);u.push(v);u.push(v+5);u.push(v+1);u.push(v+2);u.push(v+7);u.push(v+6);u.push(v+2);u.push(v+3);u.push(v+7);break}v=m*8;u.push(v+1);u.push(v+3);u.push(v+11);u.push(v+1);u.push(v+11);u.push(v+9);u.push(v+5);u.push(v+7);u.push(v+15);u.push(v+5);u.push(v+15);u.push(v+13);u.push(v);u.push(v+8);u.push(v+12);u.push(v+0);u.push(v+12);u.push(v+4);u.push(v+2);u.push(v+6);u.push(v+14);u.push(v+2);u.push(v+14);u.push(v+10)}}else{for(var m=0;m<d;m++){if(m+1>i){v=2+(m+1)*4;u.push(v);u.push(v+4);u.push(v+5);u.push(v+0);u.push(v+5);u.push(v+1);u.push(v+2);u.push(v+7);u.push(v+6);u.push(v+2);u.push(v+3);u.push(v+7);break}var v=m*4+2;u.push(v+1);u.push(v+3);u.push(v+7);u.push(v+1);u.push(v+7);u.push(v+5);u.push(v);u.push(0);u.push(v+4);u.push(v+2);u.push(1);u.push(v+6)}}return{primitive:"triangles",positions:a,normals:h,uv:j,indices:u}}})}})();var SceneJS_vectorTextModule=new function(){function b(b){return a[b]}function c(a,b){return b}function d(a,b){return 7*b/25}function e(a,c,d){var e=0;var f=d.length;for(var g=0;g<f;g++){var h=b(d.charAt(g));if(h)e+=h.width*c/25}return e}var a={" ":{width:16,points:[]},"!":{width:10,points:[[5,21],[5,7],[-1,-1],[5,2],[4,1],[5,0],[6,1],[5,2]]},'"':{width:16,points:[[4,21],[4,14],[-1,-1],[12,21],[12,14]]},"#":{width:21,points:[[11,25],[4,-7],[-1,-1],[17,25],[10,-7],[-1,-1],[4,12],[18,12],[-1,-1],[3,6],[17,6]]},$:{width:20,points:[[8,25],[8,-4],[-1,-1],[12,25],[12,-4],[-1,-1],[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},"%":{width:24,points:[[21,21],[3,0],[-1,-1],[8,21],[10,19],[10,17],[9,15],[7,14],[5,14],[3,16],[3,18],[4,20],[6,21],[8,21],[10,20],[13,19],[16,19],[19,20],[21,21],[-1,-1],[17,7],[15,6],[14,4],[14,2],[16,0],[18,0],[20,1],[21,3],[21,5],[19,7],[17,7]]},"&":{width:26,points:[[23,12],[23,13],[22,14],[21,14],[20,13],[19,11],[17,6],[15,3],[13,1],[11,0],[7,0],[5,1],[4,2],[3,4],[3,6],[4,8],[5,9],[12,13],[13,14],[14,16],[14,18],[13,20],[11,21],[9,20],[8,18],[8,16],[9,13],[11,10],[16,3],[18,1],[20,0],[22,0],[23,1],[23,2]]},"'":{width:10,points:[[5,19],[4,20],[5,21],[6,20],[6,18],[5,16],[4,15]]},"(":{width:14,points:[[11,25],[9,23],[7,20],[5,16],[4,11],[4,7],[5,2],[7,-2],[9,-5],[11,-7]]},")":{width:14,points:[[3,25],[5,23],[7,20],[9,16],[10,11],[10,7],[9,2],[7,-2],[5,-5],[3,-7]]},"*":{width:16,points:[[8,21],[8,9],[-1,-1],[3,18],[13,12],[-1,-1],[13,18],[3,12]]},"+":{width:26,points:[[13,18],[13,0],[-1,-1],[4,9],[22,9]]},",":{width:10,points:[[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"-":{width:26,points:[[4,9],[22,9]]},".":{width:10,points:[[5,2],[4,1],[5,0],[6,1],[5,2]]},"/":{width:22,points:[[20,25],[2,-7]]},0:{width:20,points:[[9,21],[6,20],[4,17],[3,12],[3,9],[4,4],[6,1],[9,0],[11,0],[14,1],[16,4],[17,9],[17,12],[16,17],[14,20],[11,21],[9,21]]},1:{width:20,points:[[6,17],[8,18],[11,21],[11,0]]},2:{width:20,points:[[4,16],[4,17],[5,19],[6,20],[8,21],[12,21],[14,20],[15,19],[16,17],[16,15],[15,13],[13,10],[3,0],[17,0]]},3:{width:20,points:[[5,21],[16,21],[10,13],[13,13],[15,12],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},4:{width:20,points:[[13,21],[3,7],[18,7],[-1,-1],[13,21],[13,0]]},5:{width:20,points:[[15,21],[5,21],[4,12],[5,13],[8,14],[11,14],[14,13],[16,11],[17,8],[17,6],[16,3],[14,1],[11,0],[8,0],[5,1],[4,2],[3,4]]},6:{width:20,points:[[16,18],[15,20],[12,21],[10,21],[7,20],[5,17],[4,12],[4,7],[5,3],[7,1],[10,0],[11,0],[14,1],[16,3],[17,6],[17,7],[16,10],[14,12],[11,13],[10,13],[7,12],[5,10],[4,7]]},7:{width:20,points:[[17,21],[7,0],[-1,-1],[3,21],[17,21]]},8:{width:20,points:[[8,21],[5,20],[4,18],[4,16],[5,14],[7,13],[11,12],[14,11],[16,9],[17,7],[17,4],[16,2],[15,1],[12,0],[8,0],[5,1],[4,2],[3,4],[3,7],[4,9],[6,11],[9,12],[13,13],[15,14],[16,16],[16,18],[15,20],[12,21],[8,21]]},9:{width:20,points:[[16,14],[15,11],[13,9],[10,8],[9,8],[6,9],[4,11],[3,14],[3,15],[4,18],[6,20],[9,21],[10,21],[13,20],[15,18],[16,14],[16,9],[15,4],[13,1],[10,0],[8,0],[5,1],[4,3]]},":":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],[-1,-1],[5,2],[4,1],[5,0],[6,1],[5,2]]},";":{width:10,points:[[5,14],[4,13],[5,12],[6,13],[5,14],[-1,-1],[6,1],[5,0],[4,1],[5,2],[6,1],[6,-1],[5,-3],[4,-4]]},"<":{width:24,points:[[20,18],[4,9],[20,0]]},"=":{width:26,points:[[4,12],[22,12],[-1,-1],[4,6],[22,6]]},">":{width:24,points:[[4,18],[20,9],[4,0]]},"?":{width:18,points:[[3,16],[3,17],[4,19],[5,20],[7,21],[11,21],[13,20],[14,19],[15,17],[15,15],[14,13],[13,12],[9,10],[9,7],[-1,-1],[9,2],[8,1],[9,0],[10,1],[9,2]]},"@":{width:27,points:[[18,13],[17,15],[15,16],[12,16],[10,15],[9,14],[8,11],[8,8],[9,6],[11,5],[14,5],[16,6],[17,8],[-1,-1],[12,16],[10,14],[9,11],[9,8],[10,6],[11,5],[-1,-1],[18,16],[17,8],[17,6],[19,5],[21,5],[23,7],[24,10],[24,12],[23,15],[22,17],[20,19],[18,20],[15,21],[12,21],[9,20],[7,19],[5,17],[4,15],[3,12],[3,9],[4,6],[5,4],[7,2],[9,1],[12,0],[15,0],[18,1],[20,2],[21,3],[-1,-1],[19,16],[18,8],[18,6],[19,5]]},A:{width:18,points:[[9,21],[1,0],[-1,-1],[9,21],[17,0],[-1,-1],[4,7],[14,7]]},B:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[-1,-1],[4,11],[13,11],[16,10],[17,9],[18,7],[18,4],[17,2],[16,1],[13,0],[4,0]]},C:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5]]},D:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[11,21],[14,20],[16,18],[17,16],[18,13],[18,8],[17,5],[16,3],[14,1],[11,0],[4,0]]},E:{width:19,points:[[4,21],[4,0],[-1,-1],[4,21],[17,21],[-1,-1],[4,11],[12,11],[-1,-1],[4,0],[17,0]]},F:{width:18,points:[[4,21],[4,0],[-1,-1],[4,21],[17,21],[-1,-1],[4,11],[12,11]]},G:{width:21,points:[[18,16],[17,18],[15,20],[13,21],[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[18,8],[-1,-1],[13,8],[18,8]]},H:{width:22,points:[[4,21],[4,0],[-1,-1],[18,21],[18,0],[-1,-1],[4,11],[18,11]]},I:{width:8,points:[[4,21],[4,0]]},J:{width:16,points:[[12,21],[12,5],[11,2],[10,1],[8,0],[6,0],[4,1],[3,2],[2,5],[2,7]]},K:{width:21,points:[[4,21],[4,0],[-1,-1],[18,21],[4,7],[-1,-1],[9,12],[18,0]]},L:{width:17,points:[[4,21],[4,0],[-1,-1],[4,0],[16,0]]},M:{width:24,points:[[4,21],[4,0],[-1,-1],[4,21],[12,0],[-1,-1],[20,21],[12,0],[-1,-1],[20,21],[20,0]]},N:{width:22,points:[[4,21],[4,0],[-1,-1],[4,21],[18,0],[-1,-1],[18,21],[18,0]]},O:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21]]},P:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,14],[17,12],[16,11],[13,10],[4,10]]},Q:{width:22,points:[[9,21],[7,20],[5,18],[4,16],[3,13],[3,8],[4,5],[5,3],[7,1],[9,0],[13,0],[15,1],[17,3],[18,5],[19,8],[19,13],[18,16],[17,18],[15,20],[13,21],[9,21],[-1,-1],[12,4],[18,-2]]},R:{width:21,points:[[4,21],[4,0],[-1,-1],[4,21],[13,21],[16,20],[17,19],[18,17],[18,15],[17,13],[16,12],[13,11],[4,11],[-1,-1],[11,11],[18,0]]},S:{width:20,points:[[17,18],[15,20],[12,21],[8,21],[5,20],[3,18],[3,16],[4,14],[5,13],[7,12],[13,10],[15,9],[16,8],[17,6],[17,3],[15,1],[12,0],[8,0],[5,1],[3,3]]},T:{width:16,points:[[8,21],[8,0],[-1,-1],[1,21],[15,21]]},U:{width:22,points:[[4,21],[4,6],[5,3],[7,1],[10,0],[12,0],[15,1],[17,3],[18,6],[18,21]]},V:{width:18,points:[[1,21],[9,0],[-1,-1],[17,21],[9,0]]},W:{width:24,points:[[2,21],[7,0],[-1,-1],[12,21],[7,0],[-1,-1],[12,21],[17,0],[-1,-1],[22,21],[17,0]]},X:{width:20,points:[[3,21],[17,0],[-1,-1],[17,21],[3,0]]},Y:{width:18,points:[[1,21],[9,11],[9,0],[-1,-1],[17,21],[9,11]]},Z:{width:20,points:[[17,21],[3,0],[-1,-1],[3,21],[17,21],[-1,-1],[3,0],[17,0]]},"[":{width:14,points:[[4,25],[4,-7],[-1,-1],[5,25],[5,-7],[-1,-1],[4,25],[11,25],[-1,-1],[4,-7],[11,-7]]},"\\":{width:14,points:[[0,21],[14,-3]]},"]":{width:14,points:[[9,25],[9,-7],[-1,-1],[10,25],[10,-7],[-1,-1],[3,25],[10,25],[-1,-1],[3,-7],[10,-7]]},"^":{width:16,points:[[6,15],[8,18],[10,15],[-1,-1],[3,12],[8,17],[13,12],[-1,-1],[8,17],[8,0]]},_:{width:16,points:[[0,-2],[16,-2]]},"`":{width:10,points:[[6,21],[5,20],[4,18],[4,16],[5,15],[6,16],[5,17]]},a:{width:19,points:[[15,14],[15,0],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},b:{width:19,points:[[4,21],[4,0],[-1,-1],[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},c:{width:18,points:[[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},d:{width:19,points:[[15,21],[15,0],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},e:{width:18,points:[[3,8],[15,8],[15,10],[14,12],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},f:{width:12,points:[[10,21],[8,21],[6,20],[5,17],[5,0],[-1,-1],[2,14],[9,14]]},g:{width:19,points:[[15,14],[15,-2],[14,-5],[13,-6],[11,-7],[8,-7],[6,-6],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},h:{width:19,points:[[4,21],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},i:{width:8,points:[[3,21],[4,20],[5,21],[4,22],[3,21],[-1,-1],[4,14],[4,0]]},j:{width:10,points:[[5,21],[6,20],[7,21],[6,22],[5,21],[-1,-1],[6,14],[6,-3],[5,-6],[3,-7],[1,-7]]},k:{width:17,points:[[4,21],[4,0],[-1,-1],[14,14],[4,4],[-1,-1],[8,8],[15,0]]},l:{width:8,points:[[4,21],[4,0]]},m:{width:30,points:[[4,14],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0],[-1,-1],[15,10],[18,13],[20,14],[23,14],[25,13],[26,10],[26,0]]},n:{width:19,points:[[4,14],[4,0],[-1,-1],[4,10],[7,13],[9,14],[12,14],[14,13],[15,10],[15,0]]},o:{width:19,points:[[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3],[16,6],[16,8],[15,11],[13,13],[11,14],[8,14]]},p:{width:19,points:[[4,14],[4,-7],[-1,-1],[4,11],[6,13],[8,14],[11,14],[13,13],[15,11],[16,8],[16,6],[15,3],[13,1],[11,0],[8,0],[6,1],[4,3]]},q:{width:19,points:[[15,14],[15,-7],[-1,-1],[15,11],[13,13],[11,14],[8,14],[6,13],[4,11],[3,8],[3,6],[4,3],[6,1],[8,0],[11,0],[13,1],[15,3]]},r:{width:13,points:[[4,14],[4,0],[-1,-1],[4,8],[5,11],[7,13],[9,14],[12,14]]},s:{width:17,points:[[14,11],[13,13],[10,14],[7,14],[4,13],[3,11],[4,9],[6,8],[11,7],[13,6],[14,4],[14,3],[13,1],[10,0],[7,0],[4,1],[3,3]]},t:{width:12,points:[[5,21],[5,4],[6,1],[8,0],[10,0],[-1,-1],[2,14],[9,14]]},u:{width:19,points:[[4,14],[4,4],[5,1],[7,0],[10,0],[12,1],[15,4],[-1,-1],[15,14],[15,0]]},v:{width:16,points:[[2,14],[8,0],[-1,-1],[14,14],[8,0]]},w:{width:22,points:[[3,14],[7,0],[-1,-1],[11,14],[7,0],[-1,-1],[11,14],[15,0],[-1,-1],[19,14],[15,0]]},x:{width:17,points:[[3,14],[14,0],[-1,-1],[14,14],[3,0]]},y:{width:16,points:[[2,14],[8,0],[-1,-1],[14,14],[8,0],[6,-4],[4,-6],[2,-7],[1,-7]]},z:{width:17,points:[[14,14],[3,0],[-1,-1],[3,14],[14,14],[-1,-1],[3,0],[14,0]]},"{":{width:14,points:[[9,25],[7,24],[6,23],[5,21],[5,19],[6,17],[7,16],[8,14],[8,12],[6,10],[-1,-1],[7,24],[6,22],[6,20],[7,18],[8,17],[9,15],[9,13],[8,11],[4,9],[8,7],[9,5],[9,3],[8,1],[7,0],[6,-2],[6,-4],[7,-6],[-1,-1],[6,8],[8,6],[8,4],[7,2],[6,1],[5,-1],[5,-3],[6,-5],[7,-6],[9,-7]]},"|":{width:8,points:[[4,25],[4,-7]]},"}":{width:14,points:[[5,25],[7,24],[8,23],[9,21],[9,19],[8,17],[7,16],[6,14],[6,12],[8,10],[-1,-1],[7,24],[8,22],[8,20],[7,18],[6,17],[5,15],[5,13],[6,11],[10,9],[6,7],[5,5],[5,3],[6,1],[7,0],[8,-2],[8,-4],[7,-6],[-1,-1],[8,8],[6,6],[6,4],[7,2],[8,1],[9,-1],[9,-3],[8,-5],[7,-6],[5,-7]]},"~":{width:24,points:[[3,6],[3,8],[4,11],[6,12],[8,12],[10,11],[14,8],[16,7],[18,7],[20,8],[21,10],[-1,-1],[3,8],[4,10],[6,11],[8,11],[10,10],[14,7],[16,6],[18,6],[20,7],[21,10],[21,12]]}};this.getGeometry=function(a,c,d,e){var f={positions:[],indices:[]};var g=e.split("\n");var h=0;var i=d;for(var j=0;j<g.length;j++){var k=c;var l=g[j];var m=l.length;var n=a/25;for(var o=0;o<m;o++){var p=b(l.charAt(o));if(p=="\n"){alert("newline")}if(!p){continue}var q=1;var r=-1;var s=-1;var t=false;for(var u=0;u<p.points.length;u++){var v=p.points[u];if(v[0]==-1&&v[1]==-1){q=1;t=false;continue}f.positions.push(k+v[0]*n);f.positions.push(i+v[1]*n);f.positions.push(0);if(r==-1){r=h}else if(s==-1){s=h}else{r=s;s=h}h++;if(q){q=false}else{f.indices.push(r);f.indices.push(s)}t=true}k+=p.width*n}i+=25*n}return f}};var SceneJS_bitmapTextModule=new function(){function a(a){if(a.length!=4){return a}for(var b=0;b<a.length;b++){a[b]*=255}return"rgba("+a.join(",")+")"}SceneJS_eventModule.addListener(SceneJS_eventModule.INIT,function(){});this.createText=function(b,c,d){var e=document.createElement("canvas");var f=e.getContext("2d");f.font=c+"px "+b;var g=f.measureText(d).width;e.width=g;e.height=c;f.font=c+"px "+b;f.textBaseline="middle";f.fillStyle=a([.5,10,30,.5]);f.fillStyle="#FFFF00";var h=0;var i=c/2;f.fillText(d,h,i);return{image:e,width:e.width,height:e.height}}};SceneJS.Text=SceneJS.createNodeType("text");SceneJS.Text.prototype._init=function(a){var b=a.mode||"bitmap";if(b!="vector"&&b!="bitmap"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"SceneJS.Text unsupported mode - should be 'vector' or 'bitmap'")}this._mode=b;if(this._mode=="bitmap"){var c=SceneJS_bitmapTextModule.createText("Helvetica",a.size||1,a.text||"");var d=c.width/16;var e=c.height/16;var f=[d,e,.01,0,e,.1,0,0,.1,d,0,.01];var g=[0,0,-1,0,0,-1,0,0,-1,0,0,-1];var h=[1,1,0,1,0,0,1,0];var i=[0,1,2,0,2,3];if(a.doubleSided){var j=.01;f=f.concat([d,0,-j,0,0,-j,0,e,-j,d,e,-j]);g=g.concat([0,0,1,0,0,1,0,0,1,0,0,1]);h=h.concat([0,0,1,0,1,1,0,1]);i=i.concat([4,5,6,4,6,7])}this.addNode({type:"texture",layers:[{image:c.image,minFilter:"linear",magFilter:"linear",wrapS:"repeat",wrapT:"repeat",isDepth:false,depthMode:"luminance",depthCompareMode:"compareRToTexture",depthCompareFunc:"lequal",flipY:false,width:1,height:1,internalFormat:"lequal",sourceFormat:"alpha",sourceType:"unsignedByte",applyTo:"baseColor",blendMode:"add"}],nodes:[{type:"material",emit:1,baseColor:{r:1,g:0,b:0},specularColor:{r:.9,g:.9,b:.9},specular:.9,shine:100,nodes:[{type:"geometry",primitive:"triangles",positions:f,normals:g,uv:h,indices:i}]}]})}else{var k=this;this.addNode({type:"geometry",create:function(){var b=SceneJS_vectorTextModule.getGeometry(3,0,0,a.text);return{resource:k.attr.id,primitive:"lines",positions:b.positions,normals:[],uv:[],indices:b.indices,colors:[]}}})}};SceneJS.Text.prototype._compile=function(){if(this._mode=="bitmap"){this._compileNodes()}};var SceneJS_modelTransformModule=new function(){var a={matrix:SceneJS_math_identityMat4(),fixed:true,identity:true};var b=[];var c=[];var d=0;var e;this.transform=a;var f;var g=this;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){d=0;e=null;g.transform=a;f=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(a){if(f){if(d>0){var b=g.transform;if(!b.matrixAsArray){b.matrixAsArray=new Float32Array(b.matrix);b.normalMatrixAsArray=new Float32Array(SceneJS_math_transposeMat4(SceneJS_math_inverseMat4(b.matrix,SceneJS_math_mat4())))}else{b.matrixAsArray.set(b.matrix);b.normalMatrixAsArray.set(SceneJS_math_transposeMat4(SceneJS_math_inverseMat4(b.matrix,SceneJS_math_mat4())))}SceneJS_DrawList.setModelTransform(e,b.matrixAsArray,b.normalMatrixAsArray)}else{SceneJS_DrawList.setModelTransform()}f=false}});this.pushTransform=function(a,g){b[d]=a;c[d]=g;d++;e=a;this.transform=g;f=true};this.popTransform=function(){d--;if(d>0){e=b[d-1];this.transform=c[d-1]}else{e=null;this.transform=a}f=true}};(function(){var a=SceneJS.createNodeType("rotate");a.prototype._init=function(a){if(this.core._nodeCount==1){this.setMultOrder(a.multOrder);this.setAngle(a.angle);this.setXYZ({x:a.x,y:a.y,z:a.z})}this._mat=null;this._xf={}};a.prototype.setMultOrder=function(a){a=a||"post";if(a!="post"&&a!="pre"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Illegal rotate multOrder - '"+a+"' should be 'pre' or 'post'")}this.core.multOrder=a;this._postMult=a=="post";this._compileMemoLevel=0};a.prototype.setAngle=function(a){this.core.angle=a||0;this._compileMemoLevel=0};a.prototype.getAngle=function(){return this.core.angle};a.prototype.setXYZ=function(a){a=a||{};this.core.x=a.x||0;this.core.y=a.y||0;this.core.z=a.z||0;this._compileMemoLevel=0};a.prototype.getXYZ=function(){return{x:this.core.x,y:this.core.y,z:this.core.z}};a.prototype.setX=function(a){this.core.x=a;this._compileMemoLevel=0};a.prototype.getX=function(){return this.core.x};a.prototype.setY=function(a){this.core.y=a;this._compileMemoLevel=0};a.prototype.getY=function(){return this.core.y};a.prototype.setZ=function(a){this.core.z=a;this._compileMemoLevel=0};a.prototype.getZ=function(){return this.core.z};a.prototype.incX=function(a){this.core.x+=a;this._compileMemoLevel=0};a.prototype.incY=function(a){this.core.y+=a};a.prototype.incZ=function(a){this.core.z+=a;this._compileMemoLevel=0};a.prototype.incAngle=function(a){this.core.angle+=a;this._compileMemoLevel=0};a.prototype.getMatrix=function(){return this._compileMemoLevel>0?this._mat.slice(0):SceneJS_math_rotationMat4v(this.core.angle*Math.PI/180,[this.core.x,this.core.y,this.core.z])};a.prototype.getAttributes=function(){return{x:this.core.x,y:this.core.y,z:this.core.z,angle:this.core.angle}};a.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};a.prototype._preCompile=function(){var a=this._compileMemoLevel;if(this._compileMemoLevel==0){this._compileMemoLevel=1;if(this.core.x!=0||this.core.y!=0||this.core.z!=0){var b=this.core.angle;this._mat=SceneJS_math_rotationMat4v(b*Math.PI/180,[this.core.x,this.core.y,this.core.z])}else{this._mat=SceneJS_math_identityMat4()}}var c=SceneJS_modelTransformModule.transform;if(a<2||!c.fixed){var d=SceneJS_math_mat4();if(this._postMult){SceneJS_math_mulMat4(c.matrix,this._mat,d)}else{SceneJS_math_mulMat4(this._mat,c.matrix,d)}this._xf.localMatrix=this._mat;this._xf.matrix=d;this._xf.fixed=a==2;if(this._compileMemoLevel==1&&c.fixed){this._compileMemoLevel=2}}SceneJS_modelTransformModule.pushTransform(this.attr.id,this._xf)};a.prototype._postCompile=function(){SceneJS_modelTransformModule.popTransform()}})();(function(){var a=SceneJS.createNodeType("translate");a.prototype._init=function(a){this._mat=null;this._xf={};if(this.core._nodeCount==1){this.setMultOrder(a.multOrder);this.setXyz({x:a.x,y:a.y,z:a.z})}};a.prototype.setMultOrder=function(a){a=a||"post";if(a!="post"&&a!="pre"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Illegal translate multOrder - '"+a+"' should be 'pre' or 'post'")}this.core.multOrder=a;this._postMult=a=="post";this._compileMemoLevel=0};a.prototype.setXyz=function(a){a=a||{};var b=a.x||0;var c=a.y||0;var d=a.z||0;this.core.x=b;this.core.y=c;this.core.z=d;this._compileMemoLevel=0};a.prototype.getXyz=function(){return{x:this.core.x,y:this.core.y,z:this.core.z}};a.prototype.setX=function(a){this.core.x=a;this._compileMemoLevel=0};a.prototype.getX=function(){return this.core.x};a.prototype.setY=function(a){this.core.y=a;this._compileMemoLevel=0};a.prototype.getY=function(){return this.core.y};a.prototype.setZ=function(a){this.core.z=a;this._compileMemoLevel=0};a.prototype.getZ=function(){return this.core.z};a.prototype.incX=function(a){this.core.x+=a;this._compileMemoLevel=0};a.prototype.incY=function(a){this.core.y+=a};a.prototype.incZ=function(a){this.core.z+=a;this._compileMemoLevel=0};a.prototype.getMatrix=function(){return this._compileMemoLevel>0?this._mat.slice(0):SceneJS_math_translationMat4v([this.core.x,this.core.y,this.core.z])};a.prototype.getAttributes=function(){return{x:this.core.x,y:this.core.y,z:this.core.z}};a.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};a.prototype._preCompile=function(){var a=this._compileMemoLevel;if(this._compileMemoLevel==0){this._mat=SceneJS_math_translationMat4v([this.core.x,this.core.y,this.core.z]);this._compileMemoLevel=1}var b=SceneJS_modelTransformModule.transform;if(a<2||!b.fixed){var c=SceneJS_math_mat4();if(this._postMult){SceneJS_math_mulMat4(b.matrix,this._mat,c)}else{SceneJS_math_mulMat4(this._mat,b.matrix,c)}this._xf.localMatrix=this._mat;this._xf.matrix=c;this._xf.fixed=a==2;if(this._compileMemoLevel==1&&b.fixed){this._compileMemoLevel=2}}SceneJS_modelTransformModule.pushTransform(this.attr.id,this._xf)};a.prototype._postCompile=function(){SceneJS_modelTransformModule.popTransform()}})();(function(){var a=SceneJS.createNodeType("scale");a.prototype._init=function(a){if(this.core._nodeCount==1){this.setMultOrder(a.multOrder);this.setXYZ({x:a.x,y:a.y,z:a.z})}this._mat=null;this._xf={}};a.prototype.setMultOrder=function(a){a=a||"post";if(a!="post"&&a!="pre"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Illegal scale multOrder - '"+a+"' should be 'pre' or 'post'")}this.core.multOrder=a;this._postMult=a=="post";this._compileMemoLevel=0};a.prototype.setXYZ=function(a){a=a||{};this.core.x=a.x!=undefined?a.x:1;this.core.y=a.y!=undefined?a.y:1;this.core.z=a.z!=undefined?a.z:1;this._resetCompilationMemos();return this};a.prototype.getXYZ=function(){return{x:this.core.x,y:this.core.y,z:this.core.z}};a.prototype.setX=function(a){this.core.x=a!=undefined&&a!=null?a:1;this._resetCompilationMemos();return this};a.prototype.getX=function(){return this.core.x};a.prototype.setY=function(a){this.core.y=a!=undefined&&a!=null?a:1;this._resetCompilationMemos();return this};a.prototype.getY=function(){return this.core.y};a.prototype.setZ=function(a){this.core.z=a!=undefined&&a!=null?a:1;this._resetCompilationMemos();return this};a.prototype.getZ=function(){return this.core.z};a.prototype.incX=function(a){this.core.x+=a;this._compileMemoLevel=0};a.prototype.incY=function(a){this.core.y+=a};a.prototype.incZ=function(a){this.core.z+=a;this._compileMemoLevel=0};a.prototype.getMatrix=function(){return this._compileMemoLevel>0?this._mat.slice(0):SceneJS_math_scalingMat4v([this.core.x,this.core.y,this.core.z])};a.prototype.getAttributes=function(){return{x:this.core.x,y:this.core.y,z:this.core.z}};a.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};a.prototype._preCompile=function(){var a=this._compileMemoLevel;if(this._compileMemoLevel==0){this._compileMemoLevel=1;this._mat=SceneJS_math_scalingMat4v([this.core.x,this.core.y,this.core.z])}var b=SceneJS_modelTransformModule.transform;if(a<2||!b.fixed){var c=SceneJS_math_mat4();if(this._postMult){SceneJS_math_mulMat4(b.matrix,this._mat,c)}else{SceneJS_math_mulMat4(this._mat,b.matrix,c)}this._xf.localMatrix=this._mat;this._xf.matrix=c;this._xf.fixed=a==2;if(this._compileMemoLevel==1&&b.fixed){this._compileMemoLevel=2}}SceneJS_modelTransformModule.pushTransform(this.attr.id,this._xf)};a.prototype._postCompile=function(a){SceneJS_modelTransformModule.popTransform()}})();(function(){var a=SceneJS.createNodeType("matrix");a.prototype._init=function(a){this._xf={};if(this.core._nodeCount==1){this.setMultOrder(a.multOrder);this.setElements(a.elements)}};a.prototype.setMultOrder=function(a){a=a||"post";if(a!="post"&&a!="pre"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Illegal matrix multOrder - '"+a+"' should be 'pre' or 'post'")}this.attr.multOrder=a;this._postMult=a=="post";this._compileMemoLevel=0};a.prototype.setElements=function(a){a=a||SceneJS_math_identityMat4();if(!a){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Matrix elements undefined")}if(a.length!=16){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Matrix elements should number 16")}if(!this.core.mat){this.core.mat=a}else{for(var b=0;b<16;b++){this.core.mat[b]=a[b]}}this._resetCompilationMemos();return this};a.prototype.getElements=function(){var a=new Array(16);for(var b=0;b<16;b++){a[b]=this.core.mat[b]}return a};a.prototype.getMatrix=function(){return this.core.mat.slice(0)};a.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};a.prototype._preCompile=function(){var a=this._compileMemoLevel;if(this._compileMemoLevel==0){this._compileMemoLevel=1}var b=SceneJS_modelTransformModule.transform;if(a<2||!b.fixed){var c=SceneJS_math_mat4();if(this._postMult){SceneJS_math_mulMat4(b.matrix,this.core.mat,c)}else{SceneJS_math_mulMat4(this.core.mat,b.matrix,c)}this._xf.localMatrix=this.core.mat;this._xf.matrix=c;this._xf.fixed=a==2;if(this._compileMemoLevel==1&&b.fixed){this._compileMemoLevel=2}}SceneJS_modelTransformModule.pushTransform(this.attr.id,this._xf)};a.prototype._postCompile=function(){SceneJS_modelTransformModule.popTransform()}})();(function(){var a=SceneJS.createNodeType("quaternion");a.prototype._init=function(a){if(this.core._nodeCount==1){this.setMultOrder(a.multOrder);this.core.q=SceneJS_math_identityQuaternion();if(a.x||a.y||a.x||a.angle||a.w){this.setRotation(a)}if(a.rotations){for(var b=0;b<a.rotations.length;b++){this.addRotation(a.rotations[b])}}}this._mat=null;this._xf={}};a.prototype.setMultOrder=function(a){a=a||"post";if(a!="post"&&a!="pre"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Illegal quaternion multOrder - '"+a+"' should be 'pre' or 'post'")}this.core.multOrder=a;this._postMult=a=="post";this._compileMemoLevel=0};a.prototype.setRotation=function(a){a=a||{};this.core.q=SceneJS_math_angleAxisQuaternion(a.x||0,a.y||0,a.z||0,a.angle||0);this._resetCompilationMemos();return this};a.prototype.getRotation=function(){return SceneJS_math_angleAxisFromQuaternion(this.core.q)};a.prototype.addRotation=function(a){this.core.q=SceneJS_math_mulQuaternions(SceneJS_math_angleAxisQuaternion(a.x||0,a.y||0,a.z||0,a.angle||0),this.core.q);this._resetCompilationMemos();return this};a.prototype.getMatrix=function(){return this._compileMemoLevel>0?this._mat.slice(0):SceneJS_math_newMat4FromQuaternion(this.core.q)};a.prototype.normalize=function(){this.core.q=SceneJS_math_normalizeQuaternion(this.core.q);this._resetCompilationMemos();return this};a.prototype.getAttributes=function(){return{x:this.core.q[0],y:this.core.q[1],z:this.core.q[2],w:this.core.q[3]}};a.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};a.prototype._preCompile=function(){var a=this._compileMemoLevel;if(this._compileMemoLevel==0){this._mat=SceneJS_math_newMat4FromQuaternion(this.core.q);this._compileMemoLevel=1}var b=SceneJS_modelTransformModule.transform;if(a<2||!b.fixed){var c=SceneJS_math_mat4();if(this._postMult){SceneJS_math_mulMat4(b.matrix,this._mat,c)}else{SceneJS_math_mulMat4(this._mat,b.matrix,c)}this._xf.localMatrix=this._mat;this._xf.matrix=c;this._xf.fixed=a==2;if(this._compileMemoLevel==1&&b.fixed){this._compileMemoLevel=2}}SceneJS_modelTransformModule.pushTransform(this.attr.id,this._xf)};a.prototype._postCompile=function(){SceneJS_modelTransformModule.popTransform()}})();var SceneJS_viewTransformModule=new function(){function h(){if(f){if(d>0){var a=g.transform;if(!a.matrixAsArray){a.matrixAsArray=new Float32Array(a.matrix);a.normalMatrixAsArray=new Float32Array(SceneJS_math_transposeMat4(SceneJS_math_inverseMat4(a.matrix,SceneJS_math_mat4())))}else{a.matrixAsArray.set(a.matrix);a.normalMatrixAsArray.set(SceneJS_math_transposeMat4(SceneJS_math_inverseMat4(a.matrix,SceneJS_math_mat4())))}SceneJS_DrawList.setViewTransform(e,a.matrixAsArray,a.normalMatrixAsArray,a.lookAt)}else{SceneJS_DrawList.setViewTransform()}f=false}}var a={matrix:SceneJS_math_identityMat4(),fixed:true,identity:true,lookAt:SceneJS_math_LOOKAT_ARRAYS};var b=[];var c=[];var d=0;var e;this.transform=a;var f;var g=this;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){d=0;e=null;g.transform=a;f=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){h()});this.pushTransform=function(a,g){b[d]=a;c[d]=g;d++;e=a;this.transform=g;f=true;SceneJS_eventModule.fireEvent(SceneJS_eventModule.VIEW_TRANSFORM_UPDATED,this.transform);h()};this.popTransform=function(){d--;if(d>0){e=b[d-1];this.transform=c[d-1]}else{e=null;this.transform=a}SceneJS_eventModule.fireEvent(SceneJS_eventModule.VIEW_TRANSFORM_UPDATED,this.transform);f=true;h()}};(function(){var a=SceneJS.createNodeType("lookAt");a.prototype._init=function(a){this._mat=null;this._xf={type:"lookat"};if(this.core._nodeCount==1){if(!a.eye&&!a.look&&!a.up){this.setEye({x:0,y:0,z:1});this.setLook({x:0,y:0,z:0});this.setUp({x:0,y:1,z:0})}else{this.setEye(a.eye);this.setLook(a.look);this.setUp(a.up)}}};a.prototype.setEye=function(a){a=a||{};this.core.eyeX=a.x!=undefined&&a.x!=null?a.x:0;this.core.eyeY=a.y!=undefined&&a.y!=null?a.y:0;this.core.eyeZ=a.z!=undefined&&a.z!=null?a.z:0;this._compileMemoLevel=0};a.prototype.setEyeX=function(a){this.core.eyeX=a||0;this._compileMemoLevel=0};a.prototype.setEyeY=function(a){this.core.eyeY=a||0;this._compileMemoLevel=0};a.prototype.incEye=function(a){a=a||{};this.core.eyeX+=a.x!=undefined&&a.x!=null?a.x:0;this.core.eyeY+=a.y!=undefined&&a.y!=null?a.y:0;this.core.eyeZ+=a.z!=undefined&&a.z!=null?a.z:0;this._compileMemoLevel=0};a.prototype.incEyeX=function(a){this.core.eyeX+=a;this._compileMemoLevel=0};a.prototype.incEyeY=function(a){this.core.eyeY+=a;this._compileMemoLevel=0};a.prototype.incEyeZ=function(a){this.core.eyeZ+=a;this._compileMemoLevel=0};a.prototype.setEyeZ=function(a){this.core.eyeZ=a||0;this._compileMemoLevel=0};a.prototype.getEye=function(){return{x:this.core.eyeX,y:this.core.eyeY,z:this.core.eyeZ}};a.prototype.setLook=function(a){a=a||{};this.core.lookX=a.x!=undefined&&a.x!=null?a.x:0;this.core.lookY=a.y!=undefined&&a.y!=null?a.y:0;this.core.lookZ=a.z!=undefined&&a.z!=null?a.z:0;this._compileMemoLevel=0};a.prototype.setLookX=function(a){this.core.lookX=a||0;this._compileMemoLevel=0};a.prototype.setLookY=function(a){this.core.lookY=a||0;this._compileMemoLevel=0};a.prototype.setLookZ=function(a){this.core.lookZ=a||0;this._compileMemoLevel=0};a.prototype.incLook=function(a){a=a||{};this.core.lookX+=a.x!=undefined&&a.x!=null?a.x:0;this.core.lookY+=a.y!=undefined&&a.y!=null?a.y:0;this.core.lookZ+=a.z!=undefined&&a.z!=null?a.z:0;this._compileMemoLevel=0};a.prototype.getLook=function(){return{x:this.core.lookX,y:this.core.lookY,z:this.core.lookZ}};a.prototype.setUp=function(a){a=a||{y:1};var b=a.x!=undefined&&a.x!=null?a.x:0;var c=a.y!=undefined&&a.y!=null?a.y:0;var d=a.z!=undefined&&a.z!=null?a.z:0;if(b==0&&c==0&&d==0){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Lookat up vector is zero length - at least one of its x,y and z components must be non-zero")}this.core.upX=b;this.core.upY=c;this.core.upZ=d;this._compileMemoLevel=0};a.prototype.setUpX=function(a){this.core.upX=a||0;this._compileMemoLevel=0};a.prototype.setUpY=function(a){this.core.upY=y||0;this._compileMemoLevel=0};a.prototype.setUpZ=function(a){this.core.upZ=z||0;this._compileMemoLevel=0};a.prototype.getUp=function(){return{x:this.core.upX,y:this.core.upY,z:this.core.upZ}};a.prototype.incUp=function(a){a=a||{};this.core.upX+=a.x!=undefined&&a.x!=null?a.x:0;this.core.upY+=a.y!=undefined&&a.y!=null?a.y:0;this.core.upZ+=a.z!=undefined&&a.z!=null?a.z:0;this._compileMemoLevel=0};a.prototype.getMatrix=function(){return this._compileMemoLevel>0?this._mat.slice(0):SceneJS_math_lookAtMat4c(this.core.eyeX,this.core.eyeY,this.core.eyeZ,this.core.lookX,this.core.lookY,this.core.lookZ,this.core.upX,this.core.upY,this.core.upZ)};a.prototype.getAttributes=function(){return{look:{x:this.core.lookX,y:this.core.lookY,z:this.core.lookZ},eye:{x:this.core.eyeX,y:this.core.eyeY,z:this.core.eyeZ},up:{x:this.core.upX,y:this.core.upY,z:this.core.upZ}}};a.prototype._compile=function(){if(this._compileMemoLevel==0){this._mat=SceneJS_math_lookAtMat4c(this.core.eyeX,this.core.eyeY,this.core.eyeZ,this.core.lookX,this.core.lookY,this.core.lookZ,this.core.upX,this.core.upY,this.core.upZ);this._compileMemoLevel=1;this._xf.matrix=this._mat;this._xf.lookAt={eye:[this.core.eyeX,this.core.eyeY,this.core.eyeZ],look:[this.core.lookX,this.core.lookY,this.core.lookZ],up:[this.core.upX,this.core.upY,this.core.upZ]}}SceneJS_viewTransformModule.pushTransform(this.attr.id,this._xf);this._compileNodes();SceneJS_viewTransformModule.popTransform()}})();(function(){var a=SceneJS.createNodeType("stationary");a.prototype._compile=function(){var a=this._compileMemoLevel;var b=SceneJS_viewTransformModule.transform;var c=b.lookAt;if(c){if(this._compileMemoLevel==0||!b.fixed){var d=SceneJS_math_mat4();SceneJS_math_mulMat4(b.matrix,SceneJS_math_translationMat4v(c.eye),d);this._xform={matrix:d,lookAt:c,fixed:a==1};if(b.fixed){this._compileMemoLevel=1}}SceneJS_viewTransformModule.pushTransform(this.attr.id,this._xform);this._compileNodes();SceneJS_viewTransformModule.popTransform()}else{this._compileNodes()}}})();(function(){var a=SceneJS.createNodeType("billboard");a.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};a.prototype._preCompile=function(){var a=SceneJS_viewTransformModule.transform;var b=a.lookAt;var c=SceneJS_modelTransformModule.transform;var d=c.matrix.slice(0);var e=[d[0],d[1],d[2],0,d[4],d[5],d[6],0,d[8],d[9],d[10],0,0,0,0,1];SceneJS_math_inverseMat4(e);SceneJS_math_mulMat4(d,e,d);var f=[];SceneJS_math_subVec3(b.eye,b.look,f);SceneJS_math_normalizeVec3(f);var g=[];SceneJS_math_cross3Vec3(b.up,f,g);SceneJS_math_normalizeVec3(g);var h=[];SceneJS_math_cross3Vec3(f,g,h);SceneJS_math_normalizeVec3(h);SceneJS_math_mulMat4(d,[g[0],g[1],g[2],0,h[0],h[1],h[2],0,f[0],f[1],f[2],0,0,0,0,1],d);SceneJS_modelTransformModule.pushTransform(this.attr.id,{matrix:d})};a.prototype._postCompile=function(){SceneJS_modelTransformModule.popTransform()}})();(function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setProjectionTransform(a[c-1],b[c-1])}else{SceneJS_DrawList.setProjectionTransform()}d=false}});var e=SceneJS.createNodeType("camera");e.prototype._init=function(a){if(this.core._nodeCount==1){this.setOptics(a.optics)}};e.prototype.setOptics=function(a){var b=this.core;if(!a){b.optics={type:a.type,left:a.left||-1,bottom:a.bottom||-1,near:a.near||.1,right:a.right||1,top:a.top||1,far:a.far||5e3}}else{if(a.type=="ortho"){b.optics=SceneJS._applyIf(SceneJS_math_ORTHO_OBJ,{type:a.type,left:a.left,bottom:a.bottom,near:a.near,right:a.right,top:a.top,far:a.far})}else if(a.type=="frustum"){b.optics={type:a.type,left:a.left||-1,bottom:a.bottom||-1,near:a.near||.1,right:a.right||1,top:a.top||1,far:a.far||5e3}}else if(a.type=="perspective"){b.optics={type:a.type,fovy:a.fovy||60,aspect:a.aspect||1,near:a.near||.1,far:a.far||5e3}}else if(!a.type){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Camera configuration invalid: optics type not specified - "+"supported types are 'perspective', 'frustum' and 'ortho'")}else{throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Camera configuration invalid: optics type not supported - "+"supported types are 'perspective', 'frustum' and 'ortho'")}}this._rebuild()};e.prototype._rebuild=function(){var a=this.core.optics;if(a.type=="ortho"){this.core.matrix=SceneJS_math_orthoMat4c(a.left,a.right,a.bottom,a.top,a.near,a.far)}else if(a.type=="frustum"){this.core.matrix=SceneJS_math_frustumMatrix4(a.left,a.right,a.bottom,a.top,a.near,a.far)}else if(a.type=="perspective"){this.core.matrix=SceneJS_math_perspectiveMatrix4(a.fovy*Math.PI/180,a.aspect,a.near,a.far)}if(!this.core.matrixAsArray){this.core.matrixAsArray=new Float32Array(this.core.matrix)}else{this.core.matrixAsArray.set(this.core.matrix)}};e.prototype.getOptics=function(){var a={};for(var b in this.core.optics){if(this.core.optics.hasOwnProperty(b)){a[b]=this.core.optics[b]}}return a};e.prototype.getMatrix=function(){if(this._compileMemoLevel==0){this._rebuild()}return this.core.matrix.slice(0)};e.prototype._compile=function(){a[c]=this.attr.id;b[c]=this.core;c++;d=true;this._compileNodes();c--;d=true}})();(function(){var a=SceneJS.createNodeType("xform");a.prototype._init=function(a){this._xf={};if(this.core._nodeCount==1){this.setElements(a.elements)}};a.prototype.setElements=function(a){a=a||SceneJS_math_identityMat4();if(a.length!=16){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Matrix elements should number 16")}var b=this.core;if(!b.matrix){b.matrix=a}else{for(var c=0;c<16;c++){b.matrix[c]=a[c]}}if(!b.matrixAsArray){b.matrixAsArray=new Float32Array(a);b.normalMatrixAsArray=new Float32Array(SceneJS_math_transposeMat4(SceneJS_math_inverseMat4(a,SceneJS_math_mat4())))}else{b.matrixAsArray.set(a);b.normalMatrixAsArray.set(SceneJS_math_transposeMat4(SceneJS_math_inverseMat4(a,SceneJS_math_mat4())))}return this};a.prototype._compile=function(){SceneJS_modelTransformModule.pushTransform(this.attr.id,this.core);this._compileNodes();SceneJS_modelTransformModule.popTransform()}})();new function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setLights(a[c-1],b.slice(0,c))}else{SceneJS_DrawList.setLights()}d=false}});var e=SceneJS.createNodeType("light");e.prototype._init=function(a){a=a||{};if(this.core._nodeCount==1){this.core.light={viewSpace:!!a.viewSpace};this.setMode(a.mode);this.setColor(a.color);this.setDiffuse(a.diffuse);this.setSpecular(a.specular);this.setPos(a.pos);this.setDir(a.dir);this.setConstantAttenuation(a.constantAttenuation);this.setLinearAttenuation(a.linearAttenuation);this.setQuadraticAttenuation(a.quadraticAttenuation)}};e.prototype.setMode=function(a){a=a||"dir";if(a!="dir"&&a!="point"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Light unsupported mode - should be 'dir' or 'point' or 'ambient'")}this.core.light.mode=a};e.prototype.getMode=function(){return this.core.light.mode};e.prototype.setColor=function(a){a=a||{};this.core.light.color=[a.r!=undefined?a.r:1,a.g!=undefined?a.g:1,a.b!=undefined?a.b:1]};e.prototype.getColor=function(){return{r:this.core.light.color[0],g:this.core.light.color[1],b:this.core.light.color[2]}};e.prototype.setDiffuse=function(a){this.core.light.diffuse=a!=undefined?a:true};e.prototype.getDiffuse=function(){return this.core.light.diffuse};e.prototype.setSpecular=function(a){this.core.light.specular=a||true};e.prototype.getSpecular=function(){return this.core.light.specular};e.prototype.setPos=function(a){a=a||{};this.core.light.pos=[a.x||0,a.y||0,a.z||0]};e.prototype.getPos=function(){return{x:this.core.light.pos[0],y:this.core.light.pos[1],z:this.core.light.pos[2]}};e.prototype.setDir=function(a){a=a||{};this.core.light.dir=[a.x||0,a.y||0,a.z==undefined||a.z==null?-1:a.z]};e.prototype.getDir=function(){return{x:this.core.light.dir[0],y:this.core.light.dir[1],z:this.core.light.dir[2]}};e.prototype.setConstantAttenuation=function(a){this.core.light.constantAttenuation=a!=undefined?a:1};e.prototype.getConstantAttenuation=function(){return this.core.light.constantAttenuation};e.prototype.setLinearAttenuation=function(a){this.core.light.linearAttenuation=a||0};e.prototype.getLinearAttenuation=function(){return this.core.light.linearAttenuation};e.prototype.setQuadraticAttenuation=function(a){this.core.light.quadraticAttenuation=a||0};e.prototype.getQuadraticAttenuation=function(){return this.core.light.quadraticAttenuation};e.prototype._compile=function(){var e=SceneJS_modelTransformModule.transform.matrix;if(this.core.light.mode=="point"){this.core.light.worldPos=SceneJS_math_transformPoint3(e,this.core.light.pos)}else if(this.core.light.mode=="dir"){this.core.light.worldDir=SceneJS_math_transformVector3(e,this.core.light.dir)}a[c]=this.attr.id;b[c]=this.core.light;c++;d=true;this._compileNodes()}};new function(){var a={baseColor:[0,0,0],specularColor:[0,0,0],specular:1,shine:10,reflect:.8,alpha:1,emit:0};var b=[];var c=[];var d=0;var e;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){d=0;e=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(e){if(d>0){SceneJS_DrawList.setMaterial(b[d-1],c[d-1])}else{SceneJS_DrawList.setMaterial()}e=false}});var f=SceneJS.createNodeType("material");f.prototype._init=function(a){if(this.core._nodeCount==1){this.setBaseColor(a.baseColor);this.setSpecularColor(a.specularColor);this.setSpecular(a.specular);this.setShine(a.shine);this.setReflect(a.reflect);this.setEmit(a.emit);this.setAlpha(a.alpha);this.setOpacity(a.opacity)}};f.prototype.setBaseColor=function(b){this.core.baseColor=b?[b.r!=undefined&&b.r!=null?b.r:0,b.g!=undefined&&b.g!=null?b.g:0,b.b!=undefined&&b.b!=null?b.b:0]:a.baseColor};f.prototype.getBaseColor=function(){return{r:this.core.baseColor[0],g:this.core.baseColor[1],b:this.core.baseColor[2]}};f.prototype.setSpecularColor=function(b){this.core.specularColor=b?[b.r!=undefined&&b.r!=null?b.r:0,b.g!=undefined&&b.g!=null?b.g:0,b.b!=undefined&&b.b!=null?b.b:0]:a.specularColor};f.prototype.getSpecularColor=function(){return{r:this.core.specularColor[0],g:this.core.specularColor[1],b:this.core.specularColor[2]}};f.prototype.setSpecular=function(b){this.core.specular=b!=undefined&&b!=null?b:a.specular};f.prototype.getSpecular=function(){return this.core.specular};f.prototype.setShine=function(b){this.core.shine=b!=undefined&&b!=null?b:a.shine};f.prototype.getShine=function(){return this.core.shine};f.prototype.setReflect=function(b){this.core.reflect=b!=undefined&&b!=null?b:a.reflect};f.prototype.getReflect=function(){return this.core.reflect};f.prototype.setEmit=function(b){this.core.emit=b!=undefined&&b!=null?b:a.emit};f.prototype.getEmit=function(){return this.core.emit};f.prototype.setAlpha=function(b){this.core.alpha=b!=undefined&&b!=null?b:a.alpha};f.prototype.getAlpha=function(){return this.core.alpha};f.prototype.setOpacity=function(b){this.core.opacity=b!=undefined&&b!=null?b:a.opacity};f.prototype.getOpacity=function(){return this.core.opacity};f.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};f.prototype._preCompile=function(){b[d]=this.core._coreId;c[d]=this.core;d++;e=true};f.prototype._postCompile=function(){d--;e=true};f.prototype._destroy=function(){}};new function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setColortrans(a[c-1],b[c-1])}else{SceneJS_DrawList.setColortrans()}d=false}});var e=SceneJS.createNodeType("colortrans");e.prototype._init=function(a){if(this.core._nodeCount==1){this.setScale(a.scale);this.setAdd(a.add);this.setSaturation(a.saturation)}};e.prototype.setSaturation=function(a){this.core.saturation=a};e.prototype.mulSaturation=function(a){this.core.saturation*=a};e.prototype.incSaturation=function(a){this.core.saturation+=a};e.prototype.getSaturation=function(){return this.core.saturation};e.prototype.setScale=function(a){a=a||{};this.core.scale={r:a.r!=undefined?a.r:1,g:a.g!=undefined?a.g:1,b:a.b!=undefined?a.b:1,a:a.a!=undefined?a.a:1}};e.prototype.incScale=function(a){a=a||{};var b=this.core.scale;if(a.r){b.r+=a.r}if(a.g){b.g+=a.g}if(a.b){b.b+=a.b}if(a.a){b.a+=a.a}};e.prototype.mulScale=function(a){a=a||{};var b=this.core.scale;if(a.r){b.r*=a.r}if(a.g){b.g*=a.g}if(a.b){b.b*=a.b}if(a.a){b.a*=a.a}};e.prototype.getScale=function(){return this.core.scale};e.prototype.setAdd=function(a){a=a||{};this.core.add={r:a.r!=undefined?a.r:0,g:a.g!=undefined?a.g:0,b:a.b!=undefined?a.b:0,a:a.a!=undefined?a.a:0}};e.prototype.incAdd=function(a){a=a||{};var b=this.core.add;if(a.r){b.r+=a.r}if(a.g){b.g+=a.g}if(a.b){b.b+=a.b}if(a.a){b.a+=a.a}};e.prototype.mulAdd=function(a){a=a||{};var b=this.core.add;if(a.r){b.r*=a.r}if(a.g){b.g*=a.g}if(a.b){b.b*=a.b}if(a.a){b.a*=a.a}};e.prototype.getAdd=function(){return this.core.add};e.prototype._compile=function(){a[c]=this.core._coreId;b[c]=this.core;c++;d=true;this._compileNodes();c--;d=true}};var SceneJS_textureModule=new function(){function e(a,b,c){var d=a.canvas.context;var e=SceneJS._createUUID();var h;try{if(b.autoUpdate){h=function(){try{d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,image)}catch(a){d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,image,null)}d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR)}}return new SceneJS_webgl_Texture2D(d,{textureId:e,canvas:a.canvas,image:b.image,url:b.uri,texels:b.texels,minFilter:f("minFilter",d,b,d.NEAREST_MIPMAP_NEAREST),magFilter:f("magFilter",d,b,d.LINEAR),wrapS:f("wrapS",d,b,d.CLAMP_TO_EDGE),wrapT:f("wrapT",d,b,d.CLAMP_TO_EDGE),isDepth:g(b.isDepth,false),depthMode:f("depthMode",d,b,d.LUMINANCE),depthCompareMode:f("depthCompareMode",d,b,d.COMPARE_R_TO_TEXTURE),depthCompareFunc:f("depthCompareFunc",d,b,d.LEQUAL),flipY:g(b.flipY,true),width:g(b.width,1),height:g(b.height,1),internalFormat:f("internalFormat",d,b,d.LEQUAL),sourceFormat:f("sourceType",d,b,d.ALPHA),sourceType:f("sourceType",d,b,d.UNSIGNED_BYTE),logging:SceneJS_loggingModule,update:h},c)}catch(i){throw SceneJS_errorModule.fatalError(SceneJS.errors.ERROR,"Failed to create texture: "+i.message||i)}}function f(a,b,c,d){var e=c[a];if(e==undefined){return d}var f=SceneJS_webgl_enumMap[e];if(f==undefined){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Unrecognised value for texture node property '"+a+"' value: '"+e+"'")}var g=b[f];return g}function g(a,b){return a==undefined?b:a}function h(a){a.destroy()}var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.INIT,function(){});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setTexture(a[c-1],b[c-1])}else{SceneJS_DrawList.setTexture()}d=false}});var i=SceneJS.createNodeType("texture");i.prototype._init=function(a){if(this.core._nodeCount==1){this.core.layers=[];this.core.params={};var b=SceneJS_debugModule.getConfigs("texturing")||{};var c=b.waitForLoad!=undefined&&b.waitForLoad!=null?b.waitForLoad:a.waitForLoad;if(!a.layers){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"texture layers missing")}if(!SceneJS._isArray(a.layers)){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"texture layers should be an array")}for(var d=0;d<a.layers.length;d++){var f=a.layers[d];if(!f.uri&&!f.frameBuf&&!f.video&&!f.image&&!f.canvasId){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"texture layer "+d+"  has no uri, frameBuf, video or canvasId specified")}if(f.applyFrom){if(f.applyFrom!="uv"&&f.applyFrom!="uv2"&&f.applyFrom!="normal"&&f.applyFrom!="geometry"){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"texture layer "+d+"  applyFrom value is unsupported - "+"should be either 'uv', 'uv2', 'normal' or 'geometry'")}}if(f.applyTo){if(f.applyTo!="baseColor"&&f.applyTo!="specular"&&f.applyTo!="emit"&&f.applyTo!="alpha"&&f.applyTo!="normals"){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"texture layer "+d+" applyTo value is unsupported - "+"should be either 'baseColor', 'specular' or 'normals'")}}if(f.blendMode){if(f.blendMode!="add"&&f.blendMode!="multiply"){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"texture layer "+d+" blendMode value is unsupported - "+"should be either 'add' or 'multiply'")}}var g={image:null,creationParams:f,waitForLoad:c,texture:null,applyFrom:f.applyFrom||"uv",applyTo:f.applyTo||"baseColor",blendMode:f.blendMode||"add",blendFactor:f.blendFactor!=undefined&&f.blendFactor!=null?f.blendFactor:1,translate:{x:0,y:0},scale:{x:1,y:1},rotate:{z:0}};this.core.layers.push(g);this._setLayerTransform(f,g);if(g.creationParams.frameBuf){g.texture=SceneJS._compilationStates.getState("frameBuf",this.scene.attr.id,g.creationParams.frameBuf)}else if(g.creationParams.video){g.texture=SceneJS._compilationStates.getState("video",this.scene.attr.id,g.creationParams.video)}else{SceneJS_sceneStatusModule.nodeLoading(this);var i=this;g.texture=e(this.scene,g.creationParams,function(){SceneJS_sceneStatusModule.nodeLoaded(i);if(i._destroyed){h(g.texture)}SceneJS_compileModule.nodeUpdated(i,"loaded")})}}}};i.prototype.setLayer=function(a){if(a.index==undefined||a.index==null){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Invalid texture set layer argument: index null or undefined")}if(a.index<0||a.index>=this.core.layers.length){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Invalid texture set layer argument: index out of range ("+this.core.layers.length+" layers defined)")}this._setLayer(parseInt(a.index),a)};i.prototype.setLayers=function(a){var b;for(var c in a){if(a.hasOwnProperty(c)){if(c!=undefined||c!=null){b=parseInt(c);if(b<0||b>=this.core.layers.length){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"Invalid texture set layer argument: index out of range ("+this.core.layers.length+" layers defined)")}this._setLayer(b,a[c]||{})}}}};i.prototype._setLayer=function(a,b){b=b||{};var c=this.core.layers[a];if(b.blendFactor!=undefined&&b.blendFactor!=null){c.blendFactor=b.blendFactor}this._setLayerTransform(b,c)};i.prototype._setLayerTransform=function(a,b){var c;var d;if(a.translate){var e=a.translate;if(e.x!=undefined){b.translate.x=e.x}if(e.y!=undefined){b.translate.y=e.y}c=SceneJS_math_translationMat4v([e.x||0,e.y||0,0])}if(a.scale){var f=a.scale;if(f.x!=undefined){b.scale.x=f.x}if(f.y!=undefined){b.scale.y=f.y}d=SceneJS_math_scalingMat4v([f.x||1,f.y||1,1]);c=c?SceneJS_math_mulMat4(c,d):d}if(a.rotate){var g=a.rotate;if(g.z!=undefined){b.rotate.z=g.z||0}d=SceneJS_math_rotationMat4v(g.z*.0174532925,[0,0,1]);c=c?SceneJS_math_mulMat4(c,d):d}if(c){b.matrix=c;if(!b.matrixAsArray){b.matrixAsArray=new Float32Array(b.matrix)}else{b.matrixAsArray.set(b.matrix)}b.matrixAsArray=new Float32Array(b.matrix)}};i.prototype._compile=function(){a[c]=this.core._coreId;b[c]=this.core;c++;d=true;this._compileNodes();c--;d=true};i.prototype._destroy=function(){if(this.core._nodeCount==1){var a;for(var b=0,c=this.core.layers.length;b<c;b++){a=this.core.layers[b];if(a.texture){h(a.texture)}}}}};new function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setClips(a[c-1],b.slice(0,c))}else{SceneJS_DrawList.setClips()}d=false}});var e=SceneJS.createNodeType("clip");e.prototype._init=function(a){if(this.core._nodeCount==1){this.setMode(a.mode);this.setA(a.a);this.setB(a.b);this.setC(a.c)}};e.prototype.setMode=function(a){a=a||"outside";if(a!="disabled"&&a!="inside"&&a!="outside"){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"SceneJS.clip has a mode of unsupported type: '"+a+" - should be 'disabled', 'inside' or 'outside'")}this.core.mode=a};e.prototype.getMode=function(){return this.core.mode};e.prototype.setAbc=function(a){a=a||{};this.setA(a.a);this.setB(a.b);this.setC(a.c)};e.prototype.getAbc=function(){return{a:this.getA(),b:this.getB(),c:this.getC()}};e.prototype.setA=function(a){a=a||{};this.core.a=[a.x!=undefined?a.x:0,a.y!=undefined?a.y:0,a.z!=undefined?a.z:0,1]};e.prototype.getA=function(){return{x:this.core.a[0],y:this.core.a[1],z:this.core.a[2]}};e.prototype.setB=function(a){a=a||{};this.core.b=[a.x!=undefined?a.x:0,a.y!=undefined?a.y:0,a.z!=undefined?a.z:0,1]};e.prototype.getB=function(){return{x:this.core.b[0],y:this.core.b[1],z:this.core.b[2]}};e.prototype.setC=function(a){a=a||{};this.core.c=[a.x!=undefined?a.x:0,a.y!=undefined?a.y:0,a.z!=undefined?a.z:0,1]};e.prototype.getC=function(){return{x:this.core.c[0],y:this.core.c[1],z:this.core.c[2]}};e.prototype.getAttributes=function(){return{mode:this.core.mode,a:this.getA(),b:this.getB(),c:this.getC()}};e.prototype._compile=function(){var e=this.core;var f=SceneJS_modelTransformModule.transform.matrix;var g=SceneJS_math_transformPoint3(f,e.a);var h=SceneJS_math_transformPoint3(f,e.b);var i=SceneJS_math_transformPoint3(f,e.c);var j=SceneJS_math_normalizeVec3(SceneJS_math_cross3Vec4(SceneJS_math_normalizeVec3(SceneJS_math_subVec3(h,g,[0,0,0]),[0,0,0]),SceneJS_math_normalizeVec3(SceneJS_math_subVec3(h,i,[0,0,0]),[0,0,0])));var k=SceneJS_math_dotVector3(j,g);e.normalAndDist=[j[0],j[1],j[2],k];b[c]=e;a[c]=this.attr.id;c++;d=true;this._compileNodes()}};new function(){function e(a){if(document.getElementById(a.canvas.canvasId)){var b;for(var c=0,d=a.targets.length;c<d;c++){b=a.targets[c];if(b.vertexBuf){b.vertexBuf.destroy()}if(b.normalBuf){b.normalBuf.destroy()}if(b.uvBuf){b.uvBuf.destroy()}if(b.uvBuf2){b.uvBuf2.destroy()}}}}function f(a,b,c,d){if(typeof b=="string"){var e=SceneJS.Services.getService(SceneJS.Services.MORPH_GEO_LOADER_SERVICE_ID);e.loadMorphGeometry(b,function(b){d(i(a,b,c))})}else{return i(a,g(b),c)}}function g(a){var b={keys:a.keys,targets:[]};for(var c=0,d=a.targets.length;c<d;c++){b.targets.push(h(a.targets[c]))}return b}function h(a){return{positions:a.positions?new Float32Array(a.positions):undefined,normals:a.normals?new Float32Array(a.normals):undefined,uv:a.uv?new Float32Array(a.uv):undefined,uv2:a.uv2?new Float32Array(a.uv2):undefined}}function i(a,b,c){var d=a.canvas.context;var e={scene:a,canvas:a.canvas,keys:b.keys,targets:[],key1:0,key2:1};try{var f=d.STATIC_DRAW;var g;var h;for(var i=0,j=b.targets.length;i<j;i++){g=b.targets[i];h={};e.targets.push(h);if(g.positions&&g.positions.length>0){h.vertexBuf=new SceneJS_webgl_ArrayBuffer(d,d.ARRAY_BUFFER,g.positions,g.positions.length,3,f)}if(g.normals&&g.normals.length>0){h.normalBuf=new SceneJS_webgl_ArrayBuffer(d,d.ARRAY_BUFFER,g.normals,g.normals.length,3,f)}if(g.uv&&g.uv.length>0){h.uvBuf=new SceneJS_webgl_ArrayBuffer(d,d.ARRAY_BUFFER,g.uv,g.uv.length,2,f)}if(g.uv2&&g.uv2.length>0){h.uvBuf2=new SceneJS_webgl_ArrayBuffer(d,d.ARRAY_BUFFER,g.uv2,g.uv2.length,2,f)}}return e}catch(k){for(var i=0,j=e.targets.length;i<j;i++){g=e.targets[i];if(g.vertexBuf){g.vertexBuf.destroy()}if(g.normalBuf){g.normalBuf.destroy()}if(g.uvBuf){g.uvBuf.destroy()}if(g.uvBuf2){g.uvBuf2.destroy()}}throw k}}var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setMorph(a[c-1],b[c-1])}else{SceneJS_DrawList.setMorph()}d=false}});var j=SceneJS.createNodeType("morphGeometry");j.prototype._init=function(a){if(this.core._nodeCount==1){if(a.create instanceof Function){var b=this._createMorphData(a.create());SceneJS._apply(f(this.scene,b,a.options),this.core)}else if(a.stream){this._stream=a.stream;this.core._loading=true;var c=this;f(this.scene,this._stream,a.options,function(a){SceneJS._apply(a,c.core);c.core._loading=false;SceneJS_compileModule.nodeUpdated(c,"loaded")})}else{SceneJS._apply(f(this.scene,this._createMorphData(a),a.options),this.core)}this.setFactor(a.factor)}this.core.factor=a.factor||0;this.core.clamp=!!a.clamp};j.prototype._createMorphData=function(a){var b=a.targets||[];if(b.length<2){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"morphGeometry node should have at least two targets")}var c=a.keys||[];if(c.length!=b.length){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"morphGeometry node mismatch in number of keys and targets")}var d;var e;var f;var g;var h;for(var i=0,j=b.length;i<j;i++){h=b[i];if(!d&&h.positions){d=h.positions.slice(0)}if(!e&&h.normals){e=h.normals.slice(0)}if(!f&&h.uv){f=h.uv.slice(0)}if(!g&&h.uv2){g=h.uv2.slice(0)}}for(var i=0,j=b.length;i<j;i++){h=b[i];if(!h.positions){h.positions=d}if(!h.normals){h.normals=e}if(!h.uv){h.uv=f}if(!h.uv2){h.uv2=g}}return{keys:c,targets:b,key1:0,key2:1,factor:0}};j.prototype.getState=function(){return this.core};j.prototype.getStream=function(){return this._stream};j.prototype.setFactor=function(a){a=a||0;var b=this.core;var c=b.keys;var d=b.key1;var e=b.key2;if(a<c[0]){d=0;e=1}else if(a>c[c.length-1]){d=c.length-2;e=d+1}else{while(c[d]>a){d--;e--}while(c[e]<a){d++;e++}}b.factor=(a-c[d])/(c[e]-c[d]);b.key1=d;b.key2=e};j.prototype.getFactor=function(){return this.core.factor};j.prototype._compile=function(){this._preCompile();this._compileNodes();this._postCompile()};j.prototype._preCompile=function(){if(!this.core._loading){a[c]=this.attr.id;b[c]=this.core;c++;d=true}};j.prototype._postCompile=function(){if(!this.core._loading){c--;d=true}};j.prototype._destroy=function(){if(this.core._nodeCount==1){e(this.core)}}};(function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(e){if(d){if(c>0){SceneJS_DrawList.setName(a[c-1],b[c-1])}else{SceneJS_DrawList.setName()}d=false}});var e=SceneJS.createNodeType("name");e.prototype._init=function(a){if(this.core._nodeCount==1){this.setName(a.name)}};e.prototype.setName=function(a){this.core.name=a||"unnamed"};e.prototype._compile=function(){var e=this.attr.id;a[c]=e;b[c]=this.core.name;c++;d=true;this._compileNodes();c--;d=true}})();new function(){var a={};SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_IDLE,function(b){var c=a[b.sceneId];if(c){for(var d in c){if(c.hasOwnProperty(d)){c[d].update()}}SceneJS_compileModule.redraw(b.sceneId)}});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_DESTROYED,function(b){a[b.sceneId]=null});var b=SceneJS.createNodeType("video");b.prototype._init=function(b){if(!b.src){throw SceneJS_errorModule.fatalError(SceneJS.errors.NODE_CONFIG_EXPECTED,"video node parameter expected: 'src'")}var c=this._video=document.createElement("video");c.style.display="none";c.setAttribute("loop","loop");c.autoplay=true;c.addEventListener("ended",function(){this.play()},true);document.getElementsByTagName("body")[0].appendChild(c);this._canvas=document.createElement("canvas");this._ctx=this._canvas.getContext("2d");c.src=b.src;var d=this._gl=this.scene.canvas.context;this._texture=d.createTexture();var e=this.attr.id;var f=this;var g={id:e,update:function(){var a=f._video;var b=f._gl;var c=f._canvas;var d=f._texture;var e=f._ctx;b.bindTexture(b.TEXTURE_2D,d);if(a.readyState>0){if(a.height<=0){a.style.display="";a.height=a.offsetHeight;a.width=a.offsetWidth;a.style.display="none"}c.height=a.height;c.width=a.width;e.drawImage(a,0,0);try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(g){b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c,null)}b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.generateMipmap(b.TEXTURE_2D)}},getTexture:function(){return{bind:function(a){var b=f._gl;b.activeTexture(b["TEXTURE"+a]);b.bindTexture(b.TEXTURE_2D,f._texture)},unbind:function(a){var b=f._gl;b.activeTexture(b["TEXTURE"+a]);b.bindTexture(b.TEXTURE_2D,null)}}}};g.update();var h=this.scene.attr.id;var i=a[h];if(!i){i=a[h]={}}this._buf=i[e]=g};SceneJS._compilationStates.setSupplier("video",{get:function(b,c){var d=a[b];return{bind:function(a){var b=d[c];if(b){b.getTexture().bind(a)}},unbind:function(a){var b=d[c];if(b){b.getTexture().unbind(a)}}}}});b.prototype._compile=function(){this._compileNodes()};b.prototype._destroy=function(){if(this._buf){var b=a[this.scene.attr.id]}}};new function(){function f(b,c){var d=b.canvas;var e=d.context;var f=d.canvas.width;var g=d.canvas.height;var h=e.createFramebuffer();var i=e.createRenderbuffer();var j=e.createTexture();var k=false;e.bindFramebuffer(e.FRAMEBUFFER,h);e.bindTexture(e.TEXTURE_2D,j);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);try{e.texImage2D(e.TEXTURE_2D,0,e.RGBA,f,g,0,e.RGBA,e.UNSIGNED_BYTE,null)}catch(l){var m=new WebGLUnsignedByteArray(f*g*4);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,f,g,0,e.RGBA,e.UNSIGNED_BYTE,m)}e.bindRenderbuffer(e.RENDERBUFFER,i);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,f,g);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,j,0);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,i);e.bindTexture(e.TEXTURE_2D,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,h);if(!e.isFramebuffer(h)){throw SceneJS_errorModule.fatalError("Invalid framebuffer")}var n=e.checkFramebufferStatus(e.FRAMEBUFFER);switch(n){case e.FRAMEBUFFER_COMPLETE:break;case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case e.FRAMEBUFFER_UNSUPPORTED:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");default:throw SceneJS_errorModule.fatalError("Incomplete framebuffer: "+n)}var o={id:c,bind:function(){e.bindFramebuffer(e.FRAMEBUFFER,h);e.clearColor(0,0,0,1);e.clearDepth(1);e.enable(e.DEPTH_TEST);e.disable(e.CULL_FACE);e.depthRange(0,1);e.disable(e.SCISSOR_TEST);e.disable(e.BLEND)},unbind:function(){e.bindFramebuffer(e.FRAMEBUFFER,null);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);e.bindRenderbuffer(e.RENDERBUFFER,i);k=true},isRendered:function(){return k},getTexture:function(){return{bind:function(a){e.activeTexture(e["TEXTURE"+a]);e.bindTexture(e.TEXTURE_2D,j)},unbind:function(a){e.activeTexture(e["TEXTURE"+a]);e.bindTexture(e.TEXTURE_2D,null)}}}};var p=a[b.attr.id];if(!p){p=a[b.attr.id]={}}p[c]=o;return o}function g(a){}var a={};var b=[];var c=[];var d=0;var e;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){d=0;e=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(e){if(d>0){SceneJS_DrawList.setFrameBuf(b[d-1],c[d-1])}else{SceneJS_DrawList.setFrameBuf()}e=false}});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_DESTROYED,function(b){a[b.sceneId]=null});SceneJS._compilationStates.setSupplier("frameBuf",{get:function(b,c){var d=a[b];return{bind:function(a){var b=d[c];if(b&&b.isRendered()){b.getTexture().bind(a)}},unbind:function(a){var b=d[c];if(b&&b.isRendered()){b.getTexture().unbind(a)}}}}});var h=SceneJS.createNodeType("frameBuf");h.prototype._init=function(){this._buf=f(this.scene,this.attr.id)};h.prototype._compile=function(){b[d]=this.attr.id;c[d]=this._buf;d++;e=true;this._compileNodes();d--;e=true};h.prototype._destroy=function(){if(this._buf){g(this._buf)}}};new function(){function j(a){var b;var c={};var d;for(var e=0;e<h;e++){b=a[e];for(d in b){if(b.hasOwnProperty(d)){c[d]=b[d]}}}return c}function k(a,b){var c;for(var d in a){if(a.hasOwnProperty(d)){c=b[d];if(!c){c=b[d]=[]}c.push(a[d])}}}var a=[];var b=[];var c=[];var d={};var e=[];var f=[];var g=[];var h=0;var i;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){h=0;i=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(i){if(h>0){var d={shaders:{fragment:{code:e.slice(0,h).join("\n"),hooks:j(f)},vertex:{code:b.slice(0,h).join("\n"),hooks:j(c)}},paramsStack:g.slice(0,h),hash:a.slice(0,h).join(".")};SceneJS_DrawList.setShader(a[h-1],d)}else{SceneJS_DrawList.setShader()}i=false}});var l=SceneJS.createNodeType("shader");l.prototype._init=function(a){if(this.core._nodeCount==1){this._setShaders(a.shaders);this.setParams(a.params)}};l.prototype._setShaders=function(a){a=a||[];this.core.shaders={};var b;for(var c=0,d=a.length;c<d;c++){b=a[c];if(!b.stage){throw SceneJS_errorModule.fatalError(SceneJS.errors.ILLEGAL_NODE_CONFIG,"shader 'stage' attribute expected")}var e;if(b.code){if(SceneJS._isArray(b.code)){e=b.code.join("")}else{e=b.code}}this.core.shaders[b.stage]={code:e,hooks:b.hooks}}};l.prototype.setParams=function(a){a=a||{};var b=this.core.params;if(!b){b=this.core.params={}}for(var c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}};l.prototype.getParams=function(){var a=this.core.params;if(!a){return{}}var b={};for(var c in a){if(a.hasOwnProperty(c)){b[c]=a[c]}}return b};l.prototype._compile=function(){a[h]=this.core._coreId;var d=this.core.shaders;var j=d.fragment||{};var k=d.vertex||{};e[h]=j.code||"";f[h]=j.hooks||{};b[h]=k.code||"";c[h]=k.hooks||{};g[h]=this.core.params||{};h++;i=true;this._compileNodes();h--;i=true}};new function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(){if(d){if(c>0){SceneJS_DrawList.setShaderParams(a[c-1],b.slice(0,c))}else{SceneJS_DrawList.setShaderParams()}d=false}});var e=SceneJS.createNodeType("shaderParams");e.prototype._init=function(a){if(this.core._nodeCount==1){this.setParams(a.params)}};e.prototype.setParams=function(a){a=a||{};var b=this.core;if(!b.params){b.params={}}for(var c in a){if(a.hasOwnProperty(c)){b.params[c]=a[c]}}};e.prototype._compile=function(){a[c]=this.core._coreId;b[c]=this.core.params;c++;d=true;this._compileNodes();c--;d=true}};var SceneJS_nodeEventsModule=new function(){var a=[];var b=[];var c=0;var d;SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_COMPILING,function(){c=0;d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SHADER_ACTIVATED,function(){d=true});SceneJS_eventModule.addListener(SceneJS_eventModule.SCENE_RENDERING,function(e){if(d){if(c>0){SceneJS_DrawList.setRenderListeners(a[c-1],b.slice(0,c))}else{SceneJS_DrawList.setRenderListeners()}d=false}});this.preVisitNode=function(e){var f=e.listeners["rendered"];if(f&&f.length>0){a[c]=e.attr.id;b[c]=function(a){e._fireEvent("rendered",a)};c++;d=true}};this.postVisitNode=function(b){if(b.attr.id==a[c-1]){c--;d=true}}};eval(function(a,b,c,d,e,f){e=function(a){return(a<b?"":e(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(c--)f[e(c)]=d[c]||e(c);d=[function(a){return f[a]}];e=function(){return"\\w+"};c=1}while(c--)if(d[c])a=a.replace(new RegExp("\\b"+e(c)+"\\b","g"),d[c]);return a}("9 17={3i:'0.1.3',16:1e-6};l v(){}v.23={e:l(i){8(i<1||i>7.4.q)?w:7.4[i-1]},2R:l(){8 7.4.q},1u:l(){8 F.1x(7.2u(7))},24:l(a){9 n=7.4.q;9 V=a.4||a;o(n!=V.q){8 1L}J{o(F.13(7.4[n-1]-V[n-1])>17.16){8 1L}}H(--n);8 2x},1q:l(){8 v.u(7.4)},1b:l(a){9 b=[];7.28(l(x,i){b.19(a(x,i))});8 v.u(b)},28:l(a){9 n=7.4.q,k=n,i;J{i=k-n;a(7.4[i],i+1)}H(--n)},2q:l(){9 r=7.1u();o(r===0){8 7.1q()}8 7.1b(l(x){8 x/r})},1C:l(a){9 V=a.4||a;9 n=7.4.q,k=n,i;o(n!=V.q){8 w}9 b=0,1D=0,1F=0;7.28(l(x,i){b+=x*V[i-1];1D+=x*x;1F+=V[i-1]*V[i-1]});1D=F.1x(1D);1F=F.1x(1F);o(1D*1F===0){8 w}9 c=b/(1D*1F);o(c<-1){c=-1}o(c>1){c=1}8 F.37(c)},1m:l(a){9 b=7.1C(a);8(b===w)?w:(b<=17.16)},34:l(a){9 b=7.1C(a);8(b===w)?w:(F.13(b-F.1A)<=17.16)},2k:l(a){9 b=7.2u(a);8(b===w)?w:(F.13(b)<=17.16)},2j:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x+V[i-1]})},2C:l(a){9 V=a.4||a;o(7.4.q!=V.q){8 w}8 7.1b(l(x,i){8 x-V[i-1]})},22:l(k){8 7.1b(l(x){8 x*k})},x:l(k){8 7.22(k)},2u:l(a){9 V=a.4||a;9 i,2g=0,n=7.4.q;o(n!=V.q){8 w}J{2g+=7.4[n-1]*V[n-1]}H(--n);8 2g},2f:l(a){9 B=a.4||a;o(7.4.q!=3||B.q!=3){8 w}9 A=7.4;8 v.u([(A[1]*B[2])-(A[2]*B[1]),(A[2]*B[0])-(A[0]*B[2]),(A[0]*B[1])-(A[1]*B[0])])},2A:l(){9 m=0,n=7.4.q,k=n,i;J{i=k-n;o(F.13(7.4[i])>F.13(m)){m=7.4[i]}}H(--n);8 m},2Z:l(x){9 a=w,n=7.4.q,k=n,i;J{i=k-n;o(a===w&&7.4[i]==x){a=i+1}}H(--n);8 a},3g:l(){8 S.2X(7.4)},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(y){8(F.13(y-x)<=17.16)?x:y})},1o:l(a){o(a.K){8 a.1o(7)}9 V=a.4||a;o(V.q!=7.4.q){8 w}9 b=0,2b;7.28(l(x,i){2b=x-V[i-1];b+=2b*2b});8 F.1x(b)},3a:l(a){8 a.1h(7)},2T:l(a){8 a.1h(7)},1V:l(t,a){9 V,R,x,y,z;2S(7.4.q){27 2:V=a.4||a;o(V.q!=2){8 w}R=S.1R(t).4;x=7.4[0]-V[0];y=7.4[1]-V[1];8 v.u([V[0]+R[0][0]*x+R[0][1]*y,V[1]+R[1][0]*x+R[1][1]*y]);1I;27 3:o(!a.U){8 w}9 C=a.1r(7).4;R=S.1R(t,a.U).4;x=7.4[0]-C[0];y=7.4[1]-C[1];z=7.4[2]-C[2];8 v.u([C[0]+R[0][0]*x+R[0][1]*y+R[0][2]*z,C[1]+R[1][0]*x+R[1][1]*y+R[1][2]*z,C[2]+R[2][0]*x+R[2][1]*y+R[2][2]*z]);1I;2P:8 w}},1t:l(a){o(a.K){9 P=7.4.2O();9 C=a.1r(P).4;8 v.u([C[0]+(C[0]-P[0]),C[1]+(C[1]-P[1]),C[2]+(C[2]-(P[2]||0))])}1d{9 Q=a.4||a;o(7.4.q!=Q.q){8 w}8 7.1b(l(x,i){8 Q[i-1]+(Q[i-1]-x)})}},1N:l(){9 V=7.1q();2S(V.4.q){27 3:1I;27 2:V.4.19(0);1I;2P:8 w}8 V},2n:l(){8'['+7.4.2K(', ')+']'},26:l(a){7.4=(a.4||a).2O();8 7}};v.u=l(a){9 V=25 v();8 V.26(a)};v.i=v.u([1,0,0]);v.j=v.u([0,1,0]);v.k=v.u([0,0,1]);v.2J=l(n){9 a=[];J{a.19(F.2F())}H(--n);8 v.u(a)};v.1j=l(n){9 a=[];J{a.19(0)}H(--n);8 v.u(a)};l S(){}S.23={e:l(i,j){o(i<1||i>7.4.q||j<1||j>7.4[0].q){8 w}8 7.4[i-1][j-1]},33:l(i){o(i>7.4.q){8 w}8 v.u(7.4[i-1])},2E:l(j){o(j>7.4[0].q){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][j-1])}H(--n);8 v.u(a)},2R:l(){8{2D:7.4.q,1p:7.4[0].q}},2D:l(){8 7.4.q},1p:l(){8 7.4[0].q},24:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(7.4.q!=M.q||7.4[0].q!=M[0].q){8 1L}9 b=7.4.q,15=b,i,G,10=7.4[0].q,j;J{i=15-b;G=10;J{j=10-G;o(F.13(7.4[i][j]-M[i][j])>17.16){8 1L}}H(--G)}H(--b);8 2x},1q:l(){8 S.u(7.4)},1b:l(a){9 b=[],12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;b[i]=[];J{j=10-G;b[i][j]=a(7.4[i][j],i+1,j+1)}H(--G)}H(--12);8 S.u(b)},2i:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4.q==M.q&&7.4[0].q==M[0].q)},2j:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x+M[i-1][j-1]})},2C:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2i(M)){8 w}8 7.1b(l(x,i,j){8 x-M[i-1][j-1]})},2B:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}8(7.4[0].q==M.q)},22:l(a){o(!a.4){8 7.1b(l(x){8 x*a})}9 b=a.1u?2x:1L;9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}o(!7.2B(M)){8 w}9 d=7.4.q,15=d,i,G,10=M[0].q,j;9 e=7.4[0].q,4=[],21,20,c;J{i=15-d;4[i]=[];G=10;J{j=10-G;21=0;20=e;J{c=e-20;21+=7.4[i][c]*M[c][j]}H(--20);4[i][j]=21}H(--G)}H(--d);9 M=S.u(4);8 b?M.2E(1):M},x:l(a){8 7.22(a)},32:l(a,b,c,d){9 e=[],12=c,i,G,j;9 f=7.4.q,1p=7.4[0].q;J{i=c-12;e[i]=[];G=d;J{j=d-G;e[i][j]=7.4[(a+i-1)%f][(b+j-1)%1p]}H(--G)}H(--12);8 S.u(e)},31:l(){9 a=7.4.q,1p=7.4[0].q;9 b=[],12=1p,i,G,j;J{i=1p-12;b[i]=[];G=a;J{j=a-G;b[i][j]=7.4[j][i]}H(--G)}H(--12);8 S.u(b)},1y:l(){8(7.4.q==7.4[0].q)},2A:l(){9 m=0,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(F.13(7.4[i][j])>F.13(m)){m=7.4[i][j]}}H(--G)}H(--12);8 m},2Z:l(x){9 a=w,12=7.4.q,15=12,i,G,10=7.4[0].q,j;J{i=15-12;G=10;J{j=10-G;o(7.4[i][j]==x){8{i:i+1,j:j+1}}}H(--G)}H(--12);8 w},30:l(){o(!7.1y){8 w}9 a=[],n=7.4.q,k=n,i;J{i=k-n;a.19(7.4[i][i])}H(--n);8 v.u(a)},1K:l(){9 M=7.1q(),1c;9 n=7.4.q,k=n,i,1s,1n=7.4[0].q,p;J{i=k-n;o(M.4[i][i]==0){2e(j=i+1;j<k;j++){o(M.4[j][i]!=0){1c=[];1s=1n;J{p=1n-1s;1c.19(M.4[i][p]+M.4[j][p])}H(--1s);M.4[i]=1c;1I}}}o(M.4[i][i]!=0){2e(j=i+1;j<k;j++){9 a=M.4[j][i]/M.4[i][i];1c=[];1s=1n;J{p=1n-1s;1c.19(p<=i?0:M.4[j][p]-M.4[i][p]*a)}H(--1s);M.4[j]=1c}}}H(--n);8 M},3h:l(){8 7.1K()},2z:l(){o(!7.1y()){8 w}9 M=7.1K();9 a=M.4[0][0],n=M.4.q-1,k=n,i;J{i=k-n+1;a=a*M.4[i][i]}H(--n);8 a},3f:l(){8 7.2z()},2y:l(){8(7.1y()&&7.2z()===0)},2Y:l(){o(!7.1y()){8 w}9 a=7.4[0][0],n=7.4.q-1,k=n,i;J{i=k-n+1;a+=7.4[i][i]}H(--n);8 a},3e:l(){8 7.2Y()},1Y:l(){9 M=7.1K(),1Y=0;9 a=7.4.q,15=a,i,G,10=7.4[0].q,j;J{i=15-a;G=10;J{j=10-G;o(F.13(M.4[i][j])>17.16){1Y++;1I}}H(--G)}H(--a);8 1Y},3d:l(){8 7.1Y()},2W:l(a){9 M=a.4||a;o(1g(M[0][0])=='1f'){M=S.u(M).4}9 T=7.1q(),1p=T.4[0].q;9 b=T.4.q,15=b,i,G,10=M[0].q,j;o(b!=M.q){8 w}J{i=15-b;G=10;J{j=10-G;T.4[i][1p+j]=M[i][j]}H(--G)}H(--b);8 T},2w:l(){o(!7.1y()||7.2y()){8 w}9 a=7.4.q,15=a,i,j;9 M=7.2W(S.I(a)).1K();9 b,1n=M.4[0].q,p,1c,2v;9 c=[],2c;J{i=a-1;1c=[];b=1n;c[i]=[];2v=M.4[i][i];J{p=1n-b;2c=M.4[i][p]/2v;1c.19(2c);o(p>=15){c[i].19(2c)}}H(--b);M.4[i]=1c;2e(j=0;j<i;j++){1c=[];b=1n;J{p=1n-b;1c.19(M.4[j][p]-M.4[i][p]*M.4[j][i])}H(--b);M.4[j]=1c}}H(--a);8 S.u(c)},3c:l(){8 7.2w()},2d:l(){8 7.1b(l(x){8 F.2d(x)})},2V:l(x){8 7.1b(l(p){8(F.13(p-x)<=17.16)?x:p})},2n:l(){9 a=[];9 n=7.4.q,k=n,i;J{i=k-n;a.19(v.u(7.4[i]).2n())}H(--n);8 a.2K('\\n')},26:l(a){9 i,4=a.4||a;o(1g(4[0][0])!='1f'){9 b=4.q,15=b,G,10,j;7.4=[];J{i=15-b;G=4[i].q;10=G;7.4[i]=[];J{j=10-G;7.4[i][j]=4[i][j]}H(--G)}H(--b);8 7}9 n=4.q,k=n;7.4=[];J{i=k-n;7.4.19([4[i]])}H(--n);8 7}};S.u=l(a){9 M=25 S();8 M.26(a)};S.I=l(n){9 a=[],k=n,i,G,j;J{i=k-n;a[i]=[];G=k;J{j=k-G;a[i][j]=(i==j)?1:0}H(--G)}H(--n);8 S.u(a)};S.2X=l(a){9 n=a.q,k=n,i;9 M=S.I(n);J{i=k-n;M.4[i][i]=a[i]}H(--n);8 M};S.1R=l(b,a){o(!a){8 S.u([[F.1H(b),-F.1G(b)],[F.1G(b),F.1H(b)]])}9 d=a.1q();o(d.4.q!=3){8 w}9 e=d.1u();9 x=d.4[0]/e,y=d.4[1]/e,z=d.4[2]/e;9 s=F.1G(b),c=F.1H(b),t=1-c;8 S.u([[t*x*x+c,t*x*y-s*z,t*x*z+s*y],[t*x*y+s*z,t*y*y+c,t*y*z-s*x],[t*x*z-s*y,t*y*z+s*x,t*z*z+c]])};S.3b=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[1,0,0],[0,c,-s],[0,s,c]])};S.39=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,0,s],[0,1,0],[-s,0,c]])};S.38=l(t){9 c=F.1H(t),s=F.1G(t);8 S.u([[c,-s,0],[s,c,0],[0,0,1]])};S.2J=l(n,m){8 S.1j(n,m).1b(l(){8 F.2F()})};S.1j=l(n,m){9 a=[],12=n,i,G,j;J{i=n-12;a[i]=[];G=m;J{j=m-G;a[i][j]=0}H(--G)}H(--12);8 S.u(a)};l 14(){}14.23={24:l(a){8(7.1m(a)&&7.1h(a.K))},1q:l(){8 14.u(7.K,7.U)},2U:l(a){9 V=a.4||a;8 14.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.U)},1m:l(a){o(a.W){8 a.1m(7)}9 b=7.U.1C(a.U);8(F.13(b)<=17.16||F.13(b-F.1A)<=17.16)},1o:l(a){o(a.W){8 a.1o(7)}o(a.U){o(7.1m(a)){8 7.1o(a.K)}9 N=7.U.2f(a.U).2q().4;9 A=7.K.4,B=a.K.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,D=7.U.4;9 b=P[0]-A[0],2a=P[1]-A[1],29=(P[2]||0)-A[2];9 c=F.1x(b*b+2a*2a+29*29);o(c===0)8 0;9 d=(b*D[0]+2a*D[1]+29*D[2])/c;9 e=1-d*d;8 F.13(c*F.1x(e<0?0:e))}},1h:l(a){9 b=7.1o(a);8(b!==w&&b<=17.16)},2T:l(a){8 a.1h(7)},1v:l(a){o(a.W){8 a.1v(7)}8(!7.1m(a)&&7.1o(a)<=17.16)},1U:l(a){o(a.W){8 a.1U(7)}o(!7.1v(a)){8 w}9 P=7.K.4,X=7.U.4,Q=a.K.4,Y=a.U.4;9 b=X[0],1z=X[1],1B=X[2],1T=Y[0],1S=Y[1],1M=Y[2];9 c=P[0]-Q[0],2s=P[1]-Q[1],2r=P[2]-Q[2];9 d=-b*c-1z*2s-1B*2r;9 e=1T*c+1S*2s+1M*2r;9 f=b*b+1z*1z+1B*1B;9 g=1T*1T+1S*1S+1M*1M;9 h=b*1T+1z*1S+1B*1M;9 k=(d*g/f+h*e)/(g-h*h);8 v.u([P[0]+k*b,P[1]+k*1z,P[2]+k*1B])},1r:l(a){o(a.U){o(7.1v(a)){8 7.1U(a)}o(7.1m(a)){8 w}9 D=7.U.4,E=a.U.4;9 b=D[0],1l=D[1],1k=D[2],1P=E[0],1O=E[1],1Q=E[2];9 x=(1k*1P-b*1Q),y=(b*1O-1l*1P),z=(1l*1Q-1k*1O);9 N=v.u([x*1Q-y*1O,y*1P-z*1Q,z*1O-x*1P]);9 P=11.u(a.K,N);8 P.1U(7)}1d{9 P=a.4||a;o(7.1h(P)){8 v.u(P)}9 A=7.K.4,D=7.U.4;9 b=D[0],1l=D[1],1k=D[2],1w=A[0],18=A[1],1a=A[2];9 x=b*(P[1]-18)-1l*(P[0]-1w),y=1l*((P[2]||0)-1a)-1k*(P[1]-18),z=1k*(P[0]-1w)-b*((P[2]||0)-1a);9 V=v.u([1l*x-1k*z,1k*y-b*x,b*z-1l*y]);9 k=7.1o(P)/V.1u();8 v.u([P[0]+V.4[0]*k,P[1]+V.4[1]*k,(P[2]||0)+V.4[2]*k])}},1V:l(t,a){o(1g(a.U)=='1f'){a=14.u(a.1N(),v.k)}9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,D=7.U.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 14.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*D[0]+R[0][1]*D[1]+R[0][2]*D[2],R[1][0]*D[0]+R[1][1]*D[1]+R[1][2]*D[2],R[2][0]*D[0]+R[2][1]*D[1]+R[2][2]*D[2]])},1t:l(a){o(a.W){9 A=7.K.4,D=7.U.4;9 b=A[0],18=A[1],1a=A[2],2N=D[0],1l=D[1],1k=D[2];9 c=7.K.1t(a).4;9 d=b+2N,2h=18+1l,2o=1a+1k;9 Q=a.1r([d,2h,2o]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2h)-c[1],Q[2]+(Q[2]-2o)-c[2]];8 14.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 14.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.U)}},1Z:l(a,b){a=v.u(a);b=v.u(b);o(a.4.q==2){a.4.19(0)}o(b.4.q==2){b.4.19(0)}o(a.4.q>3||b.4.q>3){8 w}9 c=b.1u();o(c===0){8 w}7.K=a;7.U=v.u([b.4[0]/c,b.4[1]/c,b.4[2]/c]);8 7}};14.u=l(a,b){9 L=25 14();8 L.1Z(a,b)};14.X=14.u(v.1j(3),v.i);14.Y=14.u(v.1j(3),v.j);14.Z=14.u(v.1j(3),v.k);l 11(){}11.23={24:l(a){8(7.1h(a.K)&&7.1m(a))},1q:l(){8 11.u(7.K,7.W)},2U:l(a){9 V=a.4||a;8 11.u([7.K.4[0]+V[0],7.K.4[1]+V[1],7.K.4[2]+(V[2]||0)],7.W)},1m:l(a){9 b;o(a.W){b=7.W.1C(a.W);8(F.13(b)<=17.16||F.13(F.1A-b)<=17.16)}1d o(a.U){8 7.W.2k(a.U)}8 w},2k:l(a){9 b=7.W.1C(a.W);8(F.13(F.1A/2-b)<=17.16)},1o:l(a){o(7.1v(a)||7.1h(a)){8 0}o(a.K){9 A=7.K.4,B=a.K.4,N=7.W.4;8 F.13((A[0]-B[0])*N[0]+(A[1]-B[1])*N[1]+(A[2]-B[2])*N[2])}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;8 F.13((A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2])}},1h:l(a){o(a.W){8 w}o(a.U){8(7.1h(a.K)&&7.1h(a.K.2j(a.U)))}1d{9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=F.13(N[0]*(A[0]-P[0])+N[1]*(A[1]-P[1])+N[2]*(A[2]-(P[2]||0)));8(b<=17.16)}},1v:l(a){o(1g(a.U)=='1f'&&1g(a.W)=='1f'){8 w}8!7.1m(a)},1U:l(a){o(!7.1v(a)){8 w}o(a.U){9 A=a.K.4,D=a.U.4,P=7.K.4,N=7.W.4;9 b=(N[0]*(P[0]-A[0])+N[1]*(P[1]-A[1])+N[2]*(P[2]-A[2]))/(N[0]*D[0]+N[1]*D[1]+N[2]*D[2]);8 v.u([A[0]+D[0]*b,A[1]+D[1]*b,A[2]+D[2]*b])}1d o(a.W){9 c=7.W.2f(a.W).2q();9 N=7.W.4,A=7.K.4,O=a.W.4,B=a.K.4;9 d=S.1j(2,2),i=0;H(d.2y()){i++;d=S.u([[N[i%3],N[(i+1)%3]],[O[i%3],O[(i+1)%3]]])}9 e=d.2w().4;9 x=N[0]*A[0]+N[1]*A[1]+N[2]*A[2];9 y=O[0]*B[0]+O[1]*B[1]+O[2]*B[2];9 f=[e[0][0]*x+e[0][1]*y,e[1][0]*x+e[1][1]*y];9 g=[];2e(9 j=1;j<=3;j++){g.19((i==j)?0:f[(j+(5-i)%3)%3])}8 14.u(g,c)}},1r:l(a){9 P=a.4||a;9 A=7.K.4,N=7.W.4;9 b=(A[0]-P[0])*N[0]+(A[1]-P[1])*N[1]+(A[2]-(P[2]||0))*N[2];8 v.u([P[0]+N[0]*b,P[1]+N[1]*b,(P[2]||0)+N[2]*b])},1V:l(t,a){9 R=S.1R(t,a.U).4;9 C=a.1r(7.K).4;9 A=7.K.4,N=7.W.4;9 b=C[0],1E=C[1],1J=C[2],1w=A[0],18=A[1],1a=A[2];9 x=1w-b,y=18-1E,z=1a-1J;8 11.u([b+R[0][0]*x+R[0][1]*y+R[0][2]*z,1E+R[1][0]*x+R[1][1]*y+R[1][2]*z,1J+R[2][0]*x+R[2][1]*y+R[2][2]*z],[R[0][0]*N[0]+R[0][1]*N[1]+R[0][2]*N[2],R[1][0]*N[0]+R[1][1]*N[1]+R[1][2]*N[2],R[2][0]*N[0]+R[2][1]*N[1]+R[2][2]*N[2]])},1t:l(a){o(a.W){9 A=7.K.4,N=7.W.4;9 b=A[0],18=A[1],1a=A[2],2M=N[0],2L=N[1],2Q=N[2];9 c=7.K.1t(a).4;9 d=b+2M,2p=18+2L,2m=1a+2Q;9 Q=a.1r([d,2p,2m]).4;9 e=[Q[0]+(Q[0]-d)-c[0],Q[1]+(Q[1]-2p)-c[1],Q[2]+(Q[2]-2m)-c[2]];8 11.u(c,e)}1d o(a.U){8 7.1V(F.1A,a)}1d{9 P=a.4||a;8 11.u(7.K.1t([P[0],P[1],(P[2]||0)]),7.W)}},1Z:l(a,b,c){a=v.u(a);a=a.1N();o(a===w){8 w}b=v.u(b);b=b.1N();o(b===w){8 w}o(1g(c)=='1f'){c=w}1d{c=v.u(c);c=c.1N();o(c===w){8 w}}9 d=a.4[0],18=a.4[1],1a=a.4[2];9 e=b.4[0],1W=b.4[1],1X=b.4[2];9 f,1i;o(c!==w){9 g=c.4[0],2l=c.4[1],2t=c.4[2];f=v.u([(1W-18)*(2t-1a)-(1X-1a)*(2l-18),(1X-1a)*(g-d)-(e-d)*(2t-1a),(e-d)*(2l-18)-(1W-18)*(g-d)]);1i=f.1u();o(1i===0){8 w}f=v.u([f.4[0]/1i,f.4[1]/1i,f.4[2]/1i])}1d{1i=F.1x(e*e+1W*1W+1X*1X);o(1i===0){8 w}f=v.u([b.4[0]/1i,b.4[1]/1i,b.4[2]/1i])}7.K=a;7.W=f;8 7}};11.u=l(a,b,c){9 P=25 11();8 P.1Z(a,b,c)};11.2I=11.u(v.1j(3),v.k);11.2H=11.u(v.1j(3),v.i);11.2G=11.u(v.1j(3),v.j);11.36=11.2I;11.35=11.2H;11.3j=11.2G;9 $V=v.u;9 $M=S.u;9 $L=14.u;9 $P=11.u;",62,206,"||||elements|||this|return|var||||||||||||function|||if||length||||create|Vector|null|||||||||Math|nj|while||do|anchor||||||||Matrix||direction||normal||||kj|Plane|ni|abs|Line|ki|precision|Sylvester|A2|push|A3|map|els|else||undefined|typeof|contains|mod|Zero|D3|D2|isParallelTo|kp|distanceFrom|cols|dup|pointClosestTo|np|reflectionIn|modulus|intersects|A1|sqrt|isSquare|X2|PI|X3|angleFrom|mod1|C2|mod2|sin|cos|break|C3|toRightTriangular|false|Y3|to3D|E2|E1|E3|Rotation|Y2|Y1|intersectionWith|rotate|v12|v13|rank|setVectors|nc|sum|multiply|prototype|eql|new|setElements|case|each|PA3|PA2|part|new_element|round|for|cross|product|AD2|isSameSizeAs|add|isPerpendicularTo|v22|AN3|inspect|AD3|AN2|toUnitVector|PsubQ3|PsubQ2|v23|dot|divisor|inverse|true|isSingular|determinant|max|canMultiplyFromLeft|subtract|rows|col|random|ZX|YZ|XY|Random|join|N2|N1|D1|slice|default|N3|dimensions|switch|liesIn|translate|snapTo|augment|Diagonal|trace|indexOf|diagonal|transpose|minor|row|isAntiparallelTo|ZY|YX|acos|RotationZ|RotationY|liesOn|RotationX|inv|rk|tr|det|toDiagonalMatrix|toUpperTriangular|version|XZ".split("|"),0,{}));

/*
 * 0.1.0: Copyright (c) 2006-2007 Erin Catto http://box2d-js.sourceforge.net/
 * 0.2.0:
 *     Created by rene7705@gmail.com, http://mediabeez.ws/downloads/
 *     purpose: replace prototype dependency with jquery dependency
 *     Copyright (c) 2010 Erin Catto
 *
 * This software is provided 'as-is', without any express or implied
 * warranty.  In no event will the authors be held liable for any damages
 * arising from the use of this software.
 * Permission is granted to anyone to use this software for any purpose,
 * including commercial applications, and to alter it and redistribute it
 * freely, subject to the following restrictions:
 * 1. The origin of this software must not be misrepresented; you must not
 * claim that you wrote the original software. If you use this software
 * in a product, an acknowledgment in the product documentation would be
 * appreciated but is not required.
 * 2. Altered source versions must be plainly marked, and must not be
 * misrepresented the original software.
 * 3. This notice may not be removed or altered from any source distribution.
 */

var b2Root=function(){function a(){this.initialize.apply(this,arguments)}return a};var b2Settings=new b2Root;jQuery.extend(b2Settings.prototype,{initialize:function(){}});b2Settings.USHRT_MAX=65535;b2Settings.b2_pi=Math.PI;b2Settings.b2_massUnitsPerKilogram=1;b2Settings.b2_timeUnitsPerSecond=1;b2Settings.b2_lengthUnitsPerMeter=30;b2Settings.b2_maxManifoldPoints=2;b2Settings.b2_maxShapesPerBody=64;b2Settings.b2_maxPolyVertices=8;b2Settings.b2_maxProxies=1024;b2Settings.b2_maxPairs=8*b2Settings.b2_maxProxies;b2Settings.b2_linearSlop=.005*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_angularSlop=2/180*b2Settings.b2_pi;b2Settings.b2_velocityThreshold=1*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_maxLinearCorrection=.2*b2Settings.b2_lengthUnitsPerMeter;b2Settings.b2_maxAngularCorrection=8/180*b2Settings.b2_pi;b2Settings.b2_contactBaumgarte=.2;b2Settings.b2_timeToSleep=.5*b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_linearSleepTolerance=.01*b2Settings.b2_lengthUnitsPerMeter/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2_angularSleepTolerance=2/180/b2Settings.b2_timeUnitsPerSecond;b2Settings.b2Assert=function(a){if(!a){var b;b.x++}};var b2Vec2=new b2Root;jQuery.extend(b2Vec2.prototype,{initialize:function(a,b){this.x=a;this.y=b},SetZero:function(){this.x=0;this.y=0},Set:function(a,b){this.x=a;this.y=b},SetV:function(a){this.x=a.x;this.y=a.y},Negative:function(){return new b2Vec2(-this.x,-this.y)},Copy:function(){return new b2Vec2(this.x,this.y)},Add:function(a){this.x+=a.x;this.y+=a.y},Subtract:function(a){this.x-=a.x;this.y-=a.y},Multiply:function(a){this.x*=a;this.y*=a},MulM:function(a){var b=this.x;this.x=a.col1.x*b+a.col2.x*this.y;this.y=a.col1.y*b+a.col2.y*this.y},MulTM:function(a){var b=b2Math.b2Dot(this,a.col1);this.y=b2Math.b2Dot(this,a.col2);this.x=b},CrossVF:function(a){var b=this.x;this.x=a*this.y;this.y=-a*b},CrossFV:function(a){var b=this.x;this.x=-a*this.y;this.y=a*b},MinV:function(a){this.x=this.x<a.x?this.x:a.x;this.y=this.y<a.y?this.y:a.y},MaxV:function(a){this.x=this.x>a.x?this.x:a.x;this.y=this.y>a.y?this.y:a.y},Abs:function(){this.x=Math.abs(this.x);this.y=Math.abs(this.y)},Length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Normalize:function(){var a=this.Length();if(a<Number.MIN_VALUE){return 0}var b=1/a;this.x*=b;this.y*=b;return a},IsValid:function(){return b2Math.b2IsValid(this.x)&&b2Math.b2IsValid(this.y)},x:null,y:null});b2Vec2.Make=function(a,b){return new b2Vec2(a,b)};var b2Mat22=new b2Root;jQuery.extend(b2Mat22.prototype,{initialize:function(a,b,c){if(a==null)a=0;this.col1=new b2Vec2;this.col2=new b2Vec2;if(b!=null&&c!=null){this.col1.SetV(b);this.col2.SetV(c)}else{var d=Math.cos(a);var e=Math.sin(a);this.col1.x=d;this.col2.x=-e;this.col1.y=e;this.col2.y=d}},Set:function(a){var b=Math.cos(a);var c=Math.sin(a);this.col1.x=b;this.col2.x=-c;this.col1.y=c;this.col2.y=b},SetVV:function(a,b){this.col1.SetV(a);this.col2.SetV(b)},Copy:function(){return new b2Mat22(0,this.col1,this.col2)},SetM:function(a){this.col1.SetV(a.col1);this.col2.SetV(a.col2)},AddM:function(a){this.col1.x+=a.col1.x;this.col1.y+=a.col1.y;this.col2.x+=a.col2.x;this.col2.y+=a.col2.y},SetIdentity:function(){this.col1.x=1;this.col2.x=0;this.col1.y=0;this.col2.y=1},SetZero:function(){this.col1.x=0;this.col2.x=0;this.col1.y=0;this.col2.y=0},Invert:function(a){var b=this.col1.x;var c=this.col2.x;var d=this.col1.y;var e=this.col2.y;var f=b*e-c*d;f=1/f;a.col1.x=f*e;a.col2.x=-f*c;a.col1.y=-f*d;a.col2.y=f*b;return a},Solve:function(a,b,c){var d=this.col1.x;var e=this.col2.x;var f=this.col1.y;var g=this.col2.y;var h=d*g-e*f;h=1/h;a.x=h*(g*b-e*c);a.y=h*(d*c-f*b);return a},Abs:function(){this.col1.Abs();this.col2.Abs()},col1:new b2Vec2,col2:new b2Vec2});var b2Math=new b2Root;jQuery.extend(b2Math.prototype,{initialize:function(){}});b2Math.b2IsValid=function(a){return isFinite(a)};b2Math.b2Dot=function(a,b){return a.x*b.x+a.y*b.y};b2Math.b2CrossVV=function(a,b){return a.x*b.y-a.y*b.x};b2Math.b2CrossVF=function(a,b){var c=new b2Vec2(b*a.y,-b*a.x);return c};b2Math.b2CrossFV=function(a,b){var c=new b2Vec2(-a*b.y,a*b.x);return c};b2Math.b2MulMV=function(a,b){var c=new b2Vec2(a.col1.x*b.x+a.col2.x*b.y,a.col1.y*b.x+a.col2.y*b.y);return c};b2Math.b2MulTMV=function(a,b){var c=new b2Vec2(b2Math.b2Dot(b,a.col1),b2Math.b2Dot(b,a.col2));return c};b2Math.AddVV=function(a,b){var c=new b2Vec2(a.x+b.x,a.y+b.y);return c};b2Math.SubtractVV=function(a,b){var c=new b2Vec2(a.x-b.x,a.y-b.y);return c};b2Math.MulFV=function(a,b){var c=new b2Vec2(a*b.x,a*b.y);return c};b2Math.AddMM=function(a,b){var c=new b2Mat22(0,b2Math.AddVV(a.col1,b.col1),b2Math.AddVV(a.col2,b.col2));return c};b2Math.b2MulMM=function(a,b){var c=new b2Mat22(0,b2Math.b2MulMV(a,b.col1),b2Math.b2MulMV(a,b.col2));return c};b2Math.b2MulTMM=function(a,b){var c=new b2Vec2(b2Math.b2Dot(a.col1,b.col1),b2Math.b2Dot(a.col2,b.col1));var d=new b2Vec2(b2Math.b2Dot(a.col1,b.col2),b2Math.b2Dot(a.col2,b.col2));var e=new b2Mat22(0,c,d);return e};b2Math.b2Abs=function(a){return a>0?a:-a};b2Math.b2AbsV=function(a){var b=new b2Vec2(b2Math.b2Abs(a.x),b2Math.b2Abs(a.y));return b};b2Math.b2AbsM=function(a){var b=new b2Mat22(0,b2Math.b2AbsV(a.col1),b2Math.b2AbsV(a.col2));return b};b2Math.b2Min=function(a,b){return a<b?a:b};b2Math.b2MinV=function(a,b){var c=new b2Vec2(b2Math.b2Min(a.x,b.x),b2Math.b2Min(a.y,b.y));return c};b2Math.b2Max=function(a,b){return a>b?a:b};b2Math.b2MaxV=function(a,b){var c=new b2Vec2(b2Math.b2Max(a.x,b.x),b2Math.b2Max(a.y,b.y));return c};b2Math.b2Clamp=function(a,b,c){return b2Math.b2Max(b,b2Math.b2Min(a,c))};b2Math.b2ClampV=function(a,b,c){return b2Math.b2MaxV(b,b2Math.b2MinV(a,c))};b2Math.b2Swap=function(a,b){var c=a[0];a[0]=b[0];b[0]=c};b2Math.b2Random=function(){return Math.random()*2-1};b2Math.b2NextPowerOfTwo=function(a){a|=a>>1&2147483647;a|=a>>2&1073741823;a|=a>>4&268435455;a|=a>>8&16777215;a|=a>>16&65535;return a+1};b2Math.b2IsPowerOfTwo=function(a){var b=a>0&&(a&a-1)==0;return b};b2Math.tempVec2=new b2Vec2;b2Math.tempVec3=new b2Vec2;b2Math.tempVec4=new b2Vec2;b2Math.tempVec5=new b2Vec2;b2Math.tempMat=new b2Mat22;var b2ShapeDef=new b2Root;jQuery.extend(b2ShapeDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0},ComputeMass:function(a){a.center=new b2Vec2(0,0);if(this.density==0){a.mass=0;a.center.Set(0,0);a.I=0}switch(this.type){case b2Shape.e_circleShape:{var b=this;a.mass=this.density*b2Settings.b2_pi*b.radius*b.radius;a.center.Set(0,0);a.I=.5*a.mass*b.radius*b.radius}break;case b2Shape.e_boxShape:{var c=this;a.mass=4*this.density*c.extents.x*c.extents.y;a.center.Set(0,0);a.I=a.mass/3*b2Math.b2Dot(c.extents,c.extents)}break;case b2Shape.e_polyShape:{var d=this;b2Shape.PolyMass(a,d.vertices,d.vertexCount,this.density)}break;default:a.mass=0;a.center.Set(0,0);a.I=0;break}},type:0,userData:null,localPosition:null,localRotation:null,friction:null,restitution:null,density:null,categoryBits:0,maskBits:0,groupIndex:0});var b2Shape=new b2Root;jQuery.extend(b2Shape.prototype,{TestPoint:function(a){return false},GetUserData:function(){return this.m_userData},GetType:function(){return this.m_type},GetBody:function(){return this.m_body},GetPosition:function(){return this.m_position},GetRotationMatrix:function(){return this.m_R},ResetProxy:function(a){},GetNext:function(){return this.m_next},initialize:function(a,b){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=b;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex},DestroyProxy:function(){if(this.m_proxyId!=b2Pair.b2_nullProxy){this.m_body.m_world.m_broadPhase.DestroyProxy(this.m_proxyId);this.m_proxyId=b2Pair.b2_nullProxy}},Synchronize:function(a,b,c,d){},QuickSync:function(a,b){},Support:function(a,b,c){},GetMaxRadius:function(){return this.m_maxRadius},m_next:null,m_R:new b2Mat22,m_position:new b2Vec2,m_type:0,m_userData:null,m_body:null,m_friction:null,m_restitution:null,m_maxRadius:null,m_proxyId:0,m_categoryBits:0,m_maskBits:0,m_groupIndex:0});b2Shape.Create=function(a,b,c){switch(a.type){case b2Shape.e_circleShape:{return new b2CircleShape(a,b,c)};case b2Shape.e_boxShape:case b2Shape.e_polyShape:{return new b2PolyShape(a,b,c)}}return null};b2Shape.Destroy=function(a){if(a.m_proxyId!=b2Pair.b2_nullProxy)a.m_body.m_world.m_broadPhase.DestroyProxy(a.m_proxyId)};b2Shape.e_unknownShape=-1;b2Shape.e_circleShape=0;b2Shape.e_boxShape=1;b2Shape.e_polyShape=2;b2Shape.e_meshShape=3;b2Shape.e_shapeTypeCount=4;b2Shape.PolyMass=function(a,b,c,d){var e=new b2Vec2;e.SetZero();var f=0;var g=0;var h=new b2Vec2(0,0);var i=1/3;for(var j=0;j<c;++j){var k=h;var l=b[j];var m=j+1<c?b[j+1]:b[0];var n=b2Math.SubtractVV(l,k);var o=b2Math.SubtractVV(m,k);var p=b2Math.b2CrossVV(n,o);var q=.5*p;f+=q;var r=new b2Vec2;r.SetV(k);r.Add(l);r.Add(m);r.Multiply(i*q);e.Add(r);var s=k.x;var t=k.y;var u=n.x;var v=n.y;var w=o.x;var x=o.y;var y=i*(.25*(u*u+w*u+w*w)+(s*u+s*w))+.5*s*s;var z=i*(.25*(v*v+x*v+x*x)+(t*v+t*x))+.5*t*t;g+=p*(y+z)}a.mass=d*f;e.Multiply(1/f);a.center=e;g=d*(g-f*b2Math.b2Dot(e,e));a.I=g};b2Shape.PolyCentroid=function(a,b,c){var d=0;var e=0;var f=0;var g=0;var h=0;var i=1/3;for(var j=0;j<b;++j){var k=g;var l=h;var m=a[j].x;var n=a[j].y;var o=j+1<b?a[j+1].x:a[0].x;var p=j+1<b?a[j+1].y:a[0].y;var q=m-k;var r=n-l;var s=o-k;var t=p-l;var u=q*t-r*s;var v=.5*u;f+=v;d+=v*i*(k+m+o);e+=v*i*(l+n+p)}d*=1/f;e*=1/f;c.Set(d,e)};var b2BoxDef=new b2Root;jQuery.extend(b2BoxDef.prototype,b2ShapeDef.prototype);jQuery.extend(b2BoxDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_boxShape;this.extents=new b2Vec2(1,1)},extents:null});var b2CircleDef=new b2Root;jQuery.extend(b2CircleDef.prototype,b2ShapeDef.prototype);jQuery.extend(b2CircleDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.type=b2Shape.e_circleShape;this.radius=1},radius:null});var b2CircleShape=new b2Root;jQuery.extend(b2CircleShape.prototype,b2Shape.prototype);jQuery.extend(b2CircleShape.prototype,{TestPoint:function(a){var b=new b2Vec2;b.SetV(a);b.Subtract(this.m_position);return b2Math.b2Dot(b,b)<=this.m_radius*this.m_radius},initialize:function(a,b,c){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=b;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.m_localPosition=new b2Vec2;var d=a;this.m_localPosition.Set(a.localPosition.x-c.x,a.localPosition.y-c.y);this.m_type=b2Shape.e_circleShape;this.m_radius=d.radius;this.m_R.SetM(this.m_body.m_R);var e=this.m_R.col1.x*this.m_localPosition.x+this.m_R.col2.x*this.m_localPosition.y;var f=this.m_R.col1.y*this.m_localPosition.x+this.m_R.col2.y*this.m_localPosition.y;this.m_position.x=this.m_body.m_position.x+e;this.m_position.y=this.m_body.m_position.y+f;this.m_maxRadius=Math.sqrt(e*e+f*f)+this.m_radius;var g=new b2AABB;g.minVertex.Set(this.m_position.x-this.m_radius,this.m_position.y-this.m_radius);g.maxVertex.Set(this.m_position.x+this.m_radius,this.m_position.y+this.m_radius);var h=this.m_body.m_world.m_broadPhase;if(h.InRange(g)){this.m_proxyId=h.CreateProxy(g,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},Synchronize:function(a,b,c,d){this.m_R.SetM(d);this.m_position.x=d.col1.x*this.m_localPosition.x+d.col2.x*this.m_localPosition.y+c.x;this.m_position.y=d.col1.y*this.m_localPosition.x+d.col2.y*this.m_localPosition.y+c.y;if(this.m_proxyId==b2Pair.b2_nullProxy){return}var e=a.x+(b.col1.x*this.m_localPosition.x+b.col2.x*this.m_localPosition.y);var f=a.y+(b.col1.y*this.m_localPosition.x+b.col2.y*this.m_localPosition.y);var g=Math.min(e,this.m_position.x);var h=Math.min(f,this.m_position.y);var i=Math.max(e,this.m_position.x);var j=Math.max(f,this.m_position.y);var k=new b2AABB;k.minVertex.Set(g-this.m_radius,h-this.m_radius);k.maxVertex.Set(i+this.m_radius,j+this.m_radius);var l=this.m_body.m_world.m_broadPhase;if(l.InRange(k)){l.MoveProxy(this.m_proxyId,k)}else{this.m_body.Freeze()}},QuickSync:function(a,b){this.m_R.SetM(b);this.m_position.x=b.col1.x*this.m_localPosition.x+b.col2.x*this.m_localPosition.y+a.x;this.m_position.y=b.col1.y*this.m_localPosition.x+b.col2.y*this.m_localPosition.y+a.y},ResetProxy:function(a){if(this.m_proxyId==b2Pair.b2_nullProxy){return}var b=a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);b=null;var c=new b2AABB;c.minVertex.Set(this.m_position.x-this.m_radius,this.m_position.y-this.m_radius);c.maxVertex.Set(this.m_position.x+this.m_radius,this.m_position.y+this.m_radius);if(a.InRange(c)){this.m_proxyId=a.CreateProxy(c,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},Support:function(a,b,c){var d=Math.sqrt(a*a+b*b);a/=d;b/=d;c.Set(this.m_position.x+this.m_radius*a,this.m_position.y+this.m_radius*b)},m_localPosition:new b2Vec2,m_radius:null});var b2MassData=new b2Root;jQuery.extend(b2MassData.prototype,{mass:0,center:new b2Vec2(0,0),I:0,initialize:function(){this.center=new b2Vec2(0,0)}});var b2PolyDef=new b2Root;jQuery.extend(b2PolyDef.prototype,b2ShapeDef.prototype);jQuery.extend(b2PolyDef.prototype,{initialize:function(){this.type=b2Shape.e_unknownShape;this.userData=null;this.localPosition=new b2Vec2(0,0);this.localRotation=0;this.friction=.2;this.restitution=0;this.density=0;this.categoryBits=1;this.maskBits=65535;this.groupIndex=0;this.vertices=new Array(b2Settings.b2_maxPolyVertices);this.type=b2Shape.e_polyShape;this.vertexCount=0;for(var a=0;a<b2Settings.b2_maxPolyVertices;a++){this.vertices[a]=new b2Vec2}},vertices:new Array(b2Settings.b2_maxPolyVertices),vertexCount:0});var b2AABB=new b2Root;jQuery.extend(b2AABB.prototype,{IsValid:function(){var a=this.maxVertex.x;var b=this.maxVertex.y;a=this.maxVertex.x;b=this.maxVertex.y;a-=this.minVertex.x;b-=this.minVertex.y;var c=a>=0&&b>=0;c=c&&this.minVertex.IsValid()&&this.maxVertex.IsValid();return c},minVertex:new b2Vec2,maxVertex:new b2Vec2,initialize:function(){this.minVertex=new b2Vec2;this.maxVertex=new b2Vec2}});var b2OBB=new b2Root;jQuery.extend(b2OBB.prototype,{R:new b2Mat22,center:new b2Vec2,extents:new b2Vec2,initialize:function(){this.R=new b2Mat22;this.center=new b2Vec2;this.extents=new b2Vec2}});var b2PolyShape=new b2Root;jQuery.extend(b2PolyShape.prototype,b2Shape.prototype);jQuery.extend(b2PolyShape.prototype,{TestPoint:function(a){var b=new b2Vec2;b.SetV(a);b.Subtract(this.m_position);b.MulTM(this.m_R);for(var c=0;c<this.m_vertexCount;++c){var d=new b2Vec2;d.SetV(b);d.Subtract(this.m_vertices[c]);var e=b2Math.b2Dot(this.m_normals[c],d);if(e>0){return false}}return true},initialize:function(a,b,c){this.m_R=new b2Mat22;this.m_position=new b2Vec2;this.m_userData=a.userData;this.m_friction=a.friction;this.m_restitution=a.restitution;this.m_body=b;this.m_proxyId=b2Pair.b2_nullProxy;this.m_maxRadius=0;this.m_categoryBits=a.categoryBits;this.m_maskBits=a.maskBits;this.m_groupIndex=a.groupIndex;this.syncAABB=new b2AABB;this.syncMat=new b2Mat22;this.m_localCentroid=new b2Vec2;this.m_localOBB=new b2OBB;var d=0;var e;var f;var g;var h=new b2AABB;this.m_vertices=new Array(b2Settings.b2_maxPolyVertices);this.m_coreVertices=new Array(b2Settings.b2_maxPolyVertices);this.m_normals=new Array(b2Settings.b2_maxPolyVertices);this.m_type=b2Shape.e_polyShape;var i=new b2Mat22(a.localRotation);if(a.type==b2Shape.e_boxShape){this.m_localCentroid.x=a.localPosition.x-c.x;this.m_localCentroid.y=a.localPosition.y-c.y;var j=a;this.m_vertexCount=4;e=j.extents.x;f=j.extents.y;var k=Math.max(0,e-2*b2Settings.b2_linearSlop);var l=Math.max(0,f-2*b2Settings.b2_linearSlop);g=this.m_vertices[0]=new b2Vec2;g.x=i.col1.x*e+i.col2.x*f;g.y=i.col1.y*e+i.col2.y*f;g=this.m_vertices[1]=new b2Vec2;g.x=i.col1.x*-e+i.col2.x*f;g.y=i.col1.y*-e+i.col2.y*f;g=this.m_vertices[2]=new b2Vec2;g.x=i.col1.x*-e+i.col2.x*-f;g.y=i.col1.y*-e+i.col2.y*-f;g=this.m_vertices[3]=new b2Vec2;g.x=i.col1.x*e+i.col2.x*-f;g.y=i.col1.y*e+i.col2.y*-f;g=this.m_coreVertices[0]=new b2Vec2;g.x=i.col1.x*k+i.col2.x*l;g.y=i.col1.y*k+i.col2.y*l;g=this.m_coreVertices[1]=new b2Vec2;g.x=i.col1.x*-k+i.col2.x*l;g.y=i.col1.y*-k+i.col2.y*l;g=this.m_coreVertices[2]=new b2Vec2;g.x=i.col1.x*-k+i.col2.x*-l;g.y=i.col1.y*-k+i.col2.y*-l;g=this.m_coreVertices[3]=new b2Vec2;g.x=i.col1.x*k+i.col2.x*-l;g.y=i.col1.y*k+i.col2.y*-l}else{var m=a;this.m_vertexCount=m.vertexCount;b2Shape.PolyCentroid(m.vertices,m.vertexCount,b2PolyShape.tempVec);var n=b2PolyShape.tempVec.x;var o=b2PolyShape.tempVec.y;this.m_localCentroid.x=a.localPosition.x+(i.col1.x*n+i.col2.x*o)-c.x;this.m_localCentroid.y=a.localPosition.y+(i.col1.y*n+i.col2.y*o)-c.y;for(d=0;d<this.m_vertexCount;++d){this.m_vertices[d]=new b2Vec2;this.m_coreVertices[d]=new b2Vec2;e=m.vertices[d].x-n;f=m.vertices[d].y-o;this.m_vertices[d].x=i.col1.x*e+i.col2.x*f;this.m_vertices[d].y=i.col1.y*e+i.col2.y*f;var p=this.m_vertices[d].x;var q=this.m_vertices[d].y;var r=Math.sqrt(p*p+q*q);if(r>Number.MIN_VALUE){p*=1/r;q*=1/r}this.m_coreVertices[d].x=this.m_vertices[d].x-2*b2Settings.b2_linearSlop*p;this.m_coreVertices[d].y=this.m_vertices[d].y-2*b2Settings.b2_linearSlop*q}}var s=Number.MAX_VALUE;var t=Number.MAX_VALUE;var u=-Number.MAX_VALUE;var v=-Number.MAX_VALUE;this.m_maxRadius=0;for(d=0;d<this.m_vertexCount;++d){var w=this.m_vertices[d];s=Math.min(s,w.x);t=Math.min(t,w.y);u=Math.max(u,w.x);v=Math.max(v,w.y);this.m_maxRadius=Math.max(this.m_maxRadius,w.Length())}this.m_localOBB.R.SetIdentity();this.m_localOBB.center.Set((s+u)*.5,(t+v)*.5);this.m_localOBB.extents.Set((u-s)*.5,(v-t)*.5);var x=0;var y=0;for(d=0;d<this.m_vertexCount;++d){this.m_normals[d]=new b2Vec2;x=d;y=d+1<this.m_vertexCount?d+1:0;this.m_normals[d].x=this.m_vertices[y].y-this.m_vertices[x].y;this.m_normals[d].y=-(this.m_vertices[y].x-this.m_vertices[x].x);this.m_normals[d].Normalize()}for(d=0;d<this.m_vertexCount;++d){x=d;y=d+1<this.m_vertexCount?d+1:0}this.m_R.SetM(this.m_body.m_R);this.m_position.x=this.m_body.m_position.x+(this.m_R.col1.x*this.m_localCentroid.x+this.m_R.col2.x*this.m_localCentroid.y);this.m_position.y=this.m_body.m_position.y+(this.m_R.col1.y*this.m_localCentroid.x+this.m_R.col2.y*this.m_localCentroid.y);b2PolyShape.tAbsR.col1.x=this.m_R.col1.x*this.m_localOBB.R.col1.x+this.m_R.col2.x*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col1.y=this.m_R.col1.y*this.m_localOBB.R.col1.x+this.m_R.col2.y*this.m_localOBB.R.col1.y;b2PolyShape.tAbsR.col2.x=this.m_R.col1.x*this.m_localOBB.R.col2.x+this.m_R.col2.x*this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.col2.y=this.m_R.col1.y*this.m_localOBB.R.col2.x+this.m_R.col2.y*this.m_localOBB.R.col2.y;b2PolyShape.tAbsR.Abs();e=b2PolyShape.tAbsR.col1.x*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.x*this.m_localOBB.extents.y;f=b2PolyShape.tAbsR.col1.y*this.m_localOBB.extents.x+b2PolyShape.tAbsR.col2.y*this.m_localOBB.extents.y;var z=this.m_position.x+(this.m_R.col1.x*this.m_localOBB.center.x+this.m_R.col2.x*this.m_localOBB.center.y);var A=this.m_position.y+(this.m_R.col1.y*this.m_localOBB.center.x+this.m_R.col2.y*this.m_localOBB.center.y);h.minVertex.x=z-e;h.minVertex.y=A-f;h.maxVertex.x=z+e;h.maxVertex.y=A+f;var B=this.m_body.m_world.m_broadPhase;if(B.InRange(h)){this.m_proxyId=B.CreateProxy(h,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},syncAABB:new b2AABB,syncMat:new b2Mat22,Synchronize:function(a,b,c,d){this.m_R.SetM(d);this.m_position.x=this.m_body.m_position.x+(d.col1.x*this.m_localCentroid.x+d.col2.x*this.m_localCentroid.y);this.m_position.y=this.m_body.m_position.y+(d.col1.y*this.m_localCentroid.x+d.col2.y*this.m_localCentroid.y);if(this.m_proxyId==b2Pair.b2_nullProxy){return}var e;var f;var g=b.col1;var h=b.col2;var i=this.m_localOBB.R.col1;var j=this.m_localOBB.R.col2;this.syncMat.col1.x=g.x*i.x+h.x*i.y;this.syncMat.col1.y=g.y*i.x+h.y*i.y;this.syncMat.col2.x=g.x*j.x+h.x*j.y;this.syncMat.col2.y=g.y*j.x+h.y*j.y;this.syncMat.Abs();e=this.m_localCentroid.x+this.m_localOBB.center.x;f=this.m_localCentroid.y+this.m_localOBB.center.y;var k=a.x+(b.col1.x*e+b.col2.x*f);var l=a.y+(b.col1.y*e+b.col2.y*f);e=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*this.m_localOBB.extents.y;f=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=k-e;this.syncAABB.minVertex.y=l-f;this.syncAABB.maxVertex.x=k+e;this.syncAABB.maxVertex.y=l+f;g=d.col1;h=d.col2;i=this.m_localOBB.R.col1;j=this.m_localOBB.R.col2;this.syncMat.col1.x=g.x*i.x+h.x*i.y;this.syncMat.col1.y=g.y*i.x+h.y*i.y;this.syncMat.col2.x=g.x*j.x+h.x*j.y;this.syncMat.col2.y=g.y*j.x+h.y*j.y;this.syncMat.Abs();e=this.m_localCentroid.x+this.m_localOBB.center.x;f=this.m_localCentroid.y+this.m_localOBB.center.y;k=c.x+(d.col1.x*e+d.col2.x*f);l=c.y+(d.col1.y*e+d.col2.y*f);e=this.syncMat.col1.x*this.m_localOBB.extents.x+this.syncMat.col2.x*this.m_localOBB.extents.y;f=this.syncMat.col1.y*this.m_localOBB.extents.x+this.syncMat.col2.y*this.m_localOBB.extents.y;this.syncAABB.minVertex.x=Math.min(this.syncAABB.minVertex.x,k-e);this.syncAABB.minVertex.y=Math.min(this.syncAABB.minVertex.y,l-f);this.syncAABB.maxVertex.x=Math.max(this.syncAABB.maxVertex.x,k+e);this.syncAABB.maxVertex.y=Math.max(this.syncAABB.maxVertex.y,l+f);var m=this.m_body.m_world.m_broadPhase;if(m.InRange(this.syncAABB)){m.MoveProxy(this.m_proxyId,this.syncAABB)}else{this.m_body.Freeze()}},QuickSync:function(a,b){this.m_R.SetM(b);this.m_position.x=a.x+(b.col1.x*this.m_localCentroid.x+b.col2.x*this.m_localCentroid.y);this.m_position.y=a.y+(b.col1.y*this.m_localCentroid.x+b.col2.y*this.m_localCentroid.y)},ResetProxy:function(a){if(this.m_proxyId==b2Pair.b2_nullProxy){return}var b=a.GetProxy(this.m_proxyId);a.DestroyProxy(this.m_proxyId);b=null;var c=b2Math.b2MulMM(this.m_R,this.m_localOBB.R);var d=b2Math.b2AbsM(c);var e=b2Math.b2MulMV(d,this.m_localOBB.extents);var f=b2Math.b2MulMV(this.m_R,this.m_localOBB.center);f.Add(this.m_position);var g=new b2AABB;g.minVertex.SetV(f);g.minVertex.Subtract(e);g.maxVertex.SetV(f);g.maxVertex.Add(e);if(a.InRange(g)){this.m_proxyId=a.CreateProxy(g,this)}else{this.m_proxyId=b2Pair.b2_nullProxy}if(this.m_proxyId==b2Pair.b2_nullProxy){this.m_body.Freeze()}},Support:function(a,b,c){var d=a*this.m_R.col1.x+b*this.m_R.col1.y;var e=a*this.m_R.col2.x+b*this.m_R.col2.y;var f=0;var g=this.m_coreVertices[0].x*d+this.m_coreVertices[0].y*e;for(var h=1;h<this.m_vertexCount;++h){var i=this.m_coreVertices[h].x*d+this.m_coreVertices[h].y*e;if(i>g){f=h;g=i}}c.Set(this.m_position.x+(this.m_R.col1.x*this.m_coreVertices[f].x+this.m_R.col2.x*this.m_coreVertices[f].y),this.m_position.y+(this.m_R.col1.y*this.m_coreVertices[f].x+this.m_R.col2.y*this.m_coreVertices[f].y))},m_localCentroid:new b2Vec2,m_localOBB:new b2OBB,m_vertices:null,m_coreVertices:null,m_vertexCount:0,m_normals:null});b2PolyShape.tempVec=new b2Vec2;b2PolyShape.tAbsR=new b2Mat22;var b2Bound=new b2Root;jQuery.extend(b2Bound.prototype,{IsLower:function(){return(this.value&1)==0},IsUpper:function(){return(this.value&1)==1},Swap:function(a){var b=this.value;var c=this.proxyId;var d=this.stabbingCount;this.value=a.value;this.proxyId=a.proxyId;this.stabbingCount=a.stabbingCount;a.value=b;a.proxyId=c;a.stabbingCount=d},value:0,proxyId:0,stabbingCount:0,initialize:function(){}});var b2BoundValues=new b2Root;jQuery.extend(b2BoundValues.prototype,{lowerValues:[0,0],upperValues:[0,0],initialize:function(){this.lowerValues=[0,0];this.upperValues=[0,0]}});var b2BufferedPair=new b2Root;jQuery.extend(b2BufferedPair.prototype,{proxyId1:0,proxyId2:0,initialize:function(){}});var b2Pair=new b2Root;jQuery.extend(b2Pair.prototype,{SetBuffered:function(){this.status|=b2Pair.e_pairBuffered},ClearBuffered:function(){this.status&=~b2Pair.e_pairBuffered},IsBuffered:function(){return(this.status&b2Pair.e_pairBuffered)==b2Pair.e_pairBuffered},SetRemoved:function(){this.status|=b2Pair.e_pairRemoved},ClearRemoved:function(){this.status&=~b2Pair.e_pairRemoved},IsRemoved:function(){return(this.status&b2Pair.e_pairRemoved)==b2Pair.e_pairRemoved},SetFinal:function(){this.status|=b2Pair.e_pairFinal},IsFinal:function(){return(this.status&b2Pair.e_pairFinal)==b2Pair.e_pairFinal},userData:null,proxyId1:0,proxyId2:0,next:0,status:0,initialize:function(){}});b2Pair.b2_nullPair=b2Settings.USHRT_MAX;b2Pair.b2_nullProxy=b2Settings.USHRT_MAX;b2Pair.b2_tableCapacity=b2Settings.b2_maxPairs;b2Pair.b2_tableMask=b2Pair.b2_tableCapacity-1;b2Pair.e_pairBuffered=1;b2Pair.e_pairRemoved=2;b2Pair.e_pairFinal=4;var b2PairCallback=new b2Root;jQuery.extend(b2PairCallback.prototype,{PairAdded:function(a,b){return null},PairRemoved:function(a,b,c){},initialize:function(){}});var b2PairManager=new b2Root;jQuery.extend(b2PairManager.prototype,{initialize:function(){var a=0;this.m_hashTable=new Array(b2Pair.b2_tableCapacity);for(a=0;a<b2Pair.b2_tableCapacity;++a){this.m_hashTable[a]=b2Pair.b2_nullPair}this.m_pairs=new Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a){this.m_pairs[a]=new b2Pair}this.m_pairBuffer=new Array(b2Settings.b2_maxPairs);for(a=0;a<b2Settings.b2_maxPairs;++a){this.m_pairBuffer[a]=new b2BufferedPair}for(a=0;a<b2Settings.b2_maxPairs;++a){this.m_pairs[a].proxyId1=b2Pair.b2_nullProxy;this.m_pairs[a].proxyId2=b2Pair.b2_nullProxy;this.m_pairs[a].userData=null;this.m_pairs[a].status=0;this.m_pairs[a].next=a+1}this.m_pairs[b2Settings.b2_maxPairs-1].next=b2Pair.b2_nullPair;this.m_pairCount=0},Initialize:function(a,b){this.m_broadPhase=a;this.m_callback=b},AddBufferedPair:function(a,b){var c=this.AddPair(a,b);if(c.IsBuffered()==false){c.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=c.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=c.proxyId2;++this.m_pairBufferCount}c.ClearRemoved();if(b2BroadPhase.s_validate){this.ValidateBuffer()}},RemoveBufferedPair:function(a,b){var c=this.Find(a,b);if(c==null){return}if(c.IsBuffered()==false){c.SetBuffered();this.m_pairBuffer[this.m_pairBufferCount].proxyId1=c.proxyId1;this.m_pairBuffer[this.m_pairBufferCount].proxyId2=c.proxyId2;++this.m_pairBufferCount}c.SetRemoved();if(b2BroadPhase.s_validate){this.ValidateBuffer()}},Commit:function(){var a=0;var b=0;var c=this.m_broadPhase.m_proxyPool;for(a=0;a<this.m_pairBufferCount;++a){var d=this.Find(this.m_pairBuffer[a].proxyId1,this.m_pairBuffer[a].proxyId2);d.ClearBuffered();var e=c[d.proxyId1];var f=c[d.proxyId2];if(d.IsRemoved()){if(d.IsFinal()==true){this.m_callback.PairRemoved(e.userData,f.userData,d.userData)}this.m_pairBuffer[b].proxyId1=d.proxyId1;this.m_pairBuffer[b].proxyId2=d.proxyId2;++b}else{if(d.IsFinal()==false){d.userData=this.m_callback.PairAdded(e.userData,f.userData);d.SetFinal()}}}for(a=0;a<b;++a){this.RemovePair(this.m_pairBuffer[a].proxyId1,this.m_pairBuffer[a].proxyId2)}this.m_pairBufferCount=0;if(b2BroadPhase.s_validate){this.ValidateTable()}},AddPair:function(a,b){if(a>b){var c=a;a=b;b=c}var d=b2PairManager.Hash(a,b)&b2Pair.b2_tableMask;var e=e=this.FindHash(a,b,d);if(e!=null){return e}var f=this.m_freePair;e=this.m_pairs[f];this.m_freePair=e.next;e.proxyId1=a;e.proxyId2=b;e.status=0;e.userData=null;e.next=this.m_hashTable[d];this.m_hashTable[d]=f;++this.m_pairCount;return e},RemovePair:function(a,b){if(a>b){var c=a;a=b;b=c}var d=b2PairManager.Hash(a,b)&b2Pair.b2_tableMask;var e=this.m_hashTable[d];var f=null;while(e!=b2Pair.b2_nullPair){if(b2PairManager.Equals(this.m_pairs[e],a,b)){var g=e;if(f){f.next=this.m_pairs[e].next}else{this.m_hashTable[d]=this.m_pairs[e].next}var h=this.m_pairs[g];var i=h.userData;h.next=this.m_freePair;h.proxyId1=b2Pair.b2_nullProxy;h.proxyId2=b2Pair.b2_nullProxy;h.userData=null;h.status=0;this.m_freePair=g;--this.m_pairCount;return i}else{f=this.m_pairs[e];e=f.next}}return null},Find:function(a,b){if(a>b){var c=a;a=b;b=c}var d=b2PairManager.Hash(a,b)&b2Pair.b2_tableMask;return this.FindHash(a,b,d)},FindHash:function(a,b,c){var d=this.m_hashTable[c];while(d!=b2Pair.b2_nullPair&&b2PairManager.Equals(this.m_pairs[d],a,b)==false){d=this.m_pairs[d].next}if(d==b2Pair.b2_nullPair){return null}return this.m_pairs[d]},ValidateBuffer:function(){},ValidateTable:function(){},m_broadPhase:null,m_callback:null,m_pairs:null,m_freePair:0,m_pairCount:0,m_pairBuffer:null,m_pairBufferCount:0,m_hashTable:null});b2PairManager.Hash=function(a,b){var c=b<<16&4294901760|a;c=~c+(c<<15&4294934528);c=c^c>>12&1048575;c=c+(c<<2&4294967292);c=c^c>>4&268435455;c=c*2057;c=c^c>>16&65535;return c};b2PairManager.Equals=function(a,b,c){return a.proxyId1==b&&a.proxyId2==c};b2PairManager.EqualsPair=function(a,b){return a.proxyId1==b.proxyId1&&a.proxyId2==b.proxyId2};var b2BroadPhase=new b2Root;jQuery.extend(b2BroadPhase.prototype,{initialize:function(a,b){this.m_pairManager=new b2PairManager;this.m_proxyPool=new Array(b2Settings.b2_maxPairs);this.m_bounds=new Array(2*b2Settings.b2_maxProxies);this.m_queryResults=new Array(b2Settings.b2_maxProxies);this.m_quantizationFactor=new b2Vec2;var c=0;this.m_pairManager.Initialize(this,b);this.m_worldAABB=a;this.m_proxyCount=0;for(c=0;c<b2Settings.b2_maxProxies;c++){this.m_queryResults[c]=0}this.m_bounds=new Array(2);for(c=0;c<2;c++){this.m_bounds[c]=new Array(2*b2Settings.b2_maxProxies);for(var d=0;d<2*b2Settings.b2_maxProxies;d++){this.m_bounds[c][d]=new b2Bound}}var e=a.maxVertex.x;var f=a.maxVertex.y;e-=a.minVertex.x;f-=a.minVertex.y;this.m_quantizationFactor.x=b2Settings.USHRT_MAX/e;this.m_quantizationFactor.y=b2Settings.USHRT_MAX/f;var g;for(c=0;c<b2Settings.b2_maxProxies-1;++c){g=new b2Proxy;this.m_proxyPool[c]=g;g.SetNext(c+1);g.timeStamp=0;g.overlapCount=b2BroadPhase.b2_invalid;g.userData=null}g=new b2Proxy;this.m_proxyPool[b2Settings.b2_maxProxies-1]=g;g.SetNext(b2Pair.b2_nullProxy);g.timeStamp=0;g.overlapCount=b2BroadPhase.b2_invalid;g.userData=null;this.m_freeProxy=0;this.m_timeStamp=1;this.m_queryResultCount=0},InRange:function(a){var b;var c;var d;var e;b=a.minVertex.x;c=a.minVertex.y;b-=this.m_worldAABB.maxVertex.x;c-=this.m_worldAABB.maxVertex.y;d=this.m_worldAABB.minVertex.x;e=this.m_worldAABB.minVertex.y;d-=a.maxVertex.x;e-=a.maxVertex.y;b=b2Math.b2Max(b,d);c=b2Math.b2Max(c,e);return b2Math.b2Max(b,c)<0},GetProxy:function(a){if(a==b2Pair.b2_nullProxy||this.m_proxyPool[a].IsValid()==false){return null}return this.m_proxyPool[a]},CreateProxy:function(a,b){var c=0;var d;var e=this.m_freeProxy;d=this.m_proxyPool[e];this.m_freeProxy=d.GetNext();d.overlapCount=0;d.userData=b;var f=2*this.m_proxyCount;var g=new Array;var h=new Array;this.ComputeBounds(g,h,a);for(var i=0;i<2;++i){var j=this.m_bounds[i];var k=0;var l=0;var m=[k];var n=[l];this.Query(m,n,g[i],h[i],j,f,i);k=m[0];l=n[0];var o=new Array;var p=0;var q=f-l;var r;var s;for(p=0;p<q;p++){o[p]=new b2Bound;r=o[p];s=j[l+p];r.value=s.value;r.proxyId=s.proxyId;r.stabbingCount=s.stabbingCount}q=o.length;var t=l+2;for(p=0;p<q;p++){s=o[p];r=j[t+p];r.value=s.value;r.proxyId=s.proxyId;r.stabbingCount=s.stabbingCount}o=new Array;q=l-k;for(p=0;p<q;p++){o[p]=new b2Bound;r=o[p];s=j[k+p];r.value=s.value;r.proxyId=s.proxyId;r.stabbingCount=s.stabbingCount}q=o.length;t=k+1;for(p=0;p<q;p++){s=o[p];r=j[t+p];r.value=s.value;r.proxyId=s.proxyId;r.stabbingCount=s.stabbingCount}++l;j[k].value=g[i];j[k].proxyId=e;j[l].value=h[i];j[l].proxyId=e;j[k].stabbingCount=k==0?0:j[k-1].stabbingCount;j[l].stabbingCount=j[l-1].stabbingCount;for(c=k;c<l;++c){j[c].stabbingCount++}for(c=k;c<f+2;++c){var u=this.m_proxyPool[j[c].proxyId];if(j[c].IsLower()){u.lowerBounds[i]=c}else{u.upperBounds[i]=c}}}++this.m_proxyCount;for(var v=0;v<this.m_queryResultCount;++v){this.m_pairManager.AddBufferedPair(e,this.m_queryResults[v])}this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();return e},DestroyProxy:function(a){var b=this.m_proxyPool[a];var c=2*this.m_proxyCount;for(var d=0;d<2;++d){var e=this.m_bounds[d];var f=b.lowerBounds[d];var g=b.upperBounds[d];var h=e[f].value;var i=e[g].value;var j=new Array;var k=0;var l=g-f-1;var m;var n;for(k=0;k<l;k++){j[k]=new b2Bound;m=j[k];n=e[f+1+k];m.value=n.value;m.proxyId=n.proxyId;m.stabbingCount=n.stabbingCount}l=j.length;var o=f;for(k=0;k<l;k++){n=j[k];m=e[o+k];m.value=n.value;m.proxyId=n.proxyId;m.stabbingCount=n.stabbingCount}j=new Array;l=c-g-1;for(k=0;k<l;k++){j[k]=new b2Bound;m=j[k];n=e[g+1+k];m.value=n.value;m.proxyId=n.proxyId;m.stabbingCount=n.stabbingCount}l=j.length;o=g-1;for(k=0;k<l;k++){n=j[k];m=e[o+k];m.value=n.value;m.proxyId=n.proxyId;m.stabbingCount=n.stabbingCount}l=c-2;for(var p=f;p<l;++p){var q=this.m_proxyPool[e[p].proxyId];if(e[p].IsLower()){q.lowerBounds[d]=p}else{q.upperBounds[d]=p}}l=g-1;for(var r=f;r<l;++r){e[r].stabbingCount--}this.Query([0],[0],h,i,e,c-2,d)}for(var s=0;s<this.m_queryResultCount;++s){this.m_pairManager.RemoveBufferedPair(a,this.m_queryResults[s])}this.m_pairManager.Commit();this.m_queryResultCount=0;this.IncrementTimeStamp();b.userData=null;b.overlapCount=b2BroadPhase.b2_invalid;b.lowerBounds[0]=b2BroadPhase.b2_invalid;b.lowerBounds[1]=b2BroadPhase.b2_invalid;b.upperBounds[0]=b2BroadPhase.b2_invalid;b.upperBounds[1]=b2BroadPhase.b2_invalid;b.SetNext(this.m_freeProxy);this.m_freeProxy=a;--this.m_proxyCount},MoveProxy:function(a,b){var c=0;var d=0;var e;var f;var g;var h=0;var i;if(a==b2Pair.b2_nullProxy||b2Settings.b2_maxProxies<=a){return}if(b.IsValid()==false){return}var j=2*this.m_proxyCount;var k=this.m_proxyPool[a];var l=new b2BoundValues;this.ComputeBounds(l.lowerValues,l.upperValues,b);var m=new b2BoundValues;for(c=0;c<2;++c){m.lowerValues[c]=this.m_bounds[c][k.lowerBounds[c]].value;m.upperValues[c]=this.m_bounds[c][k.upperBounds[c]].value}for(c=0;c<2;++c){var n=this.m_bounds[c];var o=k.lowerBounds[c];var p=k.upperBounds[c];var q=l.lowerValues[c];var r=l.upperValues[c];var s=q-n[o].value;var t=r-n[p].value;n[o].value=q;n[p].value=r;if(s<0){d=o;while(d>0&&q<n[d-1].value){e=n[d];f=n[d-1];var u=f.proxyId;var v=this.m_proxyPool[f.proxyId];f.stabbingCount++;if(f.IsUpper()==true){if(this.TestOverlap(l,v)){this.m_pairManager.AddBufferedPair(a,u)}v.upperBounds[c]++;e.stabbingCount++}else{v.lowerBounds[c]++;e.stabbingCount--}k.lowerBounds[c]--;e.Swap(f);--d}}if(t>0){d=p;while(d<j-1&&n[d+1].value<=r){e=n[d];g=n[d+1];h=g.proxyId;i=this.m_proxyPool[h];g.stabbingCount++;if(g.IsLower()==true){if(this.TestOverlap(l,i)){this.m_pairManager.AddBufferedPair(a,h)}i.lowerBounds[c]--;e.stabbingCount++}else{i.upperBounds[c]--;e.stabbingCount--}k.upperBounds[c]++;e.Swap(g);d++}}if(s>0){d=o;while(d<j-1&&n[d+1].value<=q){e=n[d];g=n[d+1];h=g.proxyId;i=this.m_proxyPool[h];g.stabbingCount--;if(g.IsUpper()){if(this.TestOverlap(m,i)){this.m_pairManager.RemoveBufferedPair(a,h)}i.upperBounds[c]--;e.stabbingCount--}else{i.lowerBounds[c]--;e.stabbingCount++}k.lowerBounds[c]++;e.Swap(g);d++}}if(t<0){d=p;while(d>0&&r<n[d-1].value){e=n[d];f=n[d-1];u=f.proxyId;v=this.m_proxyPool[u];f.stabbingCount--;if(f.IsLower()==true){if(this.TestOverlap(m,v)){this.m_pairManager.RemoveBufferedPair(a,u)}v.lowerBounds[c]++;e.stabbingCount--}else{v.upperBounds[c]++;e.stabbingCount++}k.upperBounds[c]--;e.Swap(f);d--}}}},Commit:function(){this.m_pairManager.Commit()},QueryAABB:function(a,b,c){var d=new Array;var e=new Array;this.ComputeBounds(d,e,a);var f=0;var g=0;var h=[f];var i=[g];this.Query(h,i,d[0],e[0],this.m_bounds[0],2*this.m_proxyCount,0);this.Query(h,i,d[1],e[1],this.m_bounds[1],2*this.m_proxyCount,1);var j=0;for(var k=0;k<this.m_queryResultCount&&j<c;++k,++j){var l=this.m_proxyPool[this.m_queryResults[k]];b[k]=l.userData}this.m_queryResultCount=0;this.IncrementTimeStamp();return j},Validate:function(){var a;var b;var c;var d;for(var e=0;e<2;++e){var f=this.m_bounds[e];var g=2*this.m_proxyCount;var h=0;for(var i=0;i<g;++i){var j=f[i];if(j.IsLower()==true){h++}else{h--}}}},ComputeBounds:function(a,b,c){var d=c.minVertex.x;var e=c.minVertex.y;d=b2Math.b2Min(d,this.m_worldAABB.maxVertex.x);e=b2Math.b2Min(e,this.m_worldAABB.maxVertex.y);d=b2Math.b2Max(d,this.m_worldAABB.minVertex.x);e=b2Math.b2Max(e,this.m_worldAABB.minVertex.y);var f=c.maxVertex.x;var g=c.maxVertex.y;f=b2Math.b2Min(f,this.m_worldAABB.maxVertex.x);g=b2Math.b2Min(g,this.m_worldAABB.maxVertex.y);f=b2Math.b2Max(f,this.m_worldAABB.minVertex.x);g=b2Math.b2Max(g,this.m_worldAABB.minVertex.y);a[0]=this.m_quantizationFactor.x*(d-this.m_worldAABB.minVertex.x)&b2Settings.USHRT_MAX-1;b[0]=this.m_quantizationFactor.x*(f-this.m_worldAABB.minVertex.x)&65535|1;a[1]=this.m_quantizationFactor.y*(e-this.m_worldAABB.minVertex.y)&b2Settings.USHRT_MAX-1;b[1]=this.m_quantizationFactor.y*(g-this.m_worldAABB.minVertex.y)&65535|1},TestOverlapValidate:function(a,b){for(var c=0;c<2;++c){var d=this.m_bounds[c];if(d[a.lowerBounds[c]].value>d[b.upperBounds[c]].value)return false;if(d[a.upperBounds[c]].value<d[b.lowerBounds[c]].value)return false}return true},TestOverlap:function(a,b){for(var c=0;c<2;++c){var d=this.m_bounds[c];if(a.lowerValues[c]>d[b.upperBounds[c]].value)return false;if(a.upperValues[c]<d[b.lowerBounds[c]].value)return false}return true},Query:function(a,b,c,d,e,f,g){var h=b2BroadPhase.BinarySearch(e,f,c);var i=b2BroadPhase.BinarySearch(e,f,d);for(var j=h;j<i;++j){if(e[j].IsLower()){this.IncrementOverlapCount(e[j].proxyId)}}if(h>0){var k=h-1;var l=e[k].stabbingCount;while(l){if(e[k].IsLower()){var m=this.m_proxyPool[e[k].proxyId];if(h<=m.upperBounds[g]){this.IncrementOverlapCount(e[k].proxyId);--l}}--k}}a[0]=h;b[0]=i},IncrementOverlapCount:function(a){var b=this.m_proxyPool[a];if(b.timeStamp<this.m_timeStamp){b.timeStamp=this.m_timeStamp;b.overlapCount=1}else{b.overlapCount=2;this.m_queryResults[this.m_queryResultCount]=a;++this.m_queryResultCount}},IncrementTimeStamp:function(){if(this.m_timeStamp==b2Settings.USHRT_MAX){for(var a=0;a<b2Settings.b2_maxProxies;++a){this.m_proxyPool[a].timeStamp=0}this.m_timeStamp=1}else{++this.m_timeStamp}},m_pairManager:new b2PairManager,m_proxyPool:new Array(b2Settings.b2_maxPairs),m_freeProxy:0,m_bounds:new Array(2*b2Settings.b2_maxProxies),m_queryResults:new Array(b2Settings.b2_maxProxies),m_queryResultCount:0,m_worldAABB:null,m_quantizationFactor:new b2Vec2,m_proxyCount:0,m_timeStamp:0});b2BroadPhase.s_validate=false;b2BroadPhase.b2_invalid=b2Settings.USHRT_MAX;b2BroadPhase.b2_nullEdge=b2Settings.USHRT_MAX;b2BroadPhase.BinarySearch=function(a,b,c){var d=0;var e=b-1;while(d<=e){var f=Math.floor((d+e)/2);if(a[f].value>c){e=f-1}else if(a[f].value<c){d=f+1}else{return f}}return d};var b2Collision=new b2Root;jQuery.extend(b2Collision.prototype,{initialize:function(){}});b2Collision.b2_nullFeature=255;b2Collision.ClipSegmentToLine=function(a,b,c,d){var e=0;var f=b[0].v;var g=b[1].v;var h=b2Math.b2Dot(c,b[0].v)-d;var i=b2Math.b2Dot(c,b[1].v)-d;if(h<=0)a[e++]=b[0];if(i<=0)a[e++]=b[1];if(h*i<0){var j=h/(h-i);var k=a[e].v;k.x=f.x+j*(g.x-f.x);k.y=f.y+j*(g.y-f.y);if(h>0){a[e].id=b[0].id}else{a[e].id=b[1].id}++e}return e};b2Collision.EdgeSeparation=function(a,b,c){var d=a.m_vertices;var e=c.m_vertexCount;var f=c.m_vertices;var g=a.m_normals[b].x;var h=a.m_normals[b].y;var i=g;var j=a.m_R;g=j.col1.x*i+j.col2.x*h;h=j.col1.y*i+j.col2.y*h;var k=g;var l=h;j=c.m_R;i=k*j.col1.x+l*j.col1.y;l=k*j.col2.x+l*j.col2.y;k=i;var m=0;var n=Number.MAX_VALUE;for(var o=0;o<e;++o){var p=f[o];var q=p.x*k+p.y*l;if(q<n){n=q;m=o}}j=a.m_R;var r=a.m_position.x+(j.col1.x*d[b].x+j.col2.x*d[b].y);var s=a.m_position.y+(j.col1.y*d[b].x+j.col2.y*d[b].y);j=c.m_R;var t=c.m_position.x+(j.col1.x*f[m].x+j.col2.x*f[m].y);var u=c.m_position.y+(j.col1.y*f[m].x+j.col2.y*f[m].y);t-=r;u-=s;var v=t*g+u*h;return v};b2Collision.FindMaxSeparation=function(a,b,c,d){var e=b.m_vertexCount;var f=c.m_position.x-b.m_position.x;var g=c.m_position.y-b.m_position.y;var h=f*b.m_R.col1.x+g*b.m_R.col1.y;var i=f*b.m_R.col2.x+g*b.m_R.col2.y;var j=0;var k=-Number.MAX_VALUE;for(var l=0;l<e;++l){var m=b.m_normals[l].x*h+b.m_normals[l].y*i;if(m>k){k=m;j=l}}var n=b2Collision.EdgeSeparation(b,j,c);if(n>0&&d==false){return n}var o=j-1>=0?j-1:e-1;var p=b2Collision.EdgeSeparation(b,o,c);if(p>0&&d==false){return p}var q=j+1<e?j+1:0;var r=b2Collision.EdgeSeparation(b,q,c);if(r>0&&d==false){return r}var s=0;var t;var u=0;if(p>n&&p>r){u=-1;s=o;t=p}else if(r>n){u=1;s=q;t=r}else{a[0]=j;return n}while(true){if(u==-1)j=s-1>=0?s-1:e-1;else j=s+1<e?s+1:0;n=b2Collision.EdgeSeparation(b,j,c);if(n>0&&d==false){return n}if(n>t){s=j;t=n}else{break}}a[0]=s;return t};b2Collision.FindIncidentEdge=function(a,b,c,d){var e=b.m_vertexCount;var f=b.m_vertices;var g=d.m_vertexCount;var h=d.m_vertices;var i=c;var j=c+1==e?0:c+1;var k=f[j];var l=k.x;var m=k.y;k=f[i];l-=k.x;m-=k.y;var n=l;l=m;m=-n;var o=1/Math.sqrt(l*l+m*m);l*=o;m*=o;var p=l;var q=m;n=p;var r=b.m_R;p=r.col1.x*n+r.col2.x*q;q=r.col1.y*n+r.col2.y*q;var s=p;var t=q;r=d.m_R;n=s*r.col1.x+t*r.col1.y;t=s*r.col2.x+t*r.col2.y;s=n;var u=0;var v=0;var w=Number.MAX_VALUE;for(var x=0;x<g;++x){var y=x;var z=x+1<g?x+1:0;k=h[z];var A=k.x;var B=k.y;k=h[y];A-=k.x;B-=k.y;n=A;A=B;B=-n;o=1/Math.sqrt(A*A+B*B);A*=o;B*=o;var C=A*s+B*t;if(C<w){w=C;u=y;v=z}}var D;D=a[0];k=D.v;k.SetV(h[u]);k.MulM(d.m_R);k.Add(d.m_position);D.id.features.referenceFace=c;D.id.features.incidentEdge=u;D.id.features.incidentVertex=u;D=a[1];k=D.v;k.SetV(h[v]);k.MulM(d.m_R);k.Add(d.m_position);D.id.features.referenceFace=c;D.id.features.incidentEdge=u;D.id.features.incidentVertex=v};b2Collision.b2CollidePolyTempVec=new b2Vec2;b2Collision.b2CollidePoly=function(a,b,c,d){a.pointCount=0;var e=0;var f=[e];var g=b2Collision.FindMaxSeparation(f,b,c,d);e=f[0];if(g>0&&d==false)return;var h=0;var i=[h];var j=b2Collision.FindMaxSeparation(i,c,b,d);h=i[0];if(j>0&&d==false)return;var k;var l;var m=0;var n=0;var o=.98;var p=.001;if(j>o*g+p){k=c;l=b;m=h;n=1}else{k=b;l=c;m=e;n=0}var q=[new ClipVertex,new ClipVertex];b2Collision.FindIncidentEdge(q,k,m,l);var r=k.m_vertexCount;var s=k.m_vertices;var t=s[m];var u=m+1<r?s[m+1]:s[0];var v=u.x-t.x;var w=u.y-t.y;var x=u.x-t.x;var y=u.y-t.y;var z=x;var A=k.m_R;x=A.col1.x*z+A.col2.x*y;y=A.col1.y*z+A.col2.y*y;var B=1/Math.sqrt(x*x+y*y);x*=B;y*=B;var C=x;var D=y;z=C;C=D;D=-z;var E=t.x;var F=t.y;z=E;A=k.m_R;E=A.col1.x*z+A.col2.x*F;F=A.col1.y*z+A.col2.y*F;E+=k.m_position.x;F+=k.m_position.y;var G=u.x;var H=u.y;z=G;A=k.m_R;G=A.col1.x*z+A.col2.x*H;H=A.col1.y*z+A.col2.y*H;G+=k.m_position.x;H+=k.m_position.y;var I=C*E+D*F;var J=-(x*E+y*F);var K=x*G+y*H;var L=[new ClipVertex,new ClipVertex];var M=[new ClipVertex,new ClipVertex];var N=0;b2Collision.b2CollidePolyTempVec.Set(-x,-y);N=b2Collision.ClipSegmentToLine(L,q,b2Collision.b2CollidePolyTempVec,J);if(N<2)return;b2Collision.b2CollidePolyTempVec.Set(x,y);N=b2Collision.ClipSegmentToLine(M,L,b2Collision.b2CollidePolyTempVec,K);if(N<2)return;if(n){a.normal.Set(-C,-D)}else{a.normal.Set(C,D)}var O=0;for(var P=0;P<b2Settings.b2_maxManifoldPoints;++P){var Q=M[P].v;var R=C*Q.x+D*Q.y-I;if(R<=0||d==true){var S=a.points[O];S.separation=R;S.position.SetV(M[P].v);S.id.Set(M[P].id);S.id.features.flip=n;++O}}a.pointCount=O};b2Collision.b2CollideCircle=function(a,b,c,d){a.pointCount=0;var e=c.m_position.x-b.m_position.x;var f=c.m_position.y-b.m_position.y;var g=e*e+f*f;var h=b.m_radius+c.m_radius;if(g>h*h&&d==false){return}var i;if(g<Number.MIN_VALUE){i=-h;a.normal.Set(0,1)}else{var j=Math.sqrt(g);i=j-h;var k=1/j;a.normal.x=k*e;a.normal.y=k*f}a.pointCount=1;var l=a.points[0];l.id.set_key(0);l.separation=i;l.position.x=c.m_position.x-c.m_radius*a.normal.x;l.position.y=c.m_position.y-c.m_radius*a.normal.y};b2Collision.b2CollidePolyAndCircle=function(a,b,c,d){a.pointCount=0;var e;var f;var g;var h=c.m_position.x-b.m_position.x;var i=c.m_position.y-b.m_position.y;var j=b.m_R;var k=h*j.col1.x+i*j.col1.y;i=h*j.col2.x+i*j.col2.y;h=k;var l;var m=0;var n=-Number.MAX_VALUE;var o=c.m_radius;for(var p=0;p<b.m_vertexCount;++p){var q=b.m_normals[p].x*(h-b.m_vertices[p].x)+b.m_normals[p].y*(i-b.m_vertices[p].y);if(q>o){return}if(q>n){n=q;m=p}}if(n<Number.MIN_VALUE){a.pointCount=1;var r=b.m_normals[m];a.normal.x=j.col1.x*r.x+j.col2.x*r.y;a.normal.y=j.col1.y*r.x+j.col2.y*r.y;e=a.points[0];e.id.features.incidentEdge=m;e.id.features.incidentVertex=b2Collision.b2_nullFeature;e.id.features.referenceFace=b2Collision.b2_nullFeature;e.id.features.flip=0;e.position.x=c.m_position.x-o*a.normal.x;e.position.y=c.m_position.y-o*a.normal.y;e.separation=n-o;return}var s=m;var t=s+1<b.m_vertexCount?s+1:0;var u=b.m_vertices[t].x-b.m_vertices[s].x;var v=b.m_vertices[t].y-b.m_vertices[s].y;var w=Math.sqrt(u*u+v*v);u/=w;v/=w;if(w<Number.MIN_VALUE){f=h-b.m_vertices[s].x;g=i-b.m_vertices[s].y;l=Math.sqrt(f*f+g*g);f/=l;g/=l;if(l>o){return}a.pointCount=1;a.normal.Set(j.col1.x*f+j.col2.x*g,j.col1.y*f+j.col2.y*g);e=a.points[0];e.id.features.incidentEdge=b2Collision.b2_nullFeature;e.id.features.incidentVertex=s;e.id.features.referenceFace=b2Collision.b2_nullFeature;e.id.features.flip=0;e.position.x=c.m_position.x-o*a.normal.x;e.position.y=c.m_position.y-o*a.normal.y;e.separation=l-o;return}var x=(h-b.m_vertices[s].x)*u+(i-b.m_vertices[s].y)*v;e=a.points[0];e.id.features.incidentEdge=b2Collision.b2_nullFeature;e.id.features.incidentVertex=b2Collision.b2_nullFeature;e.id.features.referenceFace=b2Collision.b2_nullFeature;e.id.features.flip=0;var y,z;if(x<=0){y=b.m_vertices[s].x;z=b.m_vertices[s].y;e.id.features.incidentVertex=s}else if(x>=w){y=b.m_vertices[t].x;z=b.m_vertices[t].y;e.id.features.incidentVertex=t}else{y=u*x+b.m_vertices[s].x;z=v*x+b.m_vertices[s].y;e.id.features.incidentEdge=s}f=h-y;g=i-z;l=Math.sqrt(f*f+g*g);f/=l;g/=l;if(l>o){return}a.pointCount=1;a.normal.Set(j.col1.x*f+j.col2.x*g,j.col1.y*f+j.col2.y*g);e.position.x=c.m_position.x-o*a.normal.x;e.position.y=c.m_position.y-o*a.normal.y;e.separation=l-o};b2Collision.b2TestOverlap=function(a,b){var c=b.minVertex;var d=a.maxVertex;var e=c.x-d.x;var f=c.y-d.y;c=a.minVertex;d=b.maxVertex;var g=c.x-d.x;var h=c.y-d.y;if(e>0||f>0)return false;if(g>0||h>0)return false;return true};var Features=new b2Root;jQuery.extend(Features.prototype,{set_referenceFace:function(a){this._referenceFace=a;this._m_id._key=this._m_id._key&4294967040|this._referenceFace&255},get_referenceFace:function(){return this._referenceFace},_referenceFace:0,set_incidentEdge:function(a){this._incidentEdge=a;this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280},get_incidentEdge:function(){return this._incidentEdge},_incidentEdge:0,set_incidentVertex:function(a){this._incidentVertex=a;this._m_id._key=this._m_id._key&4278255615|this._incidentVertex<<16&16711680},get_incidentVertex:function(){return this._incidentVertex},_incidentVertex:0,set_flip:function(a){this._flip=a;this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080},get_flip:function(){return this._flip},_flip:0,_m_id:null,initialize:function(){}});var b2ContactID=new b2Root;jQuery.extend(b2ContactID.prototype,{initialize:function(){this.features=new Features;this.features._m_id=this},Set:function(a){this.set_key(a._key)},Copy:function(){var a=new b2ContactID;a.set_key(this._key);return a},get_key:function(){return this._key},set_key:function(a){this._key=a;this.features._referenceFace=this._key&255;this.features._incidentEdge=(this._key&65280)>>8&255;this.features._incidentVertex=(this._key&16711680)>>16&255;this.features._flip=(this._key&4278190080)>>24&255},features:new Features,_key:0});var b2ContactPoint=new b2Root;jQuery.extend(b2ContactPoint.prototype,{position:new b2Vec2,separation:null,normalImpulse:null,tangentImpulse:null,id:new b2ContactID,initialize:function(){this.position=new b2Vec2;this.id=new b2ContactID}});var b2Distance=new b2Root;jQuery.extend(b2Distance.prototype,{initialize:function(){}});b2Distance.ProcessTwo=function(a,b,c,d,e){var f=-e[1].x;var g=-e[1].y;var h=e[0].x-e[1].x;var i=e[0].y-e[1].y;var j=Math.sqrt(h*h+i*i);h/=j;i/=j;var k=f*h+g*i;if(k<=0||j<Number.MIN_VALUE){a.SetV(c[1]);b.SetV(d[1]);c[0].SetV(c[1]);d[0].SetV(d[1]);e[0].SetV(e[1]);return 1}k/=j;a.x=c[1].x+k*(c[0].x-c[1].x);a.y=c[1].y+k*(c[0].y-c[1].y);b.x=d[1].x+k*(d[0].x-d[1].x);b.y=d[1].y+k*(d[0].y-d[1].y);return 2};b2Distance.ProcessThree=function(a,b,c,d,e){var f=e[0].x;var g=e[0].y;var h=e[1].x;var i=e[1].y;var j=e[2].x;var k=e[2].y;var l=h-f;var m=i-g;var n=j-f;var o=k-g;var p=j-h;var q=k-i;var r=-(f*l+g*m);var s=h*l+i*m;var t=-(f*n+g*o);var u=j*n+k*o;var v=-(h*p+i*q);var w=j*p+k*q;if(u<=0&&w<=0){a.SetV(c[2]);b.SetV(d[2]);c[0].SetV(c[2]);d[0].SetV(d[2]);e[0].SetV(e[2]);return 1}var x=l*o-m*n;var y=x*(f*i-g*h);var z=x*(h*k-i*j);if(z<=0&&v>=0&&w>=0){var A=v/(v+w);a.x=c[1].x+A*(c[2].x-c[1].x);a.y=c[1].y+A*(c[2].y-c[1].y);b.x=d[1].x+A*(d[2].x-d[1].x);b.y=d[1].y+A*(d[2].y-d[1].y);c[0].SetV(c[2]);d[0].SetV(d[2]);e[0].SetV(e[2]);return 2}var B=x*(j*g-k*f);if(B<=0&&t>=0&&u>=0){var A=t/(t+u);a.x=c[0].x+A*(c[2].x-c[0].x);a.y=c[0].y+A*(c[2].y-c[0].y);b.x=d[0].x+A*(d[2].x-d[0].x);b.y=d[0].y+A*(d[2].y-d[0].y);c[1].SetV(c[2]);d[1].SetV(d[2]);e[1].SetV(e[2]);return 2}var C=z+B+y;C=1/C;var D=z*C;var E=B*C;var F=1-D-E;a.x=D*c[0].x+E*c[1].x+F*c[2].x;a.y=D*c[0].y+E*c[1].y+F*c[2].y;b.x=D*d[0].x+E*d[1].x+F*d[2].x;b.y=D*d[0].y+E*d[1].y+F*d[2].y;return 3};b2Distance.InPoinsts=function(a,b,c){for(var d=0;d<c;++d){if(a.x==b[d].x&&a.y==b[d].y){return true}}return false};b2Distance.Distance=function(a,b,c,d){var e=new Array(3);var f=new Array(3);var g=new Array(3);var h=0;a.SetV(c.m_position);b.SetV(d.m_position);var i=0;var j=20;for(var k=0;k<j;++k){var l=b.x-a.x;var m=b.y-a.y;var n=c.Support(l,m);var o=d.Support(-l,-m);i=l*l+m*m;var p=o.x-n.x;var q=o.y-n.y;var r=l*p+m*q;if(i-b2Dot(l*p+m*q)<=.01*i){if(h==0){a.SetV(n);b.SetV(o)}b2Distance.g_GJK_Iterations=k;return Math.sqrt(i)}switch(h){case 0:e[0].SetV(n);f[0].SetV(o);g[0]=w;a.SetV(e[0]);b.SetV(f[0]);++h;break;case 1:e[1].SetV(n);f[1].SetV(o);g[1].x=p;g[1].y=q;h=b2Distance.ProcessTwo(a,b,e,f,g);break;case 2:e[2].SetV(n);f[2].SetV(o);g[2].x=p;g[2].y=q;h=b2Distance.ProcessThree(a,b,e,f,g);break}if(h==3){b2Distance.g_GJK_Iterations=k;return 0}var s=-Number.MAX_VALUE;for(var t=0;t<h;++t){s=b2Math.b2Max(s,g[t].x*g[t].x+g[t].y*g[t].y)}if(h==3||i<=100*Number.MIN_VALUE*s){b2Distance.g_GJK_Iterations=k;return Math.sqrt(i)}}b2Distance.g_GJK_Iterations=j;return Math.sqrt(i)};b2Distance.g_GJK_Iterations=0;var b2Manifold=new b2Root;jQuery.extend(b2Manifold.prototype,{initialize:function(){this.points=new Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++){this.points[a]=new b2ContactPoint}this.normal=new b2Vec2},points:null,normal:null,pointCount:0});var b2Proxy=new b2Root;jQuery.extend(b2Proxy.prototype,{GetNext:function(){return this.lowerBounds[0]},SetNext:function(a){this.lowerBounds[0]=a},IsValid:function(){return this.overlapCount!=b2BroadPhase.b2_invalid},lowerBounds:[0,0],upperBounds:[0,0],overlapCount:0,timeStamp:0,userData:null,initialize:function(){this.lowerBounds=[0,0];this.upperBounds=[0,0]}});var ClipVertex=new b2Root;jQuery.extend(ClipVertex.prototype,{v:new b2Vec2,id:new b2ContactID,initialize:function(){this.v=new b2Vec2;this.id=new b2ContactID}});var b2BodyDef=new b2Root;jQuery.extend(b2BodyDef.prototype,{initialize:function(){this.shapes=new Array;this.userData=null;for(var a=0;a<b2Settings.b2_maxShapesPerBody;a++){this.shapes[a]=null}this.position=new b2Vec2(0,0);this.rotation=0;this.linearVelocity=new b2Vec2(0,0);this.angularVelocity=0;this.linearDamping=0;this.angularDamping=0;this.allowSleep=true;this.isSleeping=false;this.preventRotation=false},userData:null,shapes:new Array,position:null,rotation:null,linearVelocity:null,angularVelocity:null,linearDamping:null,angularDamping:null,allowSleep:null,isSleeping:null,preventRotation:null,AddShape:function(a){for(var b=0;b<b2Settings.b2_maxShapesPerBody;++b){if(this.shapes[b]==null){this.shapes[b]=a;break}}}});var b2Body=new b2Root;jQuery.extend(b2Body.prototype,{SetOriginPosition:function(a,b){if(this.IsFrozen()){return}this.m_rotation=b;this.m_R.Set(this.m_rotation);this.m_position=b2Math.AddVV(a,b2Math.b2MulMV(this.m_R,this.m_center));this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var c=this.m_shapeList;c!=null;c=c.m_next){c.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R)}this.m_world.m_broadPhase.Commit()},GetOriginPosition:function(){return b2Math.SubtractVV(this.m_position,b2Math.b2MulMV(this.m_R,this.m_center))},SetCenterPosition:function(a,b){if(this.IsFrozen()){return}this.m_rotation=b;this.m_R.Set(this.m_rotation);this.m_position.SetV(a);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;for(var c=this.m_shapeList;c!=null;c=c.m_next){c.Synchronize(this.m_position,this.m_R,this.m_position,this.m_R)}this.m_world.m_broadPhase.Commit()},GetCenterPosition:function(){return this.m_position},GetRotation:function(){return this.m_rotation},GetRotationMatrix:function(){return this.m_R},SetLinearVelocity:function(a){this.m_linearVelocity.SetV(a)},GetLinearVelocity:function(){return this.m_linearVelocity},SetAngularVelocity:function(a){this.m_angularVelocity=a},GetAngularVelocity:function(){return this.m_angularVelocity},ApplyForce:function(a,b){if(this.IsSleeping()==false){this.m_force.Add(a);this.m_torque+=b2Math.b2CrossVV(b2Math.SubtractVV(b,this.m_position),a)}},ApplyTorque:function(a){if(this.IsSleeping()==false){this.m_torque+=a}},ApplyImpulse:function(a,b){if(this.IsSleeping()==false){this.m_linearVelocity.Add(b2Math.MulFV(this.m_invMass,a));this.m_angularVelocity+=this.m_invI*b2Math.b2CrossVV(b2Math.SubtractVV(b,this.m_position),a)}},GetMass:function(){return this.m_mass},GetInertia:function(){return this.m_I},GetWorldPoint:function(a){return b2Math.AddVV(this.m_position,b2Math.b2MulMV(this.m_R,a))},GetWorldVector:function(a){return b2Math.b2MulMV(this.m_R,a)},GetLocalPoint:function(a){return b2Math.b2MulTMV(this.m_R,b2Math.SubtractVV(a,this.m_position))},GetLocalVector:function(a){return b2Math.b2MulTMV(this.m_R,a)},IsStatic:function(){return(this.m_flags&b2Body.e_staticFlag)==b2Body.e_staticFlag},IsFrozen:function(){return(this.m_flags&b2Body.e_frozenFlag)==b2Body.e_frozenFlag},IsSleeping:function(){return(this.m_flags&b2Body.e_sleepFlag)==b2Body.e_sleepFlag},AllowSleeping:function(a){if(a){this.m_flags|=b2Body.e_allowSleepFlag}else{this.m_flags&=~b2Body.e_allowSleepFlag;this.WakeUp()}},WakeUp:function(){this.m_flags&=~b2Body.e_sleepFlag;this.m_sleepTime=0},GetShapeList:function(){return this.m_shapeList},GetContactList:function(){return this.m_contactList},GetJointList:function(){return this.m_jointList},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(a,b){this.sMat0=new b2Mat22;this.m_position=new b2Vec2;this.m_R=new b2Mat22(0);this.m_position0=new b2Vec2;var c=0;var d;var e;this.m_flags=0;this.m_position.SetV(a.position);this.m_rotation=a.rotation;this.m_R.Set(this.m_rotation);this.m_position0.SetV(this.m_position);this.m_rotation0=this.m_rotation;this.m_world=b;this.m_linearDamping=b2Math.b2Clamp(1-a.linearDamping,0,1);this.m_angularDamping=b2Math.b2Clamp(1-a.angularDamping,0,1);this.m_force=new b2Vec2(0,0);this.m_torque=0;this.m_mass=0;var f=new Array(b2Settings.b2_maxShapesPerBody);for(c=0;c<b2Settings.b2_maxShapesPerBody;c++){f[c]=new b2MassData}this.m_shapeCount=0;this.m_center=new b2Vec2(0,0);for(c=0;c<b2Settings.b2_maxShapesPerBody;++c){d=a.shapes[c];if(d==null)break;e=f[c];d.ComputeMass(e);this.m_mass+=e.mass;this.m_center.x+=e.mass*(d.localPosition.x+e.center.x);this.m_center.y+=e.mass*(d.localPosition.y+e.center.y);++this.m_shapeCount}if(this.m_mass>0){this.m_center.Multiply(1/this.m_mass);this.m_position.Add(b2Math.b2MulMV(this.m_R,this.m_center))}else{this.m_flags|=b2Body.e_staticFlag}this.m_I=0;for(c=0;c<this.m_shapeCount;++c){d=a.shapes[c];e=f[c];this.m_I+=e.I;var g=b2Math.SubtractVV(b2Math.AddVV(d.localPosition,e.center),this.m_center);this.m_I+=e.mass*b2Math.b2Dot(g,g)}if(this.m_mass>0){this.m_invMass=1/this.m_mass}else{this.m_invMass=0}if(this.m_I>0&&a.preventRotation==false){this.m_invI=1/this.m_I}else{this.m_I=0;this.m_invI=0}this.m_linearVelocity=b2Math.AddVV(a.linearVelocity,b2Math.b2CrossFV(a.angularVelocity,this.m_center));this.m_angularVelocity=a.angularVelocity;this.m_jointList=null;this.m_contactList=null;this.m_prev=null;this.m_next=null;this.m_shapeList=null;for(c=0;c<this.m_shapeCount;++c){d=a.shapes[c];var h=b2Shape.Create(d,this,this.m_center);h.m_next=this.m_shapeList;this.m_shapeList=h}this.m_sleepTime=0;if(a.allowSleep){this.m_flags|=b2Body.e_allowSleepFlag}if(a.isSleeping){this.m_flags|=b2Body.e_sleepFlag}if(this.m_flags&b2Body.e_sleepFlag||this.m_invMass==0){this.m_linearVelocity.Set(0,0);this.m_angularVelocity=0}this.m_userData=a.userData},Destroy:function(){var a=this.m_shapeList;while(a){var b=a;a=a.m_next;b2Shape.Destroy(b)}},sMat0:new b2Mat22,SynchronizeShapes:function(){this.sMat0.Set(this.m_rotation0);for(var a=this.m_shapeList;a!=null;a=a.m_next){a.Synchronize(this.m_position0,this.sMat0,this.m_position,this.m_R)}},QuickSyncShapes:function(){for(var a=this.m_shapeList;a!=null;a=a.m_next){a.QuickSync(this.m_position,this.m_R)}},IsConnected:function(a){for(var b=this.m_jointList;b!=null;b=b.next){if(b.other==a)return b.joint.m_collideConnected==false}return false},Freeze:function(){this.m_flags|=b2Body.e_frozenFlag;this.m_linearVelocity.SetZero();this.m_angularVelocity=0;for(var a=this.m_shapeList;a!=null;a=a.m_next){a.DestroyProxy()}},m_flags:0,m_position:new b2Vec2,m_rotation:null,m_R:new b2Mat22(0),m_position0:new b2Vec2,m_rotation0:null,m_linearVelocity:null,m_angularVelocity:null,m_force:null,m_torque:null,m_center:null,m_world:null,m_prev:null,m_next:null,m_shapeList:null,m_shapeCount:0,m_jointList:null,m_contactList:null,m_mass:null,m_invMass:null,m_I:null,m_invI:null,m_linearDamping:null,m_angularDamping:null,m_sleepTime:null,m_userData:null});b2Body.e_staticFlag=1;b2Body.e_frozenFlag=2;b2Body.e_islandFlag=4;b2Body.e_sleepFlag=8;b2Body.e_allowSleepFlag=16;b2Body.e_destroyFlag=32;var b2CollisionFilter=new b2Root;jQuery.extend(b2CollisionFilter.prototype,{ShouldCollide:function(a,b){if(a.m_groupIndex==b.m_groupIndex&&a.m_groupIndex!=0){return a.m_groupIndex>0}var c=(a.m_maskBits&b.m_categoryBits)!=0&&(a.m_categoryBits&b.m_maskBits)!=0;return c},initialize:function(){}});b2CollisionFilter.b2_defaultFilter=new b2CollisionFilter;var b2ContactNode=new b2Root;jQuery.extend(b2ContactNode.prototype,{other:null,contact:null,prev:null,next:null,initialize:function(){}});var b2Contact=new b2Root;jQuery.extend(b2Contact.prototype,{GetManifolds:function(){return null},GetManifoldCount:function(){return this.m_manifoldCount},GetNext:function(){return this.m_next},GetShape1:function(){return this.m_shape1},GetShape2:function(){return this.m_shape2},initialize:function(a,b){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!b){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=a;this.m_shape2=b;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null},Evaluate:function(){},m_flags:0,m_prev:null,m_next:null,m_node1:new b2ContactNode,m_node2:new b2ContactNode,m_shape1:null,m_shape2:null,m_manifoldCount:0,m_friction:null,m_restitution:null});b2Contact.e_islandFlag=1;b2Contact.e_destroyFlag=2;b2Contact.AddType=function(a,b,c,d){b2Contact.s_registers[c][d].createFcn=a;b2Contact.s_registers[c][d].destroyFcn=b;b2Contact.s_registers[c][d].primary=true;if(c!=d){b2Contact.s_registers[d][c].createFcn=a;b2Contact.s_registers[d][c].destroyFcn=b;b2Contact.s_registers[d][c].primary=false}};b2Contact.InitializeRegisters=function(){b2Contact.s_registers=new Array(b2Shape.e_shapeTypeCount);for(var a=0;a<b2Shape.e_shapeTypeCount;a++){b2Contact.s_registers[a]=new Array(b2Shape.e_shapeTypeCount);for(var b=0;b<b2Shape.e_shapeTypeCount;b++){b2Contact.s_registers[a][b]=new b2ContactRegister}}b2Contact.AddType(b2CircleContact.Create,b2CircleContact.Destroy,b2Shape.e_circleShape,b2Shape.e_circleShape);b2Contact.AddType(b2PolyAndCircleContact.Create,b2PolyAndCircleContact.Destroy,b2Shape.e_polyShape,b2Shape.e_circleShape);b2Contact.AddType(b2PolyContact.Create,b2PolyContact.Destroy,b2Shape.e_polyShape,b2Shape.e_polyShape)};b2Contact.Create=function(a,b,c){if(b2Contact.s_initialized==false){b2Contact.InitializeRegisters();b2Contact.s_initialized=true}var d=a.m_type;var e=b.m_type;var f=b2Contact.s_registers[d][e].createFcn;if(f){if(b2Contact.s_registers[d][e].primary){return f(a,b,c)}else{var g=f(b,a,c);for(var h=0;h<g.GetManifoldCount();++h){var i=g.GetManifolds()[h];i.normal=i.normal.Negative()}return g}}else{return null}};b2Contact.Destroy=function(a,b){if(a.GetManifoldCount()>0){a.m_shape1.m_body.WakeUp();a.m_shape2.m_body.WakeUp()}var c=a.m_shape1.m_type;var d=a.m_shape2.m_type;var e=b2Contact.s_registers[c][d].destroyFcn;e(a,b)};b2Contact.s_registers=null;b2Contact.s_initialized=false;var b2CircleContact=new b2Root;jQuery.extend(b2CircleContact.prototype,b2Contact.prototype);jQuery.extend(b2CircleContact.prototype,{initialize:function(a,b){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!b){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=a;this.m_shape2=b;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0},Evaluate:function(){b2Collision.b2CollideCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,false);if(this.m_manifold[0].pointCount>0){this.m_manifoldCount=1}else{this.m_manifoldCount=0}},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2CircleContact.Create=function(a,b,c){return new b2CircleContact(a,b)};b2CircleContact.Destroy=function(a,b){};var b2Conservative=new b2Root;jQuery.extend(b2Conservative.prototype,{initialize:function(){}});b2Conservative.R1=new b2Mat22;b2Conservative.R2=new b2Mat22;b2Conservative.x1=new b2Vec2;b2Conservative.x2=new b2Vec2;b2Conservative.Conservative=function(a,b){var c=a.GetBody();var e=b.GetBody();var f=c.m_position.x-c.m_position0.x;var g=c.m_position.y-c.m_position0.y;var h=c.m_rotation-c.m_rotation0;var i=e.m_position.x-e.m_position0.x;var j=e.m_position.y-e.m_position0.y;var k=e.m_rotation-e.m_rotation0;var l=a.GetMaxRadius();var m=b.GetMaxRadius();var n=c.m_position0.x;var o=c.m_position0.y;var p=c.m_rotation0;var q=e.m_position0.x;var r=e.m_position0.y;var s=e.m_rotation0;var t=n;var u=o;var v=p;var w=q;var x=r;var y=s;b2Conservative.R1.Set(v);b2Conservative.R2.Set(y);a.QuickSync(p1,b2Conservative.R1);b.QuickSync(p2,b2Conservative.R2);var z=0;var A=10;var B;var C;var D=0;var E=true;for(var F=0;F<A;++F){var G=b2Distance.Distance(b2Conservative.x1,b2Conservative.x2,a,b);if(G<b2Settings.b2_linearSlop){if(F==0){E=false}else{E=true}break}if(F==0){B=b2Conservative.x2.x-b2Conservative.x1.x;C=b2Conservative.x2.y-b2Conservative.x1.y;var H=Math.sqrt(B*B+C*C);var I=B*(f-i)+C*(g-j)+Math.abs(h)*l+Math.abs(k)*m;if(Math.abs(I)<Number.MIN_VALUE){E=false;break}D=1/I}var J=G*D;var K=z+J;if(K<0||1<K){E=false;break}if(K<(1+100*Number.MIN_VALUE)*z){E=true;break}z=K;t=n+z*v1.x;u=o+z*v1.y;v=p+z*h;w=q+z*v2.x;x=r+z*v2.y;y=s+z*k;b2Conservative.R1.Set(v);b2Conservative.R2.Set(y);a.QuickSync(p1,b2Conservative.R1);b.QuickSync(p2,b2Conservative.R2)}if(E){B=b2Conservative.x2.x-b2Conservative.x1.x;C=b2Conservative.x2.y-b2Conservative.x1.y;var L=Math.sqrt(B*B+C*C);if(L>FLT_EPSILON){d*=b2_linearSlop/L}if(c.IsStatic()){c.m_position.x=t;c.m_position.y=u}else{c.m_position.x=t-B;c.m_position.y=u-C}c.m_rotation=v;c.m_R.Set(v);c.QuickSyncShapes();if(e.IsStatic()){e.m_position.x=w;e.m_position.y=x}else{e.m_position.x=w+B;e.m_position.y=x+C}e.m_position.x=w+B;e.m_position.y=x+C;e.m_rotation=y;e.m_R.Set(y);e.QuickSyncShapes();return true}a.QuickSync(c.m_position,c.m_R);b.QuickSync(e.m_position,e.m_R);return false};var b2ContactConstraint=new b2Root;jQuery.extend(b2ContactConstraint.prototype,{initialize:function(){this.normal=new b2Vec2;this.points=new Array(b2Settings.b2_maxManifoldPoints);for(var a=0;a<b2Settings.b2_maxManifoldPoints;a++){this.points[a]=new b2ContactConstraintPoint}},points:null,normal:new b2Vec2,manifold:null,body1:null,body2:null,friction:null,restitution:null,pointCount:0});var b2ContactConstraintPoint=new b2Root;jQuery.extend(b2ContactConstraintPoint.prototype,{localAnchor1:new b2Vec2,localAnchor2:new b2Vec2,normalImpulse:null,tangentImpulse:null,positionImpulse:null,normalMass:null,tangentMass:null,separation:null,velocityBias:null,initialize:function(){this.localAnchor1=new b2Vec2;this.localAnchor2=new b2Vec2}});var b2ContactRegister=new b2Root;jQuery.extend(b2ContactRegister.prototype,{createFcn:null,destroyFcn:null,primary:null,initialize:function(){}});var b2ContactSolver=new b2Root;jQuery.extend(b2ContactSolver.prototype,{initialize:function(a,b,c){this.m_constraints=new Array;this.m_allocator=c;var d=0;var e;var f;this.m_constraintCount=0;for(d=0;d<b;++d){this.m_constraintCount+=a[d].GetManifoldCount()}for(d=0;d<this.m_constraintCount;d++){this.m_constraints[d]=new b2ContactConstraint}var g=0;for(d=0;d<b;++d){var h=a[d];var i=h.m_shape1.m_body;var j=h.m_shape2.m_body;var k=h.GetManifoldCount();var l=h.GetManifolds();var m=h.m_friction;var n=h.m_restitution;var o=i.m_linearVelocity.x;var p=i.m_linearVelocity.y;var q=j.m_linearVelocity.x;var r=j.m_linearVelocity.y;var s=i.m_angularVelocity;var t=j.m_angularVelocity;for(var u=0;u<k;++u){var v=l[u];var w=v.normal.x;var x=v.normal.y;var y=this.m_constraints[g];y.body1=i;y.body2=j;y.manifold=v;y.normal.x=w;y.normal.y=x;y.pointCount=v.pointCount;y.friction=m;y.restitution=n;for(var z=0;z<y.pointCount;++z){var A=v.points[z];var B=y.points[z];B.normalImpulse=A.normalImpulse;B.tangentImpulse=A.tangentImpulse;B.separation=A.separation;var C=A.position.x-i.m_position.x;var D=A.position.y-i.m_position.y;var E=A.position.x-j.m_position.x;var F=A.position.y-j.m_position.y;e=B.localAnchor1;f=i.m_R;e.x=C*f.col1.x+D*f.col1.y;e.y=C*f.col2.x+D*f.col2.y;e=B.localAnchor2;f=j.m_R;e.x=E*f.col1.x+F*f.col1.y;e.y=E*f.col2.x+F*f.col2.y;var G=C*C+D*D;var H=E*E+F*F;var I=C*w+D*x;var J=E*w+F*x;var K=i.m_invMass+j.m_invMass;K+=i.m_invI*(G-I*I)+j.m_invI*(H-J*J);B.normalMass=1/K;var L=x;var M=-w;var N=C*L+D*M;var O=E*L+F*M;var P=i.m_invMass+j.m_invMass;P+=i.m_invI*(G-N*N)+j.m_invI*(H-O*O);B.tangentMass=1/P;B.velocityBias=0;if(B.separation>0){B.velocityBias=-60*B.separation}var Q=q+ -t*F-o- -s*D;var R=r+t*E-p-s*C;var S=y.normal.x*Q+y.normal.y*R;if(S<-b2Settings.b2_velocityThreshold){B.velocityBias+=-y.restitution*S}}++g}}},PreSolve:function(){var a;var b;var c;for(var d=0;d<this.m_constraintCount;++d){var e=this.m_constraints[d];var f=e.body1;var g=e.body2;var h=f.m_invMass;var i=f.m_invI;var j=g.m_invMass;var k=g.m_invI;var l=e.normal.x;var m=e.normal.y;var n=m;var o=-l;var p=0;var q=0;if(b2World.s_enableWarmStarting){q=e.pointCount;for(p=0;p<q;++p){var r=e.points[p];var s=r.normalImpulse*l+r.tangentImpulse*n;var t=r.normalImpulse*m+r.tangentImpulse*o;c=f.m_R;a=r.localAnchor1;var u=c.col1.x*a.x+c.col2.x*a.y;var v=c.col1.y*a.x+c.col2.y*a.y;c=g.m_R;a=r.localAnchor2;var w=c.col1.x*a.x+c.col2.x*a.y;var x=c.col1.y*a.x+c.col2.y*a.y;f.m_angularVelocity-=i*(u*t-v*s);f.m_linearVelocity.x-=h*s;f.m_linearVelocity.y-=h*t;g.m_angularVelocity+=k*(w*t-x*s);g.m_linearVelocity.x+=j*s;g.m_linearVelocity.y+=j*t;r.positionImpulse=0}}else{q=e.pointCount;for(p=0;p<q;++p){var y=e.points[p];y.normalImpulse=0;y.tangentImpulse=0;y.positionImpulse=0}}}},SolveVelocityConstraints:function(){var a=0;var b;var c;var d;var e;var f;var g;var h;var i;var j;var k;var l;var m;var n;for(var o=0;o<this.m_constraintCount;++o){var p=this.m_constraints[o];var q=p.body1;var r=p.body2;var s=q.m_angularVelocity;var t=q.m_linearVelocity;var u=r.m_angularVelocity;var v=r.m_linearVelocity;var w=q.m_invMass;var x=q.m_invI;var y=r.m_invMass;var z=r.m_invI;var A=p.normal.x;var B=p.normal.y;var C=B;var D=-A;var E=p.pointCount;for(a=0;a<E;++a){b=p.points[a];m=q.m_R;n=b.localAnchor1;c=m.col1.x*n.x+m.col2.x*n.y;d=m.col1.y*n.x+m.col2.y*n.y;m=r.m_R;n=b.localAnchor2;e=m.col1.x*n.x+m.col2.x*n.y;f=m.col1.y*n.x+m.col2.y*n.y;g=v.x+ -u*f-t.x- -s*d;h=v.y+u*e-t.y-s*c;var F=g*A+h*B;i=-b.normalMass*(F-b.velocityBias);j=b2Math.b2Max(b.normalImpulse+i,0);i=j-b.normalImpulse;k=i*A;l=i*B;t.x-=w*k;t.y-=w*l;s-=x*(c*l-d*k);v.x+=y*k;v.y+=y*l;u+=z*(e*l-f*k);b.normalImpulse=j;g=v.x+ -u*f-t.x- -s*d;h=v.y+u*e-t.y-s*c;var G=g*C+h*D;i=b.tangentMass*-G;var H=p.friction*b.normalImpulse;j=b2Math.b2Clamp(b.tangentImpulse+i,-H,H);i=j-b.tangentImpulse;k=i*C;l=i*D;t.x-=w*k;t.y-=w*l;s-=x*(c*l-d*k);v.x+=y*k;v.y+=y*l;u+=z*(e*l-f*k);b.tangentImpulse=j}q.m_angularVelocity=s;r.m_angularVelocity=u}},SolvePositionConstraints:function(a){var b=0;var c;var d;for(var e=0;e<this.m_constraintCount;++e){var f=this.m_constraints[e];var g=f.body1;var h=f.body2;var i=g.m_position;var j=g.m_rotation;var k=h.m_position;var l=h.m_rotation;var m=g.m_invMass;var n=g.m_invI;var o=h.m_invMass;var p=h.m_invI;var q=f.normal.x;var r=f.normal.y;var s=r;var t=-q;var u=f.pointCount;for(var v=0;v<u;++v){var w=f.points[v];c=g.m_R;d=w.localAnchor1;var x=c.col1.x*d.x+c.col2.x*d.y;var y=c.col1.y*d.x+c.col2.y*d.y;c=h.m_R;d=w.localAnchor2;var z=c.col1.x*d.x+c.col2.x*d.y;var A=c.col1.y*d.x+c.col2.y*d.y;var B=i.x+x;var C=i.y+y;var D=k.x+z;var E=k.y+A;var F=D-B;var G=E-C;var H=F*q+G*r+w.separation;b=b2Math.b2Min(b,H);var I=a*b2Math.b2Clamp(H+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);var J=-w.normalMass*I;var K=w.positionImpulse;w.positionImpulse=b2Math.b2Max(K+J,0);J=w.positionImpulse-K;var L=J*q;var M=J*r;i.x-=m*L;i.y-=m*M;j-=n*(x*M-y*L);g.m_R.Set(j);k.x+=o*L;k.y+=o*M;l+=p*(z*M-A*L);h.m_R.Set(l)}g.m_rotation=j;h.m_rotation=l}return b>=-b2Settings.b2_linearSlop},PostSolve:function(){for(var a=0;a<this.m_constraintCount;++a){var b=this.m_constraints[a];var c=b.manifold;for(var d=0;d<b.pointCount;++d){var e=c.points[d];var f=b.points[d];e.normalImpulse=f.normalImpulse;e.tangentImpulse=f.tangentImpulse}}},m_allocator:null,m_constraints:new Array,m_constraintCount:0});var b2PolyAndCircleContact=new b2Root;jQuery.extend(b2PolyAndCircleContact.prototype,b2Contact.prototype);jQuery.extend(b2PolyAndCircleContact.prototype,{initialize:function(a,b){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!b){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=a;this.m_shape2=b;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m_manifold=[new b2Manifold];b2Settings.b2Assert(this.m_shape1.m_type==b2Shape.e_polyShape);b2Settings.b2Assert(this.m_shape2.m_type==b2Shape.e_circleShape);this.m_manifold[0].pointCount=0;this.m_manifold[0].points[0].normalImpulse=0;this.m_manifold[0].points[0].tangentImpulse=0},Evaluate:function(){b2Collision.b2CollidePolyAndCircle(this.m_manifold[0],this.m_shape1,this.m_shape2,false);if(this.m_manifold[0].pointCount>0){this.m_manifoldCount=1}else{this.m_manifoldCount=0}},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyAndCircleContact.Create=function(a,b,c){return new b2PolyAndCircleContact(a,b)};b2PolyAndCircleContact.Destroy=function(a,b){};var b2PolyContact=new b2Root;jQuery.extend(b2PolyContact.prototype,b2Contact.prototype);jQuery.extend(b2PolyContact.prototype,{initialize:function(a,b){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!b){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=a;this.m_shape2=b;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null;this.m0=new b2Manifold;this.m_manifold=[new b2Manifold];this.m_manifold[0].pointCount=0},m0:new b2Manifold,Evaluate:function(){var a=this.m_manifold[0];var b=this.m0.points;for(var c=0;c<a.pointCount;c++){var d=b[c];var e=a.points[c];d.normalImpulse=e.normalImpulse;d.tangentImpulse=e.tangentImpulse;d.id=e.id.Copy()}this.m0.pointCount=a.pointCount;b2Collision.b2CollidePoly(a,this.m_shape1,this.m_shape2,false);if(a.pointCount>0){var f=[false,false];for(var g=0;g<a.pointCount;++g){var h=a.points[g];h.normalImpulse=0;h.tangentImpulse=0;var i=h.id.key;for(var j=0;j<this.m0.pointCount;++j){if(f[j]==true)continue;var k=this.m0.points[j];var l=k.id;if(l.key==i){f[j]=true;h.normalImpulse=k.normalImpulse;h.tangentImpulse=k.tangentImpulse;break}}}this.m_manifoldCount=1}else{this.m_manifoldCount=0}},GetManifolds:function(){return this.m_manifold},m_manifold:[new b2Manifold]});b2PolyContact.Create=function(a,b,c){return new b2PolyContact(a,b)};b2PolyContact.Destroy=function(a,b){};var b2JointDef=new b2Root;jQuery.extend(b2JointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false},type:0,userData:null,body1:null,body2:null,collideConnected:null});var b2JointNode=new b2Root;jQuery.extend(b2JointNode.prototype,{other:null,joint:null,prev:null,next:null,initialize:function(){}});var b2Joint=new b2Root;jQuery.extend(b2Joint.prototype,{GetType:function(){return this.m_type},GetAnchor1:function(){return null},GetAnchor2:function(){return null},GetReactionForce:function(a){return null},GetReactionTorque:function(a){return 0},GetBody1:function(){return this.m_body1},GetBody2:function(){return this.m_body2},GetNext:function(){return this.m_next},GetUserData:function(){return this.m_userData},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_prev=null;this.m_next=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData},PrepareVelocitySolver:function(){},SolveVelocityConstraints:function(a){},PreparePositionSolver:function(){},SolvePositionConstraints:function(){return false},m_type:0,m_prev:null,m_next:null,m_node1:new b2JointNode,m_node2:new b2JointNode,m_body1:null,m_body2:null,m_islandFlag:null,m_collideConnected:null,m_userData:null});b2Joint.Create=function(a,b){var c=null;switch(a.type){case b2Joint.e_distanceJoint:{c=new b2DistanceJoint(a)}break;case b2Joint.e_mouseJoint:{c=new b2MouseJoint(a)}break;case b2Joint.e_prismaticJoint:{c=new b2PrismaticJoint(a)}break;case b2Joint.e_revoluteJoint:{c=new b2RevoluteJoint(a)}break;case b2Joint.e_pulleyJoint:{c=new b2PulleyJoint(a)}break;case b2Joint.e_gearJoint:{c=new b2GearJoint(a)}break;default:break}return c};b2Joint.Destroy=function(a,b){};b2Joint.e_unknownJoint=0;b2Joint.e_revoluteJoint=1;b2Joint.e_prismaticJoint=2;b2Joint.e_distanceJoint=3;b2Joint.e_pulleyJoint=4;b2Joint.e_mouseJoint=5;b2Joint.e_gearJoint=6;b2Joint.e_inactiveLimit=0;b2Joint.e_atLowerLimit=1;b2Joint.e_atUpperLimit=2;b2Joint.e_equalLimits=3;var b2Jacobian=new b2Root;jQuery.extend(b2Jacobian.prototype,{linear1:new b2Vec2,angular1:null,linear2:new b2Vec2,angular2:null,SetZero:function(){this.linear1.SetZero();this.angular1=0;this.linear2.SetZero();this.angular2=0},Set:function(a,b,c,d){this.linear1.SetV(a);this.angular1=b;this.linear2.SetV(c);this.angular2=d},Compute:function(a,b,c,d){return this.linear1.x*a.x+this.linear1.y*a.y+this.angular1*b+(this.linear2.x*c.x+this.linear2.y*c.y)+this.angular2*d},initialize:function(){this.linear1=new b2Vec2;this.linear2=new b2Vec2}});var b2DistanceJoint=new b2Root;jQuery.extend(b2DistanceJoint.prototype,b2Joint.prototype);jQuery.extend(b2DistanceJoint.prototype,{initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_prev=null;this.m_next=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_u=new b2Vec2;var b;var c;var d;b=this.m_body1.m_R;c=a.anchorPoint1.x-this.m_body1.m_position.x;d=a.anchorPoint1.y-this.m_body1.m_position.y;this.m_localAnchor1.x=c*b.col1.x+d*b.col1.y;this.m_localAnchor1.y=c*b.col2.x+d*b.col2.y;b=this.m_body2.m_R;c=a.anchorPoint2.x-this.m_body2.m_position.x;d=a.anchorPoint2.y-this.m_body2.m_position.y;this.m_localAnchor2.x=c*b.col1.x+d*b.col1.y;this.m_localAnchor2.y=c*b.col2.x+d*b.col2.y;c=a.anchorPoint2.x-a.anchorPoint1.x;d=a.anchorPoint2.y-a.anchorPoint1.y;this.m_length=Math.sqrt(c*c+d*d);this.m_impulse=0},PrepareVelocitySolver:function(){var a;a=this.m_body1.m_R;var b=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y;var c=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;a=this.m_body2.m_R;var d=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;var e=a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y;this.m_u.x=this.m_body2.m_position.x+d-this.m_body1.m_position.x-b;this.m_u.y=this.m_body2.m_position.y+e-this.m_body1.m_position.y-c;var f=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);if(f>b2Settings.b2_linearSlop){this.m_u.Multiply(1/f)}else{this.m_u.SetZero()}var g=b*this.m_u.y-c*this.m_u.x;var h=d*this.m_u.y-e*this.m_u.x;this.m_mass=this.m_body1.m_invMass+this.m_body1.m_invI*g*g+this.m_body2.m_invMass+this.m_body2.m_invI*h*h;this.m_mass=1/this.m_mass;if(b2World.s_enableWarmStarting){var i=this.m_impulse*this.m_u.x;var j=this.m_impulse*this.m_u.y;this.m_body1.m_linearVelocity.x-=this.m_body1.m_invMass*i;this.m_body1.m_linearVelocity.y-=this.m_body1.m_invMass*j;this.m_body1.m_angularVelocity-=this.m_body1.m_invI*(b*j-c*i);this.m_body2.m_linearVelocity.x+=this.m_body2.m_invMass*i;this.m_body2.m_linearVelocity.y+=this.m_body2.m_invMass*j;this.m_body2.m_angularVelocity+=this.m_body2.m_invI*(d*j-e*i)}else{this.m_impulse=0}},SolveVelocityConstraints:function(a){var b;b=this.m_body1.m_R;var c=b.col1.x*this.m_localAnchor1.x+b.col2.x*this.m_localAnchor1.y;var d=b.col1.y*this.m_localAnchor1.x+b.col2.y*this.m_localAnchor1.y;b=this.m_body2.m_R;var e=b.col1.x*this.m_localAnchor2.x+b.col2.x*this.m_localAnchor2.y;var f=b.col1.y*this.m_localAnchor2.x+b.col2.y*this.m_localAnchor2.y;var g=this.m_body1.m_linearVelocity.x+ -this.m_body1.m_angularVelocity*d;var h=this.m_body1.m_linearVelocity.y+this.m_body1.m_angularVelocity*c;var i=this.m_body2.m_linearVelocity.x+ -this.m_body2.m_angularVelocity*f;var j=this.m_body2.m_linearVelocity.y+this.m_body2.m_angularVelocity*e;var k=this.m_u.x*(i-g)+this.m_u.y*(j-h);var l=-this.m_mass*k;this.m_impulse+=l;var m=l*this.m_u.x;var n=l*this.m_u.y;this.m_body1.m_linearVelocity.x-=this.m_body1.m_invMass*m;this.m_body1.m_linearVelocity.y-=this.m_body1.m_invMass*n;this.m_body1.m_angularVelocity-=this.m_body1.m_invI*(c*n-d*m);this.m_body2.m_linearVelocity.x+=this.m_body2.m_invMass*m;this.m_body2.m_linearVelocity.y+=this.m_body2.m_invMass*n;this.m_body2.m_angularVelocity+=this.m_body2.m_invI*(e*n-f*m)},SolvePositionConstraints:function(){var a;a=this.m_body1.m_R;var b=a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y;var c=a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y;a=this.m_body2.m_R;var d=a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y;var e=a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y;var f=this.m_body2.m_position.x+d-this.m_body1.m_position.x-b;var g=this.m_body2.m_position.y+e-this.m_body1.m_position.y-c;var h=Math.sqrt(f*f+g*g);f/=h;g/=h;var i=h-this.m_length;i=b2Math.b2Clamp(i,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);var j=-this.m_mass*i;this.m_u.Set(f,g);var k=j*this.m_u.x;var l=j*this.m_u.y;this.m_body1.m_position.x-=this.m_body1.m_invMass*k;this.m_body1.m_position.y-=this.m_body1.m_invMass*l;this.m_body1.m_rotation-=this.m_body1.m_invI*(b*l-c*k);this.m_body2.m_position.x+=this.m_body2.m_invMass*k;this.m_body2.m_position.y+=this.m_body2.m_invMass*l;this.m_body2.m_rotation+=this.m_body2.m_invI*(d*l-e*k);this.m_body1.m_R.Set(this.m_body1.m_rotation);this.m_body2.m_R.Set(this.m_body2.m_rotation);return b2Math.b2Abs(i)<b2Settings.b2_linearSlop},GetAnchor1:function(){return b2Math.AddVV(this.m_body1.m_position,b2Math.b2MulMV(this.m_body1.m_R,this.m_localAnchor1))},GetAnchor2:function(){return b2Math.AddVV(this.m_body2.m_position,b2Math.b2MulMV(this.m_body2.m_R,this.m_localAnchor2))},GetReactionForce:function(a){var b=new b2Vec2;b.SetV(this.m_u);b.Multiply(this.m_impulse*a);return b},GetReactionTorque:function(a){return 0},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_u:new b2Vec2,m_impulse:null,m_mass:null,m_length:null});var b2DistanceJointDef=new b2Root;jQuery.extend(b2DistanceJointDef.prototype,b2JointDef.prototype);jQuery.extend(b2DistanceJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.anchorPoint1=new b2Vec2;this.anchorPoint2=new b2Vec2;this.type=b2Joint.e_distanceJoint},anchorPoint1:new b2Vec2,anchorPoint2:new b2Vec2});var b2GearJoint=new b2Root;jQuery.extend(b2GearJoint.prototype,b2Joint.prototype);jQuery.extend(b2GearJoint.prototype,{GetAnchor1:function(){var a=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var a=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y))},GetReactionForce:function(a){return new b2Vec2},GetReactionTorque:function(a){return 0},GetRatio:function(){return this.m_ratio},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_prev=null;this.m_next=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData;this.m_groundAnchor1=new b2Vec2;this.m_groundAnchor2=new b2Vec2;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_J=new b2Jacobian;this.m_revolute1=null;this.m_prismatic1=null;this.m_revolute2=null;this.m_prismatic2=null;var b;var c;this.m_ground1=a.joint1.m_body1;this.m_body1=a.joint1.m_body2;if(a.joint1.m_type==b2Joint.e_revoluteJoint){this.m_revolute1=a.joint1;this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1);this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2);b=this.m_revolute1.GetJointAngle()}else{this.m_prismatic1=a.joint1;this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1);this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2);b=this.m_prismatic1.GetJointTranslation()}this.m_ground2=a.joint2.m_body1;this.m_body2=a.joint2.m_body2;if(a.joint2.m_type==b2Joint.e_revoluteJoint){this.m_revolute2=a.joint2;this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1);this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2);c=this.m_revolute2.GetJointAngle()}else{this.m_prismatic2=a.joint2;this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1);this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2);c=this.m_prismatic2.GetJointTranslation()}this.m_ratio=a.ratio;this.m_constant=b+this.m_ratio*c;this.m_impulse=0},PrepareVelocitySolver:function(){var a=this.m_ground1;var b=this.m_ground2;var c=this.m_body1;var d=this.m_body2;var e;var f;var g;var h;var i;var j;var k;var l=0;this.m_J.SetZero();if(this.m_revolute1){this.m_J.angular1=-1;l+=c.m_invI}else{i=a.m_R;j=this.m_prismatic1.m_localXAxis1;e=i.col1.x*j.x+i.col2.x*j.y;f=i.col1.y*j.x+i.col2.y*j.y;i=c.m_R;g=i.col1.x*this.m_localAnchor1.x+i.col2.x*this.m_localAnchor1.y;h=i.col1.y*this.m_localAnchor1.x+i.col2.y*this.m_localAnchor1.y;k=g*f-h*e;this.m_J.linear1.Set(-e,-f);this.m_J.angular1=-k;l+=c.m_invMass+c.m_invI*k*k}if(this.m_revolute2){this.m_J.angular2=-this.m_ratio;l+=this.m_ratio*this.m_ratio*d.m_invI}else{i=b.m_R;j=this.m_prismatic2.m_localXAxis1;e=i.col1.x*j.x+i.col2.x*j.y;f=i.col1.y*j.x+i.col2.y*j.y;i=d.m_R;g=i.col1.x*this.m_localAnchor2.x+i.col2.x*this.m_localAnchor2.y;h=i.col1.y*this.m_localAnchor2.x+i.col2.y*this.m_localAnchor2.y;k=g*f-h*e;this.m_J.linear2.Set(-this.m_ratio*e,-this.m_ratio*f);this.m_J.angular2=-this.m_ratio*k;l+=this.m_ratio*this.m_ratio*(d.m_invMass+d.m_invI*k*k)}this.m_mass=1/l;c.m_linearVelocity.x+=c.m_invMass*this.m_impulse*this.m_J.linear1.x;c.m_linearVelocity.y+=c.m_invMass*this.m_impulse*this.m_J.linear1.y;c.m_angularVelocity+=c.m_invI*this.m_impulse*this.m_J.angular1;d.m_linearVelocity.x+=d.m_invMass*this.m_impulse*this.m_J.linear2.x;d.m_linearVelocity.y+=d.m_invMass*this.m_impulse*this.m_J.linear2.y;d.m_angularVelocity+=d.m_invI*this.m_impulse*this.m_J.angular2},SolveVelocityConstraints:function(a){var b=this.m_body1;var c=this.m_body2;var d=this.m_J.Compute(b.m_linearVelocity,b.m_angularVelocity,c.m_linearVelocity,c.m_angularVelocity);var e=-this.m_mass*d;this.m_impulse+=e;b.m_linearVelocity.x+=b.m_invMass*e*this.m_J.linear1.x;b.m_linearVelocity.y+=b.m_invMass*e*this.m_J.linear1.y;b.m_angularVelocity+=b.m_invI*e*this.m_J.angular1;c.m_linearVelocity.x+=c.m_invMass*e*this.m_J.linear2.x;c.m_linearVelocity.y+=c.m_invMass*e*this.m_J.linear2.y;c.m_angularVelocity+=c.m_invI*e*this.m_J.angular2},SolvePositionConstraints:function(){var a=0;var b=this.m_body1;var c=this.m_body2;var d;var e;if(this.m_revolute1){d=this.m_revolute1.GetJointAngle()}else{d=this.m_prismatic1.GetJointTranslation()}if(this.m_revolute2){e=this.m_revolute2.GetJointAngle()}else{e=this.m_prismatic2.GetJointTranslation()}var f=this.m_constant-(d+this.m_ratio*e);var g=-this.m_mass*f;b.m_position.x+=b.m_invMass*g*this.m_J.linear1.x;b.m_position.y+=b.m_invMass*g*this.m_J.linear1.y;b.m_rotation+=b.m_invI*g*this.m_J.angular1;c.m_position.x+=c.m_invMass*g*this.m_J.linear2.x;c.m_position.y+=c.m_invMass*g*this.m_J.linear2.y;c.m_rotation+=c.m_invI*g*this.m_J.angular2;b.m_R.Set(b.m_rotation);c.m_R.Set(c.m_rotation);return a<b2Settings.b2_linearSlop},m_ground1:null,m_ground2:null,m_revolute1:null,m_prismatic1:null,m_revolute2:null,m_prismatic2:null,m_groundAnchor1:new b2Vec2,m_groundAnchor2:new b2Vec2,m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_J:new b2Jacobian,m_constant:null,m_ratio:null,m_mass:null,m_impulse:null});var b2GearJointDef=new b2Root;jQuery.extend(b2GearJointDef.prototype,b2JointDef.prototype);jQuery.extend(b2GearJointDef.prototype,{initialize:function(){this.type=b2Joint.e_gearJoint;this.joint1=null;this.joint2=null;this.ratio=1},joint1:null,joint2:null,ratio:null});var b2MouseJoint=new b2Root;jQuery.extend(b2MouseJoint.prototype,b2Joint.prototype);jQuery.extend(b2MouseJoint.prototype,{GetAnchor1:function(){return this.m_target},GetAnchor2:function(){var a=b2Math.b2MulMV(this.m_body2.m_R,this.m_localAnchor);a.Add(this.m_body2.m_position);return a},GetReactionForce:function(a){var b=new b2Vec2;b.SetV(this.m_impulse);b.Multiply(a);return b},GetReactionTorque:function(a){return 0},SetTarget:function(a){this.m_body2.WakeUp();this.m_target=a},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_prev=null;this.m_next=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData;this.K=new b2Mat22;this.K1=new b2Mat22;this.K2=new b2Mat22;this.m_localAnchor=new b2Vec2;this.m_target=new b2Vec2;this.m_impulse=new b2Vec2;this.m_ptpMass=new b2Mat22;this.m_C=new b2Vec2;this.m_target.SetV(a.target);var b=this.m_target.x-this.m_body2.m_position.x;var c=this.m_target.y-this.m_body2.m_position.y;this.m_localAnchor.x=b*this.m_body2.m_R.col1.x+c*this.m_body2.m_R.col1.y;this.m_localAnchor.y=b*this.m_body2.m_R.col2.x+c*this.m_body2.m_R.col2.y;this.m_maxForce=a.maxForce;this.m_impulse.SetZero();var d=this.m_body2.m_mass;var e=2*b2Settings.b2_pi*a.frequencyHz;var f=2*d*a.dampingRatio*e;var g=d*e*e;this.m_gamma=1/(f+a.timeStep*g);this.m_beta=a.timeStep*g/(f+a.timeStep*g)},K:new b2Mat22,K1:new b2Mat22,K2:new b2Mat22,PrepareVelocitySolver:function(){var a=this.m_body2;var b;b=a.m_R;var c=b.col1.x*this.m_localAnchor.x+b.col2.x*this.m_localAnchor.y;var d=b.col1.y*this.m_localAnchor.x+b.col2.y*this.m_localAnchor.y;var e=a.m_invMass;var f=a.m_invI;this.K1.col1.x=e;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=e;this.K2.col1.x=f*d*d;this.K2.col2.x=-f*c*d;this.K2.col1.y=-f*c*d;this.K2.col2.y=f*c*c;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.col1.x+=this.m_gamma;this.K.col2.y+=this.m_gamma;this.K.Invert(this.m_ptpMass);this.m_C.x=a.m_position.x+c-this.m_target.x;this.m_C.y=a.m_position.y+d-this.m_target.y;a.m_angularVelocity*=.98;var g=this.m_impulse.x;var h=this.m_impulse.y;a.m_linearVelocity.x+=e*g;a.m_linearVelocity.y+=e*h;a.m_angularVelocity+=f*(c*h-d*g)},SolveVelocityConstraints:function(a){var b=this.m_body2;var c;c=b.m_R;var d=c.col1.x*this.m_localAnchor.x+c.col2.x*this.m_localAnchor.y;var e=c.col1.y*this.m_localAnchor.x+c.col2.y*this.m_localAnchor.y;var f=b.m_linearVelocity.x+ -b.m_angularVelocity*e;var g=b.m_linearVelocity.y+b.m_angularVelocity*d;c=this.m_ptpMass;var h=f+this.m_beta*a.inv_dt*this.m_C.x+this.m_gamma*this.m_impulse.x;var i=g+this.m_beta*a.inv_dt*this.m_C.y+this.m_gamma*this.m_impulse.y;var j=-(c.col1.x*h+c.col2.x*i);var k=-(c.col1.y*h+c.col2.y*i);var l=this.m_impulse.x;var m=this.m_impulse.y;this.m_impulse.x+=j;this.m_impulse.y+=k;var n=this.m_impulse.Length();if(n>a.dt*this.m_maxForce){this.m_impulse.Multiply(a.dt*this.m_maxForce/n)}j=this.m_impulse.x-l;k=this.m_impulse.y-m;b.m_linearVelocity.x+=b.m_invMass*j;b.m_linearVelocity.y+=b.m_invMass*k;b.m_angularVelocity+=b.m_invI*(d*k-e*j)},SolvePositionConstraints:function(){return true},m_localAnchor:new b2Vec2,m_target:new b2Vec2,m_impulse:new b2Vec2,m_ptpMass:new b2Mat22,m_C:new b2Vec2,m_maxForce:null,m_beta:null,m_gamma:null});var b2MouseJointDef=new b2Root;jQuery.extend(b2MouseJointDef.prototype,b2JointDef.prototype);jQuery.extend(b2MouseJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.target=new b2Vec2;this.type=b2Joint.e_mouseJoint;this.maxForce=0;this.frequencyHz=5;this.dampingRatio=.7;this.timeStep=1/60},target:new b2Vec2,maxForce:null,frequencyHz:null,dampingRatio:null,timeStep:null});var b2PrismaticJoint=new b2Root;jQuery.extend(b2PrismaticJoint.prototype,b2Joint.prototype);jQuery.extend(b2PrismaticJoint.prototype,{GetAnchor1:function(){var a=this.m_body1;var b=new b2Vec2;b.SetV(this.m_localAnchor1);b.MulM(a.m_R);b.Add(a.m_position);return b},GetAnchor2:function(){var a=this.m_body2;var b=new b2Vec2;b.SetV(this.m_localAnchor2);b.MulM(a.m_R);b.Add(a.m_position);return b},GetJointTranslation:function(){var a=this.m_body1;var b=this.m_body2;var c;c=a.m_R;var d=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;var e=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;c=b.m_R;var f=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;var g=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;var h=a.m_position.x+d;var i=a.m_position.y+e;var j=b.m_position.x+f;var k=b.m_position.y+g;var l=j-h;var m=k-i;c=a.m_R;var n=c.col1.x*this.m_localXAxis1.x+c.col2.x*this.m_localXAxis1.y;var o=c.col1.y*this.m_localXAxis1.x+c.col2.y*this.m_localXAxis1.y;var p=n*l+o*m;return p},GetJointSpeed:function(){var a=this.m_body1;var b=this.m_body2;var c;c=a.m_R;var d=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;var e=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;c=b.m_R;var f=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;var g=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;var h=a.m_position.x+d;var i=a.m_position.y+e;var j=b.m_position.x+f;var k=b.m_position.y+g;var l=j-h;var m=k-i;c=a.m_R;var n=c.col1.x*this.m_localXAxis1.x+c.col2.x*this.m_localXAxis1.y;var o=c.col1.y*this.m_localXAxis1.x+c.col2.y*this.m_localXAxis1.y;var p=a.m_linearVelocity;var q=b.m_linearVelocity;var r=a.m_angularVelocity;var s=b.m_angularVelocity;var t=l*-r*o+m*r*n+(n*(q.x+ -s*g-p.x- -r*e)+o*(q.y+s*f-p.y-r*d));return t},GetMotorForce:function(a){return a*this.m_motorImpulse},SetMotorSpeed:function(a){this.m_motorSpeed=a},SetMotorForce:function(a){this.m_maxMotorForce=a},GetReactionForce:function(a){var b=a*this.m_limitImpulse;var c;c=this.m_body1.m_R;var d=b*(c.col1.x*this.m_localXAxis1.x+c.col2.x*this.m_localXAxis1.y);var e=b*(c.col1.y*this.m_localXAxis1.x+c.col2.y*this.m_localXAxis1.y);var f=b*(c.col1.x*this.m_localYAxis1.x+c.col2.x*this.m_localYAxis1.y);var g=b*(c.col1.y*this.m_localYAxis1.x+c.col2.y*this.m_localYAxis1.y);return new b2Vec2(d+f,e+g)},GetReactionTorque:function(a){return a*this.m_angularImpulse},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_prev=null;this.m_next=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_localXAxis1=new b2Vec2;this.m_localYAxis1=new b2Vec2;this.m_linearJacobian=new b2Jacobian;this.m_motorJacobian=new b2Jacobian;var b;var c;var d;b=this.m_body1.m_R;c=a.anchorPoint.x-this.m_body1.m_position.x;d=a.anchorPoint.y-this.m_body1.m_position.y;this.m_localAnchor1.Set(c*b.col1.x+d*b.col1.y,c*b.col2.x+d*b.col2.y);b=this.m_body2.m_R;c=a.anchorPoint.x-this.m_body2.m_position.x;d=a.anchorPoint.y-this.m_body2.m_position.y;this.m_localAnchor2.Set(c*b.col1.x+d*b.col1.y,c*b.col2.x+d*b.col2.y);b=this.m_body1.m_R;c=a.axis.x;d=a.axis.y;this.m_localXAxis1.Set(c*b.col1.x+d*b.col1.y,c*b.col2.x+d*b.col2.y);this.m_localYAxis1.x=-this.m_localXAxis1.y;this.m_localYAxis1.y=this.m_localXAxis1.x;this.m_initialAngle=this.m_body2.m_rotation-this.m_body1.m_rotation;this.m_linearJacobian.SetZero();this.m_linearMass=0;this.m_linearImpulse=0;this.m_angularMass=0;this.m_angularImpulse=0;this.m_motorJacobian.SetZero();this.m_motorMass=0;this.m_motorImpulse=0;this.m_limitImpulse=0;this.m_limitPositionImpulse=0;this.m_lowerTranslation=a.lowerTranslation;this.m_upperTranslation=a.upperTranslation;this.m_maxMotorForce=a.motorForce;this.m_motorSpeed=a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor},PrepareVelocitySolver:function(){var a=this.m_body1;var b=this.m_body2;var c;c=a.m_R;var d=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;var e=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;c=b.m_R;var f=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;var g=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;var h=a.m_invMass;var i=b.m_invMass;var j=a.m_invI;var k=b.m_invI;c=a.m_R;var l=c.col1.x*this.m_localYAxis1.x+c.col2.x*this.m_localYAxis1.y;var m=c.col1.y*this.m_localYAxis1.x+c.col2.y*this.m_localYAxis1.y;var n=b.m_position.x+f-a.m_position.x;var o=b.m_position.y+g-a.m_position.y;this.m_linearJacobian.linear1.x=-l;this.m_linearJacobian.linear1.y=-m;this.m_linearJacobian.linear2.x=l;this.m_linearJacobian.linear2.y=m;this.m_linearJacobian.angular1=-(n*m-o*l);this.m_linearJacobian.angular2=f*m-g*l;this.m_linearMass=h+j*this.m_linearJacobian.angular1*this.m_linearJacobian.angular1+i+k*this.m_linearJacobian.angular2*this.m_linearJacobian.angular2;this.m_linearMass=1/this.m_linearMass;this.m_angularMass=1/(j+k);if(this.m_enableLimit||this.m_enableMotor){c=a.m_R;var p=c.col1.x*this.m_localXAxis1.x+c.col2.x*this.m_localXAxis1.y;var q=c.col1.y*this.m_localXAxis1.x+c.col2.y*this.m_localXAxis1.y;this.m_motorJacobian.linear1.x=-p;this.m_motorJacobian.linear1.y=-q;this.m_motorJacobian.linear2.x=p;this.m_motorJacobian.linear2.y=q;this.m_motorJacobian.angular1=-(n*q-o*p);this.m_motorJacobian.angular2=f*q-g*p;this.m_motorMass=h+j*this.m_motorJacobian.angular1*this.m_motorJacobian.angular1+i+k*this.m_motorJacobian.angular2*this.m_motorJacobian.angular2;this.m_motorMass=1/this.m_motorMass;if(this.m_enableLimit){var r=n-d;var s=o-e;var t=p*r+q*s;if(b2Math.b2Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*b2Settings.b2_linearSlop){this.m_limitState=b2Joint.e_equalLimits}else if(t<=this.m_lowerTranslation){if(this.m_limitState!=b2Joint.e_atLowerLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atLowerLimit}else if(t>=this.m_upperTranslation){if(this.m_limitState!=b2Joint.e_atUpperLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atUpperLimit}else{this.m_limitState=b2Joint.e_inactiveLimit;this.m_limitImpulse=0}}}if(this.m_enableMotor==false){this.m_motorImpulse=0}if(this.m_enableLimit==false){this.m_limitImpulse=0}if(b2World.s_enableWarmStarting){var u=this.m_linearImpulse*this.m_linearJacobian.linear1.x+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear1.x;var v=this.m_linearImpulse*this.m_linearJacobian.linear1.y+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear1.y;var w=this.m_linearImpulse*this.m_linearJacobian.linear2.x+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear2.x;var x=this.m_linearImpulse*this.m_linearJacobian.linear2.y+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.linear2.y;var y=this.m_linearImpulse*this.m_linearJacobian.angular1-this.m_angularImpulse+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.angular1;var z=this.m_linearImpulse*this.m_linearJacobian.angular2+this.m_angularImpulse+(this.m_motorImpulse+this.m_limitImpulse)*this.m_motorJacobian.angular2;a.m_linearVelocity.x+=h*u;a.m_linearVelocity.y+=h*v;a.m_angularVelocity+=j*y;b.m_linearVelocity.x+=i*w;b.m_linearVelocity.y+=i*x;b.m_angularVelocity+=k*z}else{this.m_linearImpulse=0;this.m_angularImpulse=0;this.m_limitImpulse=0;this.m_motorImpulse=0}this.m_limitPositionImpulse=0},SolveVelocityConstraints:function(a){var b=this.m_body1;var c=this.m_body2;var d=b.m_invMass;var e=c.m_invMass;var f=b.m_invI;var g=c.m_invI;var h;var i=this.m_linearJacobian.Compute(b.m_linearVelocity,b.m_angularVelocity,c.m_linearVelocity,c.m_angularVelocity);var j=-this.m_linearMass*i;this.m_linearImpulse+=j;b.m_linearVelocity.x+=d*j*this.m_linearJacobian.linear1.x;b.m_linearVelocity.y+=d*j*this.m_linearJacobian.linear1.y;b.m_angularVelocity+=f*j*this.m_linearJacobian.angular1;c.m_linearVelocity.x+=e*j*this.m_linearJacobian.linear2.x;c.m_linearVelocity.y+=e*j*this.m_linearJacobian.linear2.y;c.m_angularVelocity+=g*j*this.m_linearJacobian.angular2;var k=c.m_angularVelocity-b.m_angularVelocity;var l=-this.m_angularMass*k;this.m_angularImpulse+=l;b.m_angularVelocity-=f*l;c.m_angularVelocity+=g*l;if(this.m_enableMotor&&this.m_limitState!=b2Joint.e_equalLimits){var m=this.m_motorJacobian.Compute(b.m_linearVelocity,b.m_angularVelocity,c.m_linearVelocity,c.m_angularVelocity)-this.m_motorSpeed;var n=-this.m_motorMass*m;var o=this.m_motorImpulse;this.m_motorImpulse=b2Math.b2Clamp(this.m_motorImpulse+n,-a.dt*this.m_maxMotorForce,a.dt*this.m_maxMotorForce);n=this.m_motorImpulse-o;b.m_linearVelocity.x+=d*n*this.m_motorJacobian.linear1.x;b.m_linearVelocity.y+=d*n*this.m_motorJacobian.linear1.y;b.m_angularVelocity+=f*n*this.m_motorJacobian.angular1;c.m_linearVelocity.x+=e*n*this.m_motorJacobian.linear2.x;c.m_linearVelocity.y+=e*n*this.m_motorJacobian.linear2.y;c.m_angularVelocity+=g*n*this.m_motorJacobian.angular2}if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){var p=this.m_motorJacobian.Compute(b.m_linearVelocity,b.m_angularVelocity,c.m_linearVelocity,c.m_angularVelocity);var q=-this.m_motorMass*p;if(this.m_limitState==b2Joint.e_equalLimits){this.m_limitImpulse+=q}else if(this.m_limitState==b2Joint.e_atLowerLimit){h=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Max(this.m_limitImpulse+q,0);q=this.m_limitImpulse-h}else if(this.m_limitState==b2Joint.e_atUpperLimit){h=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Min(this.m_limitImpulse+q,0);q=this.m_limitImpulse-h}b.m_linearVelocity.x+=d*q*this.m_motorJacobian.linear1.x;b.m_linearVelocity.y+=d*q*this.m_motorJacobian.linear1.y;b.m_angularVelocity+=f*q*this.m_motorJacobian.angular1;c.m_linearVelocity.x+=e*q*this.m_motorJacobian.linear2.x;c.m_linearVelocity.y+=e*q*this.m_motorJacobian.linear2.y;c.m_angularVelocity+=g*q*this.m_motorJacobian.angular2}},SolvePositionConstraints:function(){var a;var b;var c=this.m_body1;var d=this.m_body2;var e=c.m_invMass;var f=d.m_invMass;var g=c.m_invI;var h=d.m_invI;var i;i=c.m_R;var j=i.col1.x*this.m_localAnchor1.x+i.col2.x*this.m_localAnchor1.y;var k=i.col1.y*this.m_localAnchor1.x+i.col2.y*this.m_localAnchor1.y;i=d.m_R;var l=i.col1.x*this.m_localAnchor2.x+i.col2.x*this.m_localAnchor2.y;var m=i.col1.y*this.m_localAnchor2.x+i.col2.y*this.m_localAnchor2.y;var n=c.m_position.x+j;var o=c.m_position.y+k;var p=d.m_position.x+l;var q=d.m_position.y+m;var r=p-n;var s=q-o;i=c.m_R;var t=i.col1.x*this.m_localYAxis1.x+i.col2.x*this.m_localYAxis1.y;var u=i.col1.y*this.m_localYAxis1.x+i.col2.y*this.m_localYAxis1.y;var v=t*r+u*s;v=b2Math.b2Clamp(v,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);var w=-this.m_linearMass*v;c.m_position.x+=e*w*this.m_linearJacobian.linear1.x;c.m_position.y+=e*w*this.m_linearJacobian.linear1.y;c.m_rotation+=g*w*this.m_linearJacobian.angular1;d.m_position.x+=f*w*this.m_linearJacobian.linear2.x;d.m_position.y+=f*w*this.m_linearJacobian.linear2.y;d.m_rotation+=h*w*this.m_linearJacobian.angular2;var x=b2Math.b2Abs(v);var y=d.m_rotation-c.m_rotation-this.m_initialAngle;y=b2Math.b2Clamp(y,-b2Settings.b2_maxAngularCorrection,b2Settings.b2_maxAngularCorrection);var z=-this.m_angularMass*y;c.m_rotation-=c.m_invI*z;c.m_R.Set(c.m_rotation);d.m_rotation+=d.m_invI*z;d.m_R.Set(d.m_rotation);var A=b2Math.b2Abs(y);if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){i=c.m_R;j=i.col1.x*this.m_localAnchor1.x+i.col2.x*this.m_localAnchor1.y;k=i.col1.y*this.m_localAnchor1.x+i.col2.y*this.m_localAnchor1.y;i=d.m_R;l=i.col1.x*this.m_localAnchor2.x+i.col2.x*this.m_localAnchor2.y;m=i.col1.y*this.m_localAnchor2.x+i.col2.y*this.m_localAnchor2.y;n=c.m_position.x+j;o=c.m_position.y+k;p=d.m_position.x+l;q=d.m_position.y+m;r=p-n;s=q-o;i=c.m_R;var B=i.col1.x*this.m_localXAxis1.x+i.col2.x*this.m_localXAxis1.y;var C=i.col1.y*this.m_localXAxis1.x+i.col2.y*this.m_localXAxis1.y;var D=B*r+C*s;var E=0;if(this.m_limitState==b2Joint.e_equalLimits){a=b2Math.b2Clamp(D,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);E=-this.m_motorMass*a;x=b2Math.b2Max(x,b2Math.b2Abs(y))}else if(this.m_limitState==b2Joint.e_atLowerLimit){a=D-this.m_lowerTranslation;x=b2Math.b2Max(x,-a);a=b2Math.b2Clamp(a+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);E=-this.m_motorMass*a;b=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Max(this.m_limitPositionImpulse+E,0);E=this.m_limitPositionImpulse-b}else if(this.m_limitState==b2Joint.e_atUpperLimit){a=D-this.m_upperTranslation;x=b2Math.b2Max(x,a);a=b2Math.b2Clamp(a-b2Settings.b2_linearSlop,0,b2Settings.b2_maxLinearCorrection);E=-this.m_motorMass*a;b=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Min(this.m_limitPositionImpulse+E,0);E=this.m_limitPositionImpulse-b}c.m_position.x+=e*E*this.m_motorJacobian.linear1.x;c.m_position.y+=e*E*this.m_motorJacobian.linear1.y;c.m_rotation+=g*E*this.m_motorJacobian.angular1;c.m_R.Set(c.m_rotation);d.m_position.x+=f*E*this.m_motorJacobian.linear2.x;d.m_position.y+=f*E*this.m_motorJacobian.linear2.y;d.m_rotation+=h*E*this.m_motorJacobian.angular2;d.m_R.Set(d.m_rotation)}return x<=b2Settings.b2_linearSlop&&A<=b2Settings.b2_angularSlop},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_localXAxis1:new b2Vec2,m_localYAxis1:new b2Vec2,m_initialAngle:null,m_linearJacobian:new b2Jacobian,m_linearMass:null,m_linearImpulse:null,m_angularMass:null,m_angularImpulse:null,m_motorJacobian:new b2Jacobian,m_motorMass:null,m_motorImpulse:null,m_limitImpulse:null,m_limitPositionImpulse:null,m_lowerTranslation:null,m_upperTranslation:null,m_maxMotorForce:null,m_motorSpeed:null,m_enableLimit:null,m_enableMotor:null,m_limitState:0});var b2PrismaticJointDef=new b2Root;jQuery.extend(b2PrismaticJointDef.prototype,b2JointDef.prototype);jQuery.extend(b2PrismaticJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.type=b2Joint.e_prismaticJoint;this.anchorPoint=new b2Vec2(0,0);this.axis=new b2Vec2(0,0);this.lowerTranslation=0;this.upperTranslation=0;this.motorForce=0;this.motorSpeed=0;this.enableLimit=false;this.enableMotor=false},anchorPoint:null,axis:null,lowerTranslation:null,upperTranslation:null,motorForce:null,motorSpeed:null,enableLimit:null,enableMotor:null});var b2PulleyJoint=new b2Root;jQuery.extend(b2PulleyJoint.prototype,b2Joint.prototype);jQuery.extend(b2PulleyJoint.prototype,{GetAnchor1:function(){var a=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var a=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y))},GetGroundPoint1:function(){return new b2Vec2(this.m_ground.m_position.x+this.m_groundAnchor1.x,this.m_ground.m_position.y+this.m_groundAnchor1.y)},GetGroundPoint2:function(){return new b2Vec2(this.m_ground.m_position.x+this.m_groundAnchor2.x,this.m_ground.m_position.y+this.m_groundAnchor2.y)},GetReactionForce:function(a){return new b2Vec2},GetReactionTorque:function(a){return 0},GetLength1:function(){var a;a=this.m_body1.m_R;var b=this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y);var c=this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y);var d=b-(this.m_ground.m_position.x+this.m_groundAnchor1.x);var e=c-(this.m_ground.m_position.y+this.m_groundAnchor1.y);return Math.sqrt(d*d+e*e)},GetLength2:function(){var a;a=this.m_body2.m_R;var b=this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y);var c=this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y);var d=b-(this.m_ground.m_position.x+this.m_groundAnchor2.x);var e=c-(this.m_ground.m_position.y+this.m_groundAnchor2.y);return Math.sqrt(d*d+e*e)},GetRatio:function(){return this.m_ratio},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_prev=null;this.m_next=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData;this.m_groundAnchor1=new b2Vec2;this.m_groundAnchor2=new b2Vec2;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_u1=new b2Vec2;this.m_u2=new b2Vec2;var b;var c;var d;this.m_ground=this.m_body1.m_world.m_groundBody;this.m_groundAnchor1.x=a.groundPoint1.x-this.m_ground.m_position.x;this.m_groundAnchor1.y=a.groundPoint1.y-this.m_ground.m_position.y;this.m_groundAnchor2.x=a.groundPoint2.x-this.m_ground.m_position.x;this.m_groundAnchor2.y=a.groundPoint2.y-this.m_ground.m_position.y;b=this.m_body1.m_R;c=a.anchorPoint1.x-this.m_body1.m_position.x;d=a.anchorPoint1.y-this.m_body1.m_position.y;this.m_localAnchor1.x=c*b.col1.x+d*b.col1.y;this.m_localAnchor1.y=c*b.col2.x+d*b.col2.y;b=this.m_body2.m_R;c=a.anchorPoint2.x-this.m_body2.m_position.x;d=a.anchorPoint2.y-this.m_body2.m_position.y;this.m_localAnchor2.x=c*b.col1.x+d*b.col1.y;this.m_localAnchor2.y=c*b.col2.x+d*b.col2.y;this.m_ratio=a.ratio;c=a.groundPoint1.x-a.anchorPoint1.x;d=a.groundPoint1.y-a.anchorPoint1.y;var e=Math.sqrt(c*c+d*d);c=a.groundPoint2.x-a.anchorPoint2.x;d=a.groundPoint2.y-a.anchorPoint2.y;var f=Math.sqrt(c*c+d*d);var g=b2Math.b2Max(.5*b2PulleyJoint.b2_minPulleyLength,e);var h=b2Math.b2Max(.5*b2PulleyJoint.b2_minPulleyLength,f);this.m_constant=g+this.m_ratio*h;this.m_maxLength1=b2Math.b2Clamp(a.maxLength1,g,this.m_constant-this.m_ratio*b2PulleyJoint.b2_minPulleyLength);this.m_maxLength2=b2Math.b2Clamp(a.maxLength2,h,(this.m_constant-b2PulleyJoint.b2_minPulleyLength)/this.m_ratio);this.m_pulleyImpulse=0;this.m_limitImpulse1=0;this.m_limitImpulse2=0},PrepareVelocitySolver:function(){var a=this.m_body1;var b=this.m_body2;var c;c=a.m_R;var d=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;var e=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;c=b.m_R;var f=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;var g=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;var h=a.m_position.x+d;var i=a.m_position.y+e;var j=b.m_position.x+f;var k=b.m_position.y+g;var l=this.m_ground.m_position.x+this.m_groundAnchor1.x;var m=this.m_ground.m_position.y+this.m_groundAnchor1.y;var n=this.m_ground.m_position.x+this.m_groundAnchor2.x;var o=this.m_ground.m_position.y+this.m_groundAnchor2.y;this.m_u1.Set(h-l,i-m);this.m_u2.Set(j-n,k-o);var p=this.m_u1.Length();var q=this.m_u2.Length();if(p>b2Settings.b2_linearSlop){this.m_u1.Multiply(1/p)}else{this.m_u1.SetZero()}if(q>b2Settings.b2_linearSlop){this.m_u2.Multiply(1/q)}else{this.m_u2.SetZero()}if(p<this.m_maxLength1){this.m_limitState1=b2Joint.e_inactiveLimit;this.m_limitImpulse1=0}else{this.m_limitState1=b2Joint.e_atUpperLimit;this.m_limitPositionImpulse1=0}if(q<this.m_maxLength2){this.m_limitState2=b2Joint.e_inactiveLimit;this.m_limitImpulse2=0}else{this.m_limitState2=b2Joint.e_atUpperLimit;this.m_limitPositionImpulse2=0}var r=d*this.m_u1.y-e*this.m_u1.x;var s=f*this.m_u2.y-g*this.m_u2.x;this.m_limitMass1=a.m_invMass+a.m_invI*r*r;this.m_limitMass2=b.m_invMass+b.m_invI*s*s;this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2;this.m_limitMass1=1/this.m_limitMass1;this.m_limitMass2=1/this.m_limitMass2;this.m_pulleyMass=1/this.m_pulleyMass;var t=(-this.m_pulleyImpulse-this.m_limitImpulse1)*this.m_u1.x;var u=(-this.m_pulleyImpulse-this.m_limitImpulse1)*this.m_u1.y;var v=(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.x;var w=(-this.m_ratio*this.m_pulleyImpulse-this.m_limitImpulse2)*this.m_u2.y;a.m_linearVelocity.x+=a.m_invMass*t;a.m_linearVelocity.y+=a.m_invMass*u;a.m_angularVelocity+=a.m_invI*(d*u-e*t);b.m_linearVelocity.x+=b.m_invMass*v;b.m_linearVelocity.y+=b.m_invMass*w;b.m_angularVelocity+=b.m_invI*(f*w-g*v)},SolveVelocityConstraints:function(a){var b=this.m_body1;var c=this.m_body2;var d;d=b.m_R;var e=d.col1.x*this.m_localAnchor1.x+d.col2.x*this.m_localAnchor1.y;var f=d.col1.y*this.m_localAnchor1.x+d.col2.y*this.m_localAnchor1.y;d=c.m_R;var g=d.col1.x*this.m_localAnchor2.x+d.col2.x*this.m_localAnchor2.y;var h=d.col1.y*this.m_localAnchor2.x+d.col2.y*this.m_localAnchor2.y;var i;var j;var k;var l;var m;var n;var o;var p;var q;var r;var s;i=b.m_linearVelocity.x+ -b.m_angularVelocity*f;j=b.m_linearVelocity.y+b.m_angularVelocity*e;k=c.m_linearVelocity.x+ -c.m_angularVelocity*h;l=c.m_linearVelocity.y+c.m_angularVelocity*g;q=-(this.m_u1.x*i+this.m_u1.y*j)-this.m_ratio*(this.m_u2.x*k+this.m_u2.y*l);r=-this.m_pulleyMass*q;this.m_pulleyImpulse+=r;m=-r*this.m_u1.x;n=-r*this.m_u1.y;o=-this.m_ratio*r*this.m_u2.x;p=-this.m_ratio*r*this.m_u2.y;b.m_linearVelocity.x+=b.m_invMass*m;b.m_linearVelocity.y+=b.m_invMass*n;b.m_angularVelocity+=b.m_invI*(e*n-f*m);c.m_linearVelocity.x+=c.m_invMass*o;c.m_linearVelocity.y+=c.m_invMass*p;c.m_angularVelocity+=c.m_invI*(g*p-h*o);if(this.m_limitState1==b2Joint.e_atUpperLimit){i=b.m_linearVelocity.x+ -b.m_angularVelocity*f;j=b.m_linearVelocity.y+b.m_angularVelocity*e;q=-(this.m_u1.x*i+this.m_u1.y*j);r=-this.m_limitMass1*q;s=this.m_limitImpulse1;this.m_limitImpulse1=b2Math.b2Max(0,this.m_limitImpulse1+r);r=this.m_limitImpulse1-s;m=-r*this.m_u1.x;n=-r*this.m_u1.y;b.m_linearVelocity.x+=b.m_invMass*m;b.m_linearVelocity.y+=b.m_invMass*n;b.m_angularVelocity+=b.m_invI*(e*n-f*m)}if(this.m_limitState2==b2Joint.e_atUpperLimit){k=c.m_linearVelocity.x+ -c.m_angularVelocity*h;l=c.m_linearVelocity.y+c.m_angularVelocity*g;q=-(this.m_u2.x*k+this.m_u2.y*l);r=-this.m_limitMass2*q;s=this.m_limitImpulse2;this.m_limitImpulse2=b2Math.b2Max(0,this.m_limitImpulse2+r);r=this.m_limitImpulse2-s;o=-r*this.m_u2.x;p=-r*this.m_u2.y;c.m_linearVelocity.x+=c.m_invMass*o;c.m_linearVelocity.y+=c.m_invMass*p;c.m_angularVelocity+=c.m_invI*(g*p-h*o)}},SolvePositionConstraints:function(){var a=this.m_body1;var b=this.m_body2;var c;var d=this.m_ground.m_position.x+this.m_groundAnchor1.x;var e=this.m_ground.m_position.y+this.m_groundAnchor1.y;var f=this.m_ground.m_position.x+this.m_groundAnchor2.x;var g=this.m_ground.m_position.y+this.m_groundAnchor2.y;var h;var i;var j;var k;var l;var m;var n;var o;var p;var q;var r;var s;var t;var u=0;{c=a.m_R;h=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;i=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;c=b.m_R;j=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;k=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;l=a.m_position.x+h;m=a.m_position.y+i;n=b.m_position.x+j;o=b.m_position.y+k;this.m_u1.Set(l-d,m-e);this.m_u2.Set(n-f,o-g);p=this.m_u1.Length();q=this.m_u2.Length();if(p>b2Settings.b2_linearSlop){this.m_u1.Multiply(1/p)}else{this.m_u1.SetZero()}if(q>b2Settings.b2_linearSlop){this.m_u2.Multiply(1/q)}else{this.m_u2.SetZero()}r=this.m_constant-p-this.m_ratio*q;u=b2Math.b2Max(u,Math.abs(r));r=b2Math.b2Clamp(r,-b2Settings.b2_maxLinearCorrection,b2Settings.b2_maxLinearCorrection);s=-this.m_pulleyMass*r;l=-s*this.m_u1.x;m=-s*this.m_u1.y;n=-this.m_ratio*s*this.m_u2.x;o=-this.m_ratio*s*this.m_u2.y;a.m_position.x+=a.m_invMass*l;a.m_position.y+=a.m_invMass*m;a.m_rotation+=a.m_invI*(h*m-i*l);b.m_position.x+=b.m_invMass*n;b.m_position.y+=b.m_invMass*o;b.m_rotation+=b.m_invI*(j*o-k*n);a.m_R.Set(a.m_rotation);b.m_R.Set(b.m_rotation)}if(this.m_limitState1==b2Joint.e_atUpperLimit){c=a.m_R;h=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;i=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;l=a.m_position.x+h;m=a.m_position.y+i;this.m_u1.Set(l-d,m-e);p=this.m_u1.Length();if(p>b2Settings.b2_linearSlop){this.m_u1.x*=1/p;this.m_u1.y*=1/p}else{this.m_u1.SetZero()}r=this.m_maxLength1-p;u=b2Math.b2Max(u,-r);r=b2Math.b2Clamp(r+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);s=-this.m_limitMass1*r;t=this.m_limitPositionImpulse1;this.m_limitPositionImpulse1=b2Math.b2Max(0,this.m_limitPositionImpulse1+s);s=this.m_limitPositionImpulse1-t;l=-s*this.m_u1.x;m=-s*this.m_u1.y;a.m_position.x+=a.m_invMass*l;a.m_position.y+=a.m_invMass*m;a.m_rotation+=a.m_invI*(h*m-i*l);a.m_R.Set(a.m_rotation)}if(this.m_limitState2==b2Joint.e_atUpperLimit){c=b.m_R;j=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;k=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;n=b.m_position.x+j;o=b.m_position.y+k;this.m_u2.Set(n-f,o-g);q=this.m_u2.Length();if(q>b2Settings.b2_linearSlop){this.m_u2.x*=1/q;this.m_u2.y*=1/q}else{this.m_u2.SetZero()}r=this.m_maxLength2-q;u=b2Math.b2Max(u,-r);r=b2Math.b2Clamp(r+b2Settings.b2_linearSlop,-b2Settings.b2_maxLinearCorrection,0);s=-this.m_limitMass2*r;t=this.m_limitPositionImpulse2;this.m_limitPositionImpulse2=b2Math.b2Max(0,this.m_limitPositionImpulse2+s);s=this.m_limitPositionImpulse2-t;n=-s*this.m_u2.x;o=-s*this.m_u2.y;b.m_position.x+=b.m_invMass*n;b.m_position.y+=b.m_invMass*o;b.m_rotation+=b.m_invI*(j*o-k*n);b.m_R.Set(b.m_rotation)}return u<b2Settings.b2_linearSlop},m_ground:null,m_groundAnchor1:new b2Vec2,m_groundAnchor2:new b2Vec2,m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_u1:new b2Vec2,m_u2:new b2Vec2,m_constant:null,m_ratio:null,m_maxLength1:null,m_maxLength2:null,m_pulleyMass:null,m_limitMass1:null,m_limitMass2:null,m_pulleyImpulse:null,m_limitImpulse1:null,m_limitImpulse2:null,m_limitPositionImpulse1:null,m_limitPositionImpulse2:null,m_limitState1:0,m_limitState2:0});b2PulleyJoint.b2_minPulleyLength=b2Settings.b2_lengthUnitsPerMeter;var b2PulleyJointDef=new b2Root;jQuery.extend(b2PulleyJointDef.prototype,b2JointDef.prototype);jQuery.extend(b2PulleyJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.groundPoint1=new b2Vec2;this.groundPoint2=new b2Vec2;this.anchorPoint1=new b2Vec2;this.anchorPoint2=new b2Vec2;this.type=b2Joint.e_pulleyJoint;this.groundPoint1.Set(-1,1);this.groundPoint2.Set(1,1);this.anchorPoint1.Set(-1,0);this.anchorPoint2.Set(1,0);this.maxLength1=.5*b2PulleyJoint.b2_minPulleyLength;this.maxLength2=.5*b2PulleyJoint.b2_minPulleyLength;this.ratio=1;this.collideConnected=true},groundPoint1:new b2Vec2,groundPoint2:new b2Vec2,anchorPoint1:new b2Vec2,anchorPoint2:new b2Vec2,maxLength1:null,maxLength2:null,ratio:null});var b2RevoluteJoint=new b2Root;jQuery.extend(b2RevoluteJoint.prototype,b2Joint.prototype);jQuery.extend(b2RevoluteJoint.prototype,{GetAnchor1:function(){var a=this.m_body1.m_R;return new b2Vec2(this.m_body1.m_position.x+(a.col1.x*this.m_localAnchor1.x+a.col2.x*this.m_localAnchor1.y),this.m_body1.m_position.y+(a.col1.y*this.m_localAnchor1.x+a.col2.y*this.m_localAnchor1.y))},GetAnchor2:function(){var a=this.m_body2.m_R;return new b2Vec2(this.m_body2.m_position.x+(a.col1.x*this.m_localAnchor2.x+a.col2.x*this.m_localAnchor2.y),this.m_body2.m_position.y+(a.col1.y*this.m_localAnchor2.x+a.col2.y*this.m_localAnchor2.y))},GetJointAngle:function(){return this.m_body2.m_rotation-this.m_body1.m_rotation},GetJointSpeed:function(){return this.m_body2.m_angularVelocity-this.m_body1.m_angularVelocity},GetMotorTorque:function(a){return a*this.m_motorImpulse},SetMotorSpeed:function(a){this.m_motorSpeed=a},SetMotorTorque:function(a){this.m_maxMotorTorque=a},GetReactionForce:function(a){var b=this.m_ptpImpulse.Copy();b.Multiply(a);return b},GetReactionTorque:function(a){return a*this.m_limitImpulse},initialize:function(a){this.m_node1=new b2JointNode;this.m_node2=new b2JointNode;this.m_type=a.type;this.m_prev=null;this.m_next=null;this.m_body1=a.body1;this.m_body2=a.body2;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData;this.K=new b2Mat22;this.K1=new b2Mat22;this.K2=new b2Mat22;this.K3=new b2Mat22;this.m_localAnchor1=new b2Vec2;this.m_localAnchor2=new b2Vec2;this.m_ptpImpulse=new b2Vec2;this.m_ptpMass=new b2Mat22;var b;var c;var d;b=this.m_body1.m_R;c=a.anchorPoint.x-this.m_body1.m_position.x;d=a.anchorPoint.y-this.m_body1.m_position.y;this.m_localAnchor1.x=c*b.col1.x+d*b.col1.y;this.m_localAnchor1.y=c*b.col2.x+d*b.col2.y;b=this.m_body2.m_R;c=a.anchorPoint.x-this.m_body2.m_position.x;d=a.anchorPoint.y-this.m_body2.m_position.y;this.m_localAnchor2.x=c*b.col1.x+d*b.col1.y;this.m_localAnchor2.y=c*b.col2.x+d*b.col2.y;this.m_intialAngle=this.m_body2.m_rotation-this.m_body1.m_rotation;this.m_ptpImpulse.Set(0,0);this.m_motorImpulse=0;this.m_limitImpulse=0;this.m_limitPositionImpulse=0;this.m_lowerAngle=a.lowerAngle;this.m_upperAngle=a.upperAngle;this.m_maxMotorTorque=a.motorTorque;this.m_motorSpeed=a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor},K:new b2Mat22,K1:new b2Mat22,K2:new b2Mat22,K3:new b2Mat22,PrepareVelocitySolver:function(){var a=this.m_body1;var b=this.m_body2;var c;c=a.m_R;var d=c.col1.x*this.m_localAnchor1.x+c.col2.x*this.m_localAnchor1.y;var e=c.col1.y*this.m_localAnchor1.x+c.col2.y*this.m_localAnchor1.y;c=b.m_R;var f=c.col1.x*this.m_localAnchor2.x+c.col2.x*this.m_localAnchor2.y;var g=c.col1.y*this.m_localAnchor2.x+c.col2.y*this.m_localAnchor2.y;var h=a.m_invMass;var i=b.m_invMass;var j=a.m_invI;var k=b.m_invI;this.K1.col1.x=h+i;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=h+i;this.K2.col1.x=j*e*e;this.K2.col2.x=-j*d*e;this.K2.col1.y=-j*d*e;this.K2.col2.y=j*d*d;this.K3.col1.x=k*g*g;this.K3.col2.x=-k*f*g;this.K3.col1.y=-k*f*g;this.K3.col2.y=k*f*f;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Invert(this.m_ptpMass);this.m_motorMass=1/(j+k);if(this.m_enableMotor==false){this.m_motorImpulse=0}if(this.m_enableLimit){var l=b.m_rotation-a.m_rotation-this.m_intialAngle;if(b2Math.b2Abs(this.m_upperAngle-this.m_lowerAngle)<2*b2Settings.b2_angularSlop){this.m_limitState=b2Joint.e_equalLimits}else if(l<=this.m_lowerAngle){if(this.m_limitState!=b2Joint.e_atLowerLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atLowerLimit}else if(l>=this.m_upperAngle){if(this.m_limitState!=b2Joint.e_atUpperLimit){this.m_limitImpulse=0}this.m_limitState=b2Joint.e_atUpperLimit}else{this.m_limitState=b2Joint.e_inactiveLimit;this.m_limitImpulse=0}}else{this.m_limitImpulse=0}if(b2World.s_enableWarmStarting){a.m_linearVelocity.x-=h*this.m_ptpImpulse.x;a.m_linearVelocity.y-=h*this.m_ptpImpulse.y;a.m_angularVelocity-=j*(d*this.m_ptpImpulse.y-e*this.m_ptpImpulse.x+this.m_motorImpulse+this.m_limitImpulse);b.m_linearVelocity.x+=i*this.m_ptpImpulse.x;b.m_linearVelocity.y+=i*this.m_ptpImpulse.y;b.m_angularVelocity+=k*(f*this.m_ptpImpulse.y-g*this.m_ptpImpulse.x+this.m_motorImpulse+this.m_limitImpulse)}else{this.m_ptpImpulse.SetZero();this.m_motorImpulse=0;this.m_limitImpulse=0}this.m_limitPositionImpulse=0},SolveVelocityConstraints:function(a){var b=this.m_body1;var c=this.m_body2;var d;d=b.m_R;var e=d.col1.x*this.m_localAnchor1.x+d.col2.x*this.m_localAnchor1.y;var f=d.col1.y*this.m_localAnchor1.x+d.col2.y*this.m_localAnchor1.y;d=c.m_R;var g=d.col1.x*this.m_localAnchor2.x+d.col2.x*this.m_localAnchor2.y;var h=d.col1.y*this.m_localAnchor2.x+d.col2.y*this.m_localAnchor2.y;var i;var j=c.m_linearVelocity.x+ -c.m_angularVelocity*h-b.m_linearVelocity.x- -b.m_angularVelocity*f;var k=c.m_linearVelocity.y+c.m_angularVelocity*g-b.m_linearVelocity.y-b.m_angularVelocity*e;var l=-(this.m_ptpMass.col1.x*j+this.m_ptpMass.col2.x*k);var m=-(this.m_ptpMass.col1.y*j+this.m_ptpMass.col2.y*k);this.m_ptpImpulse.x+=l;this.m_ptpImpulse.y+=m;b.m_linearVelocity.x-=b.m_invMass*l;b.m_linearVelocity.y-=b.m_invMass*m;b.m_angularVelocity-=b.m_invI*(e*m-f*l);c.m_linearVelocity.x+=c.m_invMass*l;c.m_linearVelocity.y+=c.m_invMass*m;c.m_angularVelocity+=c.m_invI*(g*m-h*l);if(this.m_enableMotor&&this.m_limitState!=b2Joint.e_equalLimits){var n=c.m_angularVelocity-b.m_angularVelocity-this.m_motorSpeed;var o=-this.m_motorMass*n;var p=this.m_motorImpulse;this.m_motorImpulse=b2Math.b2Clamp(this.m_motorImpulse+o,-a.dt*this.m_maxMotorTorque,a.dt*this.m_maxMotorTorque);o=this.m_motorImpulse-p;b.m_angularVelocity-=b.m_invI*o;c.m_angularVelocity+=c.m_invI*o}if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){var q=c.m_angularVelocity-b.m_angularVelocity;var r=-this.m_motorMass*q;if(this.m_limitState==b2Joint.e_equalLimits){this.m_limitImpulse+=r}else if(this.m_limitState==b2Joint.e_atLowerLimit){i=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Max(this.m_limitImpulse+r,0);r=this.m_limitImpulse-i}else if(this.m_limitState==b2Joint.e_atUpperLimit){i=this.m_limitImpulse;this.m_limitImpulse=b2Math.b2Min(this.m_limitImpulse+r,0);r=this.m_limitImpulse-i}b.m_angularVelocity-=b.m_invI*r;c.m_angularVelocity+=c.m_invI*r}},SolvePositionConstraints:function(){var a;var b;var c=this.m_body1;var d=this.m_body2;var e=0;var f;f=c.m_R;var g=f.col1.x*this.m_localAnchor1.x+f.col2.x*this.m_localAnchor1.y;var h=f.col1.y*this.m_localAnchor1.x+f.col2.y*this.m_localAnchor1.y;f=d.m_R;var i=f.col1.x*this.m_localAnchor2.x+f.col2.x*this.m_localAnchor2.y;var j=f.col1.y*this.m_localAnchor2.x+f.col2.y*this.m_localAnchor2.y;var k=c.m_position.x+g;var l=c.m_position.y+h;var m=d.m_position.x+i;var n=d.m_position.y+j;var o=m-k;var p=n-l;e=Math.sqrt(o*o+p*p);var q=c.m_invMass;var r=d.m_invMass;var s=c.m_invI;var t=d.m_invI;this.K1.col1.x=q+r;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=q+r;this.K2.col1.x=s*h*h;this.K2.col2.x=-s*g*h;this.K2.col1.y=-s*g*h;this.K2.col2.y=s*g*g;this.K3.col1.x=t*j*j;this.K3.col2.x=-t*i*j;this.K3.col1.y=-t*i*j;this.K3.col2.y=t*i*i;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Solve(b2RevoluteJoint.tImpulse,-o,-p);var u=b2RevoluteJoint.tImpulse.x;var v=b2RevoluteJoint.tImpulse.y;c.m_position.x-=c.m_invMass*u;c.m_position.y-=c.m_invMass*v;c.m_rotation-=c.m_invI*(g*v-h*u);c.m_R.Set(c.m_rotation);d.m_position.x+=d.m_invMass*u;d.m_position.y+=d.m_invMass*v;d.m_rotation+=d.m_invI*(i*v-j*u);d.m_R.Set(d.m_rotation);var w=0;if(this.m_enableLimit&&this.m_limitState!=b2Joint.e_inactiveLimit){var x=d.m_rotation-c.m_rotation-this.m_intialAngle;var y=0;if(this.m_limitState==b2Joint.e_equalLimits){b=b2Math.b2Clamp(x,-b2Settings.b2_maxAngularCorrection,b2Settings.b2_maxAngularCorrection);y=-this.m_motorMass*b;w=b2Math.b2Abs(b)}else if(this.m_limitState==b2Joint.e_atLowerLimit){b=x-this.m_lowerAngle;w=b2Math.b2Max(0,-b);b=b2Math.b2Clamp(b+b2Settings.b2_angularSlop,-b2Settings.b2_maxAngularCorrection,0);y=-this.m_motorMass*b;a=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Max(this.m_limitPositionImpulse+y,0);y=this.m_limitPositionImpulse-a}else if(this.m_limitState==b2Joint.e_atUpperLimit){b=x-this.m_upperAngle;w=b2Math.b2Max(0,b);b=b2Math.b2Clamp(b-b2Settings.b2_angularSlop,0,b2Settings.b2_maxAngularCorrection);y=-this.m_motorMass*b;a=this.m_limitPositionImpulse;this.m_limitPositionImpulse=b2Math.b2Min(this.m_limitPositionImpulse+y,0);y=this.m_limitPositionImpulse-a}c.m_rotation-=c.m_invI*y;c.m_R.Set(c.m_rotation);d.m_rotation+=d.m_invI*y;d.m_R.Set(d.m_rotation)}return e<=b2Settings.b2_linearSlop&&w<=b2Settings.b2_angularSlop},m_localAnchor1:new b2Vec2,m_localAnchor2:new b2Vec2,m_ptpImpulse:new b2Vec2,m_motorImpulse:null,m_limitImpulse:null,m_limitPositionImpulse:null,m_ptpMass:new b2Mat22,m_motorMass:null,m_intialAngle:null,m_lowerAngle:null,m_upperAngle:null,m_maxMotorTorque:null,m_motorSpeed:null,m_enableLimit:null,m_enableMotor:null,m_limitState:0});b2RevoluteJoint.tImpulse=new b2Vec2;var b2RevoluteJointDef=new b2Root;jQuery.extend(b2RevoluteJointDef.prototype,b2JointDef.prototype);jQuery.extend(b2RevoluteJointDef.prototype,{initialize:function(){this.type=b2Joint.e_unknownJoint;this.userData=null;this.body1=null;this.body2=null;this.collideConnected=false;this.type=b2Joint.e_revoluteJoint;this.anchorPoint=new b2Vec2(0,0);this.lowerAngle=0;this.upperAngle=0;this.motorTorque=0;this.motorSpeed=0;this.enableLimit=false;this.enableMotor=false},anchorPoint:null,lowerAngle:null,upperAngle:null,motorTorque:null,motorSpeed:null,enableLimit:null,enableMotor:null});var b2NullContact=new b2Root;jQuery.extend(b2NullContact.prototype,b2Contact.prototype);jQuery.extend(b2NullContact.prototype,{initialize:function(a,b){this.m_node1=new b2ContactNode;this.m_node2=new b2ContactNode;this.m_flags=0;if(!a||!b){this.m_shape1=null;this.m_shape2=null;return}this.m_shape1=a;this.m_shape2=b;this.m_manifoldCount=0;this.m_friction=Math.sqrt(this.m_shape1.m_friction*this.m_shape2.m_friction);this.m_restitution=b2Math.b2Max(this.m_shape1.m_restitution,this.m_shape2.m_restitution);this.m_prev=null;this.m_next=null;this.m_node1.contact=null;this.m_node1.prev=null;this.m_node1.next=null;this.m_node1.other=null;this.m_node2.contact=null;this.m_node2.prev=null;this.m_node2.next=null;this.m_node2.other=null},Evaluate:function(){},GetManifolds:function(){return null}});var b2ContactManager=new b2Root;jQuery.extend(b2ContactManager.prototype,b2PairCallback.prototype);jQuery.extend(b2ContactManager.prototype,{initialize:function(){this.m_nullContact=new b2NullContact;this.m_world=null;this.m_destroyImmediate=false},PairAdded:function(a,b){var c=a;var d=b;var e=c.m_body;var f=d.m_body;if(e.IsStatic()&&f.IsStatic()){return this.m_nullContact}if(c.m_body==d.m_body){return this.m_nullContact}if(f.IsConnected(e)){return this.m_nullContact}if(this.m_world.m_filter!=null&&this.m_world.m_filter.ShouldCollide(c,d)==false){return this.m_nullContact}if(f.m_invMass==0){var g=c;c=d;d=g;var h=e;e=f;f=h}var i=b2Contact.Create(c,d,this.m_world.m_blockAllocator);if(i==null){return this.m_nullContact}else{i.m_prev=null;i.m_next=this.m_world.m_contactList;if(this.m_world.m_contactList!=null){this.m_world.m_contactList.m_prev=i}this.m_world.m_contactList=i;this.m_world.m_contactCount++}return i},PairRemoved:function(a,b,c){if(c==null){return}var d=c;if(d!=this.m_nullContact){if(this.m_destroyImmediate==true){this.DestroyContact(d);d=null}else{d.m_flags|=b2Contact.e_destroyFlag}}},DestroyContact:function(a){if(a.m_prev){a.m_prev.m_next=a.m_next}if(a.m_next){a.m_next.m_prev=a.m_prev}if(a==this.m_world.m_contactList){this.m_world.m_contactList=a.m_next}if(a.GetManifoldCount()>0){var b=a.m_shape1.m_body;var c=a.m_shape2.m_body;var d=a.m_node1;var e=a.m_node2;b.WakeUp();c.WakeUp();if(d.prev){d.prev.next=d.next}if(d.next){d.next.prev=d.prev}if(d==b.m_contactList){b.m_contactList=d.next}d.prev=null;d.next=null;if(e.prev){e.prev.next=e.next}if(e.next){e.next.prev=e.prev}if(e==c.m_contactList){c.m_contactList=e.next}e.prev=null;e.next=null}b2Contact.Destroy(a,this.m_world.m_blockAllocator);--this.m_world.m_contactCount},CleanContactList:function(){var a=this.m_world.m_contactList;while(a!=null){var b=a;a=a.m_next;if(b.m_flags&b2Contact.e_destroyFlag){this.DestroyContact(b);b=null}}},Collide:function(){var a;var b;var c;var d;for(var e=this.m_world.m_contactList;e!=null;e=e.m_next){if(e.m_shape1.m_body.IsSleeping()&&e.m_shape2.m_body.IsSleeping()){continue}var f=e.GetManifoldCount();e.Evaluate();var g=e.GetManifoldCount();if(f==0&&g>0){a=e.m_shape1.m_body;b=e.m_shape2.m_body;c=e.m_node1;d=e.m_node2;c.contact=e;c.other=b;c.prev=null;c.next=a.m_contactList;if(c.next!=null){c.next.prev=e.m_node1}a.m_contactList=e.m_node1;d.contact=e;d.other=a;d.prev=null;d.next=b.m_contactList;if(d.next!=null){d.next.prev=d}b.m_contactList=d}else if(f>0&&g==0){a=e.m_shape1.m_body;b=e.m_shape2.m_body;c=e.m_node1;d=e.m_node2;if(c.prev){c.prev.next=c.next}if(c.next){c.next.prev=c.prev}if(c==a.m_contactList){a.m_contactList=c.next}c.prev=null;c.next=null;if(d.prev){d.prev.next=d.next}if(d.next){d.next.prev=d.prev}if(d==b.m_contactList){b.m_contactList=d.next}d.prev=null;d.next=null}}},m_world:null,m_nullContact:new b2NullContact,m_destroyImmediate:null});var b2Island=new b2Root;jQuery.extend(b2Island.prototype,{initialize:function(a,b,c,d){var e=0;this.m_bodyCapacity=a;this.m_contactCapacity=b;this.m_jointCapacity=c;this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0;this.m_bodies=new Array(a);for(e=0;e<a;e++)this.m_bodies[e]=null;this.m_contacts=new Array(b);for(e=0;e<b;e++)this.m_contacts[e]=null;this.m_joints=new Array(c);for(e=0;e<c;e++)this.m_joints[e]=null;this.m_allocator=d},Clear:function(){this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0},Solve:function(a,b){var c=0;var d;for(c=0;c<this.m_bodyCount;++c){d=this.m_bodies[c];if(d.m_invMass==0)continue;d.m_linearVelocity.Add(b2Math.MulFV(a.dt,b2Math.AddVV(b,b2Math.MulFV(d.m_invMass,d.m_force))));d.m_angularVelocity+=a.dt*d.m_invI*d.m_torque;d.m_linearVelocity.Multiply(d.m_linearDamping);d.m_angularVelocity*=d.m_angularDamping;d.m_position0.SetV(d.m_position);d.m_rotation0=d.m_rotation}var e=new b2ContactSolver(this.m_contacts,this.m_contactCount,this.m_allocator);e.PreSolve();for(c=0;c<this.m_jointCount;++c){this.m_joints[c].PrepareVelocitySolver()}for(c=0;c<a.iterations;++c){e.SolveVelocityConstraints();for(var f=0;f<this.m_jointCount;++f){this.m_joints[f].SolveVelocityConstraints(a)}}for(c=0;c<this.m_bodyCount;++c){d=this.m_bodies[c];if(d.m_invMass==0)continue;d.m_position.x+=a.dt*d.m_linearVelocity.x;d.m_position.y+=a.dt*d.m_linearVelocity.y;d.m_rotation+=a.dt*d.m_angularVelocity;d.m_R.Set(d.m_rotation)}for(c=0;c<this.m_jointCount;++c){this.m_joints[c].PreparePositionSolver()}if(b2World.s_enablePositionCorrection){for(b2Island.m_positionIterationCount=0;b2Island.m_positionIterationCount<a.iterations;++b2Island.m_positionIterationCount){var g=e.SolvePositionConstraints(b2Settings.b2_contactBaumgarte);var h=true;for(c=0;c<this.m_jointCount;++c){var i=this.m_joints[c].SolvePositionConstraints();h=h&&i}if(g&&h){break}}}e.PostSolve();for(c=0;c<this.m_bodyCount;++c){d=this.m_bodies[c];if(d.m_invMass==0)continue;d.m_R.Set(d.m_rotation);d.SynchronizeShapes();d.m_force.Set(0,0);d.m_torque=0}},UpdateSleep:function(a){var b=0;var c;var d=Number.MAX_VALUE;var e=b2Settings.b2_linearSleepTolerance*b2Settings.b2_linearSleepTolerance;var f=b2Settings.b2_angularSleepTolerance*b2Settings.b2_angularSleepTolerance;for(b=0;b<this.m_bodyCount;++b){c=this.m_bodies[b];if(c.m_invMass==0){continue}if((c.m_flags&b2Body.e_allowSleepFlag)==0){c.m_sleepTime=0;d=0}if((c.m_flags&b2Body.e_allowSleepFlag)==0||c.m_angularVelocity*c.m_angularVelocity>f||b2Math.b2Dot(c.m_linearVelocity,c.m_linearVelocity)>e){c.m_sleepTime=0;d=0}else{c.m_sleepTime+=a;d=b2Math.b2Min(d,c.m_sleepTime)}}if(d>=b2Settings.b2_timeToSleep){for(b=0;b<this.m_bodyCount;++b){c=this.m_bodies[b];c.m_flags|=b2Body.e_sleepFlag}}},AddBody:function(a){this.m_bodies[this.m_bodyCount++]=a},AddContact:function(a){this.m_contacts[this.m_contactCount++]=a},AddJoint:function(a){this.m_joints[this.m_jointCount++]=a},m_allocator:null,m_bodies:null,m_contacts:null,m_joints:null,m_bodyCount:0,m_jointCount:0,m_contactCount:0,m_bodyCapacity:0,m_contactCapacity:0,m_jointCapacity:0,m_positionError:null});b2Island.m_positionIterationCount=0;var b2TimeStep=new b2Root;jQuery.extend(b2TimeStep.prototype,{dt:null,inv_dt:null,iterations:0,initialize:function(){}});var b2World=new b2Root;jQuery.extend(b2World.prototype,{initialize:function(a,b,c){this.step=new b2TimeStep;this.m_contactManager=new b2ContactManager;this.m_listener=null;this.m_filter=b2CollisionFilter.b2_defaultFilter;this.m_bodyList=null;this.m_contactList=null;this.m_jointList=null;this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0;this.m_bodyDestroyList=null;this.m_allowSleep=c;this.m_gravity=b;this.m_contactManager.m_world=this;this.m_broadPhase=new b2BroadPhase(a,this.m_contactManager);var d=new b2BodyDef;this.m_groundBody=this.CreateBody(d)},SetListener:function(a){this.m_listener=a},SetFilter:function(a){this.m_filter=a},CreateBody:function(a){var b=new b2Body(a,this);b.m_prev=null;b.m_next=this.m_bodyList;if(this.m_bodyList){this.m_bodyList.m_prev=b}this.m_bodyList=b;++this.m_bodyCount;return b},DestroyBody:function(a){if(a.m_flags&b2Body.e_destroyFlag){return}if(a.m_prev){a.m_prev.m_next=a.m_next}if(a.m_next){a.m_next.m_prev=a.m_prev}if(a==this.m_bodyList){this.m_bodyList=a.m_next}a.m_flags|=b2Body.e_destroyFlag;--this.m_bodyCount;a.m_prev=null;a.m_next=this.m_bodyDestroyList;this.m_bodyDestroyList=a},CleanBodyList:function(){this.m_contactManager.m_destroyImmediate=true;var a=this.m_bodyDestroyList;while(a){var b=a;a=a.m_next;var c=b.m_jointList;while(c){var d=c;c=c.next;if(this.m_listener){this.m_listener.NotifyJointDestroyed(d.joint)}this.DestroyJoint(d.joint)}b.Destroy()}this.m_bodyDestroyList=null;this.m_contactManager.m_destroyImmediate=false},CreateJoint:function(a){var b=b2Joint.Create(a,this.m_blockAllocator);b.m_prev=null;b.m_next=this.m_jointList;if(this.m_jointList){this.m_jointList.m_prev=b}this.m_jointList=b;++this.m_jointCount;b.m_node1.joint=b;b.m_node1.other=b.m_body2;b.m_node1.prev=null;b.m_node1.next=b.m_body1.m_jointList;if(b.m_body1.m_jointList)b.m_body1.m_jointList.prev=b.m_node1;b.m_body1.m_jointList=b.m_node1;b.m_node2.joint=b;b.m_node2.other=b.m_body1;b.m_node2.prev=null;b.m_node2.next=b.m_body2.m_jointList;if(b.m_body2.m_jointList)b.m_body2.m_jointList.prev=b.m_node2;b.m_body2.m_jointList=b.m_node2;if(a.collideConnected==false){var c=a.body1.m_shapeCount<a.body2.m_shapeCount?a.body1:a.body2;for(var d=c.m_shapeList;d;d=d.m_next){d.ResetProxy(this.m_broadPhase)}}return b},DestroyJoint:function(a){var b=a.m_collideConnected;if(a.m_prev){a.m_prev.m_next=a.m_next}if(a.m_next){a.m_next.m_prev=a.m_prev}if(a==this.m_jointList){this.m_jointList=a.m_next}var c=a.m_body1;var d=a.m_body2;c.WakeUp();d.WakeUp();if(a.m_node1.prev){a.m_node1.prev.next=a.m_node1.next}if(a.m_node1.next){a.m_node1.next.prev=a.m_node1.prev}if(a.m_node1==c.m_jointList){c.m_jointList=a.m_node1.next}a.m_node1.prev=null;a.m_node1.next=null;if(a.m_node2.prev){a.m_node2.prev.next=a.m_node2.next}if(a.m_node2.next){a.m_node2.next.prev=a.m_node2.prev}if(a.m_node2==d.m_jointList){d.m_jointList=a.m_node2.next}a.m_node2.prev=null;a.m_node2.next=null;b2Joint.Destroy(a,this.m_blockAllocator);--this.m_jointCount;if(b==false){var e=c.m_shapeCount<d.m_shapeCount?c:d;for(var f=e.m_shapeList;f;f=f.m_next){f.ResetProxy(this.m_broadPhase)}}},GetGroundBody:function(){return this.m_groundBody},step:new b2TimeStep,Step:function(a,b){var c;var d;this.step.dt=a;this.step.iterations=b;if(a>0){this.step.inv_dt=1/a}else{this.step.inv_dt=0}this.m_positionIterationCount=0;this.m_contactManager.CleanContactList();this.CleanBodyList();this.m_contactManager.Collide();var e=new b2Island(this.m_bodyCount,this.m_contactCount,this.m_jointCount,this.m_stackAllocator);for(c=this.m_bodyList;c!=null;c=c.m_next){c.m_flags&=~b2Body.e_islandFlag}for(var f=this.m_contactList;f!=null;f=f.m_next){f.m_flags&=~b2Contact.e_islandFlag}for(var g=this.m_jointList;g!=null;g=g.m_next){g.m_islandFlag=false}var h=this.m_bodyCount;var i=new Array(this.m_bodyCount);for(var j=0;j<this.m_bodyCount;j++)i[j]=null;for(var k=this.m_bodyList;k!=null;k=k.m_next){if(k.m_flags&(b2Body.e_staticFlag|b2Body.e_islandFlag|b2Body.e_sleepFlag|b2Body.e_frozenFlag)){continue}e.Clear();var l=0;i[l++]=k;k.m_flags|=b2Body.e_islandFlag;while(l>0){c=i[--l];e.AddBody(c);c.m_flags&=~b2Body.e_sleepFlag;if(c.m_flags&b2Body.e_staticFlag){continue}for(var m=c.m_contactList;m!=null;m=m.next){if(m.contact.m_flags&b2Contact.e_islandFlag){continue}e.AddContact(m.contact);m.contact.m_flags|=b2Contact.e_islandFlag;d=m.other;if(d.m_flags&b2Body.e_islandFlag){continue}i[l++]=d;d.m_flags|=b2Body.e_islandFlag}for(var n=c.m_jointList;n!=null;n=n.next){if(n.joint.m_islandFlag==true){continue}e.AddJoint(n.joint);n.joint.m_islandFlag=true;d=n.other;if(d.m_flags&b2Body.e_islandFlag){continue}i[l++]=d;d.m_flags|=b2Body.e_islandFlag}}e.Solve(this.step,this.m_gravity);this.m_positionIterationCount=b2Math.b2Max(this.m_positionIterationCount,b2Island.m_positionIterationCount);if(this.m_allowSleep){e.UpdateSleep(a)}for(var o=0;o<e.m_bodyCount;++o){c=e.m_bodies[o];if(c.m_flags&b2Body.e_staticFlag){c.m_flags&=~b2Body.e_islandFlag}if(c.IsFrozen()&&this.m_listener){var p=this.m_listener.NotifyBoundaryViolated(c);if(p==b2WorldListener.b2_destroyBody){this.DestroyBody(c);c=null;e.m_bodies[o]=null}}}}this.m_broadPhase.Commit()},Query:function(a,b,c){var d=new Array;var e=this.m_broadPhase.QueryAABB(a,d,c);for(var f=0;f<e;++f){b[f]=d[f]}return e},GetBodyList:function(){return this.m_bodyList},GetJointList:function(){return this.m_jointList},GetContactList:function(){return this.m_contactList},m_blockAllocator:null,m_stackAllocator:null,m_broadPhase:null,m_contactManager:new b2ContactManager,m_bodyList:null,m_contactList:null,m_jointList:null,m_bodyCount:0,m_contactCount:0,m_jointCount:0,m_bodyDestroyList:null,m_gravity:null,m_allowSleep:null,m_groundBody:null,m_listener:null,m_filter:null,m_positionIterationCount:0});b2World.s_enablePositionCorrection=1;b2World.s_enableWarmStarting=1;var b2WorldListener=new b2Root;jQuery.extend(b2WorldListener.prototype,{NotifyJointDestroyed:function(a){},NotifyBoundaryViolated:function(a){return b2WorldListener.b2_freezeBody},initialize:function(){}});b2WorldListener.b2_freezeBody=0;b2WorldListener.b2_destroyBody=1;

/* http://keith-wood.name/svg.html
 SVG for jQuery v1.4.5.
 Written by Keith Wood (kbwood{at}iinet.com.au) August 2007.
 Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and
 MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses.
 Please attribute the author if you use it. */
(function($){function SVGManager(){this._settings=[];this._extensions=[];this.regional=[];this.regional['']={errorLoadingText:'Error loading',notSupportedText:'This browser does not support SVG'};this.local=this.regional[''];this._uuid=new Date().getTime();this._renesis=detectActiveX('RenesisX.RenesisCtrl')}function detectActiveX(a){try{return!!(window.ActiveXObject&&new ActiveXObject(a))}catch(e){return false}}var q='svgwrapper';$.extend(SVGManager.prototype,{markerClassName:'hasSVG',svgNS:'http://www.w3.org/2000/svg',xlinkNS:'http://www.w3.org/1999/xlink',_wrapperClass:SVGWrapper,_attrNames:{class_:'class',in_:'in',alignmentBaseline:'alignment-baseline',baselineShift:'baseline-shift',clipPath:'clip-path',clipRule:'clip-rule',colorInterpolation:'color-interpolation',colorInterpolationFilters:'color-interpolation-filters',colorRendering:'color-rendering',dominantBaseline:'dominant-baseline',enableBackground:'enable-background',fillOpacity:'fill-opacity',fillRule:'fill-rule',floodColor:'flood-color',floodOpacity:'flood-opacity',fontFamily:'font-family',fontSize:'font-size',fontSizeAdjust:'font-size-adjust',fontStretch:'font-stretch',fontStyle:'font-style',fontVariant:'font-variant',fontWeight:'font-weight',glyphOrientationHorizontal:'glyph-orientation-horizontal',glyphOrientationVertical:'glyph-orientation-vertical',horizAdvX:'horiz-adv-x',horizOriginX:'horiz-origin-x',imageRendering:'image-rendering',letterSpacing:'letter-spacing',lightingColor:'lighting-color',markerEnd:'marker-end',markerMid:'marker-mid',markerStart:'marker-start',stopColor:'stop-color',stopOpacity:'stop-opacity',strikethroughPosition:'strikethrough-position',strikethroughThickness:'strikethrough-thickness',strokeDashArray:'stroke-dasharray',strokeDashOffset:'stroke-dashoffset',strokeLineCap:'stroke-linecap',strokeLineJoin:'stroke-linejoin',strokeMiterLimit:'stroke-miterlimit',strokeOpacity:'stroke-opacity',strokeWidth:'stroke-width',textAnchor:'text-anchor',textDecoration:'text-decoration',textRendering:'text-rendering',underlinePosition:'underline-position',underlineThickness:'underline-thickness',vertAdvY:'vert-adv-y',vertOriginY:'vert-origin-y',wordSpacing:'word-spacing',writingMode:'writing-mode'},_attachSVG:function(a,b){var c=(a.namespaceURI==this.svgNS?a:null);var a=(c?null:a);if($(a||c).hasClass(this.markerClassName)){return}if(typeof b=='string'){b={loadURL:b}}else if(typeof b=='function'){b={onLoad:b}}$(a||c).addClass(this.markerClassName);try{if(!c){c=document.createElementNS(this.svgNS,'svg');c.setAttribute('version','1.1');if(a.clientWidth>0){c.setAttribute('width',a.clientWidth)}if(a.clientHeight>0){c.setAttribute('height',a.clientHeight)}a.appendChild(c)}this._afterLoad(a,c,b||{})}catch(e){if($.browser.msie){if(!a.id){a.id='svg'+(this._uuid++)}this._settings[a.id]=b;a.innerHTML='<embed type="image/svg+xml" width="100%" '+'height="100%" src="'+(b.initPath||'')+'blank.svg" '+'pluginspage="http://www.adobe.com/svg/viewer/install/main.html"/>'}else{a.innerHTML='<p class="svg_error">'+this.local.notSupportedText+'</p>'}}},_registerSVG:function(){for(var i=0;i<document.embeds.length;i++){var a=document.embeds[i].parentNode;if(!$(a).hasClass($.svg.markerClassName)||$.data(a,q)){continue}var b=null;try{b=document.embeds[i].getSVGDocument()}catch(e){setTimeout($.svg._registerSVG,250);return}b=(b?b.documentElement:null);if(b){$.svg._afterLoad(a,b)}}},_afterLoad:function(a,b,c){var c=c||this._settings[a.id];this._settings[a?a.id:'']=null;var d=new this._wrapperClass(b,a);$.data(a||b,q,d);try{if(c.loadURL){d.load(c.loadURL,c)}if(c.settings){d.configure(c.settings)}if(c.onLoad&&!c.loadURL){c.onLoad.apply(a||b,[d])}}catch(e){alert(e)}},_getSVG:function(a){a=(typeof a=='string'?$(a)[0]:(a.jquery?a[0]:a));return $.data(a,q)},_destroySVG:function(a){var b=$(a);if(!b.hasClass(this.markerClassName)){return}b.removeClass(this.markerClassName);if(a.namespaceURI!=this.svgNS){b.empty()}$.removeData(a,q)},addExtension:function(a,b){this._extensions.push([a,b])},isSVGElem:function(a){return(a.nodeType==1&&a.namespaceURI==$.svg.svgNS)}});function SVGWrapper(a,b){this._svg=a;this._container=b;for(var i=0;i<$.svg._extensions.length;i++){var c=$.svg._extensions[i];this[c[0]]=new c[1](this)}}$.extend(SVGWrapper.prototype,{_width:function(){return(this._container?this._container.clientWidth:this._svg.width)},_height:function(){return(this._container?this._container.clientHeight:this._svg.height)},root:function(){return this._svg},configure:function(a,b,c){if(!a.nodeName){c=b;b=a;a=this._svg}if(c){for(var i=a.attributes.length-1;i>=0;i--){var d=a.attributes.item(i);if(!(d.nodeName=='onload'||d.nodeName=='version'||d.nodeName.substring(0,5)=='xmlns')){a.attributes.removeNamedItem(d.nodeName)}}}for(var e in b){a.setAttribute($.svg._attrNames[e]||e,b[e])}return this},getElementById:function(a){return this._svg.ownerDocument.getElementById(a)},change:function(a,b){if(a){for(var c in b){if(b[c]==null){a.removeAttribute($.svg._attrNames[c]||c)}else{a.setAttribute($.svg._attrNames[c]||c,b[c])}}}return this},_args:function(b,c,d){c.splice(0,0,'parent');c.splice(c.length,0,'settings');var e={};var f=0;if(b[0]!=null&&b[0].jquery){b[0]=b[0][0]}if(b[0]!=null&&!(typeof b[0]=='object'&&b[0].nodeName)){e['parent']=null;f=1}for(var i=0;i<b.length;i++){e[c[i+f]]=b[i]}if(d){$.each(d,function(i,a){if(typeof e[a]=='object'){e.settings=e[a];e[a]=null}})}return e},title:function(a,b,c){var d=this._args(arguments,['text']);var e=this._makeNode(d.parent,'title',d.settings||{});e.appendChild(this._svg.ownerDocument.createTextNode(d.text));return e},describe:function(a,b,c){var d=this._args(arguments,['text']);var e=this._makeNode(d.parent,'desc',d.settings||{});e.appendChild(this._svg.ownerDocument.createTextNode(d.text));return e},defs:function(a,b,c){var d=this._args(arguments,['id'],['id']);return this._makeNode(d.parent,'defs',$.extend((d.id?{id:d.id}:{}),d.settings||{}))},symbol:function(a,b,c,d,e,f,g){var h=this._args(arguments,['id','x1','y1','width','height']);return this._makeNode(h.parent,'symbol',$.extend({id:h.id,viewBox:h.x1+' '+h.y1+' '+h.width+' '+h.height},h.settings||{}))},marker:function(a,b,c,d,e,f,g,h){var i=this._args(arguments,['id','refX','refY','mWidth','mHeight','orient'],['orient']);return this._makeNode(i.parent,'marker',$.extend({id:i.id,refX:i.refX,refY:i.refY,markerWidth:i.mWidth,markerHeight:i.mHeight,orient:i.orient||'auto'},i.settings||{}))},style:function(a,b,c){var d=this._args(arguments,['styles']);var e=this._makeNode(d.parent,'style',$.extend({type:'text/css'},d.settings||{}));e.appendChild(this._svg.ownerDocument.createTextNode(d.styles));if($.browser.opera){$('head').append('<style type="text/css">'+d.styles+'</style>')}return e},script:function(a,b,c,d){var e=this._args(arguments,['script','type'],['type']);var f=this._makeNode(e.parent,'script',$.extend({type:e.type||'text/javascript'},e.settings||{}));f.appendChild(this._svg.ownerDocument.createTextNode(e.script));if(!$.browser.mozilla){$.globalEval(e.script)}return f},linearGradient:function(a,b,c,d,e,f,g,h){var i=this._args(arguments,['id','stops','x1','y1','x2','y2'],['x1']);var j=$.extend({id:i.id},(i.x1!=null?{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}:{}));return this._gradient(i.parent,'linearGradient',$.extend(j,i.settings||{}),i.stops)},radialGradient:function(a,b,c,d,e,r,f,g,h){var i=this._args(arguments,['id','stops','cx','cy','r','fx','fy'],['cx']);var j=$.extend({id:i.id},(i.cx!=null?{cx:i.cx,cy:i.cy,r:i.r,fx:i.fx,fy:i.fy}:{}));return this._gradient(i.parent,'radialGradient',$.extend(j,i.settings||{}),i.stops)},_gradient:function(a,b,c,d){var e=this._makeNode(a,b,c);for(var i=0;i<d.length;i++){var f=d[i];this._makeNode(e,'stop',$.extend({offset:f[0],stopColor:f[1]},(f[2]!=null?{stopOpacity:f[2]}:{})))}return e},pattern:function(a,b,x,y,c,d,e,f,g,h,i){var j=this._args(arguments,['id','x','y','width','height','vx','vy','vwidth','vheight'],['vx']);var k=$.extend({id:j.id,x:j.x,y:j.y,width:j.width,height:j.height},(j.vx!=null?{viewBox:j.vx+' '+j.vy+' '+j.vwidth+' '+j.vheight}:{}));return this._makeNode(j.parent,'pattern',$.extend(k,j.settings||{}))},clipPath:function(a,b,c,d){var e=this._args(arguments,['id','units']);e.units=e.units||'userSpaceOnUse';return this._makeNode(e.parent,'clipPath',$.extend({id:e.id,clipPathUnits:e.units},e.settings||{}))},mask:function(a,b,x,y,c,d,e){var f=this._args(arguments,['id','x','y','width','height']);return this._makeNode(f.parent,'mask',$.extend({id:f.id,x:f.x,y:f.y,width:f.width,height:f.height},f.settings||{}))},createPath:function(){return new SVGPath()},createText:function(){return new SVGText()},svg:function(a,x,y,b,c,d,e,f,g,h){var i=this._args(arguments,['x','y','width','height','vx','vy','vwidth','vheight'],['vx']);var j=$.extend({x:i.x,y:i.y,width:i.width,height:i.height},(i.vx!=null?{viewBox:i.vx+' '+i.vy+' '+i.vwidth+' '+i.vheight}:{}));return this._makeNode(i.parent,'svg',$.extend(j,i.settings||{}))},group:function(a,b,c){var d=this._args(arguments,['id'],['id']);return this._makeNode(d.parent,'g',$.extend({id:d.id},d.settings||{}))},use:function(a,x,y,b,c,d,e){var f=this._args(arguments,['x','y','width','height','ref']);if(typeof f.x=='string'){f.ref=f.x;f.settings=f.y;f.x=f.y=f.width=f.height=null}var g=this._makeNode(f.parent,'use',$.extend({x:f.x,y:f.y,width:f.width,height:f.height},f.settings||{}));g.setAttributeNS($.svg.xlinkNS,'href',f.ref);return g},link:function(a,b,c){var d=this._args(arguments,['ref']);var e=this._makeNode(d.parent,'a',d.settings);e.setAttributeNS($.svg.xlinkNS,'href',d.ref);return e},image:function(a,x,y,b,c,d,e){var f=this._args(arguments,['x','y','width','height','ref']);var g=this._makeNode(f.parent,'image',$.extend({x:f.x,y:f.y,width:f.width,height:f.height},f.settings||{}));g.setAttributeNS($.svg.xlinkNS,'href',f.ref);return g},path:function(a,b,c){var d=this._args(arguments,['path']);return this._makeNode(d.parent,'path',$.extend({d:(d.path.path?d.path.path():d.path)},d.settings||{}))},rect:function(a,x,y,b,c,d,e,f){var g=this._args(arguments,['x','y','width','height','rx','ry'],['rx']);return this._makeNode(g.parent,'rect',$.extend({x:g.x,y:g.y,width:g.width,height:g.height},(g.rx?{rx:g.rx,ry:g.ry}:{}),g.settings||{}))},circle:function(a,b,c,r,d){var e=this._args(arguments,['cx','cy','r']);return this._makeNode(e.parent,'circle',$.extend({cx:e.cx,cy:e.cy,r:e.r},e.settings||{}))},ellipse:function(a,b,c,d,e,f){var g=this._args(arguments,['cx','cy','rx','ry']);return this._makeNode(g.parent,'ellipse',$.extend({cx:g.cx,cy:g.cy,rx:g.rx,ry:g.ry},g.settings||{}))},line:function(a,b,c,d,e,f){var g=this._args(arguments,['x1','y1','x2','y2']);return this._makeNode(g.parent,'line',$.extend({x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2},g.settings||{}))},polyline:function(a,b,c){var d=this._args(arguments,['points']);return this._poly(d.parent,'polyline',d.points,d.settings)},polygon:function(a,b,c){var d=this._args(arguments,['points']);return this._poly(d.parent,'polygon',d.points,d.settings)},_poly:function(a,b,c,d){var e='';for(var i=0;i<c.length;i++){e+=c[i].join()+' '}return this._makeNode(a,b,$.extend({points:$.trim(e)},d||{}))},text:function(a,x,y,b,c){var d=this._args(arguments,['x','y','value']);if(typeof d.x=='string'&&arguments.length<4){d.value=d.x;d.settings=d.y;d.x=d.y=null}return this._text(d.parent,'text',d.value,$.extend({x:(d.x&&isArray(d.x)?d.x.join(' '):d.x),y:(d.y&&isArray(d.y)?d.y.join(' '):d.y)},d.settings||{}))},textpath:function(a,b,c,d){var e=this._args(arguments,['path','value']);var f=this._text(e.parent,'textPath',e.value,e.settings||{});f.setAttributeNS($.svg.xlinkNS,'href',e.path);return f},_text:function(a,b,c,d){var e=this._makeNode(a,b,d);if(typeof c=='string'){e.appendChild(e.ownerDocument.createTextNode(c))}else{for(var i=0;i<c._parts.length;i++){var f=c._parts[i];if(f[0]=='tspan'){var g=this._makeNode(e,f[0],f[2]);g.appendChild(e.ownerDocument.createTextNode(f[1]));e.appendChild(g)}else if(f[0]=='tref'){var g=this._makeNode(e,f[0],f[2]);g.setAttributeNS($.svg.xlinkNS,'href',f[1]);e.appendChild(g)}else if(f[0]=='textpath'){var h=$.extend({},f[2]);h.href=null;var g=this._makeNode(e,f[0],h);g.setAttributeNS($.svg.xlinkNS,'href',f[2].href);g.appendChild(e.ownerDocument.createTextNode(f[1]));e.appendChild(g)}else{e.appendChild(e.ownerDocument.createTextNode(f[1]))}}}return e},other:function(a,b,c){var d=this._args(arguments,['name']);return this._makeNode(d.parent,d.name,d.settings||{})},_makeNode:function(a,b,c){a=a||this._svg;var d=this._svg.ownerDocument.createElementNS($.svg.svgNS,b);for(var b in c){var e=c[b];if(e!=null&&e!=null&&(typeof e!='string'||e!='')){d.setAttribute($.svg._attrNames[b]||b,e)}}a.appendChild(d);return d},add:function(b,c){var d=this._args((arguments.length==1?[null,b]:arguments),['node']);var f=this;d.parent=d.parent||this._svg;d.node=(d.node.jquery?d.node:$(d.node));try{if($.svg._renesis){throw'Force traversal';}d.parent.appendChild(d.node.cloneNode(true))}catch(e){d.node.each(function(){var a=f._cloneAsSVG(this);if(a){d.parent.appendChild(a)}})}return this},clone:function(b,c){var d=this;var e=this._args((arguments.length==1?[null,b]:arguments),['node']);e.parent=e.parent||this._svg;e.node=(e.node.jquery?e.node:$(e.node));var f=[];e.node.each(function(){var a=d._cloneAsSVG(this);if(a){a.id='';e.parent.appendChild(a);f.push(a)}});return f},_cloneAsSVG:function(a){var b=null;if(a.nodeType==1){b=this._svg.ownerDocument.createElementNS($.svg.svgNS,this._checkName(a.nodeName));for(var i=0;i<a.attributes.length;i++){var c=a.attributes.item(i);if(c.nodeName!='xmlns'&&c.nodeValue){if(c.prefix=='xlink'){b.setAttributeNS($.svg.xlinkNS,c.localName||c.baseName,c.nodeValue)}else{b.setAttribute(this._checkName(c.nodeName),c.nodeValue)}}}for(var i=0;i<a.childNodes.length;i++){var d=this._cloneAsSVG(a.childNodes[i]);if(d){b.appendChild(d)}}}else if(a.nodeType==3){if($.trim(a.nodeValue)){b=this._svg.ownerDocument.createTextNode(a.nodeValue)}}else if(a.nodeType==4){if($.trim(a.nodeValue)){try{b=this._svg.ownerDocument.createCDATASection(a.nodeValue)}catch(e){b=this._svg.ownerDocument.createTextNode(a.nodeValue.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'))}}}return b},_checkName:function(a){a=(a.substring(0,1)>='A'&&a.substring(0,1)<='Z'?a.toLowerCase():a);return(a.substring(0,4)=='svg:'?a.substring(4):a)},load:function(j,k){k=(typeof k=='boolean'?{addTo:k}:(typeof k=='function'?{onLoad:k}:(typeof k=='string'?{parent:k}:(typeof k=='object'&&k.nodeName?{parent:k}:(typeof k=='object'&&k.jquery?{parent:k}:k||{})))));if(!k.parent&&!k.addTo){this.clear(false)}var l=[this._svg.getAttribute('width'),this._svg.getAttribute('height')];var m=this;var n=function(a){a=$.svg.local.errorLoadingText+': '+a;if(k.onLoad){k.onLoad.apply(m._container||m._svg,[m,a])}else{m.text(null,10,20,a)}};var o=function(a){var b=new ActiveXObject('Microsoft.XMLDOM');b.validateOnParse=false;b.resolveExternals=false;b.async=false;b.loadXML(a);if(b.parseError.errorCode!=0){n(b.parseError.reason);return null}return b};var p=function(a){if(!a){return}if(a.documentElement.nodeName!='svg'){var b=a.getElementsByTagName('parsererror');var c=(b.length?b[0].getElementsByTagName('div'):[]);n(!b.length?'???':(c.length?c[0]:b[0]).firstChild.nodeValue);return}var d=(k.parent?$(k.parent)[0]:m._svg);var f={};for(var i=0;i<a.documentElement.attributes.length;i++){var g=a.documentElement.attributes.item(i);if(!(g.nodeName=='version'||g.nodeName.substring(0,5)=='xmlns')){f[g.nodeName]=g.nodeValue}}m.configure(d,f,!k.parent);var h=a.documentElement.childNodes;for(var i=0;i<h.length;i++){try{if($.svg._renesis){throw'Force traversal';}d.appendChild(m._svg.ownerDocument.importNode(h[i],true));if(h[i].nodeName=='script'){$.globalEval(h[i].textContent)}}catch(e){m.add(d,h[i])}}if(!k.changeSize){m.configure(d,{width:l[0],height:l[1]})}if(k.onLoad){k.onLoad.apply(m._container||m._svg,[m])}};if(j.match('<svg')){p($.browser.msie?o(j):new DOMParser().parseFromString(j,'text/xml'))}else{$.ajax({url:j,dataType:($.browser.msie?'text':'xml'),success:function(a){p($.browser.msie?o(a):a)},error:function(a,b,c){n(b+(c?' '+c.message:''))}})}return this},remove:function(a){a=(a.jquery?a[0]:a);a.parentNode.removeChild(a);return this},clear:function(a){if(a){this.configure({},true)}while(this._svg.firstChild){this._svg.removeChild(this._svg.firstChild)}return this},toSVG:function(a){a=a||this._svg;return(typeof XMLSerializer=='undefined'?this._toSVG(a):new XMLSerializer().serializeToString(a))},_toSVG:function(a){var b='';if(!a){return b}if(a.nodeType==3){b=a.nodeValue}else if(a.nodeType==4){b='<![CDATA['+a.nodeValue+']]>'}else{b='<'+a.nodeName;if(a.attributes){for(var i=0;i<a.attributes.length;i++){var c=a.attributes.item(i);if(!($.trim(c.nodeValue)==''||c.nodeValue.match(/^\[object/)||c.nodeValue.match(/^function/))){b+=' '+(c.namespaceURI==$.svg.xlinkNS?'xlink:':'')+c.nodeName+'="'+c.nodeValue+'"'}}}if(a.firstChild){b+='>';var d=a.firstChild;while(d){b+=this._toSVG(d);d=d.nextSibling}b+='</'+a.nodeName+'>'}else{b+='/>'}}return b}});function SVGPath(){this._path=''}$.extend(SVGPath.prototype,{reset:function(){this._path='';return this},move:function(x,y,a){a=(isArray(x)?y:a);return this._coords((a?'m':'M'),x,y)},line:function(x,y,a){a=(isArray(x)?y:a);return this._coords((a?'l':'L'),x,y)},horiz:function(x,a){this._path+=(a?'h':'H')+(isArray(x)?x.join(' '):x);return this},vert:function(y,a){this._path+=(a?'v':'V')+(isArray(y)?y.join(' '):y);return this},curveC:function(a,b,c,d,x,y,e){e=(isArray(a)?b:e);return this._coords((e?'c':'C'),a,b,c,d,x,y)},smoothC:function(a,b,x,y,c){c=(isArray(a)?b:c);return this._coords((c?'s':'S'),a,b,x,y)},curveQ:function(a,b,x,y,c){c=(isArray(a)?b:c);return this._coords((c?'q':'Q'),a,b,x,y)},smoothQ:function(x,y,a){a=(isArray(x)?y:a);return this._coords((a?'t':'T'),x,y)},_coords:function(a,b,c,d,e,f,g){if(isArray(b)){for(var i=0;i<b.length;i++){var h=b[i];this._path+=(i==0?a:' ')+h[0]+','+h[1]+(h.length<4?'':' '+h[2]+','+h[3]+(h.length<6?'':' '+h[4]+','+h[5]))}}else{this._path+=a+b+','+c+(d==null?'':' '+d+','+e+(f==null?'':' '+f+','+g))}return this},arc:function(a,b,c,d,e,x,y,f){f=(isArray(a)?b:f);this._path+=(f?'a':'A');if(isArray(a)){for(var i=0;i<a.length;i++){var g=a[i];this._path+=(i==0?'':' ')+g[0]+','+g[1]+' '+g[2]+' '+(g[3]?'1':'0')+','+(g[4]?'1':'0')+' '+g[5]+','+g[6]}}else{this._path+=a+','+b+' '+c+' '+(d?'1':'0')+','+(e?'1':'0')+' '+x+','+y}return this},close:function(){this._path+='z';return this},path:function(){return this._path}});SVGPath.prototype.moveTo=SVGPath.prototype.move;SVGPath.prototype.lineTo=SVGPath.prototype.line;SVGPath.prototype.horizTo=SVGPath.prototype.horiz;SVGPath.prototype.vertTo=SVGPath.prototype.vert;SVGPath.prototype.curveCTo=SVGPath.prototype.curveC;SVGPath.prototype.smoothCTo=SVGPath.prototype.smoothC;SVGPath.prototype.curveQTo=SVGPath.prototype.curveQ;SVGPath.prototype.smoothQTo=SVGPath.prototype.smoothQ;SVGPath.prototype.arcTo=SVGPath.prototype.arc;function SVGText(){this._parts=[]}$.extend(SVGText.prototype,{reset:function(){this._parts=[];return this},string:function(a){this._parts[this._parts.length]=['text',a];return this},span:function(a,b){this._parts[this._parts.length]=['tspan',a,b];return this},ref:function(a,b){this._parts[this._parts.length]=['tref',a,b];return this},path:function(a,b,c){this._parts[this._parts.length]=['textpath',b,$.extend({href:a},c||{})];return this}});$.fn.svg=function(a){var b=Array.prototype.slice.call(arguments,1);if(typeof a=='string'&&a=='get'){return $.svg['_'+a+'SVG'].apply($.svg,[this[0]].concat(b))}return this.each(function(){if(typeof a=='string'){$.svg['_'+a+'SVG'].apply($.svg,[this].concat(b))}else{$.svg._attachSVG(this,a||{})}})};function isArray(a){return(a&&a.constructor==Array)}$.svg=new SVGManager()})(jQuery);

/* http://keith-wood.name/svg.html
 SVG attribute animations for jQuery v1.4.5.
 Written by Keith Wood (kbwood{at}iinet.com.au) June 2008.
 Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and
 MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses.
 Please attribute the author if you use it. */
(function($){$.each(['x','y','width','height','rx','ry','cx','cy','r','x1','y1','x2','y2','stroke-width','strokeWidth','opacity','fill-opacity','fillOpacity','stroke-opacity','strokeOpacity','stroke-dashoffset','strokeDashOffset','font-size','fontSize','font-weight','fontWeight','letter-spacing','letterSpacing','word-spacing','wordSpacing'],function(i,f){var g=f.charAt(0).toUpperCase()+f.substr(1);if($.cssProps){$.cssProps['svg'+g]=$.cssProps['svg-'+f]=f}$.fx.step['svg'+g]=$.fx.step['svg-'+f]=function(a){var b=$.svg._attrNames[f]||f;var c=a.elem.attributes.getNamedItem(b);if(!a.set){a.start=(c?parseFloat(c.nodeValue):0);var d=($.fn.jquery>='1.6'?'':a.options.curAnim['svg'+g]||a.options.curAnim['svg-'+f]);if(/^[+-]=/.exec(d)){a.end=a.start+parseFloat(d.replace(/=/,''))}$(a.elem).css(b,'');a.set=true}var e=(a.pos*(a.end-a.start)+a.start)+(a.unit=='%'?'%':'');(c?c.nodeValue=e:a.elem.setAttribute(b,e))}});$.fx.step['svgStrokeDashArray']=$.fx.step['svg-strokeDashArray']=$.fx.step['svgStroke-dasharray']=$.fx.step['svg-stroke-dasharray']=function(a){var b=a.elem.attributes.getNamedItem('stroke-dasharray');if(!a.set){a.start=parseDashArray(b?b.nodeValue:'');var c=($.fn.jquery>='1.6'?a.end:a.options.curAnim['svgStrokeDashArray']||a.options.curAnim['svg-strokeDashArray']||a.options.curAnim['svgStroke-dasharray']||a.options.curAnim['svg-stroke-dasharray']);a.end=parseDashArray(c);if(/^[+-]=/.exec(c)){c=c.split(/[, ]+/);if(c.length%2==1){var d=c.length;for(var i=0;i<d;i++){c.push(c[i])}}for(var i=0;i<c.length;i++){if(/^[+-]=/.exec(c[i])){a.end[i]=a.start[i]+parseFloat(c[i].replace(/=/,''))}}}a.set=true}var e=$.map(a.start,function(n,i){return(a.pos*(a.end[i]-n)+n)}).join(',');(b?b.nodeValue=e:a.elem.setAttribute('stroke-dasharray',e))};function parseDashArray(a){var b=a.split(/[, ]+/);for(var i=0;i<b.length;i++){b[i]=parseFloat(b[i]);if(isNaN(b[i])){b[i]=0}}if(b.length%2==1){var c=b.length;for(var i=0;i<c;i++){b.push(b[i])}}return b}$.fx.step['svgViewBox']=$.fx.step['svg-viewBox']=function(a){var b=a.elem.attributes.getNamedItem('viewBox');if(!a.set){a.start=parseViewBox(b?b.nodeValue:'');var c=($.fn.jquery>='1.6'?a.end:a.options.curAnim['svgViewBox']||a.options.curAnim['svg-viewBox']);a.end=parseViewBox(c);if(/^[+-]=/.exec(c)){c=c.split(/[, ]+/);while(c.length<4){c.push('0')}for(var i=0;i<4;i++){if(/^[+-]=/.exec(c[i])){a.end[i]=a.start[i]+parseFloat(c[i].replace(/=/,''))}}}a.set=true}var d=$.map(a.start,function(n,i){return(a.pos*(a.end[i]-n)+n)}).join(' ');(b?b.nodeValue=d:a.elem.setAttribute('viewBox',d))};function parseViewBox(a){var b=a.split(/[, ]+/);for(var i=0;i<b.length;i++){b[i]=parseFloat(b[i]);if(isNaN(b[i])){b[i]=0}}while(b.length<4){b.push(0)}return b}$.fx.step['svgTransform']=$.fx.step['svg-transform']=function(a){var b=a.elem.attributes.getNamedItem('transform');if(!a.set){a.start=parseTransform(b?b.nodeValue:'');a.end=parseTransform(a.end,a.start);a.set=true}var c='';for(var i=0;i<a.end.order.length;i++){switch(a.end.order.charAt(i)){case't':c+=' translate('+(a.pos*(a.end.translateX-a.start.translateX)+a.start.translateX)+','+(a.pos*(a.end.translateY-a.start.translateY)+a.start.translateY)+')';break;case's':c+=' scale('+(a.pos*(a.end.scaleX-a.start.scaleX)+a.start.scaleX)+','+(a.pos*(a.end.scaleY-a.start.scaleY)+a.start.scaleY)+')';break;case'r':c+=' rotate('+(a.pos*(a.end.rotateA-a.start.rotateA)+a.start.rotateA)+','+(a.pos*(a.end.rotateX-a.start.rotateX)+a.start.rotateX)+','+(a.pos*(a.end.rotateY-a.start.rotateY)+a.start.rotateY)+')';break;case'x':c+=' skewX('+(a.pos*(a.end.skewX-a.start.skewX)+a.start.skewX)+')';case'y':c+=' skewY('+(a.pos*(a.end.skewY-a.start.skewY)+a.start.skewY)+')';break;case'm':var d='';for(var j=0;j<6;j++){d+=','+(a.pos*(a.end.matrix[j]-a.start.matrix[j])+a.start.matrix[j])}c+=' matrix('+d.substr(1)+')';break}}(b?b.nodeValue=c:a.elem.setAttribute('transform',c))};function parseTransform(a,b){a=a||'';if(typeof a=='object'){a=a.nodeValue}var c=$.extend({translateX:0,translateY:0,scaleX:0,scaleY:0,rotateA:0,rotateX:0,rotateY:0,skewX:0,skewY:0,matrix:[0,0,0,0,0,0]},b||{});c.order='';var d=/([a-zA-Z]+)\(\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*(?:[\s,]\s*([+-]?[\d\.]+)\s*[\s,]\s*([+-]?[\d\.]+)\s*[\s,]\s*([+-]?[\d\.]+)\s*)?)?)?\)/g;var e=d.exec(a);while(e){switch(e[1]){case'translate':c.order+='t';c.translateX=parseFloat(e[2]);c.translateY=(e[3]?parseFloat(e[3]):0);break;case'scale':c.order+='s';c.scaleX=parseFloat(e[2]);c.scaleY=(e[3]?parseFloat(e[3]):c.scaleX);break;case'rotate':c.order+='r';c.rotateA=parseFloat(e[2]);c.rotateX=(e[3]?parseFloat(e[3]):0);c.rotateY=(e[4]?parseFloat(e[4]):0);break;case'skewX':c.order+='x';c.skewX=parseFloat(e[2]);break;case'skewY':c.order+='y';c.skewY=parseFloat(e[2]);break;case'matrix':c.order+='m';c.matrix=[parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6]),parseFloat(e[7])];break}e=d.exec(a)}if(c.order=='m'&&Math.abs(c.matrix[0])==Math.abs(c.matrix[3])&&c.matrix[1]!=0&&Math.abs(c.matrix[1])==Math.abs(c.matrix[2])){var f=Math.acos(c.matrix[0])*180/Math.PI;f=(c.matrix[1]<0?360-f:f);c.order='rt';c.rotateA=f;c.rotateX=c.rotateY=0;c.translateX=c.matrix[4];c.translateY=c.matrix[5]}return c}$.each(['fill','stroke'],function(i,e){var f=e.charAt(0).toUpperCase()+e.substr(1);$.fx.step['svg'+f]=$.fx.step['svg-'+e]=function(a){if(!a.set){a.start=$.svg._getColour(a.elem,e);var b=(a.end=='none');a.end=(b?$.svg._getColour(a.elem.parentNode,e):$.svg._getRGB(a.end));a.end[3]=b;$(a.elem).css(e,'');a.set=true}var c=a.elem.attributes.getNamedItem(e);var d='rgb('+[Math.min(Math.max(parseInt((a.pos*(a.end[0]-a.start[0]))+a.start[0],10),0),255),Math.min(Math.max(parseInt((a.pos*(a.end[1]-a.start[1]))+a.start[1],10),0),255),Math.min(Math.max(parseInt((a.pos*(a.end[2]-a.start[2]))+a.start[2],10),0),255)].join(',')+')';d=(a.end[3]&&a.state==1?'none':d);(c?c.nodeValue=d:a.elem.setAttribute(e,d))}});$.svg._getColour=function(a,b){a=$(a);var c;do{c=a.attr(b)||a.css(b);if((c!=''&&c!='none')||a.hasClass($.svg.markerClassName)){break}}while(a=a.parent());return $.svg._getRGB(c)};$.svg._getRGB=function(a){var b;if(a&&a.constructor==Array){return(a.length==3||a.length==4?a:h['none'])}if(b=/^rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)$/.exec(a)){return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10)]}if(b=/^rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)$/.exec(a)){return[parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55]}if(b=/^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(a)){return[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16)]}if(b=/^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(a)){return[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16)]}return h[$.trim(a).toLowerCase()]||h['none']};var h={'':[255,255,255,1],none:[255,255,255,1],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}})(jQuery);

/*
 AngularJS v1.1.5
 (c) 2010-2012 Google, Inc. http://angularjs.org
 License: MIT
 */
(function(M,T,p){'use strict';function lc(){var b=M.angular;M.angular=mc;return b}function Xa(b){return!b||typeof b.length!=="number"?!1:typeof b.hasOwnProperty!="function"&&typeof b.constructor!="function"?!0:b instanceof R||ga&&b instanceof ga||Ea.call(b)!=="[object Object]"||typeof b.callee==="function"}function n(b,a,c){var d;if(b)if(H(b))for(d in b)d!="prototype"&&d!="length"&&d!="name"&&b.hasOwnProperty(d)&&a.call(c,b[d],d);else if(b.forEach&&b.forEach!==n)b.forEach(a,c);else if(Xa(b))for(d=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        0;d<b.length;d++)a.call(c,b[d],d);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function qb(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}function nc(b,a,c){for(var d=qb(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function rb(b){return function(a,c){b(c,a)}}function Fa(){for(var b=ba.length,a;b;){b--;a=ba[b].charCodeAt(0);if(a==57)return ba[b]="A",ba.join("");if(a==90)ba[b]="0";else return ba[b]=String.fromCharCode(a+1),ba.join("")}ba.unshift("0");
    return ba.join("")}function sb(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function t(b){var a=b.$$hashKey;n(arguments,function(a){a!==b&&n(a,function(a,c){b[c]=a})});sb(b,a);return b}function N(b){return parseInt(b,10)}function tb(b,a){return t(new (t(function(){},{prototype:b})),a)}function q(){}function qa(b){return b}function S(b){return function(){return b}}function C(b){return typeof b=="undefined"}function B(b){return typeof b!="undefined"}function L(b){return b!=null&&typeof b=="object"}function E(b){return typeof b==
    "string"}function Ya(b){return typeof b=="number"}function ra(b){return Ea.apply(b)=="[object Date]"}function F(b){return Ea.apply(b)=="[object Array]"}function H(b){return typeof b=="function"}function sa(b){return b&&b.document&&b.location&&b.alert&&b.setInterval}function U(b){return E(b)?b.replace(/^\s*/,"").replace(/\s*$/,""):b}function oc(b){return b&&(b.nodeName||b.bind&&b.find)}function Za(b,a,c){var d=[];n(b,function(b,g,i){d.push(a.call(c,b,g,i))});return d}function Ga(b,a){if(b.indexOf)return b.indexOf(a);
    for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function ta(b,a){var c=Ga(b,a);c>=0&&b.splice(c,1);return a}function V(b,a){if(sa(b)||b&&b.$evalAsync&&b.$watch)throw Error("Can't copy Window or Scope");if(a){if(b===a)throw Error("Can't copy equivalent objects or arrays");if(F(b))for(var c=a.length=0;c<b.length;c++)a.push(V(b[c]));else{c=a.$$hashKey;n(a,function(b,c){delete a[c]});for(var d in b)a[d]=V(b[d]);sb(a,c)}}else(a=b)&&(F(b)?a=V(b,[]):ra(b)?a=new Date(b.getTime()):L(b)&&(a=V(b,{})));
    return a}function pc(b,a){var a=a||{},c;for(c in b)b.hasOwnProperty(c)&&c.substr(0,2)!=="$$"&&(a[c]=b[c]);return a}function ia(b,a){if(b===a)return!0;if(b===null||a===null)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&c=="object")if(F(b)){if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ia(b[d],a[d]))return!1;return!0}}else if(ra(b))return ra(a)&&b.getTime()==a.getTime();else{if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||sa(b)||sa(a))return!1;c={};for(d in b)if(!(d.charAt(0)===
    "$"||H(b[d]))){if(!ia(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c[d]&&d.charAt(0)!=="$"&&a[d]!==p&&!H(a[d]))return!1;return!0}return!1}function $a(b,a){var c=arguments.length>2?ka.call(arguments,2):[];return H(a)&&!(a instanceof RegExp)?c.length?function(){return arguments.length?a.apply(b,c.concat(ka.call(arguments,0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}:a}function qc(b,a){var c=a;/^\$+/.test(b)?c=p:sa(a)?c="$WINDOW":a&&T===a?c="$DOCUMENT":a&&a.$evalAsync&&
    a.$watch&&(c="$SCOPE");return c}function ha(b,a){return JSON.stringify(b,qc,a?"  ":null)}function ub(b){return E(b)?JSON.parse(b):b}function ua(b){b&&b.length!==0?(b=I(""+b),b=!(b=="f"||b=="0"||b=="false"||b=="no"||b=="n"||b=="[]")):b=!1;return b}function va(b){b=w(b).clone();try{b.html("")}catch(a){}var c=w("<div>").append(b).html();try{return b[0].nodeType===3?I(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+I(b)})}catch(d){return I(c)}}function vb(b){var a={},c,d;n((b||
    "").split("&"),function(b){b&&(c=b.split("="),d=decodeURIComponent(c[0]),a[d]=B(c[1])?decodeURIComponent(c[1]):!0)});return a}function wb(b){var a=[];n(b,function(b,d){a.push(wa(d,!0)+(b===!0?"":"="+wa(b,!0)))});return a.length?a.join("&"):""}function ab(b){return wa(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function wa(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function rc(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              a){function c(a){a&&d.push(a)}var d=[b],e,g,i=["ng:app","ng-app","x-ng-app","data-ng-app"],f=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;n(i,function(a){i[a]=!0;c(T.getElementById(a));a=a.replace(":","\\:");b.querySelectorAll&&(n(b.querySelectorAll("."+a),c),n(b.querySelectorAll("."+a+"\\:"),c),n(b.querySelectorAll("["+a+"]"),c))});n(d,function(a){if(!e){var b=f.exec(" "+a.className+" ");b?(e=a,g=(b[2]||"").replace(/\s+/g,",")):n(a.attributes,function(b){if(!e&&i[b.name])e=a,g=b.value})}});e&&a(e,g?[g]:[])}
    function xb(b,a){var c=function(){b=w(b);a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");var c=yb(a);c.invoke(["$rootScope","$rootElement","$compile","$injector","$animator",function(a,b,c,d,e){a.$apply(function(){b.data("$injector",d);c(b)(a)});e.enabled(!0)}]);return c},d=/^NG_DEFER_BOOTSTRAP!/;if(M&&!d.test(M.name))return c();M.name=M.name.replace(d,"");Ha.resumeBootstrap=function(b){n(b,function(b){a.push(b)});c()}}function bb(b,a){a=a||"_";return b.replace(sc,
        function(b,d){return(d?a:"")+b.toLowerCase()})}function cb(b,a,c){if(!b)throw Error("Argument '"+(a||"?")+"' is "+(c||"required"));return b}function xa(b,a,c){c&&F(b)&&(b=b[b.length-1]);cb(H(b),a,"not a function, got "+(b&&typeof b=="object"?b.constructor.name||"Object":typeof b));return b}function tc(b){function a(a,b,e){return a[b]||(a[b]=e())}return a(a(b,"angular",Object),"module",function(){var b={};return function(d,e,g){e&&b.hasOwnProperty(d)&&(b[d]=null);return a(b,d,function(){function a(c,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              d,e){return function(){b[e||"push"]([c,d,arguments]);return m}}if(!e)throw Error("No module: "+d);var b=[],c=[],j=a("$injector","invoke"),m={_invokeQueue:b,_runBlocks:c,requires:e,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animationProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider",
        "directive"),config:j,run:function(a){c.push(a);return this}};g&&j(g);return m})}})}function Ia(b){return b.replace(uc,function(a,b,d,e){return e?d.toUpperCase():d}).replace(vc,"Moz$1")}function db(b,a){function c(){var e;for(var b=[this],c=a,i,f,h,j,m,k;b.length;){i=b.shift();f=0;for(h=i.length;f<h;f++){j=w(i[f]);c?j.triggerHandler("$destroy"):c=!c;m=0;for(e=(k=j.children()).length,j=e;m<j;m++)b.push(ga(k[m]))}}return d.apply(this,arguments)}var d=ga.fn[b],d=d.$original||d;c.$original=d;ga.fn[b]=
        c}function R(b){if(b instanceof R)return b;if(!(this instanceof R)){if(E(b)&&b.charAt(0)!="<")throw Error("selectors not implemented");return new R(b)}if(E(b)){var a=T.createElement("div");a.innerHTML="<div>&#160;</div>"+b;a.removeChild(a.firstChild);eb(this,a.childNodes);this.remove()}else eb(this,b)}function fb(b){return b.cloneNode(!0)}function ya(b){zb(b);for(var a=0,b=b.childNodes||[];a<b.length;a++)ya(b[a])}function Ab(b,a,c){var d=ca(b,"events");ca(b,"handle")&&(C(a)?n(d,function(a,c){gb(b,
        c,a);delete d[c]}):C(c)?(gb(b,a,d[a]),delete d[a]):ta(d[a],c))}function zb(b){var a=b[Ja],c=Ka[a];c&&(c.handle&&(c.events.$destroy&&c.handle({},"$destroy"),Ab(b)),delete Ka[a],b[Ja]=p)}function ca(b,a,c){var d=b[Ja],d=Ka[d||-1];if(B(c))d||(b[Ja]=d=++wc,d=Ka[d]={}),d[a]=c;else return d&&d[a]}function Bb(b,a,c){var d=ca(b,"data"),e=B(c),g=!e&&B(a),i=g&&!L(a);!d&&!i&&ca(b,"data",d={});if(e)d[a]=c;else if(g)if(i)return d&&d[a];else t(d,a);else return d}function La(b,a){return(" "+b.className+" ").replace(/[\n\t]/g,
        " ").indexOf(" "+a+" ")>-1}function Cb(b,a){a&&n(a.split(" "),function(a){b.className=U((" "+b.className+" ").replace(/[\n\t]/g," ").replace(" "+U(a)+" "," "))})}function Db(b,a){a&&n(a.split(" "),function(a){if(!La(b,a))b.className=U(b.className+" "+U(a))})}function eb(b,a){if(a)for(var a=!a.nodeName&&B(a.length)&&!sa(a)?a:[a],c=0;c<a.length;c++)b.push(a[c])}function Eb(b,a){return Ma(b,"$"+(a||"ngController")+"Controller")}function Ma(b,a,c){b=w(b);for(b[0].nodeType==9&&(b=b.find("html"));b.length;){if(c=
        b.data(a))return c;b=b.parent()}}function Fb(b,a){var c=Na[a.toLowerCase()];return c&&Gb[b.nodeName]&&c}function xc(b,a){var c=function(c,e){if(!c.preventDefault)c.preventDefault=function(){c.returnValue=!1};if(!c.stopPropagation)c.stopPropagation=function(){c.cancelBubble=!0};if(!c.target)c.target=c.srcElement||T;if(C(c.defaultPrevented)){var g=c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;g.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=function(){return c.defaultPrevented||
        c.returnValue==!1};n(a[e||c.type],function(a){a.call(b,c)});Z<=8?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function la(b){var a=typeof b,c;if(a=="object"&&b!==null)if(typeof(c=b.$$hashKey)=="function")c=b.$$hashKey();else{if(c===p)c=b.$$hashKey=Fa()}else c=b;return a+":"+c}function za(b){n(b,this.put,this)}function Hb(b){var a,c;if(typeof b=="function"){if(!(a=b.$inject))a=
        [],c=b.toString().replace(yc,""),c=c.match(zc),n(c[1].split(Ac),function(b){b.replace(Bc,function(b,c,d){a.push(d)})}),b.$inject=a}else F(b)?(c=b.length-1,xa(b[c],"fn"),a=b.slice(0,c)):xa(b,"fn",!0);return a}function yb(b){function a(a){return function(b,c){if(L(b))n(b,rb(a));else return a(b,c)}}function c(a,b){if(H(b)||F(b))b=k.instantiate(b);if(!b.$get)throw Error("Provider "+a+" must define $get factory method.");return m[a+f]=b}function d(a,b){return c(a,{$get:b})}function e(a){var b=[];n(a,function(a){if(!j.get(a))if(j.put(a,
        !0),E(a)){var c=Aa(a);b=b.concat(e(c.requires)).concat(c._runBlocks);try{for(var d=c._invokeQueue,c=0,f=d.length;c<f;c++){var g=d[c],o=k.get(g[0]);o[g[1]].apply(o,g[2])}}catch(h){throw h.message&&(h.message+=" from "+a),h;}}else if(H(a))try{b.push(k.invoke(a))}catch(l){throw l.message&&(l.message+=" from "+a),l;}else if(F(a))try{b.push(k.invoke(a))}catch(i){throw i.message&&(i.message+=" from "+String(a[a.length-1])),i;}else xa(a,"module")});return b}function g(a,b){function c(d){if(typeof d!=="string")throw Error("Service name expected");
        if(a.hasOwnProperty(d)){if(a[d]===i)throw Error("Circular dependency: "+h.join(" <- "));return a[d]}else try{return h.unshift(d),a[d]=i,a[d]=b(d)}finally{h.shift()}}function d(a,b,e){var f=[],j=Hb(a),g,o,h;o=0;for(g=j.length;o<g;o++)h=j[o],f.push(e&&e.hasOwnProperty(h)?e[h]:c(h));a.$inject||(a=a[g]);switch(b?-1:f.length){case 0:return a();case 1:return a(f[0]);case 2:return a(f[0],f[1]);case 3:return a(f[0],f[1],f[2]);case 4:return a(f[0],f[1],f[2],f[3]);case 5:return a(f[0],f[1],f[2],f[3],f[4]);
        case 6:return a(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6]);case 8:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7]);case 9:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8]);case 10:return a(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9]);default:return a.apply(b,f)}}return{invoke:d,instantiate:function(a,b){var c=function(){},e;c.prototype=(F(a)?a[a.length-1]:a).prototype;c=new c;e=d(a,c,b);return L(e)?e:c},get:c,annotate:Hb,has:function(b){return m.hasOwnProperty(b+
        f)||a.hasOwnProperty(b)}}}var i={},f="Provider",h=[],j=new za,m={$provide:{provider:a(c),factory:a(d),service:a(function(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}),value:a(function(a,b){return d(a,S(b))}),constant:a(function(a,b){m[a]=b;l[a]=b}),decorator:function(a,b){var c=k.get(a+f),d=c.$get;c.$get=function(){var a=u.invoke(d,c);return u.invoke(b,null,{$delegate:a})}}}},k=m.$injector=g(m,function(){throw Error("Unknown provider: "+h.join(" <- "));}),l={},u=l.$injector=
        g(l,function(a){a=k.get(a+f);return u.invoke(a.$get,a)});n(e(b),function(a){u.invoke(a||q)});return u}function Cc(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;n(a,function(a){!b&&I(a.nodeName)==="a"&&(b=a)});return b}function g(){var b=c.hash(),d;b?(d=i.getElementById(b))?d.scrollIntoView():(d=e(i.getElementsByName(b)))?d.scrollIntoView():b==="top"&&a.scrollTo(0,0):a.scrollTo(0,0)}var i=a.document;b&&d.$watch(function(){return c.hash()},
        function(){d.$evalAsync(g)});return g}]}function Ib(b){this.register=function(a,c){b.factory(Ia(a)+"Animation",c)};this.$get=["$injector",function(a){return function(b){if(b&&(b=Ia(b)+"Animation",a.has(b)))return a.get(b)}}]}function Dc(b,a,c,d){function e(a){try{a.apply(null,ka.call(arguments,1))}finally{if(o--,o===0)for(;z.length;)try{z.pop()()}catch(b){c.error(b)}}}function g(a,b){(function s(){n(r,function(a){a()});y=b(s,a)})()}function i(){x!=f.url()&&(x=f.url(),n(v,function(a){a(f.url())}))}
        var f=this,h=a[0],j=b.location,m=b.history,k=b.setTimeout,l=b.clearTimeout,u={};f.isMock=!1;var o=0,z=[];f.$$completeOutstandingRequest=e;f.$$incOutstandingRequestCount=function(){o++};f.notifyWhenNoOutstandingRequests=function(a){n(r,function(a){a()});o===0?a():z.push(a)};var r=[],y;f.addPollFn=function(a){C(y)&&g(100,k);r.push(a);return a};var x=j.href,W=a.find("base");f.url=function(a,b){if(a){if(x!=a)return x=a,d.history?b?m.replaceState(null,"",a):(m.pushState(null,"",a),W.attr("href",W.attr("href"))):
            b?j.replace(a):j.href=a,f}else return j.href.replace(/%27/g,"'")};var v=[],A=!1;f.onUrlChange=function(a){A||(d.history&&w(b).bind("popstate",i),d.hashchange?w(b).bind("hashchange",i):f.addPollFn(i),A=!0);v.push(a);return a};f.baseHref=function(){var a=W.attr("href");return a?a.replace(/^https?\:\/\/[^\/]*/,""):""};var G={},D="",$=f.baseHref();f.cookies=function(a,b){var d,e,f,j;if(a)if(b===p)h.cookie=escape(a)+"=;path="+$+";expires=Thu, 01 Jan 1970 00:00:00 GMT";else{if(E(b))d=(h.cookie=escape(a)+
            "="+escape(b)+";path="+$).length+1,d>4096&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!")}else{if(h.cookie!==D){D=h.cookie;d=D.split("; ");G={};for(f=0;f<d.length;f++)e=d[f],j=e.indexOf("="),j>0&&(a=unescape(e.substring(0,j)),G[a]===p&&(G[a]=unescape(e.substring(j+1))))}return G}};f.defer=function(a,b){var c;o++;c=k(function(){delete u[c];e(a)},b||0);u[c]=!0;return c};f.defer.cancel=function(a){return u[a]?(delete u[a],l(a),e(q),!0):!1}}function Ec(){this.$get=
        ["$window","$log","$sniffer","$document",function(b,a,c,d){return new Dc(b,d,a,c)}]}function Fc(){this.$get=function(){function b(b,d){function e(a){if(a!=k){if(l){if(l==a)l=a.n}else l=a;g(a.n,a.p);g(a,k);k=a;k.n=null}}function g(a,b){if(a!=b){if(a)a.p=b;if(b)b.n=a}}if(b in a)throw Error("cacheId "+b+" taken");var i=0,f=t({},d,{id:b}),h={},j=d&&d.capacity||Number.MAX_VALUE,m={},k=null,l=null;return a[b]={put:function(a,b){var c=m[a]||(m[a]={key:a});e(c);if(!C(b))return a in h||i++,h[a]=b,i>j&&this.remove(l.key),
        b},get:function(a){var b=m[a];if(b)return e(b),h[a]},remove:function(a){var b=m[a];if(b){if(b==k)k=b.p;if(b==l)l=b.n;g(b.n,b.p);delete m[a];delete h[a];i--}},removeAll:function(){h={};i=0;m={};k=l=null},destroy:function(){m=f=h=null;delete a[b]},info:function(){return t({},f,{size:i})}}}var a={};b.info=function(){var b={};n(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};return b}}function Gc(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function Jb(b){var a=
    {},c="Directive",d=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,e=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,g="Template must have exactly one root element. was: ",i=/^\s*(https?|ftp|mailto|file):/;this.directive=function h(d,e){E(d)?(cb(e,"directive"),a.hasOwnProperty(d)||(a[d]=[],b.factory(d+c,["$injector","$exceptionHandler",function(b,c){var e=[];n(a[d],function(a){try{var g=b.invoke(a);if(H(g))g={compile:S(g)};else if(!g.compile&&g.link)g.compile=S(g.link);g.priority=g.priority||0;g.name=g.name||d;g.require=
        g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(h){c(h)}});return e}])),a[d].push(e)):n(d,rb(h));return this};this.urlSanitizationWhitelist=function(a){return B(a)?(i=a,this):i};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(b,j,m,k,l,u,o,z,r){function y(a,b,c){a instanceof w||(a=w(a));n(a,function(b,c){b.nodeType==3&&b.nodeValue.match(/\S+/)&&(a[c]=w(b).wrap("<span></span>").parent()[0])});
        var d=W(a,b,a,c);return function(b,c){cb(b,"scope");for(var e=c?Ba.clone.call(a):a,j=0,g=e.length;j<g;j++){var h=e[j];(h.nodeType==1||h.nodeType==9)&&e.eq(j).data("$scope",b)}x(e,"ng-scope");c&&c(e,b);d&&d(b,e,e);return e}}function x(a,b){try{a.addClass(b)}catch(c){}}function W(a,b,c,d){function e(a,c,d,g){var h,i,k,l,o,m,u,z=[];o=0;for(m=c.length;o<m;o++)z.push(c[o]);u=o=0;for(m=j.length;o<m;u++)i=z[u],c=j[o++],h=j[o++],c?(c.scope?(k=a.$new(L(c.scope)),w(i).data("$scope",k)):k=a,(l=c.transclude)||
        !g&&b?c(h,k,i,d,function(b){return function(c){var d=a.$new();d.$$transcluded=!0;return b(d,c).bind("$destroy",$a(d,d.$destroy))}}(l||b)):c(h,k,i,p,g)):h&&h(a,i.childNodes,p,g)}for(var j=[],g,h,k,i=0;i<a.length;i++)h=new ma,g=v(a[i],[],h,d),h=(g=g.length?A(g,a[i],h,b,c):null)&&g.terminal||!a[i].childNodes||!a[i].childNodes.length?null:W(a[i].childNodes,g?g.transclude:b),j.push(g),j.push(h),k=k||g||h;return k?e:null}function v(a,b,c,j){var g=c.$attr,h;switch(a.nodeType){case 1:G(b,da(hb(a).toLowerCase()),
        "E",j);var i,k,l;h=a.attributes;for(var o=0,m=h&&h.length;o<m;o++)if(i=h[o],i.specified)k=i.name,l=da(k),Y.test(l)&&(k=l.substr(6).toLowerCase()),l=da(k.toLowerCase()),g[l]=k,c[l]=i=U(Z&&k=="href"?decodeURIComponent(a.getAttribute(k,2)):i.value),Fb(a,l)&&(c[l]=!0),s(a,b,i,l),G(b,l,"A",j);a=a.className;if(E(a)&&a!=="")for(;h=e.exec(a);)l=da(h[2]),G(b,l,"C",j)&&(c[l]=U(h[3])),a=a.substr(h.index+h[0].length);break;case 3:P(b,a.nodeValue);break;case 8:try{if(h=d.exec(a.nodeValue))l=da(h[1]),G(b,l,"M",
        j)&&(c[l]=U(h[2]))}catch(u){}}b.sort(K);return b}function A(a,b,c,d,e){function h(a,b){if(a)a.require=s.require,z.push(a);if(b)b.require=s.require,ea.push(b)}function i(a,b){var c,d="data",e=!1;if(E(a)){for(;(c=a.charAt(0))=="^"||c=="?";)a=a.substr(1),c=="^"&&(d="inheritedData"),e=e||c=="?";c=b[d]("$"+a+"Controller");if(!c&&!e)throw Error("No controller: "+a);}else F(a)&&(c=[],n(a,function(a){c.push(i(a,b))}));return c}function k(a,d,e,g,h){var l,v,r,D,x;l=b===e?c:pc(c,new ma(w(e),c.$attr));v=l.$$element;
        if(K){var y=/^\s*([@=&])(\??)\s*(\w*)\s*$/,s=d.$parent||d;n(K.scope,function(a,b){var c=a.match(y)||[],e=c[3]||b,g=c[2]=="?",c=c[1],h,k,i;d.$$isolateBindings[b]=c+e;switch(c){case "@":l.$observe(e,function(a){d[b]=a});l.$$observers[e].$$scope=s;l[e]&&(d[b]=j(l[e])(s));break;case "=":if(g&&!l[e])break;k=u(l[e]);i=k.assign||function(){h=d[b]=k(s);throw Error(Kb+l[e]+" (directive: "+K.name+")");};h=d[b]=k(s);d.$watch(function(){var a=k(s);a!==d[b]&&(a!==h?h=d[b]=a:i(s,a=h=d[b]));return a});break;case "&":k=
            u(l[e]);d[b]=function(a){return k(s,a)};break;default:throw Error("Invalid isolate scope definition for directive "+K.name+": "+a);}})}q&&n(q,function(a){var b={$scope:d,$element:v,$attrs:l,$transclude:h};x=a.controller;x=="@"&&(x=l[a.name]);v.data("$"+a.name+"Controller",o(x,b))});g=0;for(r=z.length;g<r;g++)try{D=z[g],D(d,v,l,D.require&&i(D.require,v))}catch(Hc){m(Hc,va(v))}a&&a(d,e.childNodes,p,h);g=0;for(r=ea.length;g<r;g++)try{D=ea[g],D(d,v,l,D.require&&i(D.require,v))}catch(J){m(J,va(v))}}for(var l=
        -Number.MAX_VALUE,z=[],ea=[],r=null,K=null,W=null,J=c.$$element=w(b),s,A,Y,G,P=d,q,na,t,B=0,C=a.length;B<C;B++){s=a[B];Y=p;if(l>s.priority)break;if(t=s.scope)O("isolated scope",K,s,J),L(t)&&(x(J,"ng-isolate-scope"),K=s),x(J,"ng-scope"),r=r||s;A=s.name;if(t=s.controller)q=q||{},O("'"+A+"' controller",q[A],s,J),q[A]=s;if(t=s.transclude)O("transclusion",G,s,J),G=s,l=s.priority,t=="element"?(Y=w(b),J=c.$$element=w(T.createComment(" "+A+": "+c[A]+" ")),b=J[0],ja(e,w(Y[0]),b),P=y(Y,d,l)):(Y=w(fb(b)).contents(),
        J.html(""),P=y(Y,d));if(s.template)if(O("template",W,s,J),W=s,t=H(s.template)?s.template(J,c):s.template,t=Lb(t),s.replace){Y=w("<div>"+U(t)+"</div>").contents();b=Y[0];if(Y.length!=1||b.nodeType!==1)throw Error(g+t);ja(e,J,b);A={$attr:{}};a=a.concat(v(b,a.splice(B+1,a.length-(B+1)),A));D(c,A);C=a.length}else J.html(t);if(s.templateUrl)O("template",W,s,J),W=s,k=$(a.splice(B,a.length-B),k,J,c,e,s.replace,P),C=a.length;else if(s.compile)try{na=s.compile(J,c,P),H(na)?h(null,na):na&&h(na.pre,na.post)}catch(I){m(I,
        va(J))}if(s.terminal)k.terminal=!0,l=Math.max(l,s.priority)}k.scope=r&&r.scope;k.transclude=G&&P;return k}function G(d,e,j,g){var l=!1;if(a.hasOwnProperty(e))for(var k,e=b.get(e+c),i=0,o=e.length;i<o;i++)try{if(k=e[i],(g===p||g>k.priority)&&k.restrict.indexOf(j)!=-1)d.push(k),l=!0}catch(u){m(u)}return l}function D(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;n(a,function(d,e){e.charAt(0)!="$"&&(b[e]&&(d+=(e==="style"?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});n(b,function(b,j){j=="class"?(x(e,b),a["class"]=
        (a["class"]?a["class"]+" ":"")+b):j=="style"?e.attr("style",e.attr("style")+";"+b):j.charAt(0)!="$"&&!a.hasOwnProperty(j)&&(a[j]=b,d[j]=c[j])})}function $(a,b,c,d,e,j,h){var i=[],o,m,u=c[0],z=a.shift(),r=t({},z,{controller:null,templateUrl:null,transclude:null,scope:null}),z=H(z.templateUrl)?z.templateUrl(c,d):z.templateUrl;c.html("");k.get(z,{cache:l}).success(function(l){var k,z,l=Lb(l);if(j){z=w("<div>"+U(l)+"</div>").contents();k=z[0];if(z.length!=1||k.nodeType!==1)throw Error(g+l);l={$attr:{}};
        ja(e,c,k);v(k,a,l);D(d,l)}else k=u,c.html(l);a.unshift(r);o=A(a,k,d,h);for(m=W(c[0].childNodes,h);i.length;){var ea=i.shift(),l=i.shift();z=i.shift();var x=i.shift(),y=k;l!==u&&(y=fb(k),ja(z,w(l),y));o(function(){b(m,ea,y,e,x)},ea,y,e,x)}i=null}).error(function(a,b,c,d){throw Error("Failed to load template: "+d.url);});return function(a,c,d,e,j){i?(i.push(c),i.push(d),i.push(e),i.push(j)):o(function(){b(m,c,d,e,j)},c,d,e,j)}}function K(a,b){return b.priority-a.priority}function O(a,b,c,d){if(b)throw Error("Multiple directives ["+
        b.name+", "+c.name+"] asking for "+a+" on: "+va(d));}function P(a,b){var c=j(b,!0);c&&a.push({priority:0,compile:S(function(a,b){var d=b.parent(),e=d.data("$binding")||[];e.push(c);x(d.data("$binding",e),"ng-binding");a.$watch(c,function(a){b[0].nodeValue=a})})})}function s(a,b,c,d){var e=j(c,!0);e&&b.push({priority:100,compile:S(function(a,b,c){b=c.$$observers||(c.$$observers={});if(e=j(c[d],!0))c[d]=e(a),(b[d]||(b[d]=[])).$$inter=!0,(c.$$observers&&c.$$observers[d].$$scope||a).$watch(e,function(a){c.$set(d,
        a)})})})}function ja(a,b,c){var d=b[0],e=d.parentNode,j,g;if(a){j=0;for(g=a.length;j<g;j++)if(a[j]==d){a[j]=c;break}}e&&e.replaceChild(c,d);c[w.expando]=d[w.expando];b[0]=c}var ma=function(a,b){this.$$element=a;this.$attr=b||{}};ma.prototype={$normalize:da,$set:function(a,b,c,d){var e=Fb(this.$$element[0],a),j=this.$$observers;e&&(this.$$element.prop(a,b),d=e);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=bb(a,"-"));if(hb(this.$$element[0])==="A"&&a==="href")q.setAttribute("href",
        b),e=q.href,e.match(i)||(this[a]=b="unsafe:"+e);c!==!1&&(b===null||b===p?this.$$element.removeAttr(d):this.$$element.attr(d,b));j&&n(j[a],function(a){try{a(b)}catch(c){m(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);z.$evalAsync(function(){e.$$inter||b(c[a])});return b}};var q=r[0].createElement("a"),ea=j.startSymbol(),J=j.endSymbol(),Lb=ea=="{{"||J=="}}"?qa:function(a){return a.replace(/\{\{/g,ea).replace(/}}/g,J)},Y=/^ngAttr[A-Z]/;return y}]}
    function da(b){return Ia(b.replace(Ic,""))}function Jc(){var b={},a=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,d){L(a)?t(b,a):b[a]=d};this.$get=["$injector","$window",function(c,d){return function(e,g){var i,f;E(e)&&(f=e.match(a),i=f[1],f=f[3],e=b.hasOwnProperty(i)?b[i]:ib(g.$scope,i,!0)||ib(d,i,!0),xa(e,i,!0));i=c.instantiate(e,g);if(f){if(typeof g.$scope!=="object")throw Error('Can not export controller as "'+f+'". No scope object provided!');g.$scope[f]=i}return i}}]}function Kc(){this.$get=
        ["$window",function(b){return w(b.document)}]}function Lc(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Mc(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler",function(c,d){function e(e,h){for(var j,m,k=0,l=[],u=e.length,o=!1,z=[];k<u;)(j=e.indexOf(b,k))!=-1&&(m=e.indexOf(a,j+g))!=-1?(k!=j&&l.push(e.substring(k,j)),l.push(k=c(o=e.substring(j+g,
        m))),k.exp=o,k=m+i,o=!0):(k!=u&&l.push(e.substring(k)),k=u);if(!(u=l.length))l.push(""),u=1;if(!h||o)return z.length=u,k=function(a){try{for(var b=0,c=u,j;b<c;b++){if(typeof(j=l[b])=="function")j=j(a),j==null||j==p?j="":typeof j!="string"&&(j=ha(j));z[b]=j}return z.join("")}catch(g){d(Error("Error while interpolating: "+e+"\n"+g.toString()))}},k.exp=e,k.parts=l,k}var g=b.length,i=a.length;e.startSymbol=function(){return b};e.endSymbol=function(){return a};return e}]}function Mb(b){for(var b=b.split("/"),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      a=b.length;a--;)b[a]=ab(b[a]);return b.join("/")}function Nb(b,a){var c=jb.exec(b);a.$$protocol=c[1];a.$$host=c[3];a.$$port=N(c[5])||Oa[c[1]]||null}function Ob(b,a){var c=Pb.exec(b);a.$$path=decodeURIComponent(c[1]);a.$$search=vb(c[3]);a.$$hash=decodeURIComponent(c[5]||"");if(a.$$path&&a.$$path.charAt(0)!="/")a.$$path="/"+a.$$path}function fa(b,a,c){return a.indexOf(b)==0?a.substr(b.length):c}function Ca(b){var a=b.indexOf("#");return a==-1?b:b.substr(0,a)}function kb(b){return b.substr(0,Ca(b).lastIndexOf("/")+
        1)}function Qb(b,a){var a=a||"",c=kb(b);this.$$parse=function(a){var b={};Nb(a,b);var g=fa(c,a);if(!E(g))throw Error('Invalid url "'+a+'", missing path prefix "'+c+'".');Ob(g,b);t(this,b);if(!this.$$path)this.$$path="/";this.$$compose()};this.$$compose=function(){var a=wb(this.$$search),b=this.$$hash?"#"+ab(this.$$hash):"";this.$$url=Mb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;if((e=fa(b,d))!==p)return d=e,(e=fa(a,e))!==p?c+(fa("/",e)||e):
        b+d;else if((e=fa(c,d))!==p)return c+e;else if(c==d+"/")return c}}function lb(b,a){var c=kb(b);this.$$parse=function(d){Nb(d,this);var e=fa(b,d)||fa(c,d);if(!E(e))throw Error('Invalid url "'+d+'", does not start with "'+b+'".');e=e.charAt(0)=="#"?fa(a,e):e;if(!E(e))throw Error('Invalid url "'+d+'", missing hash prefix "'+a+'".');Ob(e,this);this.$$compose()};this.$$compose=function(){var c=wb(this.$$search),e=this.$$hash?"#"+ab(this.$$hash):"";this.$$url=Mb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=
        b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(Ca(b)==Ca(a))return a}}function Rb(b,a){lb.apply(this,arguments);var c=kb(b);this.$$rewrite=function(d){var e;if(b==Ca(d))return d;else if(e=fa(c,d))return b+a+e;else if(c===d+"/")return c}}function Pa(b){return function(){return this[b]}}function Sb(b,a){return function(c){if(C(c))return this[b];this[b]=a(c);this.$$compose();return this}}function Nc(){var b="",a=!1;this.hashPrefix=function(a){return B(a)?(b=a,this):b};this.html5Mode=function(b){return B(b)?
        (a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,g){function i(a){c.$broadcast("$locationChangeSuccess",f.absUrl(),a)}var f,h=d.baseHref(),j=d.url();a?(h=h?j.substring(0,j.indexOf("/",j.indexOf("//")+2))+h:j,e=e.history?Qb:Rb):(h=Ca(j),e=lb);f=new e(h,"#"+b);f.$$parse(f.$$rewrite(j));g.bind("click",function(a){if(!a.ctrlKey&&!(a.metaKey||a.which==2)){for(var b=w(a.target);I(b[0].nodeName)!=="a";)if(b[0]===g[0]||!(b=b.parent())[0])return;var e=b.prop("href"),
        j=f.$$rewrite(e);e&&!b.attr("target")&&j&&!a.isDefaultPrevented()&&(a.preventDefault(),j!=d.url()&&(f.$$parse(j),c.$apply(),M.angular["ff-684208-preventDefault"]=!0))}});f.absUrl()!=j&&d.url(f.absUrl(),!0);d.onUrlChange(function(a){f.absUrl()!=a&&(c.$broadcast("$locationChangeStart",a,f.absUrl()).defaultPrevented?d.url(f.absUrl()):(c.$evalAsync(function(){var b=f.absUrl();f.$$parse(a);i(b)}),c.$$phase||c.$digest()))});var m=0;c.$watch(function(){var a=d.url(),b=f.$$replace;if(!m||a!=f.absUrl())m++,
        c.$evalAsync(function(){c.$broadcast("$locationChangeStart",f.absUrl(),a).defaultPrevented?f.$$parse(a):(d.url(f.absUrl(),b),i(a))});f.$$replace=!1;return m});return f}]}function Oc(){var b=!0,a=this;this.debugEnabled=function(a){return B(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&a.stack.indexOf(a.message)===-1?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=
        c.console||{},e=b[a]||b.log||q;return e.apply?function(){var a=[];n(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,b)}}return{log:e("log"),warn:e("warn"),info:e("info"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function Pc(b,a){function c(a){return a.indexOf(r)!=-1}function d(a){a=a||1;return o+a<b.length?b.charAt(o+a):!1}function e(a){return"0"<=a&&a<="9"}function g(a){return a==" "||a=="\r"||a=="\t"||a=="\n"||
        a=="\u000b"||a=="\u00a0"}function i(a){return"a"<=a&&a<="z"||"A"<=a&&a<="Z"||"_"==a||a=="$"}function f(a){return a=="-"||a=="+"||e(a)}function h(a,c,d){d=d||o;throw Error("Lexer Error: "+a+" at column"+(B(c)?"s "+c+"-"+o+" ["+b.substring(c,d)+"]":" "+d)+" in expression ["+b+"].");}function j(){for(var a="",c=o;o<b.length;){var j=I(b.charAt(o));if(j=="."||e(j))a+=j;else{var g=d();if(j=="e"&&f(g))a+=j;else if(f(j)&&g&&e(g)&&a.charAt(a.length-1)=="e")a+=j;else if(f(j)&&(!g||!e(g))&&a.charAt(a.length-
        1)=="e")h("Invalid exponent");else break}o++}a*=1;l.push({index:c,text:a,json:!0,fn:function(){return a}})}function m(){for(var c="",d=o,f,j,h,k;o<b.length;){k=b.charAt(o);if(k=="."||i(k)||e(k))k=="."&&(f=o),c+=k;else break;o++}if(f)for(j=o;j<b.length;){k=b.charAt(j);if(k=="("){h=c.substr(f-d+1);c=c.substr(0,f-d);o=j;break}if(g(k))j++;else break}d={index:d,text:c};if(Da.hasOwnProperty(c))d.fn=d.json=Da[c];else{var m=Tb(c,a);d.fn=t(function(a,b){return m(a,b)},{assign:function(a,b){return Ub(a,c,b)}})}l.push(d);
        h&&(l.push({index:f,text:".",json:!1}),l.push({index:f+1,text:h,json:!1}))}function k(a){var c=o;o++;for(var d="",e=a,f=!1;o<b.length;){var j=b.charAt(o);e+=j;if(f)j=="u"?(j=b.substring(o+1,o+5),j.match(/[\da-f]{4}/i)||h("Invalid unicode escape [\\u"+j+"]"),o+=4,d+=String.fromCharCode(parseInt(j,16))):(f=Qc[j],d+=f?f:j),f=!1;else if(j=="\\")f=!0;else if(j==a){o++;l.push({index:c,text:e,string:d,json:!0,fn:function(){return d}});return}else d+=j;o++}h("Unterminated quote",c)}for(var l=[],u,o=0,z=[],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               r,y=":";o<b.length;){r=b.charAt(o);if(c("\"'"))k(r);else if(e(r)||c(".")&&e(d()))j();else if(i(r)){if(m(),"{,".indexOf(y)!=-1&&z[0]=="{"&&(u=l[l.length-1]))u.json=u.text.indexOf(".")==-1}else if(c("(){}[].,;:?"))l.push({index:o,text:r,json:":[,".indexOf(y)!=-1&&c("{[")||c("}]:,")}),c("{[")&&z.unshift(r),c("}]")&&z.shift(),o++;else if(g(r)){o++;continue}else{var x=r+d(),n=x+d(2),v=Da[r],A=Da[x],G=Da[n];G?(l.push({index:o,text:n,fn:G}),o+=3):A?(l.push({index:o,text:x,fn:A}),o+=2):v?(l.push({index:o,
        text:r,fn:v,json:"[,:".indexOf(y)!=-1&&c("+-")}),o+=1):h("Unexpected next character ",o,o+1)}y=r}return l}function Rc(b,a,c,d){function e(a,c){throw Error("Syntax Error: Token '"+c.text+"' "+a+" at column "+(c.index+1)+" of the expression ["+b+"] starting at ["+b.substring(c.index)+"].");}function g(){if(O.length===0)throw Error("Unexpected end of expression: "+b);return O[0]}function i(a,b,c,d){if(O.length>0){var e=O[0],f=e.text;if(f==a||f==b||f==c||f==d||!a&&!b&&!c&&!d)return e}return!1}function f(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 c,d,f){return(b=i(b,c,d,f))?(a&&!b.json&&e("is not valid json",b),O.shift(),b):!1}function h(a){f(a)||e("is unexpected, expecting ["+a+"]",i())}function j(a,b){return t(function(c,d){return a(c,d,b)},{constant:b.constant})}function m(a,b,c){return t(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})}function k(a,b,c){return t(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})}function l(){for(var a=[];;)if(O.length>0&&!i("}",")",";","]")&&a.push(w()),
        !f(";"))return a.length==1?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}}function u(){for(var a=f(),b=c(a.text),d=[];;)if(a=f(":"))d.push(P());else{var e=function(a,c,e){for(var e=[e],f=0;f<d.length;f++)e.push(d[f](a,c));return b.apply(a,e)};return function(){return e}}}function o(){var a=z(),b,c;if(f("?"))if(b=o(),c=f(":"))return m(a,b,o());else e("expected :",c);else return a}function z(){for(var a=r(),b;;)if(b=f("||"))a=k(a,b.fn,r());else return a}function r(){var a=
        y(),b;if(b=f("&&"))a=k(a,b.fn,r());return a}function y(){var a=x(),b;if(b=f("==","!=","===","!=="))a=k(a,b.fn,y());return a}function x(){var a;a=n();for(var b;b=f("+","-");)a=k(a,b.fn,n());if(b=f("<",">","<=",">="))a=k(a,b.fn,x());return a}function n(){for(var a=v(),b;b=f("*","/","%");)a=k(a,b.fn,v());return a}function v(){var a;return f("+")?A():(a=f("-"))?k($,a.fn,v()):(a=f("!"))?j(a.fn,v()):A()}function A(){var a;if(f("("))a=w(),h(")");else if(f("["))a=G();else if(f("{"))a=D();else{var b=f();(a=
        b.fn)||e("not a primary expression",b);if(b.json)a.constant=a.literal=!0}for(var c;b=f("(","[",".");)b.text==="("?(a=s(a,c),c=null):b.text==="["?(c=a,a=ma(a)):b.text==="."?(c=a,a=ja(a)):e("IMPOSSIBLE");return a}function G(){var a=[],b=!0;if(g().text!="]"){do{var c=P();a.push(c);c.constant||(b=!1)}while(f(","))}h("]");return t(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})}function D(){var a=[],b=!0;if(g().text!="}"){do{var c=f(),c=c.string||c.text;
        h(":");var d=P();a.push({key:c,value:d});d.constant||(b=!1)}while(f(","))}h("}");return t(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}var $=S(0),K,O=Pc(b,d),P=function(){var a=o(),c,d;return(d=f("="))?(a.assign||e("implies assignment but ["+b.substring(0,d.index)+"] can not be assigned to",d),c=o(),function(b,d){return a.assign(b,c(b,d),d)}):a},s=function(a,b){var c=[];if(g().text!=")"){do c.push(P());while(f(","))}h(")");return function(d,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         e){for(var f=[],j=b?b(d,e):d,g=0;g<c.length;g++)f.push(c[g](d,e));g=a(d,e,j)||q;return g.apply?g.apply(j,f):g(f[0],f[1],f[2],f[3],f[4])}},ja=function(a){var b=f().text,c=Tb(b,d);return t(function(b,d,e){return c(e||a(b,d),d)},{assign:function(c,d,e){return Ub(a(c,e),b,d)}})},ma=function(a){var b=P();h("]");return t(function(c,d){var e=a(c,d),f=b(c,d),j;if(!e)return p;if((e=e[f])&&e.then){j=e;if(!("$$v"in e))j.$$v=p,j.then(function(a){j.$$v=a});e=e.$$v}return e},{assign:function(c,d,e){return a(c,
        e)[b(c,e)]=d}})},w=function(){for(var a=P(),b;;)if(b=f("|"))a=k(a,b.fn,u());else return a};a?(P=z,s=ja=ma=w=function(){e("is not valid json",{text:b,index:0})},K=A()):K=l();O.length!==0&&e("is an unexpected token",O[0]);K.literal=!!K.literal;K.constant=!!K.constant;return K}function Ub(b,a,c){for(var a=a.split("."),d=0;a.length>1;d++){var e=a.shift(),g=b[e];g||(g={},b[e]=g);b=g}return b[a.shift()]=c}function ib(b,a,c){if(!a)return b;for(var a=a.split("."),d,e=b,g=a.length,i=0;i<g;i++)d=a[i],b&&(b=
        (e=b)[d]);return!c&&H(b)?$a(e,b):b}function Vb(b,a,c,d,e){return function(g,i){var f=i&&i.hasOwnProperty(b)?i:g,h;if(f===null||f===p)return f;if((f=f[b])&&f.then){if(!("$$v"in f))h=f,h.$$v=p,h.then(function(a){h.$$v=a});f=f.$$v}if(!a||f===null||f===p)return f;if((f=f[a])&&f.then){if(!("$$v"in f))h=f,h.$$v=p,h.then(function(a){h.$$v=a});f=f.$$v}if(!c||f===null||f===p)return f;if((f=f[c])&&f.then){if(!("$$v"in f))h=f,h.$$v=p,h.then(function(a){h.$$v=a});f=f.$$v}if(!d||f===null||f===p)return f;if((f=
        f[d])&&f.then){if(!("$$v"in f))h=f,h.$$v=p,h.then(function(a){h.$$v=a});f=f.$$v}if(!e||f===null||f===p)return f;if((f=f[e])&&f.then){if(!("$$v"in f))h=f,h.$$v=p,h.then(function(a){h.$$v=a});f=f.$$v}return f}}function Tb(b,a){if(mb.hasOwnProperty(b))return mb[b];var c=b.split("."),d=c.length,e;if(a)e=d<6?Vb(c[0],c[1],c[2],c[3],c[4]):function(a,b){var e=0,j;do j=Vb(c[e++],c[e++],c[e++],c[e++],c[e++])(a,b),b=p,a=j;while(e<d);return j};else{var g="var l, fn, p;\n";n(c,function(a,b){g+="if(s === null || s === undefined) return s;\nl=s;\ns="+
        (b?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\nif (s && s.then) {\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n'});g+="return s;";e=Function("s","k",g);e.toString=function(){return g}}return mb[b]=e}function Sc(){var b={};this.$get=["$filter","$sniffer",function(a,c){return function(d){switch(typeof d){case "string":return b.hasOwnProperty(d)?b[d]:b[d]=Rc(d,!1,a,c.csp);case "function":return d;default:return q}}}]}function Tc(){this.$get=
        ["$rootScope","$exceptionHandler",function(b,a){return Uc(function(a){b.$evalAsync(a)},a)}]}function Uc(b,a){function c(a){return a}function d(a){return i(a)}var e=function(){var f=[],h,j;return j={resolve:function(a){if(f){var c=f;f=p;h=g(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],h.then(a[0],a[1])})}},reject:function(a){j.resolve(i(a))},promise:{then:function(b,j){var g=e(),i=function(d){try{g.resolve((b||c)(d))}catch(e){a(e),g.reject(e)}},o=function(b){try{g.resolve((j||
            d)(b))}catch(c){a(c),g.reject(c)}};f?f.push([i,o]):h.then(i,o);return g.promise},always:function(a){function b(a,c){var d=e();c?d.resolve(a):d.reject(a);return d.promise}function d(e,f){var j=null;try{j=(a||c)()}catch(g){return b(g,!1)}return j&&j.then?j.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},g=function(a){return a&&a.then?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},
        i=function(a){return{then:function(c,j){var g=e();b(function(){g.resolve((j||d)(a))});return g.promise}}};return{defer:e,reject:i,when:function(f,h,j){var m=e(),k,l=function(b){try{return(h||c)(b)}catch(d){return a(d),i(d)}},u=function(b){try{return(j||d)(b)}catch(c){return a(c),i(c)}};b(function(){g(f).then(function(a){k||(k=!0,m.resolve(g(a).then(l,u)))},function(a){k||(k=!0,m.resolve(u(a)))})});return m.promise},all:function(a){var b=e(),c=0,d=F(a)?[]:{};n(a,function(a,e){c++;g(a).then(function(a){d.hasOwnProperty(e)||
    (d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});c===0&&b.resolve(d);return b.promise}}}function Vc(){var b={};this.when=function(a,c){b[a]=t({reloadOnSearch:!0,caseInsensitiveMatch:!1},c);if(a){var d=a[a.length-1]=="/"?a.substr(0,a.length-1):a+"/";b[d]={redirectTo:a}}return this};this.otherwise=function(a){this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(a,c,d,e,g,i,f){function h(a,b,c){for(var b=
        "^"+b.replace(/[-\/\\^$:*+?.()|[\]{}]/g,"\\$&")+"$",d="",e=[],f={},j=/\\([:*])(\w+)/g,g,i=0;(g=j.exec(b))!==null;){d+=b.slice(i,g.index);switch(g[1]){case ":":d+="([^\\/]*)";break;case "*":d+="(.*)"}e.push(g[2]);i=j.lastIndex}d+=b.substr(i);var h=a.match(RegExp(d,c.caseInsensitiveMatch?"i":""));h&&n(e,function(a,b){f[a]=h[b+1]});return h?f:null}function j(){var b=m(),j=u.current;if(b&&j&&b.$$route===j.$$route&&ia(b.pathParams,j.pathParams)&&!b.reloadOnSearch&&!l)j.params=b.params,V(j.params,d),a.$broadcast("$routeUpdate",
        j);else if(b||j)l=!1,a.$broadcast("$routeChangeStart",b,j),(u.current=b)&&b.redirectTo&&(E(b.redirectTo)?c.path(k(b.redirectTo,b.params)).search(b.params).replace():c.url(b.redirectTo(b.pathParams,c.path(),c.search())).replace()),e.when(b).then(function(){if(b){var a=t({},b.resolve),c;n(a,function(b,c){a[c]=E(b)?g.get(b):g.invoke(b)});if(B(c=b.template))H(c)&&(c=c(b.params));else if(B(c=b.templateUrl))if(H(c)&&(c=c(b.params)),B(c))b.loadedTemplateUrl=c,c=i.get(c,{cache:f}).then(function(a){return a.data});
        B(c)&&(a.$template=c);return e.all(a)}}).then(function(c){if(b==u.current){if(b)b.locals=c,V(b.params,d);a.$broadcast("$routeChangeSuccess",b,j)}},function(c){b==u.current&&a.$broadcast("$routeChangeError",b,j,c)})}function m(){var a,d;n(b,function(b,e){if(!d&&(a=h(c.path(),e,b)))d=tb(b,{params:t({},c.search(),a),pathParams:a}),d.$$route=b});return d||b[null]&&tb(b[null],{params:{},pathParams:{}})}function k(a,b){var c=[];n((a||"").split(":"),function(a,d){if(d==0)c.push(a);else{var e=a.match(/(\w+)(.*)/),
        f=e[1];c.push(b[f]);c.push(e[2]||"");delete b[f]}});return c.join("")}var l=!1,u={routes:b,reload:function(){l=!0;a.$evalAsync(j)}};a.$on("$locationChangeSuccess",j);return u}]}function Wc(){this.$get=S({})}function Xc(){var b=10;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse",function(a,c,d){function e(){this.$id=Fa();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;
        this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$listeners={};this.$$isolateBindings={}}function g(a){if(h.$$phase)throw Error(h.$$phase+" already in progress");h.$$phase=a}function i(a,b){var c=d(a);xa(c,b);return c}function f(){}e.prototype={$new:function(a){if(H(a))throw Error("API-CHANGE: Use $controller to instantiate controllers.");a?(a=new e,a.$root=this.$root):(a=function(){},a.prototype=this,a=new a,a.$id=Fa());a["this"]=a;a.$$listeners={};a.$parent=this;a.$$watchers=
        a.$$nextSibling=a.$$childHead=a.$$childTail=null;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,c){var d=i(a,"watch"),e=this.$$watchers,g={fn:b,last:f,get:d,exp:a,eq:!!c};if(!H(b)){var h=i(b||q,"listener");g.fn=function(a,b,c){h(c)}}if(typeof a=="string"&&d.constant){var r=g.fn;g.fn=function(a,b,c){r.call(this,a,b,c);ta(e,g)}}if(!e)e=this.$$watchers=[];e.unshift(g);return function(){ta(e,
        g)}},$watchCollection:function(a,b){var c=this,e,f,g=0,i=d(a),h=[],n={},x=0;return this.$watch(function(){f=i(c);var a,b;if(L(f))if(Xa(f)){if(e!==h)e=h,x=e.length=0,g++;a=f.length;if(x!==a)g++,e.length=x=a;for(b=0;b<a;b++)e[b]!==f[b]&&(g++,e[b]=f[b])}else{e!==n&&(e=n={},x=0,g++);a=0;for(b in f)f.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?e[b]!==f[b]&&(g++,e[b]=f[b]):(x++,e[b]=f[b],g++));if(x>a)for(b in g++,e)e.hasOwnProperty(b)&&!f.hasOwnProperty(b)&&(x--,delete e[b])}else e!==f&&(e=f,g++);return g},
        function(){b(f,e,c)})},$digest:function(){var a,d,e,i,u=this.$$asyncQueue,o,z,r=b,n,x=[],p,v;g("$digest");do{z=!1;for(n=this;u.length;)try{n.$eval(u.shift())}catch(A){c(A)}do{if(i=n.$$watchers)for(o=i.length;o--;)try{if(a=i[o],(d=a.get(n))!==(e=a.last)&&!(a.eq?ia(d,e):typeof d=="number"&&typeof e=="number"&&isNaN(d)&&isNaN(e)))z=!0,a.last=a.eq?V(d):d,a.fn(d,e===f?d:e,n),r<5&&(p=4-r,x[p]||(x[p]=[]),v=H(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,v+="; newVal: "+ha(d)+"; oldVal: "+ha(e),x[p].push(v))}catch(G){c(G)}if(!(i=
        n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}while(n=i);if(z&&!r--)throw h.$$phase=null,Error(b+" $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: "+ha(x));}while(z||u.length);h.$$phase=null},$destroy:function(){if(!(h==this||this.$$destroyed)){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;if(a.$$childHead==this)a.$$childHead=this.$$nextSibling;if(a.$$childTail==this)a.$$childTail=this.$$prevSibling;
        if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(a,b){return d(a)(this,b)},$evalAsync:function(a){this.$$asyncQueue.push(a)},$apply:function(a){try{return g("$apply"),this.$eval(a)}catch(b){c(b)}finally{h.$$phase=null;try{h.$digest()}catch(d){throw c(d),d;}}},$on:function(a,b){var c=this.$$listeners[a];
        c||(this.$$listeners[a]=c=[]);c.push(b);return function(){c[Ga(c,b)]=null}},$emit:function(a,b){var d=[],e,f=this,g=!1,i={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},h=[i].concat(ka.call(arguments,1)),n,x;do{e=f.$$listeners[a]||d;i.currentScope=f;n=0;for(x=e.length;n<x;n++)if(e[n])try{if(e[n].apply(null,h),g)return i}catch(p){c(p)}else e.splice(n,1),n--,x--;f=f.$parent}while(f);return i},$broadcast:function(a,b){var d=
        this,e=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1},g=[f].concat(ka.call(arguments,1)),i,h;do{d=e;f.currentScope=d;e=d.$$listeners[a]||[];i=0;for(h=e.length;i<h;i++)if(e[i])try{e[i].apply(null,g)}catch(n){c(n)}else e.splice(i,1),i--,h--;if(!(e=d.$$childHead||d!==this&&d.$$nextSibling))for(;d!==this&&!(e=d.$$nextSibling);)d=d.$parent}while(d=e);return f}};var h=new e;return h}]}function Yc(){this.$get=["$window","$document",function(b,a){var c=
    {},d=N((/android (\d+)/.exec(I((b.navigator||{}).userAgent))||[])[1]),e=a[0]||{},g,i=/^(Moz|webkit|O|ms)(?=[A-Z])/,f=e.body&&e.body.style,h=!1,j=!1;if(f){for(var m in f)if(h=i.exec(m)){g=h[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}h=!!("transition"in f||g+"Transition"in f);j=!!("animation"in f||g+"Animation"in f)}return{history:!(!b.history||!b.history.pushState||d<4),hashchange:"onhashchange"in b&&(!e.documentMode||e.documentMode>7),hasEvent:function(a){if(a=="input"&&Z==9)return!1;if(C(c[a])){var b=
        e.createElement("div");c[a]="on"+a in b}return c[a]},csp:e.securityPolicy?e.securityPolicy.isActive:!1,vendorPrefix:g,transitions:h,animations:j}}]}function Zc(){this.$get=S(M)}function Wb(b){var a={},c,d,e;if(!b)return a;n(b.split("\n"),function(b){e=b.indexOf(":");c=I(U(b.substr(0,e)));d=U(b.substr(e+1));c&&(a[c]?a[c]+=", "+d:a[c]=d)});return a}function $c(b,a){var c=ad.exec(b);if(c==null)return!0;var d={protocol:c[2],host:c[4],port:N(c[6])||Oa[c[2]]||null,relativeProtocol:c[2]===p||c[2]===""},
        c=jb.exec(a),c={protocol:c[1],host:c[3],port:N(c[5])||Oa[c[1]]||null};return(d.protocol==c.protocol||d.relativeProtocol)&&d.host==c.host&&(d.port==c.port||d.relativeProtocol&&c.port==Oa[c.protocol])}function Xb(b){var a=L(b)?b:p;return function(c){a||(a=Wb(b));return c?a[I(c)]||null:a}}function Yb(b,a,c){if(H(c))return c(b,a);n(c,function(c){b=c(b,a)});return b}function bd(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults=
    {transformResponse:[function(d){E(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=ub(d,!0)));return d}],transformRequest:[function(a){return L(a)&&Ea.apply(a)!=="[object File]"?ha(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:d,put:d,patch:d},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},g=this.interceptors=[],i=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,k,l){function u(a){function c(a){var b=
        t({},a,{data:Yb(a.data,a.headers,d.transformResponse)});return 200<=a.status&&a.status<300?b:k.reject(b)}var d={transformRequest:e.transformRequest,transformResponse:e.transformResponse},f={};t(d,a);d.headers=f;d.method=oa(d.method);t(f,e.headers.common,e.headers[I(d.method)],a.headers);(a=$c(d.url,b.url())?b.cookies()[d.xsrfCookieName||e.xsrfCookieName]:p)&&(f[d.xsrfHeaderName||e.xsrfHeaderName]=a);var g=[function(a){var b=Yb(a.data,Xb(f),a.transformRequest);C(a.data)&&delete f["Content-Type"];if(C(a.withCredentials)&&
        !C(e.withCredentials))a.withCredentials=e.withCredentials;return o(a,b,f).then(c,c)},p],j=k.when(d);for(n(y,function(a){(a.request||a.requestError)&&g.unshift(a.request,a.requestError);(a.response||a.responseError)&&g.push(a.response,a.responseError)});g.length;)var a=g.shift(),i=g.shift(),j=j.then(a,i);j.success=function(a){j.then(function(b){a(b.data,b.status,b.headers,d)});return j};j.error=function(a){j.then(null,function(b){a(b.data,b.status,b.headers,d)});return j};return j}function o(b,c,g){function j(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b,c){n&&(200<=a&&a<300?n.put(s,[a,b,Wb(c)]):n.remove(s));i(b,a,c);d.$$phase||d.$apply()}function i(a,c,d){c=Math.max(c,0);(200<=c&&c<300?l.resolve:l.reject)({data:a,status:c,headers:Xb(d),config:b})}function h(){var a=Ga(u.pendingRequests,b);a!==-1&&u.pendingRequests.splice(a,1)}var l=k.defer(),o=l.promise,n,p,s=z(b.url,b.params);u.pendingRequests.push(b);o.then(h,h);if((b.cache||e.cache)&&b.cache!==!1&&b.method=="GET")n=L(b.cache)?b.cache:L(e.cache)?e.cache:r;if(n)if(p=n.get(s))if(p.then)return p.then(h,
        h),p;else F(p)?i(p[1],p[0],V(p[2])):i(p,200,{});else n.put(s,o);p||a(b.method,s,c,j,g,b.timeout,b.withCredentials,b.responseType);return o}function z(a,b){if(!b)return a;var c=[];nc(b,function(a,b){a==null||a==p||(F(a)||(a=[a]),n(a,function(a){L(a)&&(a=ha(a));c.push(wa(b)+"="+wa(a))}))});return a+(a.indexOf("?")==-1?"?":"&")+c.join("&")}var r=c("$http"),y=[];n(g,function(a){y.unshift(E(a)?l.get(a):l.invoke(a))});n(i,function(a,b){var c=E(a)?l.get(a):l.invoke(a);y.splice(b,0,{response:function(a){return c(k.when(a))},
        responseError:function(a){return c(k.reject(a))}})});u.pendingRequests=[];(function(a){n(arguments,function(a){u[a]=function(b,c){return u(t(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){n(arguments,function(a){u[a]=function(b,c,d){return u(t(d||{},{method:a,url:b,data:c}))}})})("post","put");u.defaults=e;return u}]}function cd(){this.$get=["$browser","$window","$document",function(b,a,c){return dd(b,ed,b.defer,a.angular.callbacks,c[0],a.location.protocol.replace(":",""))}]}
    function dd(b,a,c,d,e,g){function i(a,b){var c=e.createElement("script"),d=function(){e.body.removeChild(c);b&&b()};c.type="text/javascript";c.src=a;Z?c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&d()}:c.onload=c.onerror=d;e.body.appendChild(c);return d}return function(e,h,j,m,k,l,u,o){function z(){p=-1;t&&t();v&&v.abort()}function r(a,d,e,f){var j=(h.match(jb)||["",g])[1];A&&c.cancel(A);t=v=null;d=j=="file"?e?200:404:d;a(d==1223?204:d,e,f);b.$$completeOutstandingRequest(q)}
        var p;b.$$incOutstandingRequestCount();h=h||b.url();if(I(e)=="jsonp"){var x="_"+(d.counter++).toString(36);d[x]=function(a){d[x].data=a};var t=i(h.replace("JSON_CALLBACK","angular.callbacks."+x),function(){d[x].data?r(m,200,d[x].data):r(m,p||-2);delete d[x]})}else{var v=new a;v.open(e,h,!0);n(k,function(a,b){a&&v.setRequestHeader(b,a)});v.onreadystatechange=function(){if(v.readyState==4){var a=v.getAllResponseHeaders(),b=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified",
            "Pragma"];a||(a="",n(b,function(b){var c=v.getResponseHeader(b);c&&(a+=b+": "+c+"\n")}));r(m,p||v.status,v.responseType?v.response:v.responseText,a)}};if(u)v.withCredentials=!0;if(o)v.responseType=o;v.send(j||"")}if(l>0)var A=c(z,l);else l&&l.then&&l.then(z)}}function fd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",
        posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",
        mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return b===1?"one":"other"}}}}function gd(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(b,a,c,d){function e(e,f,h){var j=c.defer(),m=j.promise,k=B(h)&&!h,f=a.defer(function(){try{j.resolve(e())}catch(a){j.reject(a),d(a)}k||b.$apply()},f),h=function(){delete g[m.$$timeoutId]};m.$$timeoutId=f;g[f]=j;m.then(h,h);return m}var g={};e.cancel=function(b){return b&&b.$$timeoutId in
        g?(g[b.$$timeoutId].reject("canceled"),a.defer.cancel(b.$$timeoutId)):!1};return e}]}function Zb(b){function a(a,e){return b.factory(a+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",$b);a("date",ac);a("filter",hd);a("json",id);a("limitTo",jd);a("lowercase",kd);a("number",bc);a("orderBy",cc);a("uppercase",ld)}function hd(){return function(b,a,c){if(!F(b))return b;var d=[];d.check=function(a){for(var b=0;b<d.length;b++)if(!d[b](a))return!1;
        return!0};switch(typeof c){case "function":break;case "boolean":if(c==!0){c=function(a,b){return Ha.equals(a,b)};break}default:c=function(a,b){b=(""+b).toLowerCase();return(""+a).toLowerCase().indexOf(b)>-1}}var e=function(a,b){if(typeof b=="string"&&b.charAt(0)==="!")return!e(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if(d.charAt(0)!=="$"&&e(a[d],b))return!0}return!1;case "array":for(d=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0;d<a.length;d++)if(e(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var g in a)g=="$"?function(){if(a[g]){var b=g;d.push(function(c){return e(c,a[b])})}}():function(){if(a[g]){var b=g;d.push(function(c){return e(ib(c,b),a[b])})}}();break;case "function":d.push(a);break;default:return b}for(var i=[],f=0;f<b.length;f++){var h=b[f];d.check(h)&&i.push(h)}return i}}function $b(b){var a=b.NUMBER_FORMATS;return function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      d){if(C(d))d=a.CURRENCY_SYM;return dc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function bc(b){var a=b.NUMBER_FORMATS;return function(b,d){return dc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function dc(b,a,c,d,e){if(isNaN(b)||!isFinite(b))return"";var g=b<0,b=Math.abs(b),i=b+"",f="",h=[],j=!1;if(i.indexOf("e")!==-1){var m=i.match(/([\d\.]+)e(-?)(\d+)/);m&&m[2]=="-"&&m[3]>e+1?i="0":(f=i,j=!0)}if(!j){i=(i.split(ec)[1]||"").length;C(e)&&(e=Math.min(Math.max(a.minFrac,i),
        a.maxFrac));var i=Math.pow(10,e),b=Math.round(b*i)/i,b=(""+b).split(ec),i=b[0],b=b[1]||"",j=0,m=a.lgSize,k=a.gSize;if(i.length>=m+k)for(var j=i.length-m,l=0;l<j;l++)(j-l)%k===0&&l!==0&&(f+=c),f+=i.charAt(l);for(l=j;l<i.length;l++)(i.length-l)%m===0&&l!==0&&(f+=c),f+=i.charAt(l);for(;b.length<e;)b+="0";e&&e!=="0"&&(f+=d+b.substr(0,e))}h.push(g?a.negPre:a.posPre);h.push(f);h.push(g?a.negSuf:a.posSuf);return h.join("")}function nb(b,a,c){var d="";b<0&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=
        b.substr(b.length-a));return d+b}function Q(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(c>0||e>-c)e+=c;e===0&&c==-12&&(e=12);return nb(e,a,d)}}function Qa(b,a){return function(c,d){var e=c["get"+b](),g=oa(a?"SHORT"+b:b);return d[g][e]}}function ac(b){function a(a){var b;if(b=a.match(c)){var a=new Date(0),g=0,i=0,f=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(g=N(b[9]+b[10]),i=N(b[9]+b[11]));f.call(a,N(b[1]),N(b[2])-1,N(b[3]));g=N(b[4]||0)-g;i=N(b[5]||0)-i;f=
        N(b[6]||0);b=Math.round(parseFloat("0."+(b[7]||0))*1E3);h.call(a,g,i,f,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e){var g="",i=[],f,h,e=e||"mediumDate",e=b.DATETIME_FORMATS[e]||e;E(c)&&(c=md.test(c)?N(c):a(c));Ya(c)&&(c=new Date(c));if(!ra(c))return c;for(;e;)(h=nd.exec(e))?(i=i.concat(ka.call(h,1)),e=i.pop()):(i.push(e),e=null);n(i,function(a){f=od[a];g+=f?f(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,
        "").replace(/''/g,"'")});return g}}function id(){return function(b){return ha(b,!0)}}function jd(){return function(b,a){if(!F(b)&&!E(b))return b;a=N(a);if(E(b))return a?a>=0?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);a>0?(d=0,e=a):(d=b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function cc(b){return function(a,c,d){function e(a,b){return ua(b)?function(b,c){return a(c,b)}:a}if(!F(a))return a;if(!c)return a;for(var c=F(c)?c:[c],c=
        Za(c,function(a){var c=!1,d=a||qa;if(E(a)){if(a.charAt(0)=="+"||a.charAt(0)=="-")c=a.charAt(0)=="-",a=a.substring(1);d=b(a)}return e(function(a,b){var c;c=d(a);var e=d(b),f=typeof c,g=typeof e;f==g?(f=="string"&&(c=c.toLowerCase()),f=="string"&&(e=e.toLowerCase()),c=c===e?0:c<e?-1:1):c=f<g?-1:1;return c},c)}),g=[],i=0;i<a.length;i++)g.push(a[i]);return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(e!==0)return e}return 0},d))}}function aa(b){H(b)&&(b={link:b});b.restrict=b.restrict||
        "AC";return S(b)}function fc(b,a){function c(a,c){c=c?"-"+bb(c,"-"):"";b.removeClass((a?Ra:Sa)+c).addClass((a?Sa:Ra)+c)}var d=this,e=b.parent().controller("form")||Ta,g=0,i=d.$error={},f=[];d.$name=a.name;d.$dirty=!1;d.$pristine=!0;d.$valid=!0;d.$invalid=!1;e.$addControl(d);b.addClass(pa);c(!0);d.$addControl=function(a){f.push(a);a.$name&&!d.hasOwnProperty(a.$name)&&(d[a.$name]=a)};d.$removeControl=function(a){a.$name&&d[a.$name]===a&&delete d[a.$name];n(i,function(b,c){d.$setValidity(c,!0,a)});ta(f,
        a)};d.$setValidity=function(a,b,f){var k=i[a];if(b){if(k&&(ta(k,f),!k.length)){g--;if(!g)c(b),d.$valid=!0,d.$invalid=!1;i[a]=!1;c(!0,a);e.$setValidity(a,!0,d)}}else{g||c(b);if(k){if(Ga(k,f)!=-1)return}else i[a]=k=[],g++,c(!1,a),e.$setValidity(a,!1,d);k.push(f);d.$valid=!1;d.$invalid=!0}};d.$setDirty=function(){b.removeClass(pa).addClass(Ua);d.$dirty=!0;d.$pristine=!1;e.$setDirty()};d.$setPristine=function(){b.removeClass(Ua).addClass(pa);d.$dirty=!1;d.$pristine=!0;n(f,function(a){a.$setPristine()})}}
    function X(b){return C(b)||b===""||b===null||b!==b}function Va(b,a,c,d,e,g){var i=function(){var e=a.val();if(ua(c.ngTrim||"T"))e=U(e);d.$viewValue!==e&&b.$apply(function(){d.$setViewValue(e)})};if(e.hasEvent("input"))a.bind("input",i);else{var f,h=function(){f||(f=g.defer(function(){i();f=null}))};a.bind("keydown",function(a){a=a.keyCode;a===91||15<a&&a<19||37<=a&&a<=40||h()});a.bind("change",i);e.hasEvent("paste")&&a.bind("paste cut",h)}d.$render=function(){a.val(X(d.$viewValue)?"":d.$viewValue)};
        var j=c.ngPattern,m=function(a,b){return X(b)||a.test(b)?(d.$setValidity("pattern",!0),b):(d.$setValidity("pattern",!1),p)};j&&((e=j.match(/^\/(.*)\/([gim]*)$/))?(j=RegExp(e[1],e[2]),e=function(a){return m(j,a)}):e=function(a){var c=b.$eval(j);if(!c||!c.test)throw Error("Expected "+j+" to be a RegExp but was "+c);return m(c,a)},d.$formatters.push(e),d.$parsers.push(e));if(c.ngMinlength){var k=N(c.ngMinlength),e=function(a){return!X(a)&&a.length<k?(d.$setValidity("minlength",!1),p):(d.$setValidity("minlength",
            !0),a)};d.$parsers.push(e);d.$formatters.push(e)}if(c.ngMaxlength){var l=N(c.ngMaxlength),e=function(a){return!X(a)&&a.length>l?(d.$setValidity("maxlength",!1),p):(d.$setValidity("maxlength",!0),a)};d.$parsers.push(e);d.$formatters.push(e)}}function ob(b,a){b="ngClass"+b;return aa(function(c,d,e){function g(b){if(a===!0||c.$index%2===a)h&&!ia(b,h)&&i(h),f(b);h=V(b)}function i(a){L(a)&&!F(a)&&(a=Za(a,function(a,b){if(a)return b}));d.removeClass(F(a)?a.join(" "):a)}function f(a){L(a)&&!F(a)&&(a=Za(a,
        function(a,b){if(a)return b}));a&&d.addClass(F(a)?a.join(" "):a)}var h=p;c.$watch(e[b],g,!0);e.$observe("class",function(){var a=c.$eval(e[b]);g(a,a)});b!=="ngClass"&&c.$watch("$index",function(d,g){var h=d&1;h!==g&1&&(h===a?f(c.$eval(e[b])):i(c.$eval(e[b])))})})}var I=function(b){return E(b)?b.toLowerCase():b},oa=function(b){return E(b)?b.toUpperCase():b},Z=N((/msie (\d+)/.exec(I(navigator.userAgent))||[])[1]),w,ga,ka=[].slice,Wa=[].push,Ea=Object.prototype.toString,mc=M.angular,Ha=M.angular||(M.angular=
    {}),Aa,hb,ba=["0","0","0"];q.$inject=[];qa.$inject=[];hb=Z<9?function(b){b=b.nodeName?b:b[0];return b.scopeName&&b.scopeName!="HTML"?oa(b.scopeName+":"+b.nodeName):b.nodeName}:function(b){return b.nodeName?b.nodeName:b[0].nodeName};var sc=/[A-Z]/g,pd={full:"1.1.5",major:1,minor:1,dot:5,codeName:"triangle-squarification"},Ka=R.cache={},Ja=R.expando="ng-"+(new Date).getTime(),wc=1,gc=M.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+a,c)},gb=
        M.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)},uc=/([\:\-\_]+(.))/g,vc=/^moz([A-Z])/,Ba=R.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;T.readyState==="complete"?setTimeout(a):(this.bind("DOMContentLoaded",a),R(M).bind("load",a))},toString:function(){var b=[];n(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return b>=0?w(this[b]):w(this[this.length+b])},length:0,push:Wa,sort:[].sort,
        splice:[].splice},Na={};n("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(b){Na[I(b)]=b});var Gb={};n("input,select,option,textarea,button,form,details".split(","),function(b){Gb[oa(b)]=!0});n({data:Bb,inheritedData:Ma,scope:function(b){return Ma(b,"$scope")},controller:Eb,injector:function(b){return Ma(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:La,css:function(b,a,c){a=Ia(a);if(B(c))b.style[a]=c;else{var d;Z<=8&&(d=b.currentStyle&&b.currentStyle[a],
        d===""&&(d="auto"));d=d||b.style[a];Z<=8&&(d=d===""?p:d);return d}},attr:function(b,a,c){var d=I(a);if(Na[d])if(B(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||(b.attributes.getNamedItem(a)||q).specified?d:p;else if(B(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),b===null?p:b},prop:function(b,a,c){if(B(c))b[a]=c;else return b[a]},text:t(Z<9?function(b,a){if(b.nodeType==1){if(C(a))return b.innerText;b.innerText=a}else{if(C(a))return b.nodeValue;
        b.nodeValue=a}}:function(b,a){if(C(a))return b.textContent;b.textContent=a},{$dv:""}),val:function(b,a){if(C(a))return b.value;b.value=a},html:function(b,a){if(C(a))return b.innerHTML;for(var c=0,d=b.childNodes;c<d.length;c++)ya(d[c]);b.innerHTML=a}},function(b,a){R.prototype[a]=function(a,d){var e,g;if((b.length==2&&b!==La&&b!==Eb?a:d)===p)if(L(a)){for(e=0;e<this.length;e++)if(b===Bb)b(this[e],a);else for(g in a)b(this[e],g,a[g]);return this}else{if(this.length)return b(this[0],a,d)}else{for(e=0;e<
        this.length;e++)b(this[e],a,d);return this}return b.$dv}});n({removeData:zb,dealoc:ya,bind:function a(c,d,e){var g=ca(c,"events"),i=ca(c,"handle");g||ca(c,"events",g={});i||ca(c,"handle",i=xc(c,g));n(d.split(" "),function(d){var h=g[d];if(!h){if(d=="mouseenter"||d=="mouseleave"){var j=T.body.contains||T.body.compareDocumentPosition?function(a,c){var d=a.nodeType===9?a.documentElement:a,e=c&&c.parentNode;return a===e||!(!e||!(e.nodeType===1&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&
        16)))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===a)return!0;return!1};g[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;(!c||c!==this&&!j(this,c))&&i(a,d)})}else gc(c,d,i),g[d]=[];h=g[d]}h.push(e)})},unbind:Ab,replaceWith:function(a,c){var d,e=a.parentNode;ya(a);n(new R(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];n(a.childNodes,function(a){a.nodeType===1&&c.push(a)});return c},contents:function(a){return a.childNodes||
        []},append:function(a,c){n(new R(c),function(c){(a.nodeType===1||a.nodeType===11)&&a.appendChild(c)})},prepend:function(a,c){if(a.nodeType===1){var d=a.firstChild;n(new R(c),function(c){d?a.insertBefore(c,d):(a.appendChild(c),d=c)})}},wrap:function(a,c){var c=w(c)[0],d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){ya(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;n(new R(c),function(a){e.insertBefore(a,d.nextSibling);d=a})},addClass:Db,
        removeClass:Cb,toggleClass:function(a,c,d){C(d)&&(d=!La(a,c));(d?Db:Cb)(a,c)},parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;a!=null&&a.nodeType!==1;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName(c)},clone:fb,triggerHandler:function(a,c){var d=(ca(a,"events")||{})[c];n(d,function(c){c.call(a,{preventDefault:q})})}},function(a,c){R.prototype[c]=function(c,e){for(var g,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  i=0;i<this.length;i++)g==p?(g=a(this[i],c,e),g!==p&&(g=w(g))):eb(g,a(this[i],c,e));return g==p?this:g}});za.prototype={put:function(a,c){this[la(a)]=c},get:function(a){return this[la(a)]},remove:function(a){var c=this[a=la(a)];delete this[a];return c}};var zc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Ac=/,/,Bc=/^\s*(_?)(\S+?)\1\s*$/,yc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;Ib.$inject=["$provide"];var qd=function(){var a="$ngAnimateController",c={running:!0};this.$get=["$animation","$window","$sniffer","$rootElement",
        "$rootScope",function(d,e,g,i){i.data(a,c);i=function(c,i){function j(j,k,o){return function(m,r,p){function x(a){var c=0,a=E(a)?a.split(/\s*,\s*/):[];n(a,function(a){c=Math.max(parseFloat(a)||0,c)});return c}function t(){m.addClass(K);if($)$(m,v,P);else if(H(e.getComputedStyle)){var a=g.vendorPrefix+"Animation",c=g.vendorPrefix+"Transition",d=0;n(m,function(f){if(f.nodeType==1){var g="transition",i=c,j=1,h=e.getComputedStyle(f)||{};if(parseFloat(h.animationDuration)>0||parseFloat(h[a+"Duration"])>
            0)g="animation",i=a,j=Math.max(parseInt(h[g+"IterationCount"])||0,parseInt(h[i+"IterationCount"])||0,j);f=Math.max(x(h[g+"Delay"]),x(h[i+"Delay"]));g=Math.max(x(h[g+"Duration"]),x(h[i+"Duration"]));d=Math.max(f+j*g,d)}});e.setTimeout(v,d*1E3)}else v()}function v(){if(!v.run)v.run=!0,o(m,r,p),m.removeClass(w),m.removeClass(K),m.removeData(a)}var A=c.$eval(i.ngAnimate),w=A?L(A)?A[j]:A+"-"+j:"",D=d(w),A=D&&D.setup,$=D&&D.start,D=D&&D.cancel;if(w){var K=w+"-active";r||(r=p?p.parent():m.parent());if(!g.transitions&&
            !A&&!$||(r.inheritedData(a)||q).running)k(m,r,p),o(m,r,p);else{var O=m.data(a)||{};O.running&&((D||q)(m),O.done());m.data(a,{running:!0,done:v});m.addClass(w);k(m,r,p);if(m.length==0)return v();var P=(A||q)(m);e.setTimeout(t,1)}}else k(m,r,p),o(m,r,p)}}function m(a,c,d){d?d.after(a):c.append(a)}var k={};k.enter=j("enter",m,q);k.leave=j("leave",q,function(a){a.remove()});k.move=j("move",function(a,c,d){m(a,c,d)},q);k.show=j("show",function(a){a.css("display","")},q);k.hide=j("hide",q,function(a){a.css("display",
            "none")});k.animate=function(a,c){j(a,q,q)(c)};return k};i.enabled=function(a){if(arguments.length)c.running=!a;return!c.running};return i}]},Kb="Non-assignable model expression: ";Jb.$inject=["$provide"];var Ic=/^(x[\:\-_]|data[\:\-_])/i,jb=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,Pb=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Oa={http:80,https:443,ftp:21};Rb.prototype=lb.prototype=Qb.prototype={$$replace:!1,absUrl:Pa("$$absUrl"),url:function(a,c){if(C(a))return this.$$url;
        var d=Pb.exec(a);d[1]&&this.path(decodeURIComponent(d[1]));if(d[2]||d[1])this.search(d[3]||"");this.hash(d[5]||"",c);return this},protocol:Pa("$$protocol"),host:Pa("$$host"),port:Pa("$$port"),path:Sb("$$path",function(a){return a.charAt(0)=="/"?a:"/"+a}),search:function(a,c){if(C(a))return this.$$search;B(c)?c===null?delete this.$$search[a]:this.$$search[a]=c:this.$$search=E(a)?vb(a):a;this.$$compose();return this},hash:Sb("$$hash",qa),replace:function(){this.$$replace=!0;return this}};var Da={"null":function(){return null},
        "true":function(){return!0},"false":function(){return!1},undefined:q,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return B(d)?B(e)?d+e:d:B(e)?e:p},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(B(d)?d:0)-(B(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":q,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},Qc={n:"\n",f:"\u000c",r:"\r",
        t:"\t",v:"\u000b","'":"'",'"':'"'},mb={},ad=/^(([^:]+):)?\/\/(\w+:{0,1}\w*@)?([\w\.-]*)?(:([0-9]+))?(.*)$/,ed=M.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(d){}throw Error("This browser does not support XMLHttpRequest.");};Zb.$inject=["$provide"];$b.$inject=["$locale"];bc.$inject=["$locale"];var ec=".",od={yyyy:Q("FullYear",4),yy:Q("FullYear",
        2,0,!0),y:Q("FullYear",1),MMMM:Qa("Month"),MMM:Qa("Month",!0),MM:Q("Month",2,1),M:Q("Month",1,1),dd:Q("Date",2),d:Q("Date",1),HH:Q("Hours",2),H:Q("Hours",1),hh:Q("Hours",2,-12),h:Q("Hours",1,-12),mm:Q("Minutes",2),m:Q("Minutes",1),ss:Q("Seconds",2),s:Q("Seconds",1),sss:Q("Milliseconds",3),EEEE:Qa("Day"),EEE:Qa("Day",!0),a:function(a,c){return a.getHours()<12?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){var a=-1*a.getTimezoneOffset(),c=a>=0?"+":"";c+=nb(Math[a>0?"floor":"ceil"](a/60),2)+nb(Math.abs(a%60),
        2);return c}},nd=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,md=/^\d+$/;ac.$inject=["$locale"];var kd=S(I),ld=S(oa);cc.$inject=["$parse"];var rd=S({restrict:"E",compile:function(a,c){Z<=8&&(!c.href&&!c.name&&c.$set("href",""),a.append(T.createComment("IE fix")));return function(a,c){c.bind("click",function(a){c.attr("href")||a.preventDefault()})}}}),pb={};n(Na,function(a,c){var d=da("ng-"+c);pb[d]=function(){return{priority:100,compile:function(){return function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              g,i){a.$watch(i[d],function(a){i.$set(c,!!a)})}}}}});n(["src","srcset","href"],function(a){var c=da("ng-"+a);pb[c]=function(){return{priority:99,link:function(d,e,g){g.$observe(c,function(c){c&&(g.$set(a,c),Z&&e.prop(a,g[a]))})}}}});var Ta={$addControl:q,$removeControl:q,$setValidity:q,$setDirty:q,$setPristine:q};fc.$inject=["$element","$attrs","$scope"];var Wa=function(a){return["$timeout",function(c){var d={name:"form",restrict:"E",controller:fc,compile:function(){return{pre:function(a,d,i,f){if(!i.action){var h=
            function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};gc(d[0],"submit",h);d.bind("$destroy",function(){c(function(){gb(d[0],"submit",h)},0,!1)})}var j=d.parent().controller("form"),m=i.name||i.ngForm;m&&(a[m]=f);j&&d.bind("$destroy",function(){j.$removeControl(f);m&&(a[m]=p);t(f,Ta)})}}}};return a?t(V(d),{restrict:"EAC"}):d}]},sd=Wa(),td=Wa(!0),ud=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,vd=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/,
        wd=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,hc={text:Va,number:function(a,c,d,e,g,i){Va(a,c,d,e,g,i);e.$parsers.push(function(a){var c=X(a);return c||wd.test(a)?(e.$setValidity("number",!0),a===""?null:c?a:parseFloat(a)):(e.$setValidity("number",!1),p)});e.$formatters.push(function(a){return X(a)?"":""+a});if(d.min){var f=parseFloat(d.min),a=function(a){return!X(a)&&a<f?(e.$setValidity("min",!1),p):(e.$setValidity("min",!0),a)};e.$parsers.push(a);e.$formatters.push(a)}if(d.max){var h=parseFloat(d.max),
            d=function(a){return!X(a)&&a>h?(e.$setValidity("max",!1),p):(e.$setValidity("max",!0),a)};e.$parsers.push(d);e.$formatters.push(d)}e.$formatters.push(function(a){return X(a)||Ya(a)?(e.$setValidity("number",!0),a):(e.$setValidity("number",!1),p)})},url:function(a,c,d,e,g,i){Va(a,c,d,e,g,i);a=function(a){return X(a)||ud.test(a)?(e.$setValidity("url",!0),a):(e.$setValidity("url",!1),p)};e.$formatters.push(a);e.$parsers.push(a)},email:function(a,c,d,e,g,i){Va(a,c,d,e,g,i);a=function(a){return X(a)||vd.test(a)?
            (e.$setValidity("email",!0),a):(e.$setValidity("email",!1),p)};e.$formatters.push(a);e.$parsers.push(a)},radio:function(a,c,d,e){C(d.name)&&c.attr("name",Fa());c.bind("click",function(){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e){var g=d.ngTrueValue,i=d.ngFalseValue;E(g)||(g=!0);E(i)||(i=!1);c.bind("click",function(){a.$apply(function(){e.$setViewValue(c[0].checked)})});
            e.$render=function(){c[0].checked=e.$viewValue};e.$formatters.push(function(a){return a===g});e.$parsers.push(function(a){return a?g:i})},hidden:q,button:q,submit:q,reset:q},ic=["$browser","$sniffer",function(a,c){return{restrict:"E",require:"?ngModel",link:function(d,e,g,i){i&&(hc[I(g.type)]||hc.text)(d,e,g,i,c,a)}}}],Sa="ng-valid",Ra="ng-invalid",pa="ng-pristine",Ua="ng-dirty",xd=["$scope","$exceptionHandler","$attrs","$element","$parse",function(a,c,d,e,g){function i(a,c){c=c?"-"+bb(c,"-"):"";
            e.removeClass((a?Ra:Sa)+c).addClass((a?Sa:Ra)+c)}this.$modelValue=this.$viewValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=d.name;var f=g(d.ngModel),h=f.assign;if(!h)throw Error(Kb+d.ngModel+" ("+va(e)+")");this.$render=q;var j=e.inheritedData("$formController")||Ta,m=0,k=this.$error={};e.addClass(pa);i(!0);this.$setValidity=function(a,c){if(k[a]!==!c){if(c){if(k[a]&&m--,!m)i(!0),this.$valid=
            !0,this.$invalid=!1}else i(!1),this.$invalid=!0,this.$valid=!1,m++;k[a]=!c;i(c,a);j.$setValidity(a,c,this)}};this.$setPristine=function(){this.$dirty=!1;this.$pristine=!0;e.removeClass(Ua).addClass(pa)};this.$setViewValue=function(d){this.$viewValue=d;if(this.$pristine)this.$dirty=!0,this.$pristine=!1,e.removeClass(pa).addClass(Ua),j.$setDirty();n(this.$parsers,function(a){d=a(d)});if(this.$modelValue!==d)this.$modelValue=d,h(a,d),n(this.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};
            var l=this;a.$watch(function(){var c=f(a);if(l.$modelValue!==c){var d=l.$formatters,e=d.length;for(l.$modelValue=c;e--;)c=d[e](c);if(l.$viewValue!==c)l.$viewValue=c,l.$render()}})}],yd=function(){return{require:["ngModel","^?form"],controller:xd,link:function(a,c,d,e){var g=e[0],i=e[1]||Ta;i.$addControl(g);c.bind("$destroy",function(){i.$removeControl(g)})}}},zd=S({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),jc=function(){return{require:"?ngModel",
            link:function(a,c,d,e){if(e){d.required=!0;var g=function(a){if(d.required&&(X(a)||a===!1))e.$setValidity("required",!1);else return e.$setValidity("required",!0),a};e.$formatters.push(g);e.$parsers.unshift(g);d.$observe("required",function(){g(e.$viewValue)})}}}},Ad=function(){return{require:"ngModel",link:function(a,c,d,e){var g=(a=/\/(.*)\//.exec(d.ngList))&&RegExp(a[1])||d.ngList||",";e.$parsers.push(function(a){var c=[];a&&n(a.split(g),function(a){a&&c.push(U(a))});return c});e.$formatters.push(function(a){return F(a)?
            a.join(", "):p})}}},Bd=/^(true|false|\d+)$/,Cd=function(){return{priority:100,compile:function(a,c){return Bd.test(c.ngValue)?function(a,c,g){g.$set("value",a.$eval(g.ngValue))}:function(a,c,g){a.$watch(g.ngValue,function(a){g.$set("value",a,!1)})}}}},Dd=aa(function(a,c,d){c.addClass("ng-binding").data("$binding",d.ngBind);a.$watch(d.ngBind,function(a){c.text(a==p?"":a)})}),Ed=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",
            c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],Fd=[function(){return function(a,c,d){c.addClass("ng-binding").data("$binding",d.ngBindHtmlUnsafe);a.$watch(d.ngBindHtmlUnsafe,function(a){c.html(a||"")})}}],Gd=ob("",!0),Hd=ob("Odd",0),Id=ob("Even",1),Jd=aa({compile:function(a,c){c.$set("ngCloak",p);a.removeClass("ng-cloak")}}),Kd=[function(){return{scope:!0,controller:"@"}}],Ld=["$sniffer",function(a){return{priority:1E3,compile:function(){a.csp=!0}}}],kc={};n("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress".split(" "),
        function(a){var c=da("ng-"+a);kc[c]=["$parse",function(d){return function(e,g,i){var f=d(i[c]);g.bind(I(a),function(a){e.$apply(function(){f(e,{$event:a})})})}}]});var Md=aa(function(a,c,d){c.bind("submit",function(){a.$apply(d.ngSubmit)})}),Nd=["$animator",function(a){return{transclude:"element",priority:1E3,terminal:!0,restrict:"A",compile:function(c,d,e){return function(c,d,f){var h=a(c,f),j,m;c.$watch(f.ngIf,function(a){j&&(h.leave(j),j=p);m&&(m.$destroy(),m=p);ua(a)&&(m=c.$new(),e(m,function(a){j=
        a;h.enter(a,d.parent(),d)}))})}}}}],Od=["$http","$templateCache","$anchorScroll","$compile","$animator",function(a,c,d,e,g){return{restrict:"ECA",terminal:!0,compile:function(i,f){var h=f.ngInclude||f.src,j=f.onload||"",m=f.autoscroll;return function(f,i,n){var o=g(f,n),p=0,r,t=function(){r&&(r.$destroy(),r=null);o.leave(i.contents(),i)};f.$watch(h,function(g){var h=++p;g?(a.get(g,{cache:c}).success(function(a){h===p&&(r&&r.$destroy(),r=f.$new(),o.leave(i.contents(),i),a=w("<div/>").html(a).contents(),
        o.enter(a,i),e(a)(r),B(m)&&(!m||f.$eval(m))&&d(),r.$emit("$includeContentLoaded"),f.$eval(j))}).error(function(){h===p&&t()}),f.$emit("$includeContentRequested")):t()})}}}}],Pd=aa({compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Qd=aa({terminal:!0,priority:1E3}),Rd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,g,i){var f=i.count,h=g.attr(i.$attr.when),j=i.offset||0,m=e.$eval(h),k={},l=c.startSymbol(),p=c.endSymbol();n(m,function(a,e){k[e]=
        c(a.replace(d,l+f+"-"+j+p))});e.$watch(function(){var c=parseFloat(e.$eval(f));return isNaN(c)?"":(c in m||(c=a.pluralCat(c-j)),k[c](e,g,!0))},function(a){g.text(a)})}}}],Sd=["$parse","$animator",function(a,c){return{transclude:"element",priority:1E3,terminal:!0,compile:function(d,e,g){return function(d,e,h){var j=c(d,h),m=h.ngRepeat,k=m.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),l,p,o,z,r,t={$id:la};if(!k)throw Error("Expected ngRepeat in form of '_item_ in _collection_[ track by _id_]' but got '"+
        m+"'.");h=k[1];o=k[2];(k=k[4])?(l=a(k),p=function(a,c,e){r&&(t[r]=a);t[z]=c;t.$index=e;return l(d,t)}):p=function(a,c){return la(c)};k=h.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!k)throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+h+"'.");z=k[3]||k[1];r=k[2];var x={};d.$watchCollection(o,function(a){var c,h,k=e,l,o={},t,q,w,s,B,y,C=[];if(Xa(a))B=a;else{B=[];for(w in a)a.hasOwnProperty(w)&&w.charAt(0)!="$"&&B.push(w);B.sort()}t=B.length;h=
        C.length=B.length;for(c=0;c<h;c++)if(w=a===B?c:B[c],s=a[w],l=p(w,s,c),x.hasOwnProperty(l))y=x[l],delete x[l],o[l]=y,C[c]=y;else if(o.hasOwnProperty(l))throw n(C,function(a){a&&a.element&&(x[a.id]=a)}),Error("Duplicates in a repeater are not allowed. Repeater: "+m+" key: "+l);else C[c]={id:l},o[l]=!1;for(w in x)if(x.hasOwnProperty(w))y=x[w],j.leave(y.element),y.element[0].$$NG_REMOVED=!0,y.scope.$destroy();c=0;for(h=B.length;c<h;c++){w=a===B?c:B[c];s=a[w];y=C[c];if(y.element){q=y.scope;l=k[0];do l=
        l.nextSibling;while(l&&l.$$NG_REMOVED);y.element[0]!=l&&j.move(y.element,null,k);k=y.element}else q=d.$new();q[z]=s;r&&(q[r]=w);q.$index=c;q.$first=c===0;q.$last=c===t-1;q.$middle=!(q.$first||q.$last);y.element||g(q,function(a){j.enter(a,null,k);k=a;y.scope=q;y.element=a;o[y.id]=y})}x=o})}}}}],Td=["$animator",function(a){return function(c,d,e){var g=a(c,e);c.$watch(e.ngShow,function(a){g[ua(a)?"show":"hide"](d)})}}],Ud=["$animator",function(a){return function(c,d,e){var g=a(c,e);c.$watch(e.ngHide,
        function(a){g[ua(a)?"hide":"show"](d)})}}],Vd=aa(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&n(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Wd=["$animator",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var i=a(c,e),f,h,j=[];c.$watch(e.ngSwitch||e.on,function(a){for(var d=0,l=j.length;d<l;d++)j[d].$destroy(),i.leave(h[d]);h=[];j=[];if(f=g.cases["!"+a]||g.cases["?"])c.$eval(e.change),n(f,function(a){var d=
        c.$new();j.push(d);a.transclude(d,function(c){var d=a.element;h.push(c);i.enter(c,d.parent(),d)})})})}}}],Xd=aa({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,c,d){return function(a,g,i,f){f.cases["!"+c.ngSwitchWhen]=f.cases["!"+c.ngSwitchWhen]||[];f.cases["!"+c.ngSwitchWhen].push({transclude:d,element:g})}}}),Yd=aa({transclude:"element",priority:500,require:"^ngSwitch",compile:function(a,c,d){return function(a,c,i,f){f.cases["?"]=f.cases["?"]||[];f.cases["?"].push({transclude:d,
        element:c})}}}),Zd=aa({controller:["$transclude","$element",function(a,c){a(function(a){c.append(a)})}]}),$d=["$http","$templateCache","$route","$anchorScroll","$compile","$controller","$animator",function(a,c,d,e,g,i,f){return{restrict:"ECA",terminal:!0,link:function(a,c,m){function k(){var f=d.current&&d.current.locals,k=f&&f.$template;if(k){o.leave(c.contents(),c);l&&(l.$destroy(),l=null);k=w("<div></div>").html(k).contents();o.enter(k,c);var k=g(k),m=d.current;l=m.scope=a.$new();if(m.controller)f.$scope=
        l,f=i(m.controller,f),m.controllerAs&&(l[m.controllerAs]=f),c.children().data("$ngControllerController",f);k(l);l.$emit("$viewContentLoaded");l.$eval(n);e()}else o.leave(c.contents(),c),l&&(l.$destroy(),l=null)}var l,n=m.onload||"",o=f(a,m);a.$on("$routeChangeSuccess",k);k()}}}],ae=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){d.type=="text/ng-template"&&a.put(d.id,c[0].text)}}}],be=S({terminal:!0}),ce=["$compile","$parse",function(a,c){var d=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,
        e={$setViewValue:q};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var h=this,j={},m=e,k;h.databound=d.ngModel;h.init=function(a,c,d){m=a;k=d};h.addOption=function(c){j[c]=!0;m.$viewValue==c&&(a.val(c),k.parent()&&k.remove())};h.removeOption=function(a){this.hasOption(a)&&(delete j[a],m.$viewValue==a&&this.renderUnknownOption(a))};h.renderUnknownOption=function(c){c="? "+la(c)+" ?";k.val(c);a.prepend(k);a.val(c);k.prop("selected",!0)};h.hasOption=
        function(a){return j.hasOwnProperty(a)};c.$on("$destroy",function(){h.renderUnknownOption=q})}],link:function(e,i,f,h){function j(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(v.parent()&&v.remove(),c.val(a),a===""&&t.prop("selected",!0)):C(a)&&t?c.val(""):e.renderUnknownOption(a)};c.bind("change",function(){a.$apply(function(){v.parent()&&v.remove();d.$setViewValue(c.val())})})}function m(a,c,d){var e;d.$render=function(){var a=new za(d.$viewValue);n(c.find("option"),function(c){c.selected=
        B(a.get(c.value))})};a.$watch(function(){ia(e,d.$viewValue)||(e=V(d.$viewValue),d.$render())});c.bind("change",function(){a.$apply(function(){var a=[];n(c.find("option"),function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function k(e,f,g){function i(){var a={"":[]},c=[""],d,h,q,v,s;q=g.$modelValue;v=u(e)||[];var z=l?qb(v):v,B,y,A;y={};s=!1;var C,D;if(o)if(t&&F(q)){s=new za([]);for(h=0;h<q.length;h++)y[k]=q[h],s.put(t(e,y),q[h])}else s=new za(q);for(A=0;B=z.length,A<B;A++){y[k]=v[l?y[l]=
        z[A]:A];d=m(e,y)||"";if(!(h=a[d]))h=a[d]=[],c.push(d);o?d=s.remove(t?t(e,y):n(e,y))!=p:(t?(d={},d[k]=q,d=t(e,d)===t(e,y)):d=q===n(e,y),s=s||d);C=j(e,y);C=C===p?"":C;h.push({id:t?t(e,y):l?z[A]:A,label:C,selected:d})}o||(r||q===null?a[""].unshift({id:"",label:"",selected:!s}):s||a[""].unshift({id:"?",label:"",selected:!0}));y=0;for(z=c.length;y<z;y++){d=c[y];h=a[d];if(w.length<=y)q={element:E.clone().attr("label",d),label:h.label},v=[q],w.push(v),f.append(q.element);else if(v=w[y],q=v[0],q.label!=d)q.element.attr("label",
        q.label=d);C=null;A=0;for(B=h.length;A<B;A++)if(d=h[A],s=v[A+1]){C=s.element;if(s.label!==d.label)C.text(s.label=d.label);if(s.id!==d.id)C.val(s.id=d.id);if(C[0].selected!==d.selected)C.prop("selected",s.selected=d.selected)}else d.id===""&&r?D=r:(D=x.clone()).val(d.id).attr("selected",d.selected).text(d.label),v.push({element:D,label:d.label,id:d.id,selected:d.selected}),C?C.after(D):q.element.append(D),C=D;for(A++;v.length>A;)v.pop().element.remove()}for(;w.length>y;)w.pop()[0].element.remove()}
        var h;if(!(h=q.match(d)))throw Error("Expected ngOptions in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_ (track by _expr_)?' but got '"+q+"'.");var j=c(h[2]||h[1]),k=h[4]||h[6],l=h[5],m=c(h[3]||""),n=c(h[2]?h[1]:k),u=c(h[7]),t=h[8]?c(h[8]):null,w=[[{element:f,label:""}]];r&&(a(r)(e),r.removeClass("ng-scope"),r.remove());f.html("");f.bind("change",function(){e.$apply(function(){var a,c=u(e)||[],d={},h,i,j,m,q,r;if(o){i=[];m=0;for(r=w.length;m<r;m++){a=w[m];j=1;for(q=a.length;j<
            q;j++)if((h=a[j].element)[0].selected){h=h.val();l&&(d[l]=h);if(t)for(var s=0;s<c.length;s++){if(d[k]=c[s],t(e,d)==h)break}else d[k]=c[h];i.push(n(e,d))}}}else if(h=f.val(),h=="?")i=p;else if(h=="")i=null;else if(t)for(s=0;s<c.length;s++){if(d[k]=c[s],t(e,d)==h){i=n(e,d);break}}else d[k]=c[h],l&&(d[l]=h),i=n(e,d);g.$setViewValue(i)})});g.$render=i;e.$watch(i)}if(h[1]){for(var l=h[0],u=h[1],o=f.multiple,q=f.ngOptions,r=!1,t,x=w(T.createElement("option")),E=w(T.createElement("optgroup")),v=x.clone(),
                                                                                                                                                                                                                                                                                                                                                                                                       h=0,A=i.children(),G=A.length;h<G;h++)if(A[h].value==""){t=r=A.eq(h);break}l.init(u,r,v);if(o&&(f.required||f.ngRequired)){var D=function(a){u.$setValidity("required",!f.required||a&&a.length);return a};u.$parsers.push(D);u.$formatters.unshift(D);f.$observe("required",function(){D(u.$viewValue)})}q?k(e,i,u):o?m(e,i,u):j(e,i,u,l)}}}}],de=["$interpolate",function(a){var c={addOption:q,removeOption:q};return{restrict:"E",priority:100,compile:function(d,e){if(C(e.value)){var g=a(d.text(),!0);g||e.$set("value",
        d.text())}return function(a,d,e){var j=d.parent(),m=j.data("$selectController")||j.parent().data("$selectController");m&&m.databound?d.prop("selected",!1):m=c;g?a.$watch(g,function(a,c){e.$set("value",a);a!==c&&m.removeOption(c);m.addOption(a)}):m.addOption(e.value);d.bind("$destroy",function(){m.removeOption(e.value)})}}}}],ee=S({restrict:"E",terminal:!0});(ga=M.jQuery)?(w=ga,t(ga.fn,{scope:Ba.scope,controller:Ba.controller,injector:Ba.injector,inheritedData:Ba.inheritedData}),db("remove",!0),db("empty"),
        db("html")):w=R;Ha.element=w;(function(a){t(a,{bootstrap:xb,copy:V,extend:t,equals:ia,element:w,forEach:n,injector:yb,noop:q,bind:$a,toJson:ha,fromJson:ub,identity:qa,isUndefined:C,isDefined:B,isString:E,isFunction:H,isObject:L,isNumber:Ya,isElement:oc,isArray:F,version:pd,isDate:ra,lowercase:I,uppercase:oa,callbacks:{counter:0},noConflict:lc});Aa=tc(M);try{Aa("ngLocale")}catch(c){Aa("ngLocale",[]).provider("$locale",fd)}Aa("ng",["ngLocale"],["$provide",function(a){a.provider("$compile",Jb).directive({a:rd,
        input:ic,textarea:ic,form:sd,script:ae,select:ce,style:ee,option:de,ngBind:Dd,ngBindHtmlUnsafe:Fd,ngBindTemplate:Ed,ngClass:Gd,ngClassEven:Id,ngClassOdd:Hd,ngCsp:Ld,ngCloak:Jd,ngController:Kd,ngForm:td,ngHide:Ud,ngIf:Nd,ngInclude:Od,ngInit:Pd,ngNonBindable:Qd,ngPluralize:Rd,ngRepeat:Sd,ngShow:Td,ngSubmit:Md,ngStyle:Vd,ngSwitch:Wd,ngSwitchWhen:Xd,ngSwitchDefault:Yd,ngOptions:be,ngView:$d,ngTransclude:Zd,ngModel:yd,ngList:Ad,ngChange:zd,required:jc,ngRequired:jc,ngValue:Cd}).directive(pb).directive(kc);
        a.provider({$anchorScroll:Cc,$animation:Ib,$animator:qd,$browser:Ec,$cacheFactory:Fc,$controller:Jc,$document:Kc,$exceptionHandler:Lc,$filter:Zb,$interpolate:Mc,$http:bd,$httpBackend:cd,$location:Nc,$log:Oc,$parse:Sc,$route:Vc,$routeParams:Wc,$rootScope:Xc,$q:Tc,$sniffer:Yc,$templateCache:Gc,$timeout:gd,$window:Zc})}])})(Ha);w(T).ready(function(){rc(T,xb)})})(window,document);angular.element(document).find("head").append('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\\:form{display:block;}</style>');

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?(this._wrapped=n,void 0):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.5.2";var A=j.each=j.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var E="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(E);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(E);return r},j.find=j.detect=function(n,t,r){var e;return O(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var O=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:O(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,function(n){return n[t]})},j.where=function(n,t,r){return j.isEmpty(t)?r?void 0:[]:j[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},j.findWhere=function(n,t){return j.where(n,t,!0)},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&j.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&j.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return arguments.length<2||r?n[j.random(n.length-1)]:j.shuffle(n).slice(0,Math.max(0,t))};var k=function(n){return j.isFunction(n)?n:function(t){return t[n]}};j.sortBy=function(n,t,r){var e=k(t);return j.pluck(j.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={},i=null==r?j.identity:k(r);return A(t,function(r,a){var o=i.call(e,r,a,t);n(u,o,r)}),u}};j.groupBy=F(function(n,t,r){(j.has(n,t)?n[t]:n[t]=[]).push(r)}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=null==r?j.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.indexOf(t,n)>=0})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o;return function(){i=this,u=arguments,a=new Date;var c=function(){var l=new Date-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u)))},l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u)),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=w||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]===void 0&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return n===void 0},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var I={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};I.unescape=j.invert(I.escape);var T={escape:new RegExp("["+j.keys(I.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(I.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(T[n],function(t){return I[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);

// Backbone
(function(){var t=this;var e=t.Backbone;var i=[];var r=i.push;var s=i.slice;var n=i.splice;var a;if(typeof exports!=="undefined"){a=exports}else{a=t.Backbone={}}a.VERSION="1.0.0";var h=t._;if(!h&&typeof require!=="undefined")h=require("underscore");a.$=t.jQuery||t.Zepto||t.ender||t.$;a.noConflict=function(){t.Backbone=e;return this};a.emulateHTTP=false;a.emulateJSON=false;var o=a.Events={on:function(t,e,i){if(!l(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);r.push({callback:e,context:i,ctx:i||this});return this},once:function(t,e,i){if(!l(this,"once",t,[e,i])||!e)return this;var r=this;var s=h.once(function(){r.off(t,s);e.apply(this,arguments)});s._callback=e;return this.on(t,s,i)},off:function(t,e,i){var r,s,n,a,o,u,c,f;if(!this._events||!l(this,"off",t,[e,i]))return this;if(!t&&!e&&!i){this._events={};return this}a=t?[t]:h.keys(this._events);for(o=0,u=a.length;o<u;o++){t=a[o];if(n=this._events[t]){this._events[t]=r=[];if(e||i){for(c=0,f=n.length;c<f;c++){s=n[c];if(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context){r.push(s)}}}if(!r.length)delete this._events[t]}}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var i=this._events[t];var r=this._events.all;if(i)c(i,e);if(r)c(r,arguments);return this},stopListening:function(t,e,i){var r=this._listeners;if(!r)return this;var s=!e&&!i;if(typeof e==="object")i=this;if(t)(r={})[t._listenerId]=t;for(var n in r){r[n].off(e,i,this);if(s)delete this._listeners[n]}return this}};var u=/\s+/;var l=function(t,e,i,r){if(!i)return true;if(typeof i==="object"){for(var s in i){t[e].apply(t,[s,i[s]].concat(r))}return false}if(u.test(i)){var n=i.split(u);for(var a=0,h=n.length;a<h;a++){t[e].apply(t,[n[a]].concat(r))}return false}return true};var c=function(t,e){var i,r=-1,s=t.length,n=e[0],a=e[1],h=e[2];switch(e.length){case 0:while(++r<s)(i=t[r]).callback.call(i.ctx);return;case 1:while(++r<s)(i=t[r]).callback.call(i.ctx,n);return;case 2:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a);return;case 3:while(++r<s)(i=t[r]).callback.call(i.ctx,n,a,h);return;default:while(++r<s)(i=t[r]).callback.apply(i.ctx,e)}};var f={listenTo:"on",listenToOnce:"once"};h.each(f,function(t,e){o[e]=function(e,i,r){var s=this._listeners||(this._listeners={});var n=e._listenerId||(e._listenerId=h.uniqueId("l"));s[n]=e;if(typeof i==="object")r=this;e[t](i,r,this);return this}});o.bind=o.on;o.unbind=o.off;h.extend(a,o);var d=a.Model=function(t,e){var i;var r=t||{};e||(e={});this.cid=h.uniqueId("c");this.attributes={};h.extend(this,h.pick(e,p));if(e.parse)r=this.parse(r,e)||{};if(i=h.result(this,"defaults")){r=h.defaults({},r,i)}this.set(r,e);this.changed={};this.initialize.apply(this,arguments)};var p=["url","urlRoot","collection"];h.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return h.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return h.escape(this.get(t))},has:function(t){return this.get(t)!=null},set:function(t,e,i){var r,s,n,a,o,u,l,c;if(t==null)return this;if(typeof t==="object"){s=t;i=e}else{(s={})[t]=e}i||(i={});if(!this._validate(s,i))return false;n=i.unset;o=i.silent;a=[];u=this._changing;this._changing=true;if(!u){this._previousAttributes=h.clone(this.attributes);this.changed={}}c=this.attributes,l=this._previousAttributes;if(this.idAttribute in s)this.id=s[this.idAttribute];for(r in s){e=s[r];if(!h.isEqual(c[r],e))a.push(r);if(!h.isEqual(l[r],e)){this.changed[r]=e}else{delete this.changed[r]}n?delete c[r]:c[r]=e}if(!o){if(a.length)this._pending=true;for(var f=0,d=a.length;f<d;f++){this.trigger("change:"+a[f],this,c[a[f]],i)}}if(u)return this;if(!o){while(this._pending){this._pending=false;this.trigger("change",this,i)}}this._pending=false;this._changing=false;return this},unset:function(t,e){return this.set(t,void 0,h.extend({},e,{unset:true}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,h.extend({},t,{unset:true}))},hasChanged:function(t){if(t==null)return!h.isEmpty(this.changed);return h.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?h.clone(this.changed):false;var e,i=false;var r=this._changing?this._previousAttributes:this.attributes;for(var s in t){if(h.isEqual(r[s],e=t[s]))continue;(i||(i={}))[s]=e}return i},previous:function(t){if(t==null||!this._previousAttributes)return null;return this._previousAttributes[t]},previousAttributes:function(){return h.clone(this._previousAttributes)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=this;var i=t.success;t.success=function(r){if(!e.set(e.parse(r,t),t))return false;if(i)i(e,r,t);e.trigger("sync",e,r,t)};R(this,t);return this.sync("read",this,t)},save:function(t,e,i){var r,s,n,a=this.attributes;if(t==null||typeof t==="object"){r=t;i=e}else{(r={})[t]=e}if(r&&(!i||!i.wait)&&!this.set(r,i))return false;i=h.extend({validate:true},i);if(!this._validate(r,i))return false;if(r&&i.wait){this.attributes=h.extend({},a,r)}if(i.parse===void 0)i.parse=true;var o=this;var u=i.success;i.success=function(t){o.attributes=a;var e=o.parse(t,i);if(i.wait)e=h.extend(r||{},e);if(h.isObject(e)&&!o.set(e,i)){return false}if(u)u(o,t,i);o.trigger("sync",o,t,i)};R(this,i);s=this.isNew()?"create":i.patch?"patch":"update";if(s==="patch")i.attrs=r;n=this.sync(s,this,i);if(r&&i.wait)this.attributes=a;return n},destroy:function(t){t=t?h.clone(t):{};var e=this;var i=t.success;var r=function(){e.trigger("destroy",e,e.collection,t)};t.success=function(s){if(t.wait||e.isNew())r();if(i)i(e,s,t);if(!e.isNew())e.trigger("sync",e,s,t)};if(this.isNew()){t.success();return false}R(this,t);var s=this.sync("delete",this,t);if(!t.wait)r();return s},url:function(){var t=h.result(this,"urlRoot")||h.result(this.collection,"url")||U();if(this.isNew())return t;return t+(t.charAt(t.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(t){return this._validate({},h.extend(t||{},{validate:true}))},_validate:function(t,e){if(!e.validate||!this.validate)return true;t=h.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;if(!i)return true;this.trigger("invalid",this,i,h.extend(e||{},{validationError:i}));return false}});var v=["keys","values","pairs","invert","pick","omit"];h.each(v,function(t){d.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.attributes);return h[t].apply(h,e)}});var g=a.Collection=function(t,e){e||(e={});if(e.url)this.url=e.url;if(e.model)this.model=e.model;if(e.comparator!==void 0)this.comparator=e.comparator;this._reset();this.initialize.apply(this,arguments);if(t)this.reset(t,h.extend({silent:true},e))};var m={add:true,remove:true,merge:true};var y={add:true,merge:false,remove:false};h.extend(g.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return a.sync.apply(this,arguments)},add:function(t,e){return this.set(t,h.defaults(e||{},y))},remove:function(t,e){t=h.isArray(t)?t.slice():[t];e||(e={});var i,r,s,n;for(i=0,r=t.length;i<r;i++){n=this.get(t[i]);if(!n)continue;delete this._byId[n.id];delete this._byId[n.cid];s=this.indexOf(n);this.models.splice(s,1);this.length--;if(!e.silent){e.index=s;n.trigger("remove",n,this,e)}this._removeReference(n)}return this},set:function(t,e){e=h.defaults(e||{},m);if(e.parse)t=this.parse(t,e);if(!h.isArray(t))t=t?[t]:[];var i,s,a,o,u,l;var c=e.at;var f=this.comparator&&c==null&&e.sort!==false;var d=h.isString(this.comparator)?this.comparator:null;var p=[],v=[],g={};for(i=0,s=t.length;i<s;i++){if(!(a=this._prepareModel(t[i],e)))continue;if(u=this.get(a)){if(e.remove)g[u.cid]=true;if(e.merge){u.set(a.attributes,e);if(f&&!l&&u.hasChanged(d))l=true}}else if(e.add){p.push(a);a.on("all",this._onModelEvent,this);this._byId[a.cid]=a;if(a.id!=null)this._byId[a.id]=a}}if(e.remove){for(i=0,s=this.length;i<s;++i){if(!g[(a=this.models[i]).cid])v.push(a)}if(v.length)this.remove(v,e)}if(p.length){if(f)l=true;this.length+=p.length;if(c!=null){n.apply(this.models,[c,0].concat(p))}else{r.apply(this.models,p)}}if(l)this.sort({silent:true});if(e.silent)return this;for(i=0,s=p.length;i<s;i++){(a=p[i]).trigger("add",a,this,e)}if(l)this.trigger("sort",this,e);return this},reset:function(t,e){e||(e={});for(var i=0,r=this.models.length;i<r;i++){this._removeReference(this.models[i])}e.previousModels=this.models;this._reset();this.add(t,h.extend({silent:true},e));if(!e.silent)this.trigger("reset",this,e);return this},push:function(t,e){t=this._prepareModel(t,e);this.add(t,h.extend({at:this.length},e));return t},pop:function(t){var e=this.at(this.length-1);this.remove(e,t);return e},unshift:function(t,e){t=this._prepareModel(t,e);this.add(t,h.extend({at:0},e));return t},shift:function(t){var e=this.at(0);this.remove(e,t);return e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){if(t==null)return void 0;return this._byId[t.id!=null?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){if(h.isEmpty(t))return e?void 0:[];return this[e?"find":"filter"](function(e){for(var i in t){if(t[i]!==e.get(i))return false}return true})},findWhere:function(t){return this.where(t,true)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");t||(t={});if(h.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(h.bind(this.comparator,this))}if(!t.silent)this.trigger("sort",this,t);return this},sortedIndex:function(t,e,i){e||(e=this.comparator);var r=h.isFunction(e)?e:function(t){return t.get(e)};return h.sortedIndex(this.models,t,r,i)},pluck:function(t){return h.invoke(this.models,"get",t)},fetch:function(t){t=t?h.clone(t):{};if(t.parse===void 0)t.parse=true;var e=t.success;var i=this;t.success=function(r){var s=t.reset?"reset":"set";i[s](r,t);if(e)e(i,r,t);i.trigger("sync",i,r,t)};R(this,t);return this.sync("read",this,t)},create:function(t,e){e=e?h.clone(e):{};if(!(t=this._prepareModel(t,e)))return false;if(!e.wait)this.add(t,e);var i=this;var r=e.success;e.success=function(s){if(e.wait)i.add(t,e);if(r)r(t,s,e)};t.save(null,e);return t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(t,e){if(t instanceof d){if(!t.collection)t.collection=this;return t}e||(e={});e.collection=this;var i=new this.model(t,e);if(!i._validate(t,e)){this.trigger("invalid",this,t,e);return false}return i},_removeReference:function(t){if(this===t.collection)delete t.collection;t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,r){if((t==="add"||t==="remove")&&i!==this)return;if(t==="destroy")this.remove(e,r);if(e&&t==="change:"+e.idAttribute){delete this._byId[e.previous(e.idAttribute)];if(e.id!=null)this._byId[e.id]=e}this.trigger.apply(this,arguments)}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];h.each(_,function(t){g.prototype[t]=function(){var e=s.call(arguments);e.unshift(this.models);return h[t].apply(h,e)}});var w=["groupBy","countBy","sortBy"];h.each(w,function(t){g.prototype[t]=function(e,i){var r=h.isFunction(e)?e:function(t){return t.get(e)};return h[t](this.models,r,i)}});var b=a.View=function(t){this.cid=h.uniqueId("view");this._configure(t||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var x=/^(\S+)\s*(.*)$/;var E=["model","collection","el","id","attributes","className","tagName","events"];h.extend(b.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(t,e){if(this.$el)this.undelegateEvents();this.$el=t instanceof a.$?t:a.$(t);this.el=this.$el[0];if(e!==false)this.delegateEvents();return this},delegateEvents:function(t){if(!(t||(t=h.result(this,"events"))))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(!h.isFunction(i))i=this[t[e]];if(!i)continue;var r=e.match(x);var s=r[1],n=r[2];i=h.bind(i,this);s+=".delegateEvents"+this.cid;if(n===""){this.$el.on(s,i)}else{this.$el.on(s,n,i)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(t){if(this.options)t=h.extend({},h.result(this,"options"),t);h.extend(this,h.pick(t,E));this.options=t},_ensureElement:function(){if(!this.el){var t=h.extend({},h.result(this,"attributes"));if(this.id)t.id=h.result(this,"id");if(this.className)t["class"]=h.result(this,"className");var e=a.$("<"+h.result(this,"tagName")+">").attr(t);this.setElement(e,false)}else{this.setElement(h.result(this,"el"),false)}}});a.sync=function(t,e,i){var r=k[t];h.defaults(i||(i={}),{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON});var s={type:r,dataType:"json"};if(!i.url){s.url=h.result(e,"url")||U()}if(i.data==null&&e&&(t==="create"||t==="update"||t==="patch")){s.contentType="application/json";s.data=JSON.stringify(i.attrs||e.toJSON(i))}if(i.emulateJSON){s.contentType="application/x-www-form-urlencoded";s.data=s.data?{model:s.data}:{}}if(i.emulateHTTP&&(r==="PUT"||r==="DELETE"||r==="PATCH")){s.type="POST";if(i.emulateJSON)s.data._method=r;var n=i.beforeSend;i.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",r);if(n)return n.apply(this,arguments)}}if(s.type!=="GET"&&!i.emulateJSON){s.processData=false}if(s.type==="PATCH"&&window.ActiveXObject&&!(window.external&&window.external.msActiveXFilteringEnabled)){s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var o=i.xhr=a.ajax(h.extend(s,i));e.trigger("request",e,o,i);return o};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};a.ajax=function(){return a.$.ajax.apply(a.$,arguments)};var S=a.Router=function(t){t||(t={});if(t.routes)this.routes=t.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var $=/\((.*?)\)/g;var T=/(\(\?)?:\w+/g;var H=/\*\w+/g;var A=/[\-{}\[\]+?.,\\\^$|#\s]/g;h.extend(S.prototype,o,{initialize:function(){},route:function(t,e,i){if(!h.isRegExp(t))t=this._routeToRegExp(t);if(h.isFunction(e)){i=e;e=""}if(!i)i=this[e];var r=this;a.history.route(t,function(s){var n=r._extractParameters(t,s);i&&i.apply(r,n);r.trigger.apply(r,["route:"+e].concat(n));r.trigger("route",e,n);a.history.trigger("route",r,e,n)});return this},navigate:function(t,e){a.history.navigate(t,e);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=h.result(this,"routes");var t,e=h.keys(this.routes);while((t=e.pop())!=null){this.route(t,this.routes[t])}},_routeToRegExp:function(t){t=t.replace(A,"\\$&").replace($,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(H,"(.*?)");return new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return h.map(i,function(t){return t?decodeURIComponent(t):null})}});var I=a.History=function(){this.handlers=[];h.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var N=/^[#\/]|\s+$/g;var P=/^\/+|\/+$/g;var O=/msie [\w.]+/;var C=/\/$/;I.started=false;h.extend(I.prototype,o,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(t==null){if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(C,"");if(!t.indexOf(i))t=t.substr(i.length)}else{t=this.getHash()}}return t.replace(N,"")},start:function(t){if(I.started)throw new Error("Backbone.history has already been started");I.started=true;this.options=h.extend({},{root:"/"},this.options,t);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment();var i=document.documentMode;var r=O.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(P,"/");if(r&&this._wantsHashChange){this.iframe=a.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(e)}if(this._hasPushState){a.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!r){a.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=e;var s=this.location;var n=s.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!n){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._wantsPushState&&this._hasPushState&&n&&s.hash){this.fragment=this.getHash().replace(N,"");this.history.replaceState({},document.title,this.root+this.fragment+s.search)}if(!this.options.silent)return this.loadUrl()},stop:function(){a.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);I.started=false},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe){e=this.getFragment(this.getHash(this.iframe))}if(e===this.fragment)return false;if(this.iframe)this.navigate(e);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(t){var e=this.fragment=this.getFragment(t);var i=h.any(this.handlers,function(t){if(t.route.test(e)){t.callback(e);return true}});return i},navigate:function(t,e){if(!I.started)return false;if(!e||e===true)e={trigger:e};t=this.getFragment(t||"");if(this.fragment===t)return;this.fragment=t;var i=this.root+t;if(this._hasPushState){this.history[e.replace?"replaceState":"pushState"]({},document.title,i)}else if(this._wantsHashChange){this._updateHash(this.location,t,e.replace);if(this.iframe&&t!==this.getFragment(this.getHash(this.iframe))){if(!e.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,t,e.replace)}}else{return this.location.assign(i)}if(e.trigger)this.loadUrl(t)},_updateHash:function(t,e,i){if(i){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else{t.hash="#"+e}}});a.history=new I;var j=function(t,e){var i=this;var r;if(t&&h.has(t,"constructor")){r=t.constructor}else{r=function(){return i.apply(this,arguments)}}h.extend(r,i,e);var s=function(){this.constructor=r};s.prototype=i.prototype;r.prototype=new s;if(t)h.extend(r.prototype,t);r.__super__=i.prototype;return r};d.extend=g.extend=S.extend=b.extend=I.extend=j;var U=function(){throw new Error('A "url" property or function must be specified')};var R=function(t,e){var i=e.error;e.error=function(r){if(i)i(t,r,e);t.trigger("error",t,r,e)}}}).call(this);

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: Â©2011-2013 Tilde Inc. and contributors
//            Portions Â©2006-2011 Strobe Inc.
//            Portions Â©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license
//            See https://raw.github.com/emberjs/ember.js/master/LICENSE
// ==========================================================================


// Version: v1.0.0
// Last commit: e2ea0cf (2013-08-31 23:47:39 -0700)


!function(){var e,t;!function(){var r={},n={};e=function(e,t,n){r[e]={deps:t,callback:n}},t=function(e){if(n[e])return n[e];n[e]={};var i,o,s,a,u;if(i=r[e],!i)throw new Error("Module '"+e+"' not found.");o=i.deps,s=i.callback,a=[];for(var c=0,l=o.length;l>c;c++)"exports"===o[c]?a.push(u={}):a.push(t(o[c]));var h=s.apply(this,a);return n[e]=u||h}}(),function(){function e(e){var t;r.console?t=r.console:"undefined"!=typeof console&&(t=console);var n="object"==typeof t?t[e]:null;return n?n.apply?function(){n.apply(t,arguments)}:function(){var e=Array.prototype.join.call(arguments,", ");n(e)}:void 0}function t(e,t){if(!e)try{throw new Error("assertion failed: "+t)}catch(r){setTimeout(function(){throw r},0)}}"undefined"==typeof Ember&&(Ember={});var r=Ember.imports=Ember.imports||this,n=Ember.exports=Ember.exports||this;Ember.lookup=Ember.lookup||this,n.Em=n.Ember=Em=Ember,Ember.isNamespace=!0,Ember.toString=function(){return"Ember"},Ember.VERSION="1.0.0","undefined"==typeof ENV&&(n.ENV={}),"undefined"==typeof ENV.DISABLE_RANGE_API&&(ENV.DISABLE_RANGE_API=!0),Ember.ENV=Ember.ENV||ENV,Ember.config=Ember.config||{},Ember.EXTEND_PROTOTYPES=Ember.ENV.EXTEND_PROTOTYPES,"undefined"==typeof Ember.EXTEND_PROTOTYPES&&(Ember.EXTEND_PROTOTYPES=!0),Ember.LOG_STACKTRACE_ON_DEPRECATION=Ember.ENV.LOG_STACKTRACE_ON_DEPRECATION!==!1,Ember.SHIM_ES5=Ember.ENV.SHIM_ES5===!1?!1:Ember.EXTEND_PROTOTYPES,Ember.LOG_VERSION=Ember.ENV.LOG_VERSION===!1?!1:!0,Ember.K=function(){return this},"undefined"==typeof Ember.assert&&(Ember.assert=Ember.K),"undefined"==typeof Ember.warn&&(Ember.warn=Ember.K),"undefined"==typeof Ember.debug&&(Ember.debug=Ember.K),"undefined"==typeof Ember.deprecate&&(Ember.deprecate=Ember.K),"undefined"==typeof Ember.deprecateFunc&&(Ember.deprecateFunc=function(e,t){return t}),Ember.uuid=0,Ember.Logger={log:e("log")||Ember.K,warn:e("warn")||Ember.K,error:e("error")||Ember.K,info:e("info")||Ember.K,debug:e("debug")||e("info")||Ember.K,assert:e("assert")||t},Ember.onerror=null,Ember.handleErrors=function(e,t){if("function"!=typeof Ember.onerror)return e.call(t||this);try{return e.call(t||this)}catch(r){Ember.onerror(r)}},Ember.merge=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},Ember.isNone=function(e){return null===e||void 0===e},Ember.none=Ember.deprecateFunc("Ember.none is deprecated. Please use Ember.isNone instead.",Ember.isNone),Ember.isEmpty=function(e){return Ember.isNone(e)||0===e.length&&"function"!=typeof e||"object"==typeof e&&0===Ember.get(e,"length")},Ember.empty=Ember.deprecateFunc("Ember.empty is deprecated. Please use Ember.isEmpty instead.",Ember.isEmpty)}(),function(){var e=Ember.platform={};if(Ember.create=Object.create,Ember.create&&2!==Ember.create({a:1},{a:{value:2}}).a&&(Ember.create=null),!Ember.create||Ember.ENV.STUB_OBJECT_CREATE){var t=function(){};Ember.create=function(e,r){if(t.prototype=e,e=new t,r){t.prototype=e;for(var n in r)t.prototype[n]=r[n].value;e=new t}return t.prototype=null,e},Ember.create.isSimulated=!0}var r,n,i=Object.defineProperty;if(i)try{i({},"a",{get:function(){}})}catch(o){i=null}i&&(r=function(){var e={};return i(e,"a",{configurable:!0,enumerable:!0,get:function(){},set:function(){}}),i(e,"a",{configurable:!0,enumerable:!0,writable:!0,value:!0}),e.a===!0}(),n=function(){try{return i(document.createElement("div"),"definePropertyOnDOM",{}),!0}catch(e){}return!1}(),r?n||(i=function(e,t,r){var n;return n="object"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName,n?e[t]=r.value:Object.defineProperty(e,t,r)}):i=null),e.defineProperty=i,e.hasPropertyAccessors=!0,e.defineProperty||(e.hasPropertyAccessors=!1,e.defineProperty=function(e,t,r){r.get||(e[t]=r.value)},e.defineProperty.isSimulated=!0),Ember.ENV.MANDATORY_SETTER&&!e.hasPropertyAccessors&&(Ember.ENV.MANDATORY_SETTER=!1)}(),function(){var e=function(e){return e&&Function.prototype.toString.call(e).indexOf("[native code]")>-1},t=e(Array.prototype.map)?Array.prototype.map:function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=new Array(r),i=arguments[1],o=0;r>o;o++)o in t&&(n[o]=e.call(i,t[o],o,t));return n},r=e(Array.prototype.forEach)?Array.prototype.forEach:function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],i=0;r>i;i++)i in t&&e.call(n,t[i],i,t)},n=e(Array.prototype.indexOf)?Array.prototype.indexOf:function(e,t){null===t||void 0===t?t=0:0>t&&(t=Math.max(0,this.length+t));for(var r=t,n=this.length;n>r;r++)if(this[r]===e)return r;return-1};Ember.ArrayPolyfills={map:t,forEach:r,indexOf:n},Ember.SHIM_ES5&&(Array.prototype.map||(Array.prototype.map=t),Array.prototype.forEach||(Array.prototype.forEach=r),Array.prototype.indexOf||(Array.prototype.indexOf=n))}(),function(){function e(e){this.descs={},this.watching={},this.cache={},this.source=e}function t(e,t){return!(!e||"function"!=typeof e[t])}var r=Ember.platform.defineProperty,n=Ember.create,i="__ember"+ +new Date,o=0,s=[],a={},u=Ember.ENV.MANDATORY_SETTER;Ember.GUID_KEY=i;var c={writable:!1,configurable:!1,enumerable:!1,value:null};Ember.generateGuid=function(e,t){t||(t="ember");var n=t+o++;return e&&(c.value=n,r(e,i,c)),n},Ember.guidFor=function(e){if(void 0===e)return"(undefined)";if(null===e)return"(null)";var t,n=typeof e;switch(n){case"number":return t=s[e],t||(t=s[e]="nu"+e),t;case"string":return t=a[e],t||(t=a[e]="st"+o++),t;case"boolean":return e?"(true)":"(false)";default:return e[i]?e[i]:e===Object?"(Object)":e===Array?"(Array)":(t="ember"+o++,c.value=t,r(e,i,c),t)}};var l={writable:!0,configurable:!1,enumerable:!1,value:null},h=Ember.GUID_KEY+"_meta";Ember.META_KEY=h;var m={descs:{},watching:{}};u&&(m.values={}),Ember.EMPTY_META=m,Object.freeze&&Object.freeze(m);var f=Ember.platform.defineProperty.isSimulated;f&&(e.prototype.__preventPlainObject__=!0,e.prototype.toJSON=function(){}),Ember.meta=function(t,i){var o=t[h];return i===!1?o||m:(o?o.source!==t&&(f||r(t,h,l),o=n(o),o.descs=n(o.descs),o.watching=n(o.watching),o.cache={},o.source=t,u&&(o.values=n(o.values)),t[h]=o):(f||r(t,h,l),o=new e(t),u&&(o.values={}),t[h]=o,o.descs.constructor=null),o)},Ember.getMeta=function(e,t){var r=Ember.meta(e,!1);return r[t]},Ember.setMeta=function(e,t,r){var n=Ember.meta(e,!0);return n[t]=r,r},Ember.metaPath=function(e,t,r){for(var i,o,s=Ember.meta(e,r),a=0,u=t.length;u>a;a++){if(i=t[a],o=s[i]){if(o.__ember_source__!==e){if(!r)return void 0;o=s[i]=n(o),o.__ember_source__=e}}else{if(!r)return void 0;o=s[i]={__ember_source__:e}}s=o}return o},Ember.wrap=function(e,t){function r(){}function n(){var n,i=this._super;return this._super=t||r,n=e.apply(this,arguments),this._super=i,n}return n.wrappedFunction=e,n.__ember_observes__=e.__ember_observes__,n.__ember_observesBefore__=e.__ember_observesBefore__,n.__ember_listens__=e.__ember_listens__,n},Ember.isArray=function(e){return!e||e.setInterval?!1:Array.isArray&&Array.isArray(e)?!0:Ember.Array&&Ember.Array.detect(e)?!0:void 0!==e.length&&"object"==typeof e?!0:!1},Ember.makeArray=function(e){return null===e||void 0===e?[]:Ember.isArray(e)?e:[e]},Ember.canInvoke=t,Ember.tryInvoke=function(e,r,n){return t(e,r)?e[r].apply(e,n||[]):void 0};var p=function(){var e=0;try{try{}finally{throw e++,new Error("needsFinallyFixTest")}}catch(t){}return 1!==e}();Ember.tryFinally=p?function(e,t,r){var n,i,o;r=r||this;try{n=e.call(r)}finally{try{i=t.call(r)}catch(s){o=s}}if(o)throw o;return void 0===i?n:i}:function(e,t,r){var n,i;r=r||this;try{n=e.call(r)}finally{i=t.call(r)}return void 0===i?n:i},Ember.tryCatchFinally=p?function(e,t,r,n){var i,o,s;n=n||this;try{i=e.call(n)}catch(a){i=t.call(n,a)}finally{try{o=r.call(n)}catch(u){s=u}}if(s)throw s;return void 0===o?i:o}:function(e,t,r,n){var i,o;n=n||this;try{i=e.call(n)}catch(s){i=t.call(n,s)}finally{o=r.call(n)}return void 0===o?i:o};var d={},b="Boolean Number String Function Array Date RegExp Object".split(" ");Ember.ArrayPolyfills.forEach.call(b,function(e){d["[object "+e+"]"]=e.toLowerCase()});var v=Object.prototype.toString;Ember.typeOf=function(e){var t;return t=null===e||void 0===e?String(e):d[v.call(e)]||"object","function"===t?Ember.Object&&Ember.Object.detect(e)&&(t="class"):"object"===t&&(t=e instanceof Error?"error":Ember.Object&&e instanceof Ember.Object?"instance":"object"),t}}(),function(){Ember.Instrumentation={};var e=[],t={},r=function(r){for(var n,i=[],o=0,s=e.length;s>o;o++)n=e[o],n.regex.test(r)&&i.push(n.object);return t[r]=i,i},n=function(){var e="undefined"!=typeof window?window.performance||{}:{},t=e.now||e.mozNow||e.webkitNow||e.msNow||e.oNow;return t?t.bind(e):function(){return+new Date}}();Ember.Instrumentation.instrument=function(e,i,o,s){function a(){for(p=0,d=m.length;d>p;p++)f=m[p],b[p]=f.before(e,n(),i);return o.call(s)}function u(e){i=i||{},i.exception=e}function c(){for(p=0,d=m.length;d>p;p++)f=m[p],f.after(e,n(),i,b[p]);Ember.STRUCTURED_PROFILE&&console.timeEnd(l)}var l,h,m=t[e];if(Ember.STRUCTURED_PROFILE&&(l=e+": "+i.object,console.time(l)),m||(m=r(e)),0===m.length)return h=o.call(s),Ember.STRUCTURED_PROFILE&&console.timeEnd(l),h;var f,p,d,b=[];return Ember.tryCatchFinally(a,u,c)},Ember.Instrumentation.subscribe=function(r,n){for(var i,o=r.split("."),s=[],a=0,u=o.length;u>a;a++)i=o[a],"*"===i?s.push("[^\\.]*"):s.push(i);s=s.join("\\."),s+="(\\..*)?";var c={pattern:r,regex:new RegExp("^"+s+"$"),object:n};return e.push(c),t={},c},Ember.Instrumentation.unsubscribe=function(r){for(var n,i=0,o=e.length;o>i;i++)e[i]===r&&(n=i);e.splice(n,1),t={}},Ember.Instrumentation.reset=function(){e=[],t={}},Ember.instrument=Ember.Instrumentation.instrument,Ember.subscribe=Ember.Instrumentation.subscribe}(),function(){var e,t,r,n;e=Array.prototype.map||Ember.ArrayPolyfills.map,t=Array.prototype.forEach||Ember.ArrayPolyfills.forEach,r=Array.prototype.indexOf||Ember.ArrayPolyfills.indexOf,n=Array.prototype.splice;var i=Ember.EnumerableUtils={map:function(t,r,n){return t.map?t.map.call(t,r,n):e.call(t,r,n)},forEach:function(e,r,n){return e.forEach?e.forEach.call(e,r,n):t.call(e,r,n)},indexOf:function(e,t,n){return e.indexOf?e.indexOf.call(e,t,n):r.call(e,t,n)},indexesOf:function(e,t){return void 0===t?[]:i.map(t,function(t){return i.indexOf(e,t)})},addObject:function(e,t){var r=i.indexOf(e,t);-1===r&&e.push(t)},removeObject:function(e,t){var r=i.indexOf(e,t);-1!==r&&e.splice(r,1)},_replace:function(e,t,r,i){for(var o,s,a=[].concat(i),u=[],c=6e4,l=t,h=r;a.length;)s=h>c?c:h,0>=s&&(s=0),o=a.splice(0,c),o=[l,s].concat(o),l+=c,h-=s,u=u.concat(n.apply(e,o));return u},replace:function(e,t,r,n){return e.replace?e.replace(t,r,n):i._replace(e,t,r,n)},intersection:function(e,t){var r=[];return i.forEach(e,function(e){i.indexOf(t,e)>=0&&r.push(e)}),r}}}(),function(){var e,t=Ember.META_KEY,r=Ember.ENV.MANDATORY_SETTER,n=/^([A-Z$]|([0-9][A-Z$])).*[\.\*]/,i=/^this[\.\*]/,o=/^([^\.\*]+)/;e=function(e,n){if(""===n)return e;if(n||"string"!=typeof e||(n=e,e=null),null===e||-1!==n.indexOf("."))return a(e,n);var i,o=e[t],s=o&&o.descs[n];return s?s.get(e,n):(i=r&&o&&o.watching[n]>0?o.values[n]:e[n],void 0!==i||"object"!=typeof e||n in e||"function"!=typeof e.unknownProperty?i:e.unknownProperty(n))},Ember.config.overrideAccessors&&(Ember.get=e,Ember.config.overrideAccessors(),e=Ember.get);var s=Ember.normalizeTuple=function(t,r){var s,a=i.test(r),u=!a&&n.test(r);if((!t||u)&&(t=Ember.lookup),a&&(r=r.slice(5)),t===Ember.lookup&&(s=r.match(o)[0],t=e(t,s),r=r.slice(s.length+1)),!r||0===r.length)throw new Error("Invalid Path");return[t,r]},a=Ember._getPath=function(t,r){var n,o,a,u,c;if(null===t&&-1===r.indexOf("."))return e(Ember.lookup,r);for(n=i.test(r),(!t||n)&&(a=s(t,r),t=a[0],r=a[1],a.length=0),o=r.split("."),c=o.length,u=0;null!=t&&c>u;u++)if(t=e(t,o[u],!0),t&&t.isDestroyed)return void 0;return t};Ember.getWithDefault=function(t,r,n){var i=e(t,r);return void 0===i?n:i},Ember.get=e,Ember.getPath=Ember.deprecateFunc("getPath is deprecated since get now supports paths",Ember.get)}(),function(){function e(e,t,r){for(var n=-1,i=0,o=e.length;o>i;i+=3)if(t===e[i]&&r===e[i+1]){n=i;break}return n}function t(e,t){var r,n=f(e,!0);return n.listeners||(n.listeners={}),n.hasOwnProperty("listeners")||(n.listeners=m(n.listeners)),r=n.listeners[t],r&&!n.listeners.hasOwnProperty(t)?r=n.listeners[t]=n.listeners[t].slice():r||(r=n.listeners[t]=[]),r}function r(t,r,n){var i=t[p],o=i&&i.listeners&&i.listeners[r];if(o)for(var s=o.length-3;s>=0;s-=3){var a=o[s],u=o[s+1],c=o[s+2],l=e(n,a,u);-1===l&&n.push(a,u,c)}}function n(t,r,n){var i=t[p],o=i&&i.listeners&&i.listeners[r],s=[];if(o){for(var a=o.length-3;a>=0;a-=3){var u=o[a],c=o[a+1],l=o[a+2],h=e(n,u,c);-1===h&&(n.push(u,c,l),s.push(u,c,l))}return s}}function i(r,n,i,o,s){o||"function"!=typeof i||(o=i,i=null);var a=t(r,n),u=e(a,i,o),c=0;s&&(c|=b),-1===u&&(a.push(i,o,c),"function"==typeof r.didAddListener&&r.didAddListener(n,i,o))}function o(r,n,i,o){function s(i,o){var s=t(r,n),a=e(s,i,o);-1!==a&&(s.splice(a,3),"function"==typeof r.didRemoveListener&&r.didRemoveListener(n,i,o))}if(o||"function"!=typeof i||(o=i,i=null),o)s(i,o);else{var a=r[p],u=a&&a.listeners&&a.listeners[n];if(!u)return;for(var c=u.length-3;c>=0;c-=3)s(u[c],u[c+1])}}function s(r,n,i,o,s){function a(){return s.call(i)}function u(){-1!==l&&(c[l+2]&=~v)}o||"function"!=typeof i||(o=i,i=null);var c=t(r,n),l=e(c,i,o);return-1!==l&&(c[l+2]|=v),Ember.tryFinally(a,u)}function a(r,n,i,o,s){function a(){return s.call(i)}function u(){for(var e=0,t=f.length;t>e;e++){var r=f[e];l[r+2]&=~v}}o||"function"!=typeof i||(o=i,i=null);var c,l,h,m,f=[];for(h=0,m=n.length;m>h;h++){c=n[h],l=t(r,c);var p=e(l,i,o);-1!==p&&(l[p+2]|=v,f.push(p))}return Ember.tryFinally(a,u)}function u(e){var t=e[p].listeners,r=[];if(t)for(var n in t)t[n]&&r.push(n);return r}function c(e,t,r,n){if(e!==Ember&&"function"==typeof e.sendEvent&&e.sendEvent(t,r),!n){var i=e[p];n=i&&i.listeners&&i.listeners[t]}if(n){for(var s=n.length-3;s>=0;s-=3){var a=n[s],u=n[s+1],c=n[s+2];u&&(c&v||(c&b&&o(e,t,a,u),a||(a=e),"string"==typeof u&&(u=a[u]),r?u.apply(a,r):u.call(a)))}return!0}}function l(e,t){var r=e[p],n=r&&r.listeners&&r.listeners[t];return!(!n||!n.length)}function h(e,t){var r=[],n=e[p],i=n&&n.listeners&&n.listeners[t];if(!i)return r;for(var o=0,s=i.length;s>o;o+=3){var a=i[o],u=i[o+1];r.push([a,u])}return r}var m=Ember.create,f=Ember.meta,p=Ember.META_KEY,d=[].slice,b=1,v=2;Ember.on=function(){var e=d.call(arguments,-1)[0],t=d.call(arguments,0,-1);return e.__ember_listens__=t,e},Ember.addListener=i,Ember.removeListener=o,Ember._suspendListener=s,Ember._suspendListeners=a,Ember.sendEvent=c,Ember.hasListeners=l,Ember.watchedEvents=u,Ember.listenersFor=h,Ember.listenersDiff=n,Ember.listenersUnion=r}(),function(){var e=Ember.guidFor,t=Ember.sendEvent,r=Ember._ObserverSet=function(){this.clear()};r.prototype.add=function(t,r,n){var i,o=this.observerSet,s=this.observers,a=e(t),u=o[a];return u||(o[a]=u={}),i=u[r],void 0===i&&(i=s.push({sender:t,keyName:r,eventName:n,listeners:[]})-1,u[r]=i),s[i].listeners},r.prototype.flush=function(){var e,r,n,i,o=this.observers;for(this.clear(),e=0,r=o.length;r>e;++e)n=o[e],i=n.sender,i.isDestroying||i.isDestroyed||t(i,n.eventName,[i,n.keyName],n.listeners)},r.prototype.clear=function(){this.observerSet={},this.observers=[]}}(),function(){function e(e,t){var n=h(e,!1),i=n.watching[t]>0||"length"===t,s=n.proto,a=n.descs[t];i&&s!==e&&(a&&a.willChange&&a.willChange(e,t),r(e,t,n),o(e,t,n),c(e,t))}function t(e,t){var r=h(e,!1),i=r.watching[t]>0||"length"===t,o=r.proto,a=r.descs[t];o!==e&&(a&&a.didChange&&a.didChange(e,t),(i||"length"===t)&&(n(e,t,r),s(e,t,r,!1),l(e,t)))}function r(t,r,n){if(!t.isDestroying){var o=w,s=!o;s&&(o=w={}),i(e,t,r,o,n),s&&(w=null)}}function n(e,r,n){if(!e.isDestroying){var o=_,s=!o;s&&(o=_={}),i(t,e,r,o,n),s&&(_=null)}}function i(e,t,r,n,i){var o=m(t);if(n[o]||(n[o]={}),!n[o][r]){n[o][r]=!0;var s=i.deps;if(s=s&&s[r])for(var a in s){var u=i.descs[a];u&&u._suspended===t||e(t,a)}}}function o(t,r,n){if(n.hasOwnProperty("chainWatchers")&&n.chainWatchers[r]){var i,o,s=n.chainWatchers[r],a=[];for(i=0,o=s.length;o>i;i++)s[i].willChange(a);for(i=0,o=a.length;o>i;i+=2)e(a[i],a[i+1])}}function s(e,r,n,i){if(n.hasOwnProperty("chainWatchers")&&n.chainWatchers[r]){var o,s,a=n.chainWatchers[r],u=i?null:[];for(o=0,s=a.length;s>o;o++)a[o].didChange(u);if(!i)for(o=0,s=u.length;s>o;o+=2)t(u[o],u[o+1])}}function a(){y++}function u(){y--,0>=y&&(E.clear(),g.flush())}function c(e,t){if(!e.isDestroying){var r,n,i=t+":before";y?(r=E.add(e,t,i),n=b(e,i,r),p(e,i,[e,t],n)):p(e,i,[e,t])}}function l(e,t){if(!e.isDestroying){var r,n=t+":change";y?(r=g.add(e,t,n),d(e,n,r)):p(e,n,[e,t])}}var h=Ember.meta,m=Ember.guidFor,f=Ember.tryFinally,p=Ember.sendEvent,d=Ember.listenersUnion,b=Ember.listenersDiff,v=Ember._ObserverSet,E=new v,g=new v,y=0;Ember.propertyWillChange=e,Ember.propertyDidChange=t;var w,_;Ember.overrideChains=function(e,t,r){s(e,t,r,!0)},Ember.beginPropertyChanges=a,Ember.endPropertyChanges=u,Ember.changeProperties=function(e,t){a(),f(e,u,t)}}(),function(){function e(e,t,r,o){var s;if(s=t.slice(t.lastIndexOf(".")+1),t=t.slice(0,t.length-(s.length+1)),"this"!==t&&(e=n(e,t)),!s||0===s.length)throw new Error("You passed an empty path");if(!e){if(o)return;throw new Error("Object in path "+t+" could not be found or was destroyed.")}return i(e,s,r)}var t=Ember.META_KEY,r=Ember.ENV.MANDATORY_SETTER,n=Ember._getPath,i=function(n,i,o,s){if("string"==typeof n&&(o=i,i=n,n=null),!n||-1!==i.indexOf("."))return e(n,i,o,s);var a,u,c=n[t],l=c&&c.descs[i];return l?l.set(n,i,o):(a="object"==typeof n&&!(i in n),a&&"function"==typeof n.setUnknownProperty?n.setUnknownProperty(i,o):c&&c.watching[i]>0?(u=r?c.values[i]:n[i],o!==u&&(Ember.propertyWillChange(n,i),r?void 0!==u||i in n?c.values[i]=o:Ember.defineProperty(n,i,null,o):n[i]=o,Ember.propertyDidChange(n,i))):n[i]=o),o};Ember.config.overrideAccessors&&(Ember.set=i,Ember.config.overrideAccessors(),i=Ember.set),Ember.set=i,Ember.setPath=Ember.deprecateFunc("setPath is deprecated since set now supports paths",Ember.set),Ember.trySet=function(e,t,r){return i(e,t,r,!0)},Ember.trySetPath=Ember.deprecateFunc("trySetPath has been renamed to trySet",Ember.trySet)}(),function(){var e=Ember.set,t=Ember.guidFor,r=Ember.ArrayPolyfills.indexOf,n=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},i=function(e,t){var r=e.keys.copy(),i=n(e.values);return t.keys=r,t.values=i,t.length=e.length,t},o=Ember.OrderedSet=function(){this.clear()};o.create=function(){return new o},o.prototype={clear:function(){this.presenceSet={},this.list=[]},add:function(e){var r=t(e),n=this.presenceSet,i=this.list;r in n||(n[r]=!0,i.push(e))},remove:function(e){var n=t(e),i=this.presenceSet,o=this.list;delete i[n];var s=r.call(o,e);s>-1&&o.splice(s,1)},isEmpty:function(){return 0===this.list.length},has:function(e){var r=t(e),n=this.presenceSet;return r in n},forEach:function(e,t){for(var r=this.toArray(),n=0,i=r.length;i>n;n++)e.call(t,r[n])},toArray:function(){return this.list.slice()},copy:function(){var e=new o;return e.presenceSet=n(this.presenceSet),e.list=this.toArray(),e}};var s=Ember.Map=function(){this.keys=Ember.OrderedSet.create(),this.values={}};s.create=function(){return new s},s.prototype={length:0,get:function(e){var r=this.values,n=t(e);return r[n]},set:function(r,n){var i=this.keys,o=this.values,s=t(r);i.add(r),o[s]=n,e(this,"length",i.list.length)},remove:function(r){var n=this.keys,i=this.values,o=t(r);return i.hasOwnProperty(o)?(n.remove(r),delete i[o],e(this,"length",n.list.length),!0):!1},has:function(e){var r=this.values,n=t(e);return r.hasOwnProperty(n)},forEach:function(e,r){var n=this.keys,i=this.values;n.forEach(function(n){var o=t(n);e.call(r,n,i[o])})},copy:function(){return i(this,new s)}};var a=Ember.MapWithDefault=function(e){s.call(this),this.defaultValue=e.defaultValue};a.create=function(e){return e?new a(e):new s},a.prototype=Ember.create(s.prototype),a.prototype.get=function(e){var t=this.has(e);if(t)return s.prototype.get.call(this,e);var r=this.defaultValue(e);return this.set(e,r),r},a.prototype.copy=function(){return i(this,new a({defaultValue:this.defaultValue}))}}(),function(){var e=Ember.META_KEY,t=Ember.meta,r=Ember.platform.defineProperty,n=Ember.ENV.MANDATORY_SETTER;Ember.Descriptor=function(){};var i=Ember.MANDATORY_SETTER_FUNCTION=function(){},o=Ember.DEFAULT_GETTER_FUNCTION=function(t){return function(){var r=this[e];return r&&r.values[t]}};Ember.defineProperty=function(e,s,a,u,c){var l,h,m,f;return c||(c=t(e)),l=c.descs,h=c.descs[s],m=c.watching[s]>0,h instanceof Ember.Descriptor&&h.teardown(e,s),a instanceof Ember.Descriptor?(f=a,l[s]=a,n&&m?r(e,s,{configurable:!0,enumerable:!0,writable:!0,value:void 0}):e[s]=void 0):(l[s]=void 0,null==a?(f=u,n&&m?(c.values[s]=u,r(e,s,{configurable:!0,enumerable:!0,set:i,get:o(s)})):e[s]=u):(f=a,r(e,s,a))),m&&Ember.overrideChains(e,s,c),e.didDefineProperty&&e.didDefineProperty(e,s,f),this}}(),function(){var e=Ember.get;Ember.getProperties=function(t){var r={},n=arguments,i=1;2===arguments.length&&"array"===Ember.typeOf(arguments[1])&&(i=0,n=arguments[1]);for(var o=n.length;o>i;i++)r[n[i]]=e(t,n[i]);return r}}(),function(){var e=Ember.changeProperties,t=Ember.set;Ember.setProperties=function(r,n){return e(function(){for(var e in n)n.hasOwnProperty(e)&&t(r,e,n[e])}),r}}(),function(){var e=Ember.meta,t=Ember.typeOf,r=Ember.ENV.MANDATORY_SETTER,n=Ember.platform.defineProperty;Ember.watchKey=function(i,o){if("length"!==o||"array"!==t(i)){var s=e(i),a=s.watching;a[o]?a[o]=(a[o]||0)+1:(a[o]=1,"function"==typeof i.willWatchProperty&&i.willWatchProperty(o),r&&o in i&&(s.values[o]=i[o],n(i,o,{configurable:!0,enumerable:!0,set:Ember.MANDATORY_SETTER_FUNCTION,get:Ember.DEFAULT_GETTER_FUNCTION(o)})))}},Ember.unwatchKey=function(t,i){var o=e(t),s=o.watching;1===s[i]?(s[i]=0,"function"==typeof t.didUnwatchProperty&&t.didUnwatchProperty(i),r&&i in t&&(n(t,i,{configurable:!0,enumerable:!0,writable:!0,value:o.values[i]}),delete o.values[i])):s[i]>1&&s[i]--}}(),function(){function e(e){return e.match(l)[0]}function t(e,t,r){if(e&&"object"==typeof e){var i=n(e),o=i.chainWatchers;i.hasOwnProperty("chainWatchers")||(o=i.chainWatchers={}),o[t]||(o[t]=[]),o[t].push(r),u(e,t)}}function r(e,t){if(!e)return void 0;var r=n(e,!1);if(r.proto===e)return void 0;if("@each"===t)return i(e,t);var o=r.descs[t];return o&&o._cacheable?t in r.cache?r.cache[t]:void 0:i(e,t)}var n=Ember.meta,i=Ember.get,o=Ember.normalizeTuple,s=Ember.ArrayPolyfills.forEach,a=Ember.warn,u=Ember.watchKey,c=Ember.unwatchKey,l=/^([^\.\*]+)/,h=[];Ember.flushPendingChains=function(){if(0!==h.length){var e=h;h=[],s.call(e,function(e){e[0].add(e[1])}),a("Watching an undefined global, Ember expects watched globals to be setup by the time the run loop is flushed, check for typos",0===h.length)}};var m=Ember.removeChainWatcher=function(e,t,r){if(e&&"object"==typeof e){var i=n(e,!1);if(i.hasOwnProperty("chainWatchers")){var o=i.chainWatchers;if(o[t]){o=o[t];for(var s=0,a=o.length;a>s;s++)o[s]===r&&o.splice(s,1)}c(e,t)}}},f=Ember._ChainNode=function(e,r,n){this._parent=e,this._key=r,this._watching=void 0===n,this._value=n,this._paths={},this._watching&&(this._object=e.value(),this._object&&t(this._object,this._key,this)),this._parent&&"@each"===this._parent._key&&this.value()},p=f.prototype;p.value=function(){if(void 0===this._value&&this._watching){var e=this._parent.value();this._value=r(e,this._key)}return this._value},p.destroy=function(){if(this._watching){var e=this._object;e&&m(e,this._key,this),this._watching=!1}},p.copy=function(e){var t,r=new f(null,null,e),n=this._paths;for(t in n)n[t]<=0||r.add(t);return r},p.add=function(t){var r,n,i,s,a;if(a=this._paths,a[t]=(a[t]||0)+1,r=this.value(),n=o(r,t),n[0]&&n[0]===r)t=n[1],i=e(t),t=t.slice(i.length+1);else{if(!n[0])return h.push([this,t]),n.length=0,void 0;s=n[0],i=t.slice(0,0-(n[1].length+1)),t=n[1]}n.length=0,this.chain(i,t,s)},p.remove=function(t){var r,n,i,s,a;a=this._paths,a[t]>0&&a[t]--,r=this.value(),n=o(r,t),n[0]===r?(t=n[1],i=e(t),t=t.slice(i.length+1)):(s=n[0],i=t.slice(0,0-(n[1].length+1)),t=n[1]),n.length=0,this.unchain(i,t)},p.count=0,p.chain=function(t,r,n){var i,o=this._chains;o||(o=this._chains={}),i=o[t],i||(i=o[t]=new f(this,t,n)),i.count++,r&&r.length>0&&(t=e(r),r=r.slice(t.length+1),i.chain(t,r))},p.unchain=function(t,r){var n=this._chains,i=n[t];r&&r.length>1&&(t=e(r),r=r.slice(t.length+1),i.unchain(t,r)),i.count--,i.count<=0&&(delete n[i._key],i.destroy())},p.willChange=function(e){var t=this._chains;if(t)for(var r in t)t.hasOwnProperty(r)&&t[r].willChange(e);this._parent&&this._parent.chainWillChange(this,this._key,1,e)},p.chainWillChange=function(e,t,r,n){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainWillChange(this,t,r+1,n):(r>1&&n.push(this.value(),t),t="this."+t,this._paths[t]>0&&n.push(this.value(),t))},p.chainDidChange=function(e,t,r,n){this._key&&(t=this._key+"."+t),this._parent?this._parent.chainDidChange(this,t,r+1,n):(r>1&&n.push(this.value(),t),t="this."+t,this._paths[t]>0&&n.push(this.value(),t))},p.didChange=function(e){if(this._watching){var r=this._parent.value();r!==this._object&&(m(this._object,this._key,this),this._object=r,t(r,this._key,this)),this._value=void 0,this._parent&&"@each"===this._parent._key&&this.value()}var n=this._chains;if(n)for(var i in n)n.hasOwnProperty(i)&&n[i].didChange(e);null!==e&&this._parent&&this._parent.chainDidChange(this,this._key,1,e)},Ember.finishChains=function(e){var t=n(e,!1),r=t.chains;r&&(r.value()!==e&&(t.chains=r=r.copy(e)),r.didChange(null))}}(),function(){function e(e){var r=t(e),i=r.chains;return i?i.value()!==e&&(i=r.chains=i.copy(e)):i=r.chains=new n(null,null,e),i}var t=Ember.meta,r=Ember.typeOf,n=Ember._ChainNode;Ember.watchPath=function(n,i){if("length"!==i||"array"!==r(n)){var o=t(n),s=o.watching;s[i]?s[i]=(s[i]||0)+1:(s[i]=1,e(n).add(i))}},Ember.unwatchPath=function(r,n){var i=t(r),o=i.watching;1===o[n]?(o[n]=0,e(r).remove(n)):o[n]>1&&o[n]--}}(),function(){function e(e){return"*"===e||!h.test(e)}var t=Ember.meta,r=Ember.GUID_KEY,n=Ember.META_KEY,i=Ember.removeChainWatcher,o=Ember.watchKey,s=Ember.unwatchKey,a=Ember.watchPath,u=Ember.unwatchPath,c=Ember.typeOf,l=Ember.generateGuid,h=/[\.\*]/;Ember.watch=function(t,r){("length"!==r||"array"!==c(t))&&(e(r)?o(t,r):a(t,r))},Ember.isWatching=function(e,t){var r=e[n];return(r&&r.watching[t])>0},Ember.watch.flushPending=Ember.flushPendingChains,Ember.unwatch=function(t,r){("length"!==r||"array"!==c(t))&&(e(r)?s(t,r):u(t,r))},Ember.rewatch=function(e){var n=t(e,!1),i=n.chains;r in e&&!e.hasOwnProperty(r)&&l(e,"ember"),i&&i.value()!==e&&(n.chains=i.copy(e))};var m=[];Ember.destroy=function(e){var t,r,o,s,a=e[n];if(a&&(e[n]=null,t=a.chains))for(m.push(t);m.length>0;){if(t=m.pop(),r=t._chains)for(o in r)r.hasOwnProperty(o)&&m.push(r[o]);t._watching&&(s=t._object,s&&i(s,t._key,t))}}}(),function(){function e(e,t){var r=e[t];return r?e.hasOwnProperty(t)||(r=e[t]=f(r)):r=e[t]={},r}function t(t){return e(t,"deps")}function r(r,n,i,o){var s,a,u,c,l,h=r._dependentKeys;if(h)for(s=t(o),a=0,u=h.length;u>a;a++)c=h[a],l=e(s,c),l[i]=(l[i]||0)+1,p(n,c)}function n(r,n,i,o){var s,a,u,c,l,h=r._dependentKeys;if(h)for(s=t(o),a=0,u=h.length;u>a;a++)c=h[a],l=e(s,c),l[i]=(l[i]||0)-1,d(n,c)}function i(e,t){this.func=e,this._cacheable=t&&void 0!==t.cacheable?t.cacheable:!0,this._dependentKeys=t&&t.dependentKeys,this._readOnly=t&&(void 0!==t.readOnly||!!t.readOnly)}function o(e){for(var t=0,r=e.length;r>t;t++)e[t].didChange(null)}function s(e,t){for(var r={},n=0;n<t.length;n++)r[t[n]]=c(e,t[n]);return r}function a(e,t){Ember.computed[e]=function(e){var r=m.call(arguments);return Ember.computed(e,function(){return t.apply(this,r)})}}function u(e,t){Ember.computed[e]=function(){var e=m.call(arguments),r=Ember.computed(function(){return t.apply(this,[s(this,e)])});return r.property.apply(r,e)}}var c=Ember.get,l=Ember.set,h=Ember.meta,m=[].slice,f=Ember.create,p=(Ember.META_KEY,Ember.watch),d=Ember.unwatch;Ember.ComputedProperty=i,i.prototype=new Ember.Descriptor;var b=i.prototype;b.cacheable=function(e){return this._cacheable=e!==!1,this},b.volatile=function(){return this.cacheable(!1)},b.readOnly=function(e){return this._readOnly=void 0===e||!!e,this},b.property=function(){for(var e=[],t=0,r=arguments.length;r>t;t++)e.push(arguments[t]);return this._dependentKeys=e,this},b.meta=function(e){return 0===arguments.length?this._meta||{}:(this._meta=e,this)},b.didChange=function(e,t){if(this._cacheable&&this._suspended!==e){var r=h(e);t in r.cache&&(delete r.cache[t],n(this,e,t,r))}},b.get=function(e,t){var n,i,s,a;if(this._cacheable){if(s=h(e),i=s.cache,t in i)return i[t];n=i[t]=this.func.call(e,t),a=s.chainWatchers&&s.chainWatchers[t],a&&o(a),r(this,e,t,s)}else n=this.func.call(e,t);return n},b.set=function(e,t,n){var i,o,s,a=this._cacheable,u=this.func,c=h(e,a),l=c.watching[t],m=this._suspended,f=!1,p=c.cache;if(this._readOnly)throw new Error("Cannot Set: "+t+" on: "+e.toString());this._suspended=e;try{if(a&&p.hasOwnProperty(t)&&(o=p[t],f=!0),i=u.wrappedFunction?u.wrappedFunction.length:u.length,3===i)s=u.call(e,t,n,o);else{if(2!==i)return Ember.defineProperty(e,t,null,o),Ember.set(e,t,n),void 0;s=u.call(e,t,n)}if(f&&o===s)return;l&&Ember.propertyWillChange(e,t),f&&delete p[t],a&&(f||r(this,e,t,c),p[t]=s),l&&Ember.propertyDidChange(e,t)}finally{this._suspended=m}return s},b.teardown=function(e,t){var r=h(e);return t in r.cache&&n(this,e,t,r),this._cacheable&&delete r.cache[t],null},Ember.computed=function(e){var t;if(arguments.length>1&&(t=m.call(arguments,0,-1),e=m.call(arguments,-1)[0]),"function"!=typeof e)throw new Error("Computed Property declared without a property function");var r=new i(e);return t&&r.property.apply(r,t),r},Ember.cacheFor=function(e,t){var r=h(e,!1).cache;return r&&t in r?r[t]:void 0},a("empty",function(e){return Ember.isEmpty(c(this,e))}),a("notEmpty",function(e){return!Ember.isEmpty(c(this,e))}),a("none",function(e){return Ember.isNone(c(this,e))}),a("not",function(e){return!c(this,e)}),a("bool",function(e){return!!c(this,e)}),a("match",function(e,t){var r=c(this,e);return"string"==typeof r?!!r.match(t):!1}),a("equal",function(e,t){return c(this,e)===t}),a("gt",function(e,t){return c(this,e)>t}),a("gte",function(e,t){return c(this,e)>=t}),a("lt",function(e,t){return c(this,e)<t}),a("lte",function(e,t){return c(this,e)<=t}),u("and",function(e){for(var t in e)if(e.hasOwnProperty(t)&&!e[t])return!1;return!0}),u("or",function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!0;return!1}),u("any",function(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return e[t];return null}),u("collect",function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&(Ember.isNone(e[r])?t.push(null):t.push(e[r]));return t}),Ember.computed.alias=function(e){return Ember.computed(e,function(t,r){return arguments.length>1?(l(this,e,r),r):c(this,e)})},Ember.computed.oneWay=function(e){return Ember.computed(e,function(){return c(this,e)})},Ember.computed.defaultTo=function(e){return Ember.computed(function(t,r,n){return 1===arguments.length?null!=n?n:c(this,e):null!=r?r:c(this,e)})}}(),function(){function e(e){return e+r}function t(e){return e+n}var r=":change",n=":before";Ember.addObserver=function(t,r,n,i){return Ember.addListener(t,e(r),n,i),Ember.watch(t,r),this},Ember.observersFor=function(t,r){return Ember.listenersFor(t,e(r))},Ember.removeObserver=function(t,r,n,i){return Ember.unwatch(t,r),Ember.removeListener(t,e(r),n,i),this},Ember.addBeforeObserver=function(e,r,n,i){return Ember.addListener(e,t(r),n,i),Ember.watch(e,r),this},Ember._suspendBeforeObserver=function(e,r,n,i,o){return Ember._suspendListener(e,t(r),n,i,o)},Ember._suspendObserver=function(t,r,n,i,o){return Ember._suspendListener(t,e(r),n,i,o)};var i=Ember.ArrayPolyfills.map;Ember._suspendBeforeObservers=function(e,r,n,o,s){var a=i.call(r,t);return Ember._suspendListeners(e,a,n,o,s)},Ember._suspendObservers=function(t,r,n,o,s){var a=i.call(r,e);return Ember._suspendListeners(t,a,n,o,s)},Ember.beforeObserversFor=function(e,r){return Ember.listenersFor(e,t(r))},Ember.removeBeforeObserver=function(e,r,n,i){return Ember.unwatch(e,r),Ember.removeListener(e,t(r),n,i),this}}(),function(){e("backburner/queue",["exports"],function(e){"use strict";function t(e,t,r){this.daq=e,this.name=t,this.options=r,this._queue=[]}t.prototype={daq:null,name:null,options:null,_queue:null,push:function(e,t,r,n){var i=this._queue;return i.push(e,t,r,n),{queue:this,target:e,method:t}},pushUnique:function(e,t,r,n){var i,o,s,a,u=this._queue;for(s=0,a=u.length;a>s;s+=4)if(i=u[s],o=u[s+1],i===e&&o===t)return u[s+2]=r,u[s+3]=n,{queue:this,target:e,method:t};
    return this._queue.push(e,t,r,n),{queue:this,target:e,method:t}},flush:function(){var e,t,r,n,i,o=this._queue,s=this.options,a=s&&s.before,u=s&&s.after,c=o.length;for(c&&a&&a(),i=0;c>i;i+=4)e=o[i],t=o[i+1],r=o[i+2],n=o[i+3],r&&r.length>0?t.apply(e,r):t.call(e);c&&u&&u(),o.length>c?(this._queue=o.slice(c),this.flush()):this._queue.length=0},cancel:function(e){var t,r,n,i,o=this._queue;for(n=0,i=o.length;i>n;n+=4)if(t=o[n],r=o[n+1],t===e.target&&r===e.method)return o.splice(n,4),!0;if(o=this._queueBeingFlushed)for(n=0,i=o.length;i>n;n+=4)if(t=o[n],r=o[n+1],t===e.target&&r===e.method)return o[n+1]=null,!0}},e.Queue=t}),e("backburner/deferred_action_queues",["backburner/queue","exports"],function(e,t){"use strict";function r(e,t){var r=this.queues={};this.queueNames=e=e||[];for(var n,o=0,s=e.length;s>o;o++)n=e[o],r[n]=new i(this,n,t[n])}function n(e,t){for(var r,n,i=0,o=t;o>=i;i++)if(r=e.queueNames[i],n=e.queues[r],n._queue.length)return i;return-1}var i=e.Queue;r.prototype={queueNames:null,queues:null,schedule:function(e,t,r,n,i,o){var s=this.queues,a=s[e];if(!a)throw new Error("You attempted to schedule an action in a queue ("+e+") that doesn't exist");return i?a.pushUnique(t,r,n,o):a.push(t,r,n,o)},flush:function(){for(var e,t,r,i,o=this.queues,s=this.queueNames,a=0,u=s.length;u>a;){e=s[a],t=o[e],r=t._queueBeingFlushed=t._queue.slice(),t._queue=[];var c,l,h,m,f=t.options,p=f&&f.before,d=f&&f.after,b=0,v=r.length;for(v&&p&&p();v>b;)c=r[b],l=r[b+1],h=r[b+2],m=r[b+3],"string"==typeof l&&(l=c[l]),l&&(h&&h.length>0?l.apply(c,h):l.call(c)),b+=4;t._queueBeingFlushed=null,v&&d&&d(),-1===(i=n(this,a))?a++:a=i}}},t.DeferredActionQueues=r}),e("backburner",["backburner/deferred_action_queues","exports"],function(e,t){"use strict";function r(e,t){this.queueNames=e,this.options=t||{},this.options.defaultQueue||(this.options.defaultQueue=e[0]),this.instanceStack=[]}function n(e){e.begin(),s=d.setTimeout(function(){s=null,e.end()})}function i(e){var t,r,n,o,s=+new Date;e.run(function(){for(n=0,o=p.length;o>n&&(t=p[n],!(t>s));n+=2);for(r=p.splice(0,n),n=1,o=r.length;o>n;n+=2)e.schedule(e.options.defaultQueue,null,r[n])}),p.length&&(a=d.setTimeout(function(){i(e),a=null,u=null},p[0]-s),u=p[0])}function o(e,t){for(var r,n=-1,i=0,o=f.length;o>i;i++)if(r=f[i],r[0]===e&&r[1]===t){n=i;break}return n}var s,a,u,c=e.DeferredActionQueues,l=[].slice,h=[].pop,m=[],f=[],p=[],d=this;r.prototype={queueNames:null,options:null,currentInstance:null,instanceStack:null,begin:function(){var e=this.options&&this.options.onBegin,t=this.currentInstance;t&&this.instanceStack.push(t),this.currentInstance=new c(this.queueNames,this.options),e&&e(this.currentInstance,t)},end:function(){var e=this.options&&this.options.onEnd,t=this.currentInstance,r=null;try{t.flush()}finally{this.currentInstance=null,this.instanceStack.length&&(r=this.instanceStack.pop(),this.currentInstance=r),e&&e(t,r)}},run:function(e,t){var r;this.begin(),t||(t=e,e=null),"string"==typeof t&&(t=e[t]);var n=!1;try{r=arguments.length>2?t.apply(e,l.call(arguments,2)):t.call(e)}finally{n||(n=!0,this.end())}return r},defer:function(e,t,r){r||(r=t,t=null),"string"==typeof r&&(r=t[r]);var i=this.DEBUG?(new Error).stack:void 0,o=arguments.length>3?l.call(arguments,3):void 0;return this.currentInstance||n(this),this.currentInstance.schedule(e,t,r,o,!1,i)},deferOnce:function(e,t,r){r||(r=t,t=null),"string"==typeof r&&(r=t[r]);var i=this.DEBUG?(new Error).stack:void 0,o=arguments.length>3?l.call(arguments,3):void 0;return this.currentInstance||n(this),this.currentInstance.schedule(e,t,r,o,!0,i)},setTimeout:function(){var e=this,t=h.call(arguments),r=arguments[0],n=arguments[1],o=+new Date+t;n||(n=r,r=null),"string"==typeof n&&(n=r[n]);var s,c;arguments.length>2?(c=l.call(arguments,2),s=function(){n.apply(r,c)}):s=function(){n.call(r)};var m,f;for(m=0,f=p.length;f>m&&!(o<p[m]);m+=2);return p.splice(m,0,o,s),a&&o>u?s:(a&&(clearTimeout(a),a=null),a=d.setTimeout(function(){i(e),a=null,u=null},t),u=o,s)},throttle:function(e,t){for(var r,n=this,i=arguments,o=h.call(i),s=0,a=m.length;a>s;s++)if(r=m[s],r[0]===e&&r[1]===t)return;var u=d.setTimeout(function(){n.run.apply(n,i);for(var o=-1,s=0,a=m.length;a>s;s++)if(r=m[s],r[0]===e&&r[1]===t){o=s;break}o>-1&&m.splice(o,1)},o);m.push([e,t,u])},debounce:function(e,t){var r,n,i,s=this,a=arguments,u=h.call(a);"number"==typeof u?(r=u,u=!1):r=h.call(a),n=o(e,t),-1!==n&&(i=f[n],f.splice(n,1),clearTimeout(i[2]));var c=d.setTimeout(function(){u||s.run.apply(s,a),n=o(e,t),n&&f.splice(n,1)},r);u&&-1===n&&s.run.apply(s,a),f.push([e,t,c])},cancelTimers:function(){var e,t;for(e=0,t=m.length;t>e;e++)clearTimeout(m[e][2]);for(m=[],e=0,t=f.length;t>e;e++)clearTimeout(f[e][2]);f=[],a&&(clearTimeout(a),a=null),p=[],s&&(clearTimeout(s),s=null)},hasTimers:function(){return!!p.length||s},cancel:function(e){if(e&&"object"==typeof e&&e.queue&&e.method)return e.queue.cancel(e);if("function"==typeof e)for(var t=0,r=p.length;r>t;t+=2)if(p[t+1]===e)return p.splice(t,2),!0}},r.prototype.schedule=r.prototype.defer,r.prototype.scheduleOnce=r.prototype.deferOnce,r.prototype.later=r.prototype.setTimeout,t.Backburner=r})}(),function(){function e(){!Ember.run.currentRunLoop}var r=function(e){Ember.run.currentRunLoop=e},n=function(e,t){Ember.run.currentRunLoop=t},i=t("backburner").Backburner,o=new i(["sync","actions","destroy"],{sync:{before:Ember.beginPropertyChanges,after:Ember.endPropertyChanges},defaultQueue:"actions",onBegin:r,onEnd:n}),s=[].slice;Ember.run=function(){var e;if(Ember.onerror)try{e=o.run.apply(o,arguments)}catch(t){Ember.onerror(t)}else e=o.run.apply(o,arguments);return e},Ember.run.join=function(){if(!Ember.run.currentRunLoop)return Ember.run.apply(Ember.run,arguments);var e=s.call(arguments);e.unshift("actions"),Ember.run.schedule.apply(Ember.run,e)},Ember.run.backburner=o,Ember.run,Ember.run.currentRunLoop=null,Ember.run.queues=o.queueNames,Ember.run.begin=function(){o.begin()},Ember.run.end=function(){o.end()},Ember.run.schedule=function(){e(),o.schedule.apply(o,arguments)},Ember.run.hasScheduledTimers=function(){return o.hasTimers()},Ember.run.cancelTimers=function(){o.cancelTimers()},Ember.run.sync=function(){o.currentInstance&&o.currentInstance.queues.sync.flush()},Ember.run.later=function(){return o.later.apply(o,arguments)},Ember.run.once=function(){e();var t=s.call(arguments);return t.unshift("actions"),o.scheduleOnce.apply(o,t)},Ember.run.scheduleOnce=function(){return e(),o.scheduleOnce.apply(o,arguments)},Ember.run.next=function(){var e=s.call(arguments);return e.push(1),o.later.apply(o,e)},Ember.run.cancel=function(e){return o.cancel(e)},Ember.run.debounce=function(){return o.debounce.apply(o,arguments)},Ember.run.throttle=function(){return o.throttle.apply(o,arguments)}}(),function(){function e(e,t){return r(o(t)?Ember.lookup:e,t)}function t(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}Ember.LOG_BINDINGS=!1||!!Ember.ENV.LOG_BINDINGS;var r=Ember.get,n=(Ember.set,Ember.guidFor),i=/^([A-Z$]|([0-9][A-Z$]))/,o=Ember.isGlobalPath=function(e){return i.test(e)},s=function(e,t){this._direction="fwd",this._from=t,this._to=e,this._directionMap=Ember.Map.create()};s.prototype={copy:function(){var e=new s(this._to,this._from);return this._oneWay&&(e._oneWay=!0),e},from:function(e){return this._from=e,this},to:function(e){return this._to=e,this},oneWay:function(){return this._oneWay=!0,this},toString:function(){var e=this._oneWay?"[oneWay]":"";return"Ember.Binding<"+n(this)+">("+this._from+" -> "+this._to+")"+e},connect:function(t){var r=this._from,n=this._to;return Ember.trySet(t,n,e(t,r)),Ember.addObserver(t,r,this,this.fromDidChange),this._oneWay||Ember.addObserver(t,n,this,this.toDidChange),this._readyToSync=!0,this},disconnect:function(e){var t=!this._oneWay;return Ember.removeObserver(e,this._from,this,this.fromDidChange),t&&Ember.removeObserver(e,this._to,this,this.toDidChange),this._readyToSync=!1,this},fromDidChange:function(e){this._scheduleSync(e,"fwd")},toDidChange:function(e){this._scheduleSync(e,"back")},_scheduleSync:function(e,t){var r=this._directionMap,n=r.get(e);n||(Ember.run.schedule("sync",this,this._sync,e),r.set(e,t)),"back"===n&&"fwd"===t&&r.set(e,"fwd")},_sync:function(t){var n=Ember.LOG_BINDINGS;if(!t.isDestroyed&&this._readyToSync){var i=this._directionMap,o=i.get(t),s=this._from,a=this._to;if(i.remove(t),"fwd"===o){var u=e(t,this._from);n&&Ember.Logger.log(" ",this.toString(),"->",u,t),this._oneWay?Ember.trySet(t,a,u):Ember._suspendObserver(t,a,this,this.toDidChange,function(){Ember.trySet(t,a,u)})}else if("back"===o){var c=r(t,this._to);n&&Ember.Logger.log(" ",this.toString(),"<-",c,t),Ember._suspendObserver(t,s,this,this.fromDidChange,function(){Ember.trySet(Ember.isGlobalPath(s)?Ember.lookup:t,s,c)})}}}},t(s,{from:function(){var e=this,t=new e;return t.from.apply(t,arguments)},to:function(){var e=this,t=new e;return t.to.apply(t,arguments)},oneWay:function(e,t){var r=this,n=new r(null,e);return n.oneWay(t)}}),Ember.Binding=s,Ember.bind=function(e,t,r){return new Ember.Binding(t,r).connect(e)},Ember.oneWay=function(e,t,r){return new Ember.Binding(t,r).oneWay().connect(e)}}(),function(){function e(e){var t=Ember.meta(e,!0),r=t.mixins;return r?t.hasOwnProperty("mixins")||(r=t.mixins=V(r)):r=t.mixins={},r}function t(e,t){return t&&t.length>0&&(e.mixins=C.call(t,function(e){if(e instanceof y)return e;var t=new y;return t.properties=e,t})),e}function r(e){return"function"==typeof e&&e.isMethod!==!1&&e!==Boolean&&e!==Object&&e!==Number&&e!==Array&&e!==Date&&e!==String}function n(e,t){var r;return t instanceof y?(r=T(t),e[r]?S:(e[r]=t,t.properties)):t}function i(e,t,r,n){var i;return i=r[e]||n[e],t[e]&&(i=i?i.concat(t[e]):t[e]),i}function o(e,t,r,n,i){var o;return void 0===n[t]&&(o=i[t]),o=o||e.descs[t],o&&o instanceof Ember.ComputedProperty?(r=V(r),r.func=Ember.wrap(r.func,o.func),r):r}function s(e,t,r,n,i){var o;return void 0===i[t]&&(o=n[t]),o=o||e[t],"function"!=typeof o?r:Ember.wrap(r,o)}function a(e,t,r,n){var i=n[t]||e[t];return i?"function"==typeof i.concat?i.concat(r):Ember.makeArray(i).concat(r):Ember.makeArray(r)}function u(e,t,n,i){var o=i[t]||e[t];if(!o)return n;var a=Ember.merge({},o);for(var u in n)if(n.hasOwnProperty(u)){var c=n[u];a[u]=r(c)?s(e,u,c,o,{}):c}return a}function c(e,t,n,i,c,l,h,m){if(n instanceof Ember.Descriptor){if(n===w&&c[t])return S;n.func&&(n=o(i,t,n,l,c)),c[t]=n,l[t]=void 0}else r(n)?n=s(e,t,n,l,c):h&&O.call(h,t)>=0||"concatenatedProperties"===t||"mergedProperties"===t?n=a(e,t,n,l):m&&O.call(m,t)>=0&&(n=u(e,t,n,l)),c[t]=void 0,l[t]=n}function l(e,t,r,o,s,a){function u(e){delete r[e],delete o[e]}for(var h,m,f,p,d,b,v=0,E=e.length;E>v;v++)if(h=e[v],m=n(t,h),m!==S)if(m){b=Ember.meta(s),s.willMergeMixin&&s.willMergeMixin(m),p=i("concatenatedProperties",m,o,s),d=i("mergedProperties",m,o,s);for(f in m)m.hasOwnProperty(f)&&(a.push(f),c(s,f,m[f],b,r,o,p,d));m.hasOwnProperty("toString")&&(s.toString=m.toString)}else h.mixins&&(l(h.mixins,t,r,o,s,a),h._without&&A.call(h._without,u))}function h(e,t,r,n){if(N.test(t)){var i=n.bindings;i?n.hasOwnProperty("bindings")||(i=n.bindings=V(n.bindings)):i=n.bindings={},i[t]=r}}function m(e,t){var r,n,i,o=t.bindings;if(o){for(r in o)n=o[r],n&&(i=r.slice(0,-7),n instanceof Ember.Binding?(n=n.copy(),n.to(i)):n=new Ember.Binding(i,n),n.connect(e),e[r]=n);t.bindings={}}}function f(e,t){return m(e,t||Ember.meta(e)),e}function p(e,t,r,n,i){var o,s=t.methodName;return n[s]||i[s]?(o=i[s],t=n[s]):r.descs[s]?(t=r.descs[s],o=void 0):(t=void 0,o=e[s]),{desc:t,value:o}}function d(e,t,r,n,i){var o=r[n];if(o)for(var s=0,a=o.length;a>s;s++)Ember[i](e,o[s],null,t)}function b(e,t,r){var n=e[t];"function"==typeof n&&(d(e,t,n,"__ember_observesBefore__","removeBeforeObserver"),d(e,t,n,"__ember_observes__","removeObserver"),d(e,t,n,"__ember_listens__","removeListener")),"function"==typeof r&&(d(e,t,r,"__ember_observesBefore__","addBeforeObserver"),d(e,t,r,"__ember_observes__","addObserver"),d(e,t,r,"__ember_listens__","addListener"))}function v(t,r,n){var i,o,s,a={},u={},c=Ember.meta(t),m=[];l(r,e(t),a,u,t,m);for(var d=0,v=m.length;v>d;d++)if(i=m[d],"constructor"!==i&&u.hasOwnProperty(i)&&(s=a[i],o=u[i],s!==w)){for(;s&&s instanceof _;){var E=p(t,s,c,a,u);s=E.desc,o=E.value}(void 0!==s||void 0!==o)&&(b(t,i,o),h(t,i,o,c),x(t,i,s,o,c))}return n||f(t,c),t}function E(e,t,r){var n=T(e);if(r[n])return!1;if(r[n]=!0,e===t)return!0;for(var i=e.mixins,o=i?i.length:0;--o>=0;)if(E(i[o],t,r))return!0;return!1}function g(e,t,r){if(!r[T(t)])if(r[T(t)]=!0,t.properties){var n=t.properties;for(var i in n)n.hasOwnProperty(i)&&(e[i]=!0)}else t.mixins&&A.call(t.mixins,function(t){g(e,t,r)})}var y,w,_,C=Ember.ArrayPolyfills.map,O=Ember.ArrayPolyfills.indexOf,A=Ember.ArrayPolyfills.forEach,P=[].slice,V=Ember.create,x=Ember.defineProperty,T=Ember.guidFor,S={},N=Ember.IS_BINDING=/^.+Binding$/;Ember.mixin=function(e){var t=P.call(arguments,1);return v(e,t,!1),e},Ember.Mixin=function(){return t(this,arguments)},y=Ember.Mixin,y.prototype={properties:null,mixins:null,ownerConstructor:null},y._apply=v,y.applyPartial=function(e){var t=P.call(arguments,1);return v(e,t,!0)},y.finishPartial=f,Ember.anyUnprocessedMixins=!1,y.create=function(){Ember.anyUnprocessedMixins=!0;var e=this;return t(new e,arguments)};var D=y.prototype;D.reopen=function(){var e,t;this.properties?(e=y.create(),e.properties=this.properties,delete this.properties,this.mixins=[e]):this.mixins||(this.mixins=[]);var r,n=arguments.length,i=this.mixins;for(r=0;n>r;r++)e=arguments[r],e instanceof y?i.push(e):(t=y.create(),t.properties=e,i.push(t));return this},D.apply=function(e){return v(e,[this],!1)},D.applyPartial=function(e){return v(e,[this],!0)},D.detect=function(e){if(!e)return!1;if(e instanceof y)return E(e,this,{});var t=Ember.meta(e,!1).mixins;return t?!!t[T(this)]:!1},D.without=function(){var e=new y(this);return e._without=P.call(arguments),e},D.keys=function(){var e={},t={},r=[];g(e,this,t);for(var n in e)e.hasOwnProperty(n)&&r.push(n);return r},y.mixins=function(e){var t=Ember.meta(e,!1).mixins,r=[];if(!t)return r;for(var n in t){var i=t[n];i.properties||r.push(i)}return r},w=new Ember.Descriptor,w.toString=function(){return"(Required Property)"},Ember.required=function(){return w},_=function(e){this.methodName=e},_.prototype=new Ember.Descriptor,Ember.alias=function(e){return new _(e)},Ember.alias=Ember.deprecateFunc("Ember.alias is deprecated. Please use Ember.aliasMethod or Ember.computed.alias instead.",Ember.alias),Ember.aliasMethod=function(e){return new _(e)},Ember.observer=function(e){var t=P.call(arguments,1);return e.__ember_observes__=t,e},Ember.immediateObserver=function(){for(var e=0,t=arguments.length;t>e;e++)arguments[e];return Ember.observer.apply(this,arguments)},Ember.beforeObserver=function(e){var t=P.call(arguments,1);return e.__ember_observesBefore__=t,e}}(),function(){e("rsvp/all",["rsvp/promise","exports"],function(e,t){"use strict";function r(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("You must pass an array to all.");return new n(function(t,r){function n(e){return function(t){i(e,t)}}function i(e,r){s[e]=r,0===--a&&t(s)}var o,s=[],a=e.length;0===a&&t([]);for(var u=0;u<e.length;u++)o=e[u],o&&"function"==typeof o.then?o.then(n(u),r):i(u,o)})}var n=e.Promise;t.all=r}),e("rsvp/async",["exports"],function(e){"use strict";function t(){return function(e,t){process.nextTick(function(){e(t)})}}function r(){return function(e,t){setImmediate(function(){e(t)})}}function n(){var e=[],t=new a(function(){var t=e.slice();e=[],t.forEach(function(e){var t=e[0],r=e[1];t(r)})}),r=document.createElement("div");return t.observe(r,{attributes:!0}),window.addEventListener("unload",function(){t.disconnect(),t=null},!1),function(t,n){e.push([t,n]),r.setAttribute("drainQueue","drainQueue")}}function i(){return function(e,t){u.setTimeout(function(){e(t)},1)}}var o,s="undefined"!=typeof window?window:{},a=s.MutationObserver||s.WebKitMutationObserver,u="undefined"!=typeof global?global:this;o="function"==typeof setImmediate?r():"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():a?n():i(),e.async=o}),e("rsvp/config",["rsvp/async","exports"],function(e,t){"use strict";var r=e.async,n={};n.async=r,t.config=n}),e("rsvp/defer",["rsvp/promise","exports"],function(e,t){"use strict";function r(){var e={resolve:void 0,reject:void 0,promise:void 0};return e.promise=new n(function(t,r){e.resolve=t,e.reject=r}),e}var n=e.Promise;t.defer=r}),e("rsvp/events",["exports"],function(e){"use strict";var t=function(e,t){this.type=e;for(var r in t)t.hasOwnProperty(r)&&(this[r]=t[r])},r=function(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r][0]===t)return r;return-1},n=function(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t},i={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e},on:function(e,t,i){var o,s,a=n(this);for(e=e.split(/\s+/),i=i||this;s=e.shift();)o=a[s],o||(o=a[s]=[]),-1===r(o,t)&&o.push([t,i])},off:function(e,t){var i,o,s,a=n(this);for(e=e.split(/\s+/);o=e.shift();)t?(i=a[o],s=r(i,t),-1!==s&&i.splice(s,1)):a[o]=[]},trigger:function(e,r){var i,o,s,a,u,c=n(this);if(i=c[e])for(var l=0;l<i.length;l++)o=i[l],s=o[0],a=o[1],"object"!=typeof r&&(r={detail:r}),u=new t(e,r),s.call(a,u)}};e.EventTarget=i}),e("rsvp/hash",["rsvp/defer","exports"],function(e,t){"use strict";function r(e){var t=0;for(var r in e)t++;return t}function n(e){var t={},n=i(),o=r(e);0===o&&n.resolve({});var s=function(e){return function(t){a(e,t)}},a=function(e,r){t[e]=r,0===--o&&n.resolve(t)},u=function(e){n.reject(e)};for(var c in e)e[c]&&"function"==typeof e[c].then?e[c].then(s(c),u):a(c,e[c]);return n.promise}var i=e.defer;t.hash=n}),e("rsvp/node",["rsvp/promise","rsvp/all","exports"],function(e,t,r){"use strict";function n(e,t){return function(r,n){r?t(r):arguments.length>2?e(Array.prototype.slice.call(arguments,1)):e(n)}}function i(e){return function(){var t,r,i=Array.prototype.slice.call(arguments),a=this,u=new o(function(e,n){t=e,r=n});return s(i).then(function(i){i.push(n(t,r));try{e.apply(a,i)}catch(o){r(o)}}),u}}var o=e.Promise,s=t.all;r.denodeify=i}),e("rsvp/promise",["rsvp/config","rsvp/events","exports"],function(e,t,r){"use strict";function n(e){return i(e)||"object"==typeof e&&null!==e}function i(e){return"function"==typeof e}function o(e){l.onerror&&l.onerror(e.detail)}function s(e,t){e===t?u(e,t):a(e,t)||u(e,t)}function a(e,t){var r,o=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(n(t)&&(o=t.then,i(o)))return o.call(t,function(n){return r?!0:(r=!0,t!==n?s(e,n):u(e,n),void 0)},function(t){return r?!0:(r=!0,c(e,t),void 0)}),!0}catch(a){return c(e,a),!0}return!1}function u(e,t){l.async(function(){e.trigger("promise:resolved",{detail:t}),e.isFulfilled=!0,e.fulfillmentValue=t})}function c(e,t){l.async(function(){e.trigger("promise:failed",{detail:t}),e.isRejected=!0,e.rejectedReason=t})}var l=e.config,h=t.EventTarget,m=function(e){var t=this,r=!1;if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the sole argument to the promise constructor");if(!(t instanceof m))return new m(e);var n=function(e){r||(r=!0,s(t,e))},i=function(e){r||(r=!0,c(t,e))};this.on("promise:resolved",function(e){this.trigger("success",{detail:e.detail})},this),this.on("promise:failed",function(e){this.trigger("error",{detail:e.detail})},this),this.on("error",o);try{e(n,i)}catch(a){i(a)}},f=function(e,t,r,n){var o,u,l,h,m=i(r);if(m)try{o=r(n.detail),l=!0}catch(f){h=!0,u=f}else o=n.detail,l=!0;a(t,o)||(m&&l?s(t,o):h?c(t,u):"resolve"===e?s(t,o):"reject"===e&&c(t,o))};m.prototype={constructor:m,isRejected:void 0,isFulfilled:void 0,rejectedReason:void 0,fulfillmentValue:void 0,then:function(e,t){this.off("error",o);var r=new this.constructor(function(){});return this.isFulfilled&&l.async(function(t){f("resolve",r,e,{detail:t.fulfillmentValue})},this),this.isRejected&&l.async(function(e){f("reject",r,t,{detail:e.rejectedReason})},this),this.on("promise:resolved",function(t){f("resolve",r,e,t)}),this.on("promise:failed",function(e){f("reject",r,t,e)}),r},fail:function(e){return this.then(null,e)}},h.mixin(m.prototype),r.Promise=m}),e("rsvp/reject",["rsvp/promise","exports"],function(e,t){"use strict";function r(e){return new n(function(t,r){r(e)})}var n=e.Promise;t.reject=r}),e("rsvp/resolve",["rsvp/promise","exports"],function(e,t){"use strict";function r(e){return new n(function(t){t(e)})}var n=e.Promise;t.resolve=r}),e("rsvp/rethrow",["exports"],function(e){"use strict";function t(e){throw r.setTimeout(function(){throw e}),e}var r="undefined"==typeof global?this:global;e.rethrow=t}),e("rsvp",["rsvp/events","rsvp/promise","rsvp/node","rsvp/all","rsvp/hash","rsvp/rethrow","rsvp/defer","rsvp/config","rsvp/resolve","rsvp/reject","exports"],function(e,t,r,n,i,o,s,a,u,c,l){"use strict";function h(e,t){g[e]=t}var m=e.EventTarget,f=t.Promise,p=r.denodeify,d=n.all,b=i.hash,v=o.rethrow,E=s.defer,g=a.config,y=u.resolve,w=c.reject;l.Promise=f,l.EventTarget=m,l.all=d,l.hash=b,l.rethrow=v,l.defer=E,l.denodeify=p,l.configure=h,l.resolve=y,l.reject=w})}(),function(){Ember.MODEL_FACTORY_INJECTIONS=!1||!!Ember.ENV.MODEL_FACTORY_INJECTIONS,e("container",[],function(){function e(e){this.parent=e,this.dict={}}function t(t){this.parent=t,this.children=[],this.resolver=t&&t.resolver||function(){},this.registry=new e(t&&t.registry),this.cache=new e(t&&t.cache),this.factoryCache=new e(t&&t.cache),this.typeInjections=new e(t&&t.typeInjections),this.injections={},this.factoryTypeInjections=new e(t&&t.factoryTypeInjections),this.factoryInjections={},this._options=new e(t&&t._options),this._typeOptions=new e(t&&t._typeOptions)}function r(e){throw new Error(e+" is not currently supported on child containers")}function n(e,t){var r=o(e,t,"singleton");return r!==!1}function i(e,t){var r={};if(!t)return r;for(var n,i,o=0,s=t.length;s>o;o++){if(n=t[o],i=e.lookup(n.fullName),!i)throw new Error("Attempting to inject an unknown injection: `"+n.fullName+"`");r[n.property]=i}return r}function o(e,t,r){var n=e._options.get(t);if(n&&void 0!==n[r])return n[r];var i=t.split(":")[0];return n=e._typeOptions.get(i),n?n[r]:void 0}function s(e,t){var r,n=e.normalize(t),i=e.resolve(n),o=e.factoryCache,s=t.split(":")[0];if(i){if(o.has(t))return o.get(t);if("function"!=typeof i.extend||!Ember.MODEL_FACTORY_INJECTIONS&&"model"===s)return i;var c=a(e,t),l=u(e,t);return l._toString=e.makeToString(i,t),r=i.extend(c),r.reopenClass(l),o.set(t,r),r}}function a(e,t){var r=t.split(":"),n=r[0],o=[];return o=o.concat(e.typeInjections.get(n)||[]),o=o.concat(e.injections[t]||[]),o=i(e,o),o._debugContainerKey=t,o.container=e,o}function u(e,t){var r=t.split(":"),n=r[0],o=[];return o=o.concat(e.factoryTypeInjections.get(n)||[]),o=o.concat(e.factoryInjections[t]||[]),o=i(e,o),o._debugContainerKey=t,o}function c(e,t){var r=s(e,t);return o(e,t,"instantiate")===!1?r:r?"function"==typeof r.extend?r.create():r.create(a(e,t)):void 0}function l(e,t){e.cache.eachLocal(function(r,n){o(e,r,"instantiate")!==!1&&t(n)})}function h(e){e.cache.eachLocal(function(t,r){o(e,t,"instantiate")!==!1&&r.destroy()}),e.cache.dict={}}function m(e,t,r,n){var i=e.get(t);i||(i=[],e.set(t,i)),i.push({property:r,fullName:n})}function f(e,t,r,n){var i=e[t]=e[t]||[];i.push({property:r,fullName:n})}return e.prototype={parent:null,dict:null,get:function(e){var t=this.dict;return t.hasOwnProperty(e)?t[e]:this.parent?this.parent.get(e):void 0},set:function(e,t){this.dict[e]=t},remove:function(e){delete this.dict[e]},has:function(e){var t=this.dict;return t.hasOwnProperty(e)?!0:this.parent?this.parent.has(e):!1},eachLocal:function(e,t){var r=this.dict;for(var n in r)r.hasOwnProperty(n)&&e.call(t,n,r[n])}},t.prototype={parent:null,children:null,resolver:null,registry:null,cache:null,typeInjections:null,injections:null,_options:null,_typeOptions:null,child:function(){var e=new t(this);return this.children.push(e),e},set:function(e,t,r){e[t]=r},register:function(e,t,r,n){var i;-1!==e.indexOf(":")?(n=r,r=t,i=e):i=e+":"+t;var o=this.normalize(i);this.registry.set(o,r),this._options.set(o,n||{})},unregister:function(e){var t=this.normalize(e);this.registry.remove(t),this.cache.remove(t),this.factoryCache.remove(t),this._options.remove(t)},resolve:function(e){return this.resolver(e)||this.registry.get(e)},describe:function(e){return e},normalize:function(e){return e},makeToString:function(e){return e.toString()},lookup:function(e,t){if(e=this.normalize(e),t=t||{},this.cache.has(e)&&t.singleton!==!1)return this.cache.get(e);var r=c(this,e);return r?(n(this,e)&&t.singleton!==!1&&this.cache.set(e,r),r):void 0},lookupFactory:function(e){return s(this,e)},has:function(e){return this.cache.has(e)?!0:!!s(this,e)},optionsForType:function(e,t){this.parent&&r("optionsForType"),this._typeOptions.set(e,t)},options:function(e,t){this.optionsForType(e,t)},typeInjection:function(e,t,n){this.parent&&r("typeInjection"),m(this.typeInjections,e,t,n)},injection:function(e,t,n){return this.parent&&r("injection"),-1===e.indexOf(":")?this.typeInjection(e,t,n):(f(this.injections,e,t,n),void 0)},factoryTypeInjection:function(e,t,n){this.parent&&r("factoryTypeInjection"),m(this.factoryTypeInjections,e,t,n)},factoryInjection:function(e,t,n){return this.parent&&r("injection"),-1===e.indexOf(":")?this.factoryTypeInjection(e,t,n):(f(this.factoryInjections,e,t,n),void 0)},destroy:function(){this.isDestroyed=!0;for(var e=0,t=this.children.length;t>e;e++)this.children[e].destroy();this.children=[],l(this,function(e){e.destroy()}),this.parent=void 0,this.isDestroyed=!0},reset:function(){for(var e=0,t=this.children.length;t>e;e++)h(this.children[e]);h(this)}},t})}(),function(){function e(r,n,i,o){var s,a,u;if("object"!=typeof r||null===r)return r;if(n&&(a=t(i,r))>=0)return o[a];if("array"===Ember.typeOf(r)){if(s=r.slice(),n)for(a=s.length;--a>=0;)s[a]=e(s[a],n,i,o)}else if(Ember.Copyable&&Ember.Copyable.detect(r))s=r.copy(n,i,o);else{s={};for(u in r)r.hasOwnProperty(u)&&"__"!==u.substring(0,2)&&(s[u]=n?e(r[u],n,i,o):r[u])}return n&&(i.push(r),o.push(s)),s}var t=Ember.EnumerableUtils.indexOf;Ember.compare=function n(e,t){if(e===t)return 0;var r=Ember.typeOf(e),i=Ember.typeOf(t),o=Ember.Comparable;if(o){if("instance"===r&&o.detect(e.constructor))return e.constructor.compare(e,t);if("instance"===i&&o.detect(t.constructor))return 1-t.constructor.compare(t,e)}var s=Ember.ORDER_DEFINITION_MAPPING;if(!s){var a=Ember.ORDER_DEFINITION;s=Ember.ORDER_DEFINITION_MAPPING={};var u,c;for(u=0,c=a.length;c>u;++u)s[a[u]]=u;delete Ember.ORDER_DEFINITION}var l=s[r],h=s[i];if(h>l)return-1;if(l>h)return 1;switch(r){case"boolean":case"number":return t>e?-1:e>t?1:0;case"string":var m=e.localeCompare(t);return 0>m?-1:m>0?1:0;case"array":for(var f=e.length,p=t.length,d=Math.min(f,p),b=0,v=0;0===b&&d>v;)b=n(e[v],t[v]),v++;return 0!==b?b:p>f?-1:f>p?1:0;case"instance":return Ember.Comparable&&Ember.Comparable.detect(e)?e.compare(e,t):0;case"date":var E=e.getTime(),g=t.getTime();return g>E?-1:E>g?1:0;default:return 0}},Ember.copy=function(t,r){return"object"!=typeof t||null===t?t:Ember.Copyable&&Ember.Copyable.detect(t)?t.copy(r):e(t,r,r?[]:null,r?[]:null)},Ember.inspect=function(e){var t=Ember.typeOf(e);if("array"===t)return"["+e+"]";if("object"!==t)return e+"";var r,n=[];for(var i in e)if(e.hasOwnProperty(i)){if(r=e[i],"toString"===r)continue;"function"===Ember.typeOf(r)&&(r="function() { ... }"),n.push(i+": "+r)}return"{"+n.join(", ")+"}"},Ember.isEqual=function(e,t){return e&&"function"==typeof e.isEqual?e.isEqual(t):e===t},Ember.ORDER_DEFINITION=Ember.ENV.ORDER_DEFINITION||["undefined","null","boolean","number","string","array","object","instance","function","class","date"],Ember.keys=Object.keys,(!Ember.keys||Ember.create.isSimulated)&&(Ember.keys=function(e){var t=[];for(var r in e)"__"!==r.substring(0,2)&&"_super"!==r&&e.hasOwnProperty(r)&&t.push(r);return t});var r=["description","fileName","lineNumber","message","name","number","stack"];Ember.Error=function(){for(var e=Error.apply(this,arguments),t=0;t<r.length;t++)this[r[t]]=e[r[t]]},Ember.Error.prototype=Ember.create(Error.prototype)}(),function(){function e(){return 0===a.length?{}:a.pop()}function t(e){return a.push(e),null}function r(e,t){function r(r){var o=n(r,e);return i?t===o:!!o}var i=2===arguments.length;return r}var n=Ember.get,i=Ember.set,o=Array.prototype.slice,s=Ember.EnumerableUtils.indexOf,a=[];Ember.Enumerable=Ember.Mixin.create({nextObject:Ember.required(Function),firstObject:Ember.computed(function(){if(0===n(this,"length"))return void 0;var r,i=e();return r=this.nextObject(0,null,i),t(i),r}).property("[]"),lastObject:Ember.computed(function(){var r=n(this,"length");if(0===r)return void 0;var i,o=e(),s=0,a=null;do a=i,i=this.nextObject(s++,a,o);while(void 0!==i);return t(o),a}).property("[]"),contains:function(e){return void 0!==this.find(function(t){return t===e})},forEach:function(r,i){if("function"!=typeof r)throw new TypeError;var o=n(this,"length"),s=null,a=e();void 0===i&&(i=null);for(var u=0;o>u;u++){var c=this.nextObject(u,s,a);r.call(i,c,u,this),s=c}return s=null,a=t(a),this},getEach:function(e){return this.mapBy(e)},setEach:function(e,t){return this.forEach(function(r){i(r,e,t)})},map:function(e,t){var r=Ember.A();return this.forEach(function(n,i,o){r[i]=e.call(t,n,i,o)}),r},mapBy:function(e){return this.map(function(t){return n(t,e)})},mapProperty:Ember.aliasMethod("mapBy"),filter:function(e,t){var r=Ember.A();return this.forEach(function(n,i,o){e.call(t,n,i,o)&&r.push(n)}),r},reject:function(e,t){return this.filter(function(){return!e.apply(t,arguments)})},filterBy:function(){return this.filter(r.apply(this,arguments))},filterProperty:Ember.aliasMethod("filterBy"),rejectBy:function(e,t){var r=function(r){return n(r,e)===t},i=function(t){return!!n(t,e)},o=2===arguments.length?r:i;return this.reject(o)},rejectProperty:Ember.aliasMethod("rejectBy"),find:function(r,i){var o=n(this,"length");void 0===i&&(i=null);for(var s,a,u=null,c=!1,l=e(),h=0;o>h&&!c;h++)s=this.nextObject(h,u,l),(c=r.call(i,s,h,this))&&(a=s),u=s;return s=u=null,l=t(l),a},findBy:function(){return this.find(r.apply(this,arguments))},findProperty:Ember.aliasMethod("findBy"),every:function(e,t){return!this.find(function(r,n,i){return!e.call(t,r,n,i)})},everyBy:function(){return this.every(r.apply(this,arguments))},everyProperty:Ember.aliasMethod("everyBy"),any:function(e,t){return!!this.find(function(r,n,i){return!!e.call(t,r,n,i)})},some:Ember.aliasMethod("any"),anyBy:function(){return this.any(r.apply(this,arguments))},someProperty:Ember.aliasMethod("anyBy"),reduce:function(e,t,r){if("function"!=typeof e)throw new TypeError;var n=t;return this.forEach(function(t,i){n=e.call(null,n,t,i,this,r)},this),n},invoke:function(e){var t,r=Ember.A();return arguments.length>1&&(t=o.call(arguments,1)),this.forEach(function(n,i){var o=n&&n[e];"function"==typeof o&&(r[i]=t?o.apply(n,t):o.call(n))},this),r},toArray:function(){var e=Ember.A();return this.forEach(function(t,r){e[r]=t}),e},compact:function(){return this.filter(function(e){return null!=e})},without:function(e){if(!this.contains(e))return this;var t=Ember.A();return this.forEach(function(r){r!==e&&(t[t.length]=r)}),t},uniq:function(){var e=Ember.A();return this.forEach(function(t){s(e,t)<0&&e.push(t)}),e},"[]":Ember.computed(function(){return this}),addEnumerableObserver:function(e,t){var r=t&&t.willChange||"enumerableWillChange",i=t&&t.didChange||"enumerableDidChange",o=n(this,"hasEnumerableObservers");return o||Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.addListener(this,"@enumerable:before",e,r),Ember.addListener(this,"@enumerable:change",e,i),o||Ember.propertyDidChange(this,"hasEnumerableObservers"),this},removeEnumerableObserver:function(e,t){var r=t&&t.willChange||"enumerableWillChange",i=t&&t.didChange||"enumerableDidChange",o=n(this,"hasEnumerableObservers");return o&&Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.removeListener(this,"@enumerable:before",e,r),Ember.removeListener(this,"@enumerable:change",e,i),o&&Ember.propertyDidChange(this,"hasEnumerableObservers"),this},hasEnumerableObservers:Ember.computed(function(){return Ember.hasListeners(this,"@enumerable:change")||Ember.hasListeners(this,"@enumerable:before")}),enumerableContentWillChange:function(e,t){var r,i,o;return r="number"==typeof e?e:e?n(e,"length"):e=-1,i="number"==typeof t?t:t?n(t,"length"):t=-1,o=0>i||0>r||0!==i-r,-1===e&&(e=null),-1===t&&(t=null),Ember.propertyWillChange(this,"[]"),o&&Ember.propertyWillChange(this,"length"),Ember.sendEvent(this,"@enumerable:before",[this,e,t]),this},enumerableContentDidChange:function(e,t){var r,i,o;return r="number"==typeof e?e:e?n(e,"length"):e=-1,i="number"==typeof t?t:t?n(t,"length"):t=-1,o=0>i||0>r||0!==i-r,-1===e&&(e=null),-1===t&&(t=null),Ember.sendEvent(this,"@enumerable:change",[this,e,t]),o&&Ember.propertyDidChange(this,"length"),Ember.propertyDidChange(this,"[]"),this
}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.isNone),r=Ember.EnumerableUtils.map,n=Ember.cacheFor;Ember.Array=Ember.Mixin.create(Ember.Enumerable,{length:Ember.required(),objectAt:function(t){return 0>t||t>=e(this,"length")?void 0:e(this,t)},objectsAt:function(e){var t=this;return r(e,function(e){return t.objectAt(e)})},nextObject:function(e){return this.objectAt(e)},"[]":Ember.computed(function(t,r){return void 0!==r&&this.replace(0,e(this,"length"),r),this}),firstObject:Ember.computed(function(){return this.objectAt(0)}),lastObject:Ember.computed(function(){return this.objectAt(e(this,"length")-1)}),contains:function(e){return this.indexOf(e)>=0},slice:function(r,n){var i=Ember.A(),o=e(this,"length");for(t(r)&&(r=0),(t(n)||n>o)&&(n=o),0>r&&(r=o+r),0>n&&(n=o+n);n>r;)i[i.length]=this.objectAt(r++);return i},indexOf:function(t,r){var n,i=e(this,"length");for(void 0===r&&(r=0),0>r&&(r+=i),n=r;i>n;n++)if(this.objectAt(n)===t)return n;return-1},lastIndexOf:function(t,r){var n,i=e(this,"length");for((void 0===r||r>=i)&&(r=i-1),0>r&&(r+=i),n=r;n>=0;n--)if(this.objectAt(n)===t)return n;return-1},addArrayObserver:function(t,r){var n=r&&r.willChange||"arrayWillChange",i=r&&r.didChange||"arrayDidChange",o=e(this,"hasArrayObservers");return o||Ember.propertyWillChange(this,"hasArrayObservers"),Ember.addListener(this,"@array:before",t,n),Ember.addListener(this,"@array:change",t,i),o||Ember.propertyDidChange(this,"hasArrayObservers"),this},removeArrayObserver:function(t,r){var n=r&&r.willChange||"arrayWillChange",i=r&&r.didChange||"arrayDidChange",o=e(this,"hasArrayObservers");return o&&Ember.propertyWillChange(this,"hasArrayObservers"),Ember.removeListener(this,"@array:before",t,n),Ember.removeListener(this,"@array:change",t,i),o&&Ember.propertyDidChange(this,"hasArrayObservers"),this},hasArrayObservers:Ember.computed(function(){return Ember.hasListeners(this,"@array:change")||Ember.hasListeners(this,"@array:before")}),arrayContentWillChange:function(t,r,n){void 0===t?(t=0,r=n=-1):(void 0===r&&(r=-1),void 0===n&&(n=-1)),Ember.isWatching(this,"@each")&&e(this,"@each"),Ember.sendEvent(this,"@array:before",[this,t,r,n]);var i,o;if(t>=0&&r>=0&&e(this,"hasEnumerableObservers")){i=[],o=t+r;for(var s=t;o>s;s++)i.push(this.objectAt(s))}else i=r;return this.enumerableContentWillChange(i,n),this},arrayContentDidChange:function(t,r,i){void 0===t?(t=0,r=i=-1):(void 0===r&&(r=-1),void 0===i&&(i=-1));var o,s;if(t>=0&&i>=0&&e(this,"hasEnumerableObservers")){o=[],s=t+i;for(var a=t;s>a;a++)o.push(this.objectAt(a))}else o=i;this.enumerableContentDidChange(r,o),Ember.sendEvent(this,"@array:change",[this,t,r,i]);var u=e(this,"length"),c=n(this,"firstObject"),l=n(this,"lastObject");return this.objectAt(0)!==c&&(Ember.propertyWillChange(this,"firstObject"),Ember.propertyDidChange(this,"firstObject")),this.objectAt(u-1)!==l&&(Ember.propertyWillChange(this,"lastObject"),Ember.propertyDidChange(this,"lastObject")),this},"@each":Ember.computed(function(){return this.__each||(this.__each=new Ember.EachProxy(this)),this.__each})})}(),function(){function e(e,t,r){this.callbacks=e,this.cp=t,this.instanceMeta=r,this.dependentKeysByGuid={},this.trackedArraysByGuid={},this.changedItems={}}function t(e,t,r){this.dependentArray=e,this.index=t,this.item=e.objectAt(t),this.trackedArray=r,this.beforeObserver=null,this.observer=null}function r(e,t,r,n,i,o){var s={arrayChanged:e,index:r,item:t,propertyName:n,property:i};return o&&(s.previousValues=o),s}function n(e,t,n,i,o){E(e,function(s,a){o.setValue(t.addedItem.call(this,o.getValue(),s,r(e,s,a,i,n),o.sugarMeta))},this)}function i(e,t){var r;e._callbacks(),e._hasInstanceMeta(this,t)?(r=e._instanceMeta(this,t),r.setValue(e.resetValue(r.getValue()))):r=e._instanceMeta(this,t),e.options.initialize&&e.options.initialize.call(this,r.getValue(),{property:e,propertyName:t},r.sugarMeta)}function o(e,t,r){this.context=e,this.propertyName=t,this.cache=l(e).cache,this.dependentArrays={},this.sugarMeta={},this.initialValue=r}function s(e){var t=this;this.options=e,this._instanceMetas={},this._dependentKeys=null,this._itemPropertyKeys={},this._previousItemPropertyKeys={},this.readOnly(),this.cacheable(),this.recomputeOnce=function(e){Ember.run.once(this,r,e)};var r=function(e){var r=(t._dependentKeys,t._instanceMeta(this,e)),o=t._callbacks();i.call(this,t,e),E(t._dependentKeys,function(e){var n=u(this,e),i=r.dependentArrays[e];n===i?t._previousItemPropertyKeys[e]&&(delete t._previousItemPropertyKeys[e],r.dependentArraysObserver.setupPropertyObservers(e,t._itemPropertyKeys[e])):(r.dependentArrays[e]=n,i&&r.dependentArraysObserver.teardownObservers(i,e),n&&r.dependentArraysObserver.setupObservers(n,e))},this),E(t._dependentKeys,function(i){var s=u(this,i);s&&n.call(this,s,o,t,e,r)},this)};this.func=function(e){return r.call(this,e),t._instanceMeta(this,e).getValue()}}function a(e){return e}var u=Ember.get,c=(Ember.set,Ember.guidFor),l=Ember.meta,h=Ember.addBeforeObserver,m=Ember.removeBeforeObserver,f=Ember.addObserver,p=Ember.removeObserver,d=Ember.ComputedProperty,b=[].slice,v=Ember.create,E=Ember.EnumerableUtils.forEach,g=/^(.*)\.@each\.(.*)/,y=/(.*\.@each){2,}/;e.prototype={setValue:function(e){this.instanceMeta.setValue(e)},getValue:function(){return this.instanceMeta.getValue()},setupObservers:function(e,t){this.dependentKeysByGuid[c(e)]=t,e.addArrayObserver(this,{willChange:"dependentArrayWillChange",didChange:"dependentArrayDidChange"}),this.cp._itemPropertyKeys[t]&&this.setupPropertyObservers(t,this.cp._itemPropertyKeys[t])},teardownObservers:function(e,t){var r=this.cp._itemPropertyKeys[t]||[];delete this.dependentKeysByGuid[c(e)],this.teardownPropertyObservers(t,r),e.removeArrayObserver(this,{willChange:"dependentArrayWillChange",didChange:"dependentArrayDidChange"})},setupPropertyObservers:function(e,t){var r=u(this.instanceMeta.context,e),n=u(r,"length"),i=new Array(n);this.resetTransformations(e,i),E(r,function(n,o){var s=this.createPropertyObserverContext(r,o,this.trackedArraysByGuid[e]);i[o]=s,E(t,function(e){h(n,e,this,s.beforeObserver),f(n,e,this,s.observer)},this)},this)},teardownPropertyObservers:function(e,t){var r,n,i,o=this,s=this.trackedArraysByGuid[e];s&&s.apply(function(e,s,a){a!==Ember.TrackedArray.DELETE&&E(e,function(e){r=e.beforeObserver,n=e.observer,i=e.item,E(t,function(e){m(i,e,o,r),p(i,e,o,n)})})})},createPropertyObserverContext:function(e,r,n){var i=new t(e,r,n);return this.createPropertyObserver(i),i},createPropertyObserver:function(e){var t=this;e.beforeObserver=function(r,n){return t.updateIndexes(e.trackedArray,e.dependentArray),t.itemPropertyWillChange(r,n,e.dependentArray,e.index)},e.observer=function(r,n){return t.itemPropertyDidChange(r,n,e.dependentArray,e.index)}},resetTransformations:function(e,t){this.trackedArraysByGuid[e]=new Ember.TrackedArray(t)},addTransformation:function(e,t,r){var n=this.trackedArraysByGuid[e];n&&n.addItems(t,r)},removeTransformation:function(e,t,r){var n=this.trackedArraysByGuid[e];return n?n.removeItems(t,r):[]},updateIndexes:function(e,t){var r=u(t,"length");e.apply(function(e,t,n){n!==Ember.TrackedArray.DELETE&&(n!==Ember.TrackedArray.RETAIN||e.length!==r||0!==t)&&E(e,function(e,r){e.index=r+t})})},dependentArrayWillChange:function(e,t,n){function i(e){m(s,e,this,l[u].beforeObserver),p(s,e,this,l[u].observer)}var o,s,a,u,l,h=this.callbacks.removedItem,f=c(e),d=this.dependentKeysByGuid[f],b=this.cp._itemPropertyKeys[d]||[];for(l=this.removeTransformation(d,t,n),u=n-1;u>=0;--u)a=t+u,s=e.objectAt(a),E(b,i,this),o=r(e,s,a,this.instanceMeta.propertyName,this.cp),this.setValue(h.call(this.instanceMeta.context,this.getValue(),s,o,this.instanceMeta.sugarMeta))},dependentArrayDidChange:function(e,t,n,i){var o,s,a=this.callbacks.addedItem,u=c(e),l=this.dependentKeysByGuid[u],m=new Array(i),p=this.cp._itemPropertyKeys[l];E(e.slice(t,t+i),function(n,i){p&&(s=m[i]=this.createPropertyObserverContext(e,t+i,this.trackedArraysByGuid[l]),E(p,function(e){h(n,e,this,s.beforeObserver),f(n,e,this,s.observer)},this)),o=r(e,n,t+i,this.instanceMeta.propertyName,this.cp),this.setValue(a.call(this.instanceMeta.context,this.getValue(),n,o,this.instanceMeta.sugarMeta))},this),this.addTransformation(l,t,m)},itemPropertyWillChange:function(e,t,r,n){var i=c(e);this.changedItems[i]||(this.changedItems[i]={array:r,index:n,obj:e,previousValues:{}}),this.changedItems[i].previousValues[t]=u(e,t)},itemPropertyDidChange:function(){Ember.run.once(this,"flushChanges")},flushChanges:function(){var e,t,n,i=this.changedItems;for(e in i)t=i[e],n=r(t.array,t.obj,t.index,this.instanceMeta.propertyName,this.cp,t.previousValues),this.setValue(this.callbacks.removedItem.call(this.instanceMeta.context,this.getValue(),t.obj,n,this.instanceMeta.sugarMeta)),this.setValue(this.callbacks.addedItem.call(this.instanceMeta.context,this.getValue(),t.obj,n,this.instanceMeta.sugarMeta));this.changedItems={}}},o.prototype={getValue:function(){return this.propertyName in this.cache?this.cache[this.propertyName]:this.initialValue},setValue:function(e){void 0!==e?this.cache[this.propertyName]=e:delete this.cache[this.propertyName]}},Ember.ReduceComputedProperty=s,s.prototype=v(d.prototype),s.prototype._callbacks=function(){if(!this.callbacks){var e=this.options;this.callbacks={removedItem:e.removedItem||a,addedItem:e.addedItem||a}}return this.callbacks},s.prototype._hasInstanceMeta=function(e,t){var r=c(e),n=r+":"+t;return!!this._instanceMetas[n]},s.prototype._instanceMeta=function(t,r){var n=c(t),i=n+":"+r,s=this._instanceMetas[i];return s||(s=this._instanceMetas[i]=new o(t,r,this.initialValue()),s.dependentArraysObserver=new e(this._callbacks(),this,s,t,r,s.sugarMeta)),s},s.prototype.initialValue=function(){switch(typeof this.options.initialValue){case"undefined":throw new Error("reduce computed properties require an initial value: did you forget to pass one to Ember.reduceComputed?");case"function":return this.options.initialValue();default:return this.options.initialValue}},s.prototype.resetValue=function(){return this.initialValue()},s.prototype.itemPropertyKey=function(e,t){this._itemPropertyKeys[e]=this._itemPropertyKeys[e]||[],this._itemPropertyKeys[e].push(t)},s.prototype.clearItemPropertyKeys=function(e){this._itemPropertyKeys[e]&&(this._previousItemPropertyKeys[e]=this._itemPropertyKeys[e],this._itemPropertyKeys[e]=[])},s.prototype.property=function(){var e,t,r,n=this,i=(b.call(arguments),[]);return E(b.call(arguments),function(o){if(y.test(o))throw new Error("Nested @each properties not supported: "+o);(e=g.exec(o))?(t=e[1],r=e[2],n.itemPropertyKey(t,r),i.push(t)):i.push(o)}),d.prototype.property.apply(this,i)},Ember.reduceComputed=function(e){var t;if(arguments.length>1&&(t=b.call(arguments,0,-1),e=b.call(arguments,-1)[0]),"object"!=typeof e)throw new Error("Reduce Computed Property declared without an options hash");if(!e.initialValue)throw new Error("Reduce Computed Property declared without an initial value");var r=new s(e);return t&&r.property.apply(r,t),r}}(),function(){function e(){var e=this;return t.apply(this,arguments),this.func=function(t){return function(r){return e._hasInstanceMeta(this,r)||i(e._dependentKeys,function(t){Ember.addObserver(this,t,function(){e.recomputeOnce.call(this,r)})},this),t.apply(this,arguments)}}(this.func),this}var t=Ember.ReduceComputedProperty,r=[].slice,n=Ember.create,i=Ember.EnumerableUtils.forEach;Ember.ArrayComputedProperty=e,e.prototype=n(t.prototype),e.prototype.initialValue=function(){return Ember.A()},e.prototype.resetValue=function(e){return e.clear(),e},Ember.arrayComputed=function(t){var n;if(arguments.length>1&&(n=r.call(arguments,0,-1),t=r.call(arguments,-1)[0]),"object"!=typeof t)throw new Error("Array Computed Property declared without an options hash");var i=new e(t);return n&&i.property.apply(i,n),i}}(),function(){function e(e,n,i,o){function s(e){return Ember.ObjectProxy.detectInstance(e)?r(t(e,"content")):r(e)}var a,u,c,l,h;return arguments.length<4&&(o=t(e,"length")),arguments.length<3&&(i=0),i===o?i:(a=i+Math.floor((o-i)/2),u=e.objectAt(a),l=s(u),h=s(n),l===h?a:(c=this.order(u,n),0===c&&(c=h>l?-1:1),0>c?this.binarySearch(e,n,a+1,o):c>0?this.binarySearch(e,n,i,a):a))}var t=Ember.get,r=(Ember.set,Ember.guidFor),n=Ember.merge,i=[].slice,o=Ember.EnumerableUtils.forEach,s=Ember.EnumerableUtils.map;Ember.computed.max=function(e){return Ember.reduceComputed.call(null,e,{initialValue:-1/0,addedItem:function(e,t){return Math.max(e,t)},removedItem:function(e,t){return e>t?e:void 0}})},Ember.computed.min=function(e){return Ember.reduceComputed.call(null,e,{initialValue:1/0,addedItem:function(e,t){return Math.min(e,t)},removedItem:function(e,t){return t>e?e:void 0}})},Ember.computed.map=function(e,t){var r={addedItem:function(e,r,n){var i=t(r);return e.insertAt(n.index,i),e},removedItem:function(e,t,r){return e.removeAt(r.index,1),e}};return Ember.arrayComputed(e,r)},Ember.computed.mapBy=function(e,r){var n=function(e){return t(e,r)};return Ember.computed.map(e+".@each."+r,n)},Ember.computed.mapProperty=Ember.computed.mapBy,Ember.computed.filter=function(e,t){var r={initialize:function(e,t,r){r.filteredArrayIndexes=new Ember.SubArray},addedItem:function(e,r,n,i){var o=!!t(r),s=i.filteredArrayIndexes.addItem(n.index,o);return o&&e.insertAt(s,r),e},removedItem:function(e,t,r,n){var i=n.filteredArrayIndexes.removeItem(r.index);return i>-1&&e.removeAt(i),e}};return Ember.arrayComputed(e,r)},Ember.computed.filterBy=function(e,r,n){var i;return i=2===arguments.length?function(e){return t(e,r)}:function(e){return t(e,r)===n},Ember.computed.filter(e+".@each."+r,i)},Ember.computed.filterProperty=Ember.computed.filterBy,Ember.computed.uniq=function(){var e=i.call(arguments);return e.push({initialize:function(e,t,r){r.itemCounts={}},addedItem:function(e,t,n,i){var o=r(t);return i.itemCounts[o]?++i.itemCounts[o]:i.itemCounts[o]=1,e.addObject(t),e},removedItem:function(e,t,n,i){var o=r(t),s=i.itemCounts;return 0===--s[o]&&e.removeObject(t),e}}),Ember.arrayComputed.apply(null,e)},Ember.computed.union=Ember.computed.uniq,Ember.computed.intersect=function(){var e=function(e){return s(e.property._dependentKeys,function(e){return r(e)})},t=i.call(arguments);return t.push({initialize:function(e,t,r){r.itemCounts={}},addedItem:function(t,n,i,o){var s=r(n),a=(e(i),r(i.arrayChanged)),u=i.property._dependentKeys.length,c=o.itemCounts;return c[s]||(c[s]={}),void 0===c[s][a]&&(c[s][a]=0),1===++c[s][a]&&u===Ember.keys(c[s]).length&&t.addObject(n),t},removedItem:function(t,n,i,o){var s,a=r(n),u=(e(i),r(i.arrayChanged)),c=(i.property._dependentKeys.length,o.itemCounts);return void 0===c[a][u]&&(c[a][u]=0),0===--c[a][u]&&(delete c[a][u],s=Ember.keys(c[a]).length,0===s&&delete c[a],t.removeObject(n)),t}}),Ember.arrayComputed.apply(null,t)},Ember.computed.setDiff=function(e,r){if(2!==arguments.length)throw new Error("setDiff requires exactly two dependent arrays.");return Ember.arrayComputed.call(null,e,r,{addedItem:function(n,i,o){var s=t(this,e),a=t(this,r);return o.arrayChanged===s?a.contains(i)||n.addObject(i):n.removeObject(i),n},removedItem:function(n,i,o){var s=t(this,e),a=t(this,r);return o.arrayChanged===a?s.contains(i)&&n.addObject(i):n.removeObject(i),n}})},Ember.computed.sort=function(r,i){var s,a;return"function"==typeof i?s=function(t,r,n){n.order=i,n.binarySearch=e}:(a=i,s=function(n,i,s){function u(){var e,n,u,l=t(this,a),h=s.sortProperties=[],m=s.sortPropertyAscending={};i.property.clearItemPropertyKeys(r),o(l,function(t){-1!==(n=t.indexOf(":"))?(e=t.substring(0,n),u="desc"!==t.substring(n+1).toLowerCase()):(e=t,u=!0),h.push(e),m[e]=u,i.property.itemPropertyKey(r,e)}),l.addObserver("@each",this,c)}function c(){Ember.run.once(this,l,i.propertyName)}function l(e){u.call(this),i.property.recomputeOnce.call(this,e)}Ember.addObserver(this,a,c),u.call(this),s.order=function(e,r){for(var n,i,o,s=0;s<this.sortProperties.length;++s)if(n=this.sortProperties[s],i=Ember.compare(t(e,n),t(r,n)),0!==i)return o=this.sortPropertyAscending[n],o?i:-1*i;return 0},s.binarySearch=e}),Ember.arrayComputed.call(null,r,{initialize:s,addedItem:function(e,t,r,n){var i=n.binarySearch(e,t);return e.insertAt(i,t),e},removedItem:function(e,t,r,i){var o,s,a;return r.previousValues?(o=n({content:t},r.previousValues),a=Ember.ObjectProxy.create(o)):a=t,s=i.binarySearch(e,a),e.removeAt(s),e}})}}(),function(){Ember.RSVP=t("rsvp")}(),function(){var e=/[ _]/g,t={},r=/([a-z])([A-Z])/g,n=/(\-|_|\.|\s)+(.)?/g,i=/([a-z\d])([A-Z]+)/g,o=/\-|\s+/g;Ember.STRINGS={},Ember.String={fmt:function(e,t){var r=0;return e.replace(/%@([0-9]+)?/g,function(e,n){return n=n?parseInt(n,10)-1:r++,e=t[n],null===e?"(null)":void 0===e?"":Ember.inspect(e)})},loc:function(e,t){return e=Ember.STRINGS[e]||e,Ember.String.fmt(e,t)},w:function(e){return e.split(/\s+/)},decamelize:function(e){return e.replace(r,"$1_$2").toLowerCase()},dasherize:function(r){var n,i=t,o=i.hasOwnProperty(r);return o?i[r]:(n=Ember.String.decamelize(r).replace(e,"-"),i[r]=n,n)},camelize:function(e){return e.replace(n,function(e,t,r){return r?r.toUpperCase():""}).replace(/^([A-Z])/,function(e){return e.toLowerCase()})},classify:function(e){for(var t=e.split("."),r=[],n=0,i=t.length;i>n;n++){var o=Ember.String.camelize(t[n]);r.push(o.charAt(0).toUpperCase()+o.substr(1))}return r.join(".")},underscore:function(e){return e.replace(i,"$1_$2").replace(o,"_").toLowerCase()},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1)}}}(),function(){var e=Ember.String.fmt,t=Ember.String.w,r=Ember.String.loc,n=Ember.String.camelize,i=Ember.String.decamelize,o=Ember.String.dasherize,s=Ember.String.underscore,a=Ember.String.capitalize,u=Ember.String.classify;(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.fmt=function(){return e(this,arguments)},String.prototype.w=function(){return t(this)},String.prototype.loc=function(){return r(this,arguments)},String.prototype.camelize=function(){return n(this)},String.prototype.decamelize=function(){return i(this)},String.prototype.dasherize=function(){return o(this)},String.prototype.underscore=function(){return s(this)},String.prototype.classify=function(){return u(this)},String.prototype.capitalize=function(){return a(this)})}(),function(){var e=Array.prototype.slice;(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Function)&&(Function.prototype.property=function(){var e=Ember.computed(this);return e.property.apply(e,arguments)},Function.prototype.observes=function(){return this.__ember_observes__=e.call(arguments),this},Function.prototype.observesImmediately=function(){for(var e=0,t=arguments.length;t>e;e++)arguments[e];return this.observes.apply(this,arguments)},Function.prototype.observesBefore=function(){return this.__ember_observesBefore__=e.call(arguments),this},Function.prototype.on=function(){var t=e.call(arguments);return this.__ember_listens__=t,this})}(),function(){Ember.Comparable=Ember.Mixin.create({compare:Ember.required(Function)})}(),function(){var e=Ember.get;Ember.set,Ember.Copyable=Ember.Mixin.create({copy:Ember.required(Function),frozenCopy:function(){if(Ember.Freezable&&Ember.Freezable.detect(this))return e(this,"isFrozen")?this:this.copy().freeze();throw new Error(Ember.String.fmt("%@ does not support freezing",[this]))}})}(),function(){var e=Ember.get,t=Ember.set;Ember.Freezable=Ember.Mixin.create({isFrozen:!1,freeze:function(){return e(this,"isFrozen")?this:(t(this,"isFrozen",!0),this)}}),Ember.FROZEN_ERROR="Frozen object cannot be modified."}(),function(){var e=Ember.EnumerableUtils.forEach;Ember.MutableEnumerable=Ember.Mixin.create(Ember.Enumerable,{addObject:Ember.required(Function),addObjects:function(t){return Ember.beginPropertyChanges(this),e(t,function(e){this.addObject(e)},this),Ember.endPropertyChanges(this),this},removeObject:Ember.required(Function),removeObjects:function(t){return Ember.beginPropertyChanges(this),e(t,function(e){this.removeObject(e)},this),Ember.endPropertyChanges(this),this}})}(),function(){var e="Index out of range",t=[],r=Ember.get;Ember.set,Ember.MutableArray=Ember.Mixin.create(Ember.Array,Ember.MutableEnumerable,{replace:Ember.required(),clear:function(){var e=r(this,"length");return 0===e?this:(this.replace(0,e,t),this)},insertAt:function(t,n){if(t>r(this,"length"))throw new Error(e);return this.replace(t,0,[n]),this},removeAt:function(n,i){if("number"==typeof n){if(0>n||n>=r(this,"length"))throw new Error(e);void 0===i&&(i=1),this.replace(n,i,t)}return this},pushObject:function(e){return this.insertAt(r(this,"length"),e),e},pushObjects:function(e){if(!Ember.Enumerable.detect(e)&&!Ember.isArray(e))throw new TypeError("Must pass Ember.Enumerable to Ember.MutableArray#pushObjects");return this.replace(r(this,"length"),0,e),this},popObject:function(){var e=r(this,"length");if(0===e)return null;var t=this.objectAt(e-1);return this.removeAt(e-1,1),t},shiftObject:function(){if(0===r(this,"length"))return null;var e=this.objectAt(0);return this.removeAt(0),e},unshiftObject:function(e){return this.insertAt(0,e),e},unshiftObjects:function(e){return this.replace(0,0,e),this},reverseObjects:function(){var e=r(this,"length");if(0===e)return this;var t=this.toArray().reverse();return this.replace(0,e,t),this},setObjects:function(e){if(0===e.length)return this.clear();var t=r(this,"length");return this.replace(0,t,e),this},removeObject:function(e){for(var t=r(this,"length")||0;--t>=0;){var n=this.objectAt(t);n===e&&this.removeAt(t)}return this},addObject:function(e){return this.contains(e)||this.pushObject(e),this}})}(),function(){var e=Ember.get,t=Ember.set,r=Array.prototype.slice,n=Ember.getProperties;Ember.Observable=Ember.Mixin.create({get:function(t){return e(this,t)},getProperties:function(){return n.apply(null,[this].concat(r.call(arguments)))},set:function(e,r){return t(this,e,r),this},setProperties:function(e){return Ember.setProperties(this,e)},beginPropertyChanges:function(){return Ember.beginPropertyChanges(),this},endPropertyChanges:function(){return Ember.endPropertyChanges(),this},propertyWillChange:function(e){return Ember.propertyWillChange(this,e),this},propertyDidChange:function(e){return Ember.propertyDidChange(this,e),this},notifyPropertyChange:function(e){return this.propertyWillChange(e),this.propertyDidChange(e),this},addBeforeObserver:function(e,t,r){Ember.addBeforeObserver(this,e,t,r)},addObserver:function(e,t,r){Ember.addObserver(this,e,t,r)},removeObserver:function(e,t,r){Ember.removeObserver(this,e,t,r)},hasObserverFor:function(e){return Ember.hasListeners(this,e+":change")},getPath:function(e){return this.get(e)},setPath:function(e,t){return this.set(e,t)},getWithDefault:function(e,t){return Ember.getWithDefault(this,e,t)},incrementProperty:function(r,n){return Ember.isNone(n)&&(n=1),t(this,r,(e(this,r)||0)+n),e(this,r)},decrementProperty:function(r,n){return Ember.isNone(n)&&(n=1),t(this,r,(e(this,r)||0)-n),e(this,r)},toggleProperty:function(r){return t(this,r,!e(this,r)),e(this,r)},cacheFor:function(e){return Ember.cacheFor(this,e)},observersForKey:function(e){return Ember.observersFor(this,e)}})}(),function(){var e=Ember.get;Ember.set,Ember.TargetActionSupport=Ember.Mixin.create({target:null,action:null,actionContext:null,targetObject:Ember.computed(function(){var t=e(this,"target");if("string"===Ember.typeOf(t)){var r=e(this,t);return void 0===r&&(r=e(Ember.lookup,t)),r}return t}).property("target"),actionContextObject:Ember.computed(function(){var t=e(this,"actionContext");if("string"===Ember.typeOf(t)){var r=e(this,t);return void 0===r&&(r=e(Ember.lookup,t)),r}return t}).property("actionContext"),triggerAction:function(t){t=t||{};var r=t.action||e(this,"action"),n=t.target||e(this,"targetObject"),i=t.actionContext||e(this,"actionContextObject")||this;if(n&&r){var o;return o=n.send?n.send.apply(n,[r,i]):n[r].apply(n,[i]),o!==!1&&(o=!0),o}return!1}})}(),function(){Ember.Evented=Ember.Mixin.create({on:function(e,t,r){return Ember.addListener(this,e,t,r),this},one:function(e,t,r){return r||(r=t,t=null),Ember.addListener(this,e,t,r,!0),this},trigger:function(e){var t,r,n=[];for(t=1,r=arguments.length;r>t;t++)n.push(arguments[t]);Ember.sendEvent(this,e,n)},off:function(e,t,r){return Ember.removeListener(this,e,t,r),this},has:function(e){return Ember.hasListeners(this,e)}})}(),function(){var e=t("rsvp");e.configure("async",function(e,t){Ember.run.schedule("actions",t,e,t)});var r=Ember.get;Ember.DeferredMixin=Ember.Mixin.create({then:function(e,t){function n(t){return t===o?e(s):e(t)}var i,o,s;return s=this,i=r(this,"_deferred"),o=i.promise,o.then(e&&n,t)},resolve:function(e){var t,n;t=r(this,"_deferred"),n=t.promise,e===this?t.resolve(n):t.resolve(e)},reject:function(e){r(this,"_deferred").reject(e)},_deferred:Ember.computed(function(){return e.defer()})})}(),function(){var e=Ember.get;Ember.ActionHandler=Ember.Mixin.create({mergedProperties:["_actions"],willMergeMixin:function(e){e.actions&&!e._actions&&(e._actions=Ember.merge(e._actions||{},e.actions),delete e.actions)},send:function(t){var r,n=[].slice.call(arguments,1);if(this._actions&&this._actions[t]){if(this._actions[t].apply(this,n)!==!0)return}else if(this.deprecatedSend&&this.deprecatedSendHandles&&this.deprecatedSendHandles(t)&&this.deprecatedSend.apply(this,[].slice.call(arguments))!==!0)return;(r=e(this,"target"))&&r.send.apply(r,arguments)}})}(),function(){function e(e,r){r.then(function(r){return t(e,"isFulfilled",!0),t(e,"content",r),r},function(r){t(e,"isRejected",!0),t(e,"reason",r)}).fail(i)}var t=Ember.set,r=Ember.get,n=Ember.RSVP.resolve,i=Ember.RSVP.rethrow,o=Ember.computed.not,s=Ember.computed.or;Ember.PromiseProxyMixin=Ember.Mixin.create({reason:null,isPending:o("isSettled").readOnly(),isSettled:s("isRejected","isFulfilled").readOnly(),isRejected:!1,isFulfilled:!1,promise:Ember.computed(function(t,r){if(2===arguments.length)return r=n(r),e(this,r),r;throw new Error("PromiseProxy's promise must be set")}),then:function(e,t){return r(this,"promise").then(e,t)}})}(),function(){function e(e,t,r){this.operation=e,this.count=t,this.items=r}function t(e,t,r,n){this.operation=e,this.index=t,this.split=r,this.rangeStart=n}var r=Ember.get,n=Ember.EnumerableUtils.forEach,i="r",o="i",s="d";Ember.TrackedArray=function(t){arguments.length<1&&(t=[]);var n=r(t,"length");this._content=n?[new e(i,n,t)]:[]},Ember.TrackedArray.RETAIN=i,Ember.TrackedArray.INSERT=o,Ember.TrackedArray.DELETE=s,Ember.TrackedArray.prototype={addItems:function(t,n){var i,s,a=r(n,"length"),u=this._findArrayOperation(t),c=u.operation,l=u.index,h=u.rangeStart;s=new e(o,a,n),c?u.split?(this._split(l,t-h,s),i=l+1):(this._content.splice(l,0,s),i=l):(this._content.push(s),i=l),this._composeInsert(i)},removeItems:function(t,r){var n,i,o=this._findArrayOperation(t),a=(o.operation,o.index),u=o.rangeStart;return n=new e(s,r),o.split?(this._split(a,t-u,n),i=a+1):(this._content.splice(a,0,n),i=a),this._composeDelete(i)},apply:function(t){var r=[],o=0;n(this._content,function(e){t(e.items,o,e.operation),e.operation!==s&&(o+=e.count,r=r.concat(e.items))}),this._content=[new e(i,r.length,r)]},_findArrayOperation:function(e){var r,n,i,o,a,u=!1;for(r=o=0,n=this._content.length;n>r;++r)if(i=this._content[r],i.operation!==s){if(a=o+i.count-1,e===o)break;if(e>o&&a>=e){u=!0;break}o=a+1}return new t(i,r,u,o)},_split:function(t,r,n){var i=this._content[t],o=i.items.slice(r),s=new e(i.operation,o.length,o);i.count=r,i.items=i.items.slice(0,r),this._content.splice(t+1,0,n,s)},_composeInsert:function(e){var t=this._content[e],r=this._content[e-1],n=this._content[e+1],i=r&&r.operation,s=n&&n.operation;i===o?(r.count+=t.count,r.items=r.items.concat(t.items),s===o?(r.count+=n.count,r.items=r.items.concat(n.items),this._content.splice(e,2)):this._content.splice(e,1)):s===o&&(t.count+=n.count,t.items=t.items.concat(n.items),this._content.splice(e+1,1))},_composeDelete:function(e){var t,r,n,i=this._content[e],a=i.count,u=this._content[e-1],c=u&&u.operation,l=[];c===s&&(i=u,e-=1);for(var h=e+1;a>0;++h)t=this._content[h],r=t.operation,n=t.count,r!==s?(n>a?(l=l.concat(t.items.splice(0,a)),t.count-=a,h-=1,n=a,a=0):(l=l.concat(t.items),a-=n),r===o&&(i.count-=n)):i.count+=n;return i.count>0?this._content.splice(e+1,h-1-e):this._content.splice(e,1),l}}}(),function(){function e(e,t){this.type=e,this.count=t}var t=(Ember.get,Ember.EnumerableUtils.forEach,"r"),r="f";Ember.SubArray=function(r){arguments.length<1&&(r=0),this._operations=r>0?[new e(t,r)]:[]},Ember.SubArray.prototype={addItem:function(n,i){var o=-1,s=i?t:r,a=this;return this._findOperation(n,function(r,u,c,l,h){var m,f;s===r.type?++r.count:n===c?a._operations.splice(u,0,new e(s,1)):(m=new e(s,1),f=new e(r.type,l-n+1),r.count=n-c,a._operations.splice(u+1,0,m,f)),i&&(o=r.type===t?h+(n-c):h),a._composeAt(u)},function(t){a._operations.push(new e(s,1)),i&&(o=t),a._composeAt(a._operations.length-1)}),o},removeItem:function(e){var r=-1,n=this;return this._findOperation(e,function(i,o,s,a,u){i.type===t&&(r=u+(e-s)),i.count>1?--i.count:(n._operations.splice(o,1),n._composeAt(o))}),r},_findOperation:function(e,r,n){var i,o,s,a,u,c=0;for(i=a=0,o=this._operations.length;o>i;a=u+1,++i){if(s=this._operations[i],u=a+s.count-1,e>=a&&u>=e)return r(s,i,a,u,c),void 0;s.type===t&&(c+=s.count)}n(c)},_composeAt:function(e){var t,r=this._operations[e];r&&(e>0&&(t=this._operations[e-1],t.type===r.type&&(r.count+=t.count,this._operations.splice(e-1,1))),e<this._operations.length-1&&(t=this._operations[e+1],t.type===r.type&&(r.count+=t.count,this._operations.splice(e+1,1))))}}}(),function(){Ember.Container=t("container"),Ember.Container.set=Ember.set}(),function(){function e(){var e,t,o=!1,s=function(){o||s.proto(),n(this,i,g),n(this,"_super",g);var u=a(this),h=u.proto;if(u.proto=this,e){var m=e;e=null,this.reopen.apply(this,m)}if(t){var f=t;t=null;for(var p=this.concatenatedProperties,b=0,y=f.length;y>b;b++){var w=f[b];for(var _ in w)if(w.hasOwnProperty(_)){var C=w[_],O=Ember.IS_BINDING;if(O.test(_)){var A=u.bindings;A?u.hasOwnProperty("bindings")||(A=u.bindings=r(u.bindings)):A=u.bindings={},A[_]=C}var P=u.descs[_];if(p&&E(p,_)>=0){var V=this[_];C=V?"function"==typeof V.concat?V.concat(C):Ember.makeArray(V).concat(C):Ember.makeArray(C)}P?P.set(this,_,C):"function"!=typeof this.setUnknownProperty||_ in this?v?Ember.defineProperty(this,_,null,C):this[_]=C:this.setUnknownProperty(_,C)}}}d(this,u),this.init.apply(this,arguments),u.proto=h,c(this),l(this,"init")};return s.toString=f.prototype.toString,s.willReopen=function(){o&&(s.PrototypeMixin=f.create(s.PrototypeMixin)),o=!1},s._initMixins=function(t){e=t},s._initProperties=function(e){t=e},s.proto=function(){var e=s.superclass;return e&&e.proto(),o||(o=!0,s.PrototypeMixin.applyPartial(s.prototype),u(s.prototype)),this.prototype},s}function t(e){return function(){return e}}var r=(Ember.set,Ember.get,Ember.create),n=Ember.platform.defineProperty,i=Ember.GUID_KEY,o=Ember.guidFor,s=Ember.generateGuid,a=Ember.meta,u=Ember.rewatch,c=Ember.finishChains,l=Ember.sendEvent,h=Ember.destroy,m=Ember.run.schedule,f=Ember.Mixin,p=f._apply,d=f.finishPartial,b=f.prototype.reopen,v=Ember.ENV.MANDATORY_SETTER,E=Ember.EnumerableUtils.indexOf,g={configurable:!0,writable:!0,enumerable:!1,value:void 0},y=e();y.toString=function(){return"Ember.CoreObject"},y.PrototypeMixin=f.create({reopen:function(){return p(this,arguments,!0),this},init:function(){},concatenatedProperties:null,isDestroyed:!1,isDestroying:!1,destroy:function(){return this.isDestroying?void 0:(this.isDestroying=!0,m("actions",this,this.willDestroy),m("destroy",this,this._scheduledDestroy),this)},willDestroy:Ember.K,_scheduledDestroy:function(){this.isDestroyed||(h(this),this.isDestroyed=!0)},bind:function(e,t){return t instanceof Ember.Binding||(t=Ember.Binding.from(t)),t.to(e).connect(this),t},toString:function(){var e="function"==typeof this.toStringExtension,r=e?":"+this.toStringExtension():"",n="<"+this.constructor.toString()+":"+o(this)+r+">";return this.toString=t(n),n}}),y.PrototypeMixin.ownerConstructor=y,Ember.config.overridePrototypeMixin&&Ember.config.overridePrototypeMixin(y.PrototypeMixin),y.__super__=null;var w=f.create({ClassMixin:Ember.required(),PrototypeMixin:Ember.required(),isClass:!0,isMethod:!1,extend:function(){var t,n=e();return n.ClassMixin=f.create(this.ClassMixin),n.PrototypeMixin=f.create(this.PrototypeMixin),n.ClassMixin.ownerConstructor=n,n.PrototypeMixin.ownerConstructor=n,b.apply(n.PrototypeMixin,arguments),n.superclass=this,n.__super__=this.prototype,t=n.prototype=r(this.prototype),t.constructor=n,s(t,"ember"),a(t).proto=t,n.ClassMixin.apply(n),n},createWithMixins:function(){var e=this;return arguments.length>0&&this._initMixins(arguments),new e},create:function(){var e=this;return arguments.length>0&&this._initProperties(arguments),new e},reopen:function(){return this.willReopen(),b.apply(this.PrototypeMixin,arguments),this
},reopenClass:function(){return b.apply(this.ClassMixin,arguments),p(this,arguments,!1),this},detect:function(e){if("function"!=typeof e)return!1;for(;e;){if(e===this)return!0;e=e.superclass}return!1},detectInstance:function(e){return e instanceof this},metaForProperty:function(e){var t=a(this.proto(),!1).descs[e];return t._meta||{}},eachComputedProperty:function(e,t){var r,n=this.proto(),i=a(n).descs,o={};for(var s in i)r=i[s],r instanceof Ember.ComputedProperty&&e.call(t||this,s,r._meta||o)}});w.ownerConstructor=y,Ember.config.overrideClassMixin&&Ember.config.overrideClassMixin(w),y.ClassMixin=w,w.apply(y),Ember.CoreObject=y}(),function(){Ember.Object=Ember.CoreObject.extend(Ember.Observable),Ember.Object.toString=function(){return"Ember.Object"}}(),function(){function e(t,r,i){var s=t.length;c[t.join(".")]=r;for(var a in r)if(l.call(r,a)){var u=r[a];if(t[s]=a,u&&u.toString===n)u.toString=o(t.join(".")),u[m]=t.join(".");else if(u&&u.isNamespace){if(i[h(u)])continue;i[h(u)]=!0,e(t,u,i)}}t.length=s}function t(){var e,t,r=Ember.Namespace,n=Ember.lookup;if(!r.PROCESSED)for(var i in n)if("parent"!==i&&"top"!==i&&"frameElement"!==i&&"webkitStorageInfo"!==i&&!("globalStorage"===i&&n.StorageList&&n.globalStorage instanceof n.StorageList||n.hasOwnProperty&&!n.hasOwnProperty(i))){try{e=Ember.lookup[i],t=e&&e.isNamespace}catch(o){continue}t&&(e[m]=i)}}function r(e){var t=e.superclass;return t?t[m]?t[m]:r(t):void 0}function n(){Ember.BOOTED||this[m]||i();var e;if(this[m])e=this[m];else if(this._toString)e=this._toString;else{var t=r(this);e=t?"(subclass of "+t+")":"(unknown mixin)",this.toString=o(e)}return e}function i(){var r=!u.PROCESSED,n=Ember.anyUnprocessedMixins;if(r&&(t(),u.PROCESSED=!0),r||n){for(var i,o=u.NAMESPACES,s=0,a=o.length;a>s;s++)i=o[s],e([i.toString()],i,{});Ember.anyUnprocessedMixins=!1}}function o(e){return function(){return e}}var s=Ember.get,a=Ember.ArrayPolyfills.indexOf,u=Ember.Namespace=Ember.Object.extend({isNamespace:!0,init:function(){Ember.Namespace.NAMESPACES.push(this),Ember.Namespace.PROCESSED=!1},toString:function(){var e=s(this,"name");return e?e:(t(),this[Ember.GUID_KEY+"_name"])},nameClasses:function(){e([this.toString()],this,{})},destroy:function(){var e=Ember.Namespace.NAMESPACES;Ember.lookup[this.toString()]=void 0,e.splice(a.call(e,this),1),this._super()}});u.reopenClass({NAMESPACES:[Ember],NAMESPACES_BY_ID:{},PROCESSED:!1,processAll:i,byName:function(e){return Ember.BOOTED||i(),c[e]}});var c=u.NAMESPACES_BY_ID,l={}.hasOwnProperty,h=Ember.guidFor,m=Ember.NAME_KEY=Ember.GUID_KEY+"_name";Ember.Mixin.prototype.toString=n}(),function(){Ember.Application=Ember.Namespace.extend()}(),function(){var e="Index out of range",t=[],r=Ember.get;Ember.set,Ember.ArrayProxy=Ember.Object.extend(Ember.MutableArray,{content:null,arrangedContent:Ember.computed.alias("content"),objectAtContent:function(e){return r(this,"arrangedContent").objectAt(e)},replaceContent:function(e,t,n){r(this,"content").replace(e,t,n)},_contentWillChange:Ember.beforeObserver(function(){this._teardownContent()},"content"),_teardownContent:function(){var e=r(this,"content");e&&e.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},contentArrayWillChange:Ember.K,contentArrayDidChange:Ember.K,_contentDidChange:Ember.observer(function(){r(this,"content"),this._setupContent()},"content"),_setupContent:function(){var e=r(this,"content");e&&e.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},_arrangedContentWillChange:Ember.beforeObserver(function(){var e=r(this,"arrangedContent"),t=e?r(e,"length"):0;this.arrangedContentArrayWillChange(this,0,t,void 0),this.arrangedContentWillChange(this),this._teardownArrangedContent(e)},"arrangedContent"),_arrangedContentDidChange:Ember.observer(function(){var e=r(this,"arrangedContent"),t=e?r(e,"length"):0;this._setupArrangedContent(),this.arrangedContentDidChange(this),this.arrangedContentArrayDidChange(this,0,void 0,t)},"arrangedContent"),_setupArrangedContent:function(){var e=r(this,"arrangedContent");e&&e.addArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},_teardownArrangedContent:function(){var e=r(this,"arrangedContent");e&&e.removeArrayObserver(this,{willChange:"arrangedContentArrayWillChange",didChange:"arrangedContentArrayDidChange"})},arrangedContentWillChange:Ember.K,arrangedContentDidChange:Ember.K,objectAt:function(e){return r(this,"content")&&this.objectAtContent(e)},length:Ember.computed(function(){var e=r(this,"arrangedContent");return e?r(e,"length"):0}),_replace:function(e,t,n){var i=r(this,"content");return i&&this.replaceContent(e,t,n),this},replace:function(){if(r(this,"arrangedContent")!==r(this,"content"))throw new Ember.Error("Using replace on an arranged ArrayProxy is not allowed.");this._replace.apply(this,arguments)},_insertAt:function(t,n){if(t>r(this,"content.length"))throw new Error(e);return this._replace(t,0,[n]),this},insertAt:function(e,t){if(r(this,"arrangedContent")===r(this,"content"))return this._insertAt(e,t);throw new Ember.Error("Using insertAt on an arranged ArrayProxy is not allowed.")},removeAt:function(n,i){if("number"==typeof n){var o,s=r(this,"content"),a=r(this,"arrangedContent"),u=[];if(0>n||n>=r(this,"length"))throw new Error(e);for(void 0===i&&(i=1),o=n;n+i>o;o++)u.push(s.indexOf(a.objectAt(o)));for(u.sort(function(e,t){return t-e}),Ember.beginPropertyChanges(),o=0;o<u.length;o++)this._replace(u[o],1,t);Ember.endPropertyChanges()}return this},pushObject:function(e){return this._insertAt(r(this,"content.length"),e),e},pushObjects:function(e){if(!Ember.Enumerable.detect(e)&&!Ember.isArray(e))throw new TypeError("Must pass Ember.Enumerable to Ember.MutableArray#pushObjects");return this._replace(r(this,"length"),0,e),this},setObjects:function(e){if(0===e.length)return this.clear();var t=r(this,"length");return this._replace(0,t,e),this},unshiftObject:function(e){return this._insertAt(0,e),e},unshiftObjects:function(e){return this._replace(0,0,e),this},slice:function(){var e=this.toArray();return e.slice.apply(e,arguments)},arrangedContentArrayWillChange:function(e,t,r,n){this.arrayContentWillChange(t,r,n)},arrangedContentArrayDidChange:function(e,t,r,n){this.arrayContentDidChange(t,r,n)},init:function(){this._super(),this._setupContent(),this._setupArrangedContent()},willDestroy:function(){this._teardownArrangedContent(),this._teardownContent()}})}(),function(){function e(e,t){var r=t.slice(8);r in this||u(this,r)}function t(e,t){var r=t.slice(8);r in this||c(this,r)}var r=Ember.get,n=Ember.set,i=(Ember.String.fmt,Ember.addBeforeObserver),o=Ember.addObserver,s=Ember.removeBeforeObserver,a=Ember.removeObserver,u=Ember.propertyWillChange,c=Ember.propertyDidChange,l=Ember.meta,h=Ember.defineProperty;Ember.ObjectProxy=Ember.Object.extend({content:null,_contentDidChange:Ember.observer(function(){},"content"),isTruthy:Ember.computed.bool("content"),_debugContainerKey:null,willWatchProperty:function(r){var n="content."+r;i(this,n,null,e),o(this,n,null,t)},didUnwatchProperty:function(r){var n="content."+r;s(this,n,null,e),a(this,n,null,t)},unknownProperty:function(e){var t=r(this,"content");return t?r(t,e):void 0},setUnknownProperty:function(e,t){var i=l(this);if(i.proto===this)return h(this,e,null,t),t;var o=r(this,"content");return n(o,e,t)}})}(),function(){function e(e,t,r,i,o){var s,a=r._objects;for(a||(a=r._objects={});--o>=i;){var u=e.objectAt(o);u&&(Ember.addBeforeObserver(u,t,r,"contentKeyWillChange"),Ember.addObserver(u,t,r,"contentKeyDidChange"),s=n(u),a[s]||(a[s]=[]),a[s].push(o))}}function t(e,t,r,i,s){var a=r._objects;a||(a=r._objects={});for(var u,c;--s>=i;){var l=e.objectAt(s);l&&(Ember.removeBeforeObserver(l,t,r,"contentKeyWillChange"),Ember.removeObserver(l,t,r,"contentKeyDidChange"),c=n(l),u=a[c],u[o.call(u,s)]=null)}}var r=(Ember.set,Ember.get),n=Ember.guidFor,i=Ember.EnumerableUtils.forEach,o=Ember.ArrayPolyfills.indexOf,s=Ember.Object.extend(Ember.Array,{init:function(e,t,r){this._super(),this._keyName=t,this._owner=r,this._content=e},objectAt:function(e){var t=this._content.objectAt(e);return t&&r(t,this._keyName)},length:Ember.computed(function(){var e=this._content;return e?r(e,"length"):0})}),a=/^.+:(before|change)$/;Ember.EachProxy=Ember.Object.extend({init:function(e){this._super(),this._content=e,e.addArrayObserver(this),i(Ember.watchedEvents(this),function(e){this.didAddListener(e)},this)},unknownProperty:function(e){var t;return t=new s(this._content,e,this),Ember.defineProperty(this,e,null,t),this.beginObservingContentKey(e),t},arrayWillChange:function(e,r,n){var i,o,s=this._keys;o=n>0?r+n:-1,Ember.beginPropertyChanges(this);for(i in s)s.hasOwnProperty(i)&&(o>0&&t(e,i,this,r,o),Ember.propertyWillChange(this,i));Ember.propertyWillChange(this._content,"@each"),Ember.endPropertyChanges(this)},arrayDidChange:function(t,r,n,i){var o,s=this._keys;o=i>0?r+i:-1,Ember.changeProperties(function(){for(var n in s)s.hasOwnProperty(n)&&(o>0&&e(t,n,this,r,o),Ember.propertyDidChange(this,n));Ember.propertyDidChange(this._content,"@each")},this)},didAddListener:function(e){a.test(e)&&this.beginObservingContentKey(e.slice(0,-7))},didRemoveListener:function(e){a.test(e)&&this.stopObservingContentKey(e.slice(0,-7))},beginObservingContentKey:function(t){var n=this._keys;if(n||(n=this._keys={}),n[t])n[t]++;else{n[t]=1;var i=this._content,o=r(i,"length");e(i,t,this,0,o)}},stopObservingContentKey:function(e){var n=this._keys;if(n&&n[e]>0&&--n[e]<=0){var i=this._content,o=r(i,"length");t(i,e,this,0,o)}},contentKeyWillChange:function(e,t){Ember.propertyWillChange(this,t)},contentKeyDidChange:function(e,t){Ember.propertyDidChange(this,t)}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.EnumerableUtils._replace),r=Ember.Mixin.create(Ember.MutableArray,Ember.Observable,Ember.Copyable,{get:function(e){return"length"===e?this.length:"number"==typeof e?this[e]:this._super(e)},objectAt:function(e){return this[e]},replace:function(r,n,i){if(this.isFrozen)throw Ember.FROZEN_ERROR;var o=i?e(i,"length"):0;return this.arrayContentWillChange(r,n,o),i&&0!==i.length?t(this,r,n,i):this.splice(r,n),this.arrayContentDidChange(r,n,o),this},unknownProperty:function(e,t){var r;return void 0!==t&&void 0===r&&(r=this[e]=t),r},indexOf:function(e,t){var r,n=this.length;for(t=void 0===t?0:0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=n),r=t;n>r;r++)if(this[r]===e)return r;return-1},lastIndexOf:function(e,t){var r,n=this.length;for(t=void 0===t?n-1:0>t?Math.ceil(t):Math.floor(t),0>t&&(t+=n),r=t;r>=0;r--)if(this[r]===e)return r;return-1},copy:function(e){return e?this.map(function(e){return Ember.copy(e,!0)}):this.slice()}}),n=["length"];Ember.EnumerableUtils.forEach(r.keys(),function(e){Array.prototype[e]&&n.push(e)}),n.length>0&&(r=r.without.apply(r,n)),Ember.NativeArray=r,Ember.A=function(e){return void 0===e&&(e=[]),Ember.Array.detect(e)?e:Ember.NativeArray.apply(e)},Ember.NativeArray.activate=function(){r.apply(Array.prototype),Ember.A=function(e){return e||[]}},(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.Array)&&Ember.NativeArray.activate()}(),function(){var e=Ember.get,t=Ember.set,r=Ember.guidFor,n=Ember.isNone,i=Ember.String.fmt;Ember.Set=Ember.CoreObject.extend(Ember.MutableEnumerable,Ember.Copyable,Ember.Freezable,{length:0,clear:function(){if(this.isFrozen)throw new Error(Ember.FROZEN_ERROR);var n=e(this,"length");if(0===n)return this;var i;this.enumerableContentWillChange(n,0),Ember.propertyWillChange(this,"firstObject"),Ember.propertyWillChange(this,"lastObject");for(var o=0;n>o;o++)i=r(this[o]),delete this[i],delete this[o];return t(this,"length",0),Ember.propertyDidChange(this,"firstObject"),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(n,0),this},isEqual:function(t){if(!Ember.Enumerable.detect(t))return!1;var r=e(this,"length");if(e(t,"length")!==r)return!1;for(;--r>=0;)if(!t.contains(this[r]))return!1;return!0},add:Ember.aliasMethod("addObject"),remove:Ember.aliasMethod("removeObject"),pop:function(){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);var t=this.length>0?this[this.length-1]:null;return this.remove(t),t},push:Ember.aliasMethod("addObject"),shift:Ember.aliasMethod("pop"),unshift:Ember.aliasMethod("push"),addEach:Ember.aliasMethod("addObjects"),removeEach:Ember.aliasMethod("removeObjects"),init:function(e){this._super(),e&&this.addObjects(e)},nextObject:function(e){return this[e]},firstObject:Ember.computed(function(){return this.length>0?this[0]:void 0}),lastObject:Ember.computed(function(){return this.length>0?this[this.length-1]:void 0}),addObject:function(i){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(n(i))return this;var o,s=r(i),a=this[s],u=e(this,"length");return a>=0&&u>a&&this[a]===i?this:(o=[i],this.enumerableContentWillChange(null,o),Ember.propertyWillChange(this,"lastObject"),u=e(this,"length"),this[s]=u,this[u]=i,t(this,"length",u+1),Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(null,o),this)},removeObject:function(i){if(e(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(n(i))return this;var o,s,a=r(i),u=this[a],c=e(this,"length"),l=0===u,h=u===c-1;return u>=0&&c>u&&this[u]===i&&(s=[i],this.enumerableContentWillChange(s,null),l&&Ember.propertyWillChange(this,"firstObject"),h&&Ember.propertyWillChange(this,"lastObject"),c-1>u&&(o=this[c-1],this[u]=o,this[r(o)]=u),delete this[a],delete this[c-1],t(this,"length",c-1),l&&Ember.propertyDidChange(this,"firstObject"),h&&Ember.propertyDidChange(this,"lastObject"),this.enumerableContentDidChange(s,null)),this},contains:function(e){return this[r(e)]>=0},copy:function(){var n=this.constructor,i=new n,o=e(this,"length");for(t(i,"length",o);--o>=0;)i[o]=this[o],i[r(this[o])]=o;return i},toString:function(){var e,t=this.length,r=[];for(e=0;t>e;e++)r[e]=this[e];return i("Ember.Set<%@>",[r.join(",")])}})}(),function(){var e=Ember.DeferredMixin;Ember.get;var t=Ember.Object.extend(e);t.reopenClass({promise:function(e,r){var n=t.create();return e.call(r,n),n}}),Ember.Deferred=t}(),function(){var e=Ember.ArrayPolyfills.forEach,t=Ember.ENV.EMBER_LOAD_HOOKS||{},r={};Ember.onLoad=function(e,n){var i;t[e]=t[e]||Ember.A(),t[e].pushObject(n),(i=r[e])&&n(i)},Ember.runLoadHooks=function(n,i){r[n]=i,t[n]&&e.call(t[n],function(e){e(i)})}}(),function(){Ember.get,Ember.ControllerMixin=Ember.Mixin.create(Ember.ActionHandler,{isController:!0,target:null,container:null,parentController:null,store:null,model:Ember.computed.alias("content"),deprecatedSendHandles:function(e){return!!this[e]},deprecatedSend:function(e){var t=[].slice.call(arguments,1);this[e].apply(this,t)}}),Ember.Controller=Ember.Object.extend(Ember.ControllerMixin)}(),function(){var e=Ember.get,t=(Ember.set,Ember.EnumerableUtils.forEach);Ember.SortableMixin=Ember.Mixin.create(Ember.MutableEnumerable,{sortProperties:null,sortAscending:!0,sortFunction:Ember.compare,orderBy:function(r,n){var i=0,o=e(this,"sortProperties"),s=e(this,"sortAscending"),a=e(this,"sortFunction");return t(o,function(t){0===i&&(i=a(e(r,t),e(n,t)),0===i||s||(i=-1*i))}),i},destroy:function(){var r=e(this,"content"),n=e(this,"sortProperties");return r&&n&&t(r,function(e){t(n,function(t){Ember.removeObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this),this._super()},isSorted:Ember.computed.bool("sortProperties"),arrangedContent:Ember.computed("content","sortProperties.@each",function(){var r=e(this,"content"),n=e(this,"isSorted"),i=e(this,"sortProperties"),o=this;return r&&n?(r=r.slice(),r.sort(function(e,t){return o.orderBy(e,t)}),t(r,function(e){t(i,function(t){Ember.addObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this),Ember.A(r)):r}),_contentWillChange:Ember.beforeObserver(function(){var r=e(this,"content"),n=e(this,"sortProperties");r&&n&&t(r,function(e){t(n,function(t){Ember.removeObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this),this._super()},"content"),sortAscendingWillChange:Ember.beforeObserver(function(){this._lastSortAscending=e(this,"sortAscending")},"sortAscending"),sortAscendingDidChange:Ember.observer(function(){if(e(this,"sortAscending")!==this._lastSortAscending){var t=e(this,"arrangedContent");t.reverseObjects()}},"sortAscending"),contentArrayWillChange:function(r,n,i,o){var s=e(this,"isSorted");if(s){var a=e(this,"arrangedContent"),u=r.slice(n,n+i),c=e(this,"sortProperties");t(u,function(e){a.removeObject(e),t(c,function(t){Ember.removeObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this)}return this._super(r,n,i,o)},contentArrayDidChange:function(r,n,i,o){var s=e(this,"isSorted"),a=e(this,"sortProperties");if(s){var u=r.slice(n,n+o);t(u,function(e){this.insertItemSorted(e),t(a,function(t){Ember.addObserver(e,t,this,"contentItemSortPropertyDidChange")},this)},this)}return this._super(r,n,i,o)},insertItemSorted:function(t){var r=e(this,"arrangedContent"),n=e(r,"length"),i=this._binarySearch(t,0,n);r.insertAt(i,t)},contentItemSortPropertyDidChange:function(t){var r=e(this,"arrangedContent"),n=r.indexOf(t),i=r.objectAt(n-1),o=r.objectAt(n+1),s=i&&this.orderBy(t,i),a=o&&this.orderBy(t,o);(0>s||a>0)&&(r.removeObject(t),this.insertItemSorted(t))},_binarySearch:function(t,r,n){var i,o,s,a;return r===n?r:(a=e(this,"arrangedContent"),i=r+Math.floor((n-r)/2),o=a.objectAt(i),s=this.orderBy(o,t),0>s?this._binarySearch(t,i+1,n):s>0?this._binarySearch(t,r,i):i)}})}(),function(){var e=Ember.get,t=(Ember.set,Ember.EnumerableUtils.forEach),r=Ember.EnumerableUtils.replace;Ember.ArrayController=Ember.ArrayProxy.extend(Ember.ControllerMixin,Ember.SortableMixin,{itemController:null,lookupItemController:function(){return e(this,"itemController")},objectAtContent:function(t){var r=e(this,"length"),n=e(this,"arrangedContent"),i=n&&n.objectAt(t);if(t>=0&&r>t){var o=this.lookupItemController(i);if(o)return this.controllerAt(t,i,o)}return i},arrangedContentDidChange:function(){this._super(),this._resetSubControllers()},arrayContentDidChange:function(n,i,o){var s=e(this,"_subControllers"),a=s.slice(n,n+i);t(a,function(e){e&&e.destroy()}),r(s,n,i,new Array(o)),this._super(n,i,o)},init:function(){this._super(),this.set("_subControllers",Ember.A())},content:Ember.computed(function(){return Ember.A()}),controllerAt:function(t,r,n){var i,o=e(this,"container"),s=e(this,"_subControllers"),a=s[t];if(a)return a;if(i="controller:"+n,!o.has(i))throw new Error('Could not resolve itemController: "'+n+'"');return a=o.lookupFactory(i).create({target:this,parentController:e(this,"parentController")||this,content:r}),s[t]=a,a},_subControllers:null,_resetSubControllers:function(){var r=e(this,"_subControllers");r&&t(r,function(e){e&&e.destroy()}),this.set("_subControllers",Ember.A())}})}(),function(){Ember.ObjectController=Ember.ObjectProxy.extend(Ember.ControllerMixin)}(),function(){var e=Ember.imports.jQuery;Ember.$=e}(),function(){if(Ember.$){var e=Ember.String.w("dragstart drag dragenter dragleave dragover drop dragend");Ember.EnumerableUtils.forEach(e,function(e){Ember.$.event.fixHooks[e]={props:["dataTransfer"]}})}}(),function(){function e(e){var t=e.shiftKey||e.metaKey||e.altKey||e.ctrlKey,r=e.which>1;return!t&&!r}var t=this.document&&function(){var e=document.createElement("div");return e.innerHTML="<div></div>",e.firstChild.innerHTML="<script></script>",""===e.firstChild.innerHTML}(),r=this.document&&function(){var e=document.createElement("div");return e.innerHTML="Test: <script type='text/x-placeholder'></script>Value","Test:"===e.childNodes[0].nodeValue&&" Value"===e.childNodes[2].nodeValue}(),n=function(e,t){if(e.getAttribute("id")===t)return e;var r,i,o,s=e.childNodes.length;for(r=0;s>r;r++)if(i=e.childNodes[r],o=1===i.nodeType&&n(i,t))return o},i=function(e,i){t&&(i="&shy;"+i);var o=[];if(r&&(i=i.replace(/(\s+)(<script id='([^']+)')/g,function(e,t,r,n){return o.push([n,t]),r})),e.innerHTML=i,o.length>0){var s,a=o.length;for(s=0;a>s;s++){var u=n(e,o[s][0]),c=document.createTextNode(o[s][1]);u.parentNode.insertBefore(c,u)}}if(t){for(var l=e.firstChild;1===l.nodeType&&!l.nodeName;)l=l.firstChild;3===l.nodeType&&"Â­"===l.nodeValue.charAt(0)&&(l.nodeValue=l.nodeValue.slice(1))}},o={},s=function(e){if(void 0!==o[e])return o[e];var t=!0;if("select"===e.toLowerCase()){var r=document.createElement("select");i(r,'<option value="test">Test</option>'),t=1===r.options.length}return o[e]=t,t},a=function(e,t){var r=e.tagName;if(s(r))i(e,t);else{var n=e.outerHTML||(new XMLSerializer).serializeToString(e),o=n.match(new RegExp("<"+r+"([^>]*)>","i"))[0],a="</"+r+">",u=document.createElement("div");for(i(u,o+t+a),e=u.firstChild;e.tagName!==r;)e=e.nextSibling}return e};Ember.ViewUtils={setInnerHTML:a,isSimpleClick:e}}(),function(){function e(e){return e?n.test(e)?e.replace(i,""):e:e}function t(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r=function(e){return t[e]||"&amp;"},n=e.toString();return s.test(n)?n.replace(o,r):n}Ember.get,Ember.set;var r=function(){this.seen={},this.list=[]};r.prototype={add:function(e){e in this.seen||(this.seen[e]=!0,this.list.push(e))},toDOM:function(){return this.list.join(" ")}};var n=/[^a-zA-Z0-9\-]/,i=/[^a-zA-Z0-9\-]/g,o=/&(?!\w+;)|[<>"'`]/g,s=/[&<>"'`]/;Ember.RenderBuffer=function(e){return new Ember._RenderBuffer(e)},Ember._RenderBuffer=function(e){this.tagNames=[e||null],this.buffer=""},Ember._RenderBuffer.prototype={_element:null,_hasElement:!0,elementClasses:null,classes:null,elementId:null,elementAttributes:null,elementProperties:null,elementTag:null,elementStyle:null,parentBuffer:null,push:function(e){return this.buffer+=e,this},addClass:function(e){return this.elementClasses=this.elementClasses||new r,this.elementClasses.add(e),this.classes=this.elementClasses.list,this},setClasses:function(e){this.classes=e},id:function(e){return this.elementId=e,this},attr:function(e,t){var r=this.elementAttributes=this.elementAttributes||{};return 1===arguments.length?r[e]:(r[e]=t,this)},removeAttr:function(e){var t=this.elementAttributes;return t&&delete t[e],this},prop:function(e,t){var r=this.elementProperties=this.elementProperties||{};return 1===arguments.length?r[e]:(r[e]=t,this)},removeProp:function(e){var t=this.elementProperties;return t&&delete t[e],this},style:function(e,t){return this.elementStyle=this.elementStyle||{},this.elementStyle[e]=t,this},begin:function(e){return this.tagNames.push(e||null),this},pushOpeningTag:function(){var r=this.currentTagName();if(r){if(this._hasElement&&!this._element&&0===this.buffer.length)return this._element=this.generateElement(),void 0;var n,i,o=this.buffer,s=this.elementId,a=this.classes,u=this.elementAttributes,c=this.elementProperties,l=this.elementStyle;if(o+="<"+e(r),s&&(o+=' id="'+t(s)+'"',this.elementId=null),a&&(o+=' class="'+t(a.join(" "))+'"',this.classes=null),l){o+=' style="';for(i in l)l.hasOwnProperty(i)&&(o+=i+":"+t(l[i])+";");o+='"',this.elementStyle=null}if(u){for(n in u)u.hasOwnProperty(n)&&(o+=" "+n+'="'+t(u[n])+'"');this.elementAttributes=null}if(c){for(i in c)if(c.hasOwnProperty(i)){var h=c[i];(h||"number"==typeof h)&&(o+=h===!0?" "+i+'="'+i+'"':" "+i+'="'+t(c[i])+'"')}this.elementProperties=null}o+=">",this.buffer=o}},pushClosingTag:function(){var t=this.tagNames.pop();t&&(this.buffer+="</"+e(t)+">")},currentTagName:function(){return this.tagNames[this.tagNames.length-1]},generateElement:function(){var e,t,r=this.tagNames.pop(),n=document.createElement(r),i=Ember.$(n),o=this.elementId,s=this.classes,a=this.elementAttributes,u=this.elementProperties,c=this.elementStyle,l="";if(o&&(i.attr("id",o),this.elementId=null),s&&(i.attr("class",s.join(" ")),this.classes=null),c){for(t in c)c.hasOwnProperty(t)&&(l+=t+":"+c[t]+";");i.attr("style",l),this.elementStyle=null}if(a){for(e in a)a.hasOwnProperty(e)&&i.attr(e,a[e]);this.elementAttributes=null}if(u){for(t in u)u.hasOwnProperty(t)&&i.prop(t,u[t]);this.elementProperties=null}return n},element:function(){var e=this.innerString();return e&&(this._element=Ember.ViewUtils.setInnerHTML(this._element,e)),this._element},string:function(){if(this._hasElement&&this._element){var e=this.element(),t=e.outerHTML;return"undefined"==typeof t?Ember.$("<div/>").append(e).html():t}return this.innerString()},innerString:function(){return this.buffer}}}(),function(){var e=Ember.get,t=Ember.set;Ember.String.fmt,Ember.EventDispatcher=Ember.Object.extend({events:{touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",input:"input",change:"change",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd"},rootElement:"body",setup:function(r,n){var i,o=e(this,"events");Ember.$.extend(o,r||{}),Ember.isNone(n)||t(this,"rootElement",n),n=Ember.$(e(this,"rootElement")),n.addClass("ember-application");for(i in o)o.hasOwnProperty(i)&&this.setupHandler(n,i,o[i])},setupHandler:function(e,t,r){var n=this;e.on(t+".ember",".ember-view",function(e,t){return Ember.handleErrors(function(){var i=Ember.View.views[this.id],o=!0,s=null;return s=n._findNearestEventManager(i,r),s&&s!==t?o=n._dispatchEvent(s,e,r,i):i?o=n._bubbleEvent(i,e,r):e.stopPropagation(),o},this)}),e.on(t+".ember","[data-ember-action]",function(e){return Ember.handleErrors(function(){var t=Ember.$(e.currentTarget).attr("data-ember-action"),n=Ember.Handlebars.ActionHelper.registeredActions[t];return n&&n.eventName===r?n.handler(e):void 0},this)})},_findNearestEventManager:function(t,r){for(var n=null;t&&(n=e(t,"eventManager"),!n||!n[r]);)t=e(t,"parentView");return n},_dispatchEvent:function(e,t,r,n){var i=!0,o=e[r];return"function"===Ember.typeOf(o)?(i=Ember.run(function(){return o.call(e,t,n)}),t.stopPropagation()):i=this._bubbleEvent(n,t,r),i},_bubbleEvent:function(e,t,r){return Ember.run(function(){return e.handleEvent(r,t)})},destroy:function(){var t=e(this,"rootElement");return Ember.$(t).off(".ember","**").removeClass("ember-application"),this._super()}})}(),function(){var e=Ember.run.queues,t=Ember.ArrayPolyfills.indexOf;e.splice(t.call(e,"actions")+1,0,"render","afterRender")}(),function(){var e=Ember.get,t=Ember.set;Ember.ControllerMixin.reopen({target:null,namespace:null,view:null,container:null,_childContainers:null,init:function(){this._super(),t(this,"_childContainers",{})},_modelDidChange:Ember.observer(function(){var r=e(this,"_childContainers");for(var n in r)r.hasOwnProperty(n)&&r[n].destroy();t(this,"_childContainers",{})},"model")})}(),function(){function e(){Ember.run.once(Ember.View,"notifyMutationListeners")}var t={},r=Ember.get,n=Ember.set,i=Ember.guidFor,o=Ember.EnumerableUtils.forEach,s=Ember.EnumerableUtils.addObject,a=Ember.computed(function(){var e=this._childViews,t=Ember.A(),n=this;return o(e,function(e){var n;e.isVirtual?(n=r(e,"childViews"))&&t.pushObjects(n):t.push(e)}),t.replace=function(e,t,r){if(n instanceof Ember.ContainerView)return n.replace(e,t,r);throw new Error("childViews is immutable")},t});Ember.TEMPLATES={},Ember.CoreView=Ember.Object.extend(Ember.Evented,Ember.ActionHandler,{isView:!0,states:t,init:function(){this._super(),this.transitionTo("preRender")},parentView:Ember.computed(function(){var e=this._parentView;return e&&e.isVirtual?r(e,"parentView"):e}).property("_parentView"),state:null,_parentView:null,concreteView:Ember.computed(function(){return this.isVirtual?r(this,"parentView"):this}).property("parentView"),instrumentName:"core_view",instrumentDetails:function(e){e.object=this.toString()},renderToBuffer:function(e,t){var r="render."+this.instrumentName,n={};return this.instrumentDetails(n),Ember.instrument(r,n,function(){return this._renderToBuffer(e,t)},this)},_renderToBuffer:function(e){var t=this.tagName;(null===t||void 0===t)&&(t="div");var r=this.buffer=e&&e.begin(t)||Ember.RenderBuffer(t);return this.transitionTo("inBuffer",!1),this.beforeRender(r),this.render(r),this.afterRender(r),r},trigger:function(e){this._super.apply(this,arguments);var t=this[e];if(t){var r,n,i=[];for(r=1,n=arguments.length;n>r;r++)i.push(arguments[r]);return t.apply(this,i)}},deprecatedSendHandles:function(e){return!!this[e]},deprecatedSend:function(e){var t=[].slice.call(arguments,1);this[e].apply(this,t)},has:function(e){return"function"===Ember.typeOf(this[e])||this._super(e)},destroy:function(){var e=this._parentView;if(this._super())return this.removedFromDOM||this.destroyElement(),e&&e.removeChild(this),this.transitionTo("destroying",!1),this},clearRenderedChildren:Ember.K,triggerRecursively:Ember.K,invokeRecursively:Ember.K,transitionTo:Ember.K,destroyElement:Ember.K});var u=Ember._ViewCollection=function(e){var t=this.views=e||[];this.length=t.length};u.prototype={length:0,trigger:function(e){for(var t,r=this.views,n=0,i=r.length;i>n;n++)t=r[n],t.trigger&&t.trigger(e)},triggerRecursively:function(e){for(var t=this.views,r=0,n=t.length;n>r;r++)t[r].triggerRecursively(e)},invokeRecursively:function(e){for(var t,r=this.views,n=0,i=r.length;i>n;n++)t=r[n],e(t)},transitionTo:function(e,t){for(var r=this.views,n=0,i=r.length;i>n;n++)r[n].transitionTo(e,t)},push:function(){this.length+=arguments.length;var e=this.views;return e.push.apply(e,arguments)},objectAt:function(e){return this.views[e]},forEach:function(e){var t=this.views;return o(t,e)},clear:function(){this.length=0,this.views.length=0}};var c=[];Ember.View=Ember.CoreView.extend({concatenatedProperties:["classNames","classNameBindings","attributeBindings"],isView:!0,templateName:null,layoutName:null,templates:Ember.TEMPLATES,template:Ember.computed(function(e,t){if(void 0!==t)return t;var n=r(this,"templateName"),i=this.templateForName(n,"template");return i||r(this,"defaultTemplate")}).property("templateName"),controller:Ember.computed(function(){var e=r(this,"_parentView");return e?r(e,"controller"):null}).property("_parentView"),layout:Ember.computed(function(){var e=r(this,"layoutName"),t=this.templateForName(e,"layout");return t||r(this,"defaultLayout")}).property("layoutName"),_yield:function(e,t){var n=r(this,"template");n&&n(e,t)},templateForName:function(e){if(e){var t=this.container||Ember.Container&&Ember.Container.defaultContainer;return t&&t.lookup("template:"+e)}},context:Ember.computed(function(e,t){return 2===arguments.length?(n(this,"_context",t),t):r(this,"_context")}).volatile(),_context:Ember.computed(function(){var e,t;return(t=r(this,"controller"))?t:(e=this._parentView,e?r(e,"_context"):null)}),_contextDidChange:Ember.observer(function(){this.rerender()},"context"),isVisible:!0,childViews:a,_childViews:c,_childViewsWillChange:Ember.beforeObserver(function(){if(this.isVirtual){var e=r(this,"parentView");e&&Ember.propertyWillChange(e,"childViews")}},"childViews"),_childViewsDidChange:Ember.observer(function(){if(this.isVirtual){var e=r(this,"parentView");e&&Ember.propertyDidChange(e,"childViews")}},"childViews"),nearestInstanceOf:function(e){for(var t=r(this,"parentView");t;){if(t instanceof e)return t;t=r(t,"parentView")}},nearestOfType:function(e){for(var t=r(this,"parentView"),n=e instanceof Ember.Mixin?function(t){return e.detect(t)}:function(t){return e.detect(t.constructor)};t;){if(n(t))return t;t=r(t,"parentView")}},nearestWithProperty:function(e){for(var t=r(this,"parentView");t;){if(e in t)return t;t=r(t,"parentView")}},nearestChildOf:function(e){for(var t=r(this,"parentView");t;){if(r(t,"parentView")instanceof e)return t;t=r(t,"parentView")}},_parentViewDidChange:Ember.observer(function(){this.isDestroying||(this.trigger("parentViewDidChange"),r(this,"parentView.controller")&&!r(this,"controller")&&this.notifyPropertyChange("controller"))},"_parentView"),_controllerDidChange:Ember.observer(function(){this.isDestroying||(this.rerender(),this.forEachChildView(function(e){e.propertyDidChange("controller")}))},"controller"),cloneKeywords:function(){var e=r(this,"templateData"),t=e?Ember.copy(e.keywords):{};return n(t,"view",r(this,"concreteView")),n(t,"_view",this),n(t,"controller",r(this,"controller")),t},render:function(e){var t=r(this,"layout")||r(this,"template");if(t){var n,i=r(this,"context"),o=this.cloneKeywords(),s={view:this,buffer:e,isRenderData:!0,keywords:o,insideGroup:r(this,"templateData.insideGroup")};n=t(i,{data:s}),void 0!==n&&e.push(n)}},rerender:function(){return this.currentState.rerender(this)},clearRenderedChildren:function(){for(var e=this.lengthBeforeRender,t=this.lengthAfterRender,r=this._childViews,n=t-1;n>=e;n--)r[n]&&r[n].destroy()},_applyClassNameBindings:function(e){var t,r,n,i=this.classNames;o(e,function(e){var o,a=Ember.View._parsePropertyPath(e),u=function(){r=this._classStringForProperty(e),t=this.$(),o&&(t.removeClass(o),i.removeObject(o)),r?(t.addClass(r),o=r):o=null
};n=this._classStringForProperty(e),n&&(s(i,n),o=n),this.registerObserver(this,a.path,u),this.one("willClearRender",function(){o&&(i.removeObject(o),o=null)})},this)},_applyAttributeBindings:function(e,t){var n,i;o(t,function(t){var o=t.split(":"),s=o[0],a=o[1]||s,u=function(){i=this.$(),n=r(this,s),Ember.View.applyAttributeBindings(i,a,n)};this.registerObserver(this,s,u),n=r(this,s),Ember.View.applyAttributeBindings(e,a,n)},this)},_classStringForProperty:function(e){var t=Ember.View._parsePropertyPath(e),n=t.path,i=r(this,n);return void 0===i&&Ember.isGlobalPath(n)&&(i=r(Ember.lookup,n)),Ember.View._classStringForValue(n,i,t.className,t.falsyClassName)},element:Ember.computed(function(e,t){return void 0!==t?this.currentState.setElement(this,t):this.currentState.getElement(this)}).property("_parentView"),$:function(e){return this.currentState.$(this,e)},mutateChildViews:function(e){for(var t,r=this._childViews,n=r.length;--n>=0;)t=r[n],e(this,t,n);return this},forEachChildView:function(e){var t=this._childViews;if(!t)return this;var r,n,i=t.length;for(n=0;i>n;n++)r=t[n],e(r);return this},appendTo:function(e){return this._insertElementLater(function(){this.$().appendTo(e)}),this},replaceIn:function(e){return this._insertElementLater(function(){Ember.$(e).empty(),this.$().appendTo(e)}),this},_insertElementLater:function(e){this._scheduledInsert=Ember.run.scheduleOnce("render",this,"_insertElement",e)},_insertElement:function(e){this._scheduledInsert=null,this.currentState.insertElement(this,e)},append:function(){return this.appendTo(document.body)},remove:function(){this.removedFromDOM||this.destroyElement(),this.invokeRecursively(function(e){e.clearRenderedChildren&&e.clearRenderedChildren()})},elementId:null,findElementInParentElement:function(e){var t="#"+this.elementId;return Ember.$(t)[0]||Ember.$(t,e)[0]},createElement:function(){if(r(this,"element"))return this;var e=this.renderToBuffer();return n(this,"element",e.element()),this},willInsertElement:Ember.K,didInsertElement:Ember.K,willClearRender:Ember.K,invokeRecursively:function(e,t){for(var r,n,i,o=t===!1?this._childViews:[this];o.length;){r=o.slice(),o=[];for(var s=0,a=r.length;a>s;s++)n=r[s],i=n._childViews?n._childViews.slice(0):null,e(n),i&&o.push.apply(o,i)}},triggerRecursively:function(e){for(var t,r,n,i=[this];i.length;){t=i.slice(),i=[];for(var o=0,s=t.length;s>o;o++)r=t[o],n=r._childViews?r._childViews.slice(0):null,r.trigger&&r.trigger(e),n&&i.push.apply(i,n)}},viewHierarchyCollection:function(){for(var e,t=new u([this]),r=0;r<t.length;r++)e=t.objectAt(r),e._childViews&&t.push.apply(t,e._childViews);return t},destroyElement:function(){return this.currentState.destroyElement(this)},willDestroyElement:Ember.K,_notifyWillDestroyElement:function(){var e=this.viewHierarchyCollection();return e.trigger("willClearRender"),e.trigger("willDestroyElement"),e},_elementWillChange:Ember.beforeObserver(function(){this.forEachChildView(function(e){Ember.propertyWillChange(e,"element")})},"element"),_elementDidChange:Ember.observer(function(){this.forEachChildView(function(e){Ember.propertyDidChange(e,"element")})},"element"),parentViewDidChange:Ember.K,instrumentName:"view",instrumentDetails:function(e){e.template=r(this,"templateName"),this._super(e)},_renderToBuffer:function(e,t){this.lengthBeforeRender=this._childViews.length;var r=this._super(e,t);return this.lengthAfterRender=this._childViews.length,r},renderToBufferIfNeeded:function(e){return this.currentState.renderToBufferIfNeeded(this,e)},beforeRender:function(e){this.applyAttributesToBuffer(e),e.pushOpeningTag()},afterRender:function(e){e.pushClosingTag()},applyAttributesToBuffer:function(e){var t=r(this,"classNameBindings");t.length&&this._applyClassNameBindings(t);var n=r(this,"attributeBindings");n.length&&this._applyAttributeBindings(e,n),e.setClasses(this.classNames),e.id(this.elementId);var i=r(this,"ariaRole");i&&e.attr("role",i),r(this,"isVisible")===!1&&e.style("display","none")},tagName:null,ariaRole:null,classNames:["ember-view"],classNameBindings:c,attributeBindings:c,init:function(){this.elementId=this.elementId||i(this),this._super(),this._childViews=this._childViews.slice(),this.classNameBindings=Ember.A(this.classNameBindings.slice()),this.classNames=Ember.A(this.classNames.slice())},appendChild:function(e,t){return this.currentState.appendChild(this,e,t)},removeChild:function(e){if(!this.isDestroying){n(e,"_parentView",null);var t=this._childViews;return Ember.EnumerableUtils.removeObject(t,e),this.propertyDidChange("childViews"),this}},removeAllChildren:function(){return this.mutateChildViews(function(e,t){e.removeChild(t)})},destroyAllChildren:function(){return this.mutateChildViews(function(e,t){t.destroy()})},removeFromParent:function(){var e=this._parentView;return this.remove(),e&&e.removeChild(this),this},destroy:function(){var e,t,n=this._childViews,i=r(this,"parentView"),o=this.viewName;if(this._super()){for(e=n.length,t=e-1;t>=0;t--)n[t].removedFromDOM=!0;for(o&&i&&i.set(o,null),e=n.length,t=e-1;t>=0;t--)n[t].destroy();return this}},createChildView:function(e,t){if(!e)throw new TypeError("createChildViews first argument must exist");if(e.isView&&e._parentView===this&&e.container===this.container)return e;if(t=t||{},t._parentView=this,Ember.CoreView.detect(e))t.templateData=t.templateData||r(this,"templateData"),t.container=this.container,e=e.create(t),e.viewName&&n(r(this,"concreteView"),e.viewName,e);else if("string"==typeof e){var i="view:"+e,o=this.container.lookupFactory(i);t.templateData=r(this,"templateData"),e=o.create(t)}else t.container=this.container,r(e,"templateData")||(t.templateData=r(this,"templateData")),Ember.setProperties(e,t);return e},becameVisible:Ember.K,becameHidden:Ember.K,_isVisibleDidChange:Ember.observer(function(){var e=this.$();if(e){var t=r(this,"isVisible");e.toggle(t),this._isAncestorHidden()||(t?this._notifyBecameVisible():this._notifyBecameHidden())}},"isVisible"),_notifyBecameVisible:function(){this.trigger("becameVisible"),this.forEachChildView(function(e){var t=r(e,"isVisible");(t||null===t)&&e._notifyBecameVisible()})},_notifyBecameHidden:function(){this.trigger("becameHidden"),this.forEachChildView(function(e){var t=r(e,"isVisible");(t||null===t)&&e._notifyBecameHidden()})},_isAncestorHidden:function(){for(var e=r(this,"parentView");e;){if(r(e,"isVisible")===!1)return!0;e=r(e,"parentView")}return!1},clearBuffer:function(){this.invokeRecursively(function(e){e.buffer=null})},transitionTo:function(e,t){var r=this.currentState,n=this.currentState=this.states[e];this.state=e,r&&r.exit&&r.exit(this),n.enter&&n.enter(this),t!==!1&&this.forEachChildView(function(t){t.transitionTo(e)})},handleEvent:function(e,t){return this.currentState.handleEvent(this,e,t)},registerObserver:function(e,t,r,n){n||"function"!=typeof r||(n=r,r=null);var i=this,o=function(){i.currentState.invokeObserver(this,n)},s=function(){Ember.run.scheduleOnce("render",this,o)};Ember.addObserver(e,t,r,s),this.one("willClearRender",function(){Ember.removeObserver(e,t,r,s)})}});var l={prepend:function(t,r){t.$().prepend(r),e()},after:function(t,r){t.$().after(r),e()},html:function(t,r){t.$().html(r),e()},replace:function(t){var i=r(t,"element");n(t,"element",null),t._insertElementLater(function(){Ember.$(i).replaceWith(r(t,"element")),e()})},remove:function(t){t.$().remove(),e()},empty:function(t){t.$().empty(),e()}};Ember.View.reopen({domManager:l}),Ember.View.reopenClass({_parsePropertyPath:function(e){var t,r,n=e.split(":"),i=n[0],o="";return n.length>1&&(t=n[1],3===n.length&&(r=n[2]),o=":"+t,r&&(o+=":"+r)),{path:i,classNames:o,className:""===t?void 0:t,falsyClassName:r}},_classStringForValue:function(e,t,r,n){if(r||n)return r&&t?r:n&&!t?n:null;if(t===!0){var i=e.split(".");return Ember.String.dasherize(i[i.length-1])}return t!==!1&&null!=t?t:null}});var h=Ember.Object.extend(Ember.Evented).create();Ember.View.addMutationListener=function(e){h.on("change",e)},Ember.View.removeMutationListener=function(e){h.off("change",e)},Ember.View.notifyMutationListeners=function(){h.trigger("change")},Ember.View.views={},Ember.View.childViewsProperty=a,Ember.View.applyAttributeBindings=function(e,t,r){var n=Ember.typeOf(r);"value"===t||"string"!==n&&("number"!==n||isNaN(r))?"value"===t||"boolean"===n?(Ember.isNone(r)&&(r=""),r!==e.prop(t)&&e.prop(t,r)):r||e.removeAttr(t):r!==e.attr(t)&&e.attr(t,r)},Ember.View.states=t}(),function(){var e=(Ember.get,Ember.set);Ember.View.states._default={appendChild:function(){throw"You can't use appendChild outside of the rendering process"},$:function(){return void 0},getElement:function(){return null},handleEvent:function(){return!0},destroyElement:function(t){return e(t,"element",null),t._scheduledInsert&&(Ember.run.cancel(t._scheduledInsert),t._scheduledInsert=null),t},renderToBufferIfNeeded:function(){return!1},rerender:Ember.K,invokeObserver:Ember.K}}(),function(){var e=Ember.View.states.preRender=Ember.create(Ember.View.states._default);Ember.merge(e,{insertElement:function(e,t){e.createElement();var r=e.viewHierarchyCollection();r.trigger("willInsertElement"),t.call(e),r.transitionTo("inDOM",!1),r.trigger("didInsertElement")},renderToBufferIfNeeded:function(e,t){return e.renderToBuffer(t),!0},empty:Ember.K,setElement:function(e,t){return null!==t&&e.transitionTo("hasElement"),t}})}(),function(){Ember.get,Ember.set;var e=Ember.View.states.inBuffer=Ember.create(Ember.View.states._default);Ember.merge(e,{$:function(e){return e.rerender(),Ember.$()},rerender:function(){throw new Ember.Error("Something you did caused a view to re-render after it rendered but before it was inserted into the DOM.")},appendChild:function(e,t,r){var n=e.buffer,i=e._childViews;return t=e.createChildView(t,r),i.length||(i=e._childViews=i.slice()),i.push(t),t.renderToBuffer(n),e.propertyDidChange("childViews"),t},destroyElement:function(e){e.clearBuffer();var t=e._notifyWillDestroyElement();return t.transitionTo("preRender",!1),e},empty:function(){},renderToBufferIfNeeded:function(){return!1},insertElement:function(){throw"You can't insert an element that has already been rendered"},setElement:function(e,t){return null===t?e.transitionTo("preRender"):(e.clearBuffer(),e.transitionTo("hasElement")),t},invokeObserver:function(e,t){t.call(e)}})}(),function(){var e=Ember.get,t=Ember.set,r=Ember.View.states.hasElement=Ember.create(Ember.View.states._default);Ember.merge(r,{$:function(t,r){var n=e(t,"element");return r?Ember.$(r,n):Ember.$(n)},getElement:function(t){var r=e(t,"parentView");return r&&(r=e(r,"element")),r?t.findElementInParentElement(r):Ember.$("#"+e(t,"elementId"))[0]},setElement:function(e,t){if(null!==t)throw"You cannot set an element to a non-null value when the element is already in the DOM.";return e.transitionTo("preRender"),t},rerender:function(e){return e.triggerRecursively("willClearRender"),e.clearRenderedChildren(),e.domManager.replace(e),e},destroyElement:function(e){return e._notifyWillDestroyElement(),e.domManager.remove(e),t(e,"element",null),e._scheduledInsert&&(Ember.run.cancel(e._scheduledInsert),e._scheduledInsert=null),e},empty:function(e){var t,r,n=e._childViews;if(n)for(t=n.length,r=0;t>r;r++)n[r]._notifyWillDestroyElement();e.domManager.empty(e)},handleEvent:function(e,t,r){return e.has(t)?e.trigger(t,r):!0},invokeObserver:function(e,t){t.call(e)}});var n=Ember.View.states.inDOM=Ember.create(r);Ember.merge(n,{enter:function(e){e.isVirtual||(Ember.View.views[e.elementId]=e),e.addBeforeObserver("elementId",function(){throw new Error("Changing a view's elementId after creation is not allowed")})},exit:function(e){this.isVirtual||delete Ember.View.views[e.elementId]},insertElement:function(){throw"You can't insert an element into the DOM that has already been inserted"}})}(),function(){var e="You can't call %@ on a view being destroyed",t=Ember.String.fmt,r=Ember.View.states.destroying=Ember.create(Ember.View.states._default);Ember.merge(r,{appendChild:function(){throw t(e,["appendChild"])},rerender:function(){throw t(e,["rerender"])},destroyElement:function(){throw t(e,["destroyElement"])},empty:function(){throw t(e,["empty"])},setElement:function(){throw t(e,["set('element', ...)"])},renderToBufferIfNeeded:function(){return!1},insertElement:Ember.K})}(),function(){Ember.View.cloneStates=function(e){var t={};t._default={},t.preRender=Ember.create(t._default),t.destroying=Ember.create(t._default),t.inBuffer=Ember.create(t._default),t.hasElement=Ember.create(t._default),t.inDOM=Ember.create(t.hasElement);for(var r in e)e.hasOwnProperty(r)&&Ember.merge(t[r],e[r]);return t}}(),function(){function e(e,t,r,n){t.triggerRecursively("willInsertElement"),r?r.domManager.after(r,n.string()):e.domManager.prepend(e,n.string()),t.forEach(function(e){e.transitionTo("inDOM"),e.propertyDidChange("element"),e.triggerRecursively("didInsertElement")})}var t=Ember.View.cloneStates(Ember.View.states),r=Ember.get,n=Ember.set,i=Ember.EnumerableUtils.forEach,o=Ember._ViewCollection;Ember.ContainerView=Ember.View.extend(Ember.MutableArray,{states:t,init:function(){this._super();var e=r(this,"childViews");Ember.defineProperty(this,"childViews",Ember.View.childViewsProperty);var t=this._childViews;i(e,function(e,i){var o;"string"==typeof e?(o=r(this,e),o=this.createChildView(o),n(this,e,o)):o=this.createChildView(e),t[i]=o},this);var o=r(this,"currentView");o&&(t.length||(t=this._childViews=this._childViews.slice()),t.push(this.createChildView(o)))},replace:function(e,t,n){var i=n?r(n,"length"):0;if(this.arrayContentWillChange(e,t,i),this.childViewsWillChange(this._childViews,e,t),0===i)this._childViews.splice(e,t);else{var o=[e,t].concat(n);n.length&&!this._childViews.length&&(this._childViews=this._childViews.slice()),this._childViews.splice.apply(this._childViews,o)}return this.arrayContentDidChange(e,t,i),this.childViewsDidChange(this._childViews,e,t,i),this},objectAt:function(e){return this._childViews[e]},length:Ember.computed(function(){return this._childViews.length}).volatile(),render:function(e){this.forEachChildView(function(t){t.renderToBuffer(e)})},instrumentName:"container",childViewsWillChange:function(e,t,r){if(this.propertyWillChange("childViews"),r>0){var n=e.slice(t,t+r);this.currentState.childViewsWillChange(this,e,t,r),this.initializeViews(n,null,null)}},removeChild:function(e){return this.removeObject(e),this},childViewsDidChange:function(e,t,n,i){if(i>0){var o=e.slice(t,t+i);this.initializeViews(o,this,r(this,"templateData")),this.currentState.childViewsDidChange(this,e,t,i)}this.propertyDidChange("childViews")},initializeViews:function(e,t,o){i(e,function(e){n(e,"_parentView",t),!e.container&&t&&n(e,"container",t.container),r(e,"templateData")||n(e,"templateData",o)})},currentView:null,_currentViewWillChange:Ember.beforeObserver(function(){var e=r(this,"currentView");e&&e.destroy()},"currentView"),_currentViewDidChange:Ember.observer(function(){var e=r(this,"currentView");e&&this.pushObject(e)},"currentView"),_ensureChildrenAreInDOM:function(){this.currentState.ensureChildrenAreInDOM(this)}}),Ember.merge(t._default,{childViewsWillChange:Ember.K,childViewsDidChange:Ember.K,ensureChildrenAreInDOM:Ember.K}),Ember.merge(t.inBuffer,{childViewsDidChange:function(){throw new Error("You cannot modify child views while in the inBuffer state")}}),Ember.merge(t.hasElement,{childViewsWillChange:function(e,t,r,n){for(var i=r;r+n>i;i++)t[i].remove()},childViewsDidChange:function(e){Ember.run.scheduleOnce("render",e,"_ensureChildrenAreInDOM")},ensureChildrenAreInDOM:function(t){var r,n,i,s,a,u=t._childViews,c=new o;for(r=0,n=u.length;n>r;r++)i=u[r],a||(a=Ember.RenderBuffer(),a._hasElement=!1),i.renderToBufferIfNeeded(a)?c.push(i):c.length?(e(t,c,s,a),a=null,s=i,c.clear()):s=i;c.length&&e(t,c,s,a)}})}(),function(){var e=Ember.get,t=Ember.set;Ember.String.fmt,Ember.CollectionView=Ember.ContainerView.extend({content:null,emptyViewClass:Ember.View,emptyView:null,itemViewClass:Ember.View,init:function(){var e=this._super();return this._contentDidChange(),e},_contentWillChange:Ember.beforeObserver(function(){var t=this.get("content");t&&t.removeArrayObserver(this);var r=t?e(t,"length"):0;this.arrayWillChange(t,0,r)},"content"),_contentDidChange:Ember.observer(function(){var t=e(this,"content");t&&(this._assertArrayLike(t),t.addArrayObserver(this));var r=t?e(t,"length"):0;this.arrayDidChange(t,0,null,r)},"content"),_assertArrayLike:function(){},destroy:function(){if(this._super()){var t=e(this,"content");return t&&t.removeArrayObserver(this),this._createdEmptyView&&this._createdEmptyView.destroy(),this}},arrayWillChange:function(t,r,n){var i=e(this,"emptyView");i&&i instanceof Ember.View&&i.removeFromParent();var o,s,a,u=this._childViews;a=this._childViews.length;var c=n===a;for(c&&(this.currentState.empty(this),this.invokeRecursively(function(e){e.removedFromDOM=!0},!1)),s=r+n-1;s>=r;s--)o=u[s],o.destroy()},arrayDidChange:function(r,n,i,o){var s,a,u,c,l,h,m=[];if(c=r?e(r,"length"):0)for(l=e(this,"itemViewClass"),"string"==typeof l&&(l=e(l)||l),u=n;n+o>u;u++)a=r.objectAt(u),s=this.createChildView(l,{content:a,contentIndex:u}),m.push(s);else{if(h=e(this,"emptyView"),!h)return;"string"==typeof h&&(h=e(h)||h),h=this.createChildView(h),m.push(h),t(this,"emptyView",h),Ember.CoreView.detect(h)&&(this._createdEmptyView=h)}this.replace(n,0,m)},createChildView:function(r,n){r=this._super(r,n);var i=e(r,"tagName");return(null===i||void 0===i)&&(i=Ember.CollectionView.CONTAINER_MAP[e(this,"tagName")],t(r,"tagName",i)),r}}),Ember.CollectionView.CONTAINER_MAP={ul:"li",ol:"li",table:"tr",thead:"tr",tbody:"tr",tfoot:"tr",tr:"td",select:"option"}}(),function(){var e=Ember.get,t=Ember.set;Ember.isNone,Ember.Component=Ember.View.extend(Ember.TargetActionSupport,{init:function(){this._super(),t(this,"context",this),t(this,"controller",this)},cloneKeywords:function(){return{view:this,controller:this}},_yield:function(t,r){var n=r.data.view,i=this._parentView,o=e(this,"template");o&&n.appendChild(Ember.View,{isVirtual:!0,tagName:"",_contextView:i,template:e(this,"template"),context:e(i,"context"),controller:e(i,"controller"),templateData:{keywords:i.cloneKeywords()}})},targetObject:Ember.computed(function(){var t=e(this,"_parentView");return t?e(t,"controller"):null}).property("_parentView"),sendAction:function(t,r){var n;n=void 0===t?e(this,"action"):e(this,t),void 0!==n&&this.triggerAction({action:n,actionContext:r})}})}(),function(){Ember.ViewTargetActionSupport=Ember.Mixin.create(Ember.TargetActionSupport,{target:Ember.computed.alias("controller"),actionContext:Ember.computed.alias("context")})}(),function(){e("metamorph",[],function(){"use strict";// Copyright: Â©2011 My Company Inc. All rights reserved.
    var e=function(){},t=0,r=this.document,n=("undefined"==typeof ENV?{}:ENV).DISABLE_RANGE_API,i=!n&&r&&"createRange"in r&&"undefined"!=typeof Range&&Range.prototype.createContextualFragment,o=r&&function(){var e=r.createElement("div");return e.innerHTML="<div></div>",e.firstChild.innerHTML="<script></script>",""===e.firstChild.innerHTML}(),s=r&&function(){var e=r.createElement("div");return e.innerHTML="Test: <script type='text/x-placeholder'></script>Value","Test:"===e.childNodes[0].nodeValue&&" Value"===e.childNodes[2].nodeValue}(),a=function(r){var n;n=this instanceof a?this:new e,n.innerHTML=r;var i="metamorph-"+t++;return n.start=i+"-start",n.end=i+"-end",n};e.prototype=a.prototype;var u,c,l,h,m,f,p,d,b;if(h=function(){return this.startTag()+this.innerHTML+this.endTag()},d=function(){return"<script id='"+this.start+"' type='text/x-placeholder'></script>"},b=function(){return"<script id='"+this.end+"' type='text/x-placeholder'></script>"},i)u=function(e,t){var n=r.createRange(),i=r.getElementById(e.start),o=r.getElementById(e.end);return t?(n.setStartBefore(i),n.setEndAfter(o)):(n.setStartAfter(i),n.setEndBefore(o)),n},c=function(e,t){var r=u(this,t);r.deleteContents();var n=r.createContextualFragment(e);r.insertNode(n)},l=function(){var e=u(this,!0);e.deleteContents()},m=function(e){var t=r.createRange();t.setStart(e),t.collapse(!1);var n=t.createContextualFragment(this.outerHTML());e.appendChild(n)},f=function(e){var t=r.createRange(),n=r.getElementById(this.end);t.setStartAfter(n),t.setEndAfter(n);var i=t.createContextualFragment(e);t.insertNode(i)},p=function(e){var t=r.createRange(),n=r.getElementById(this.start);t.setStartAfter(n),t.setEndAfter(n);var i=t.createContextualFragment(e);t.insertNode(i)};else{var v={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],_default:[0,"",""]},E=function(e,t){if(e.getAttribute("id")===t)return e;var r,n,i,o=e.childNodes.length;for(r=0;o>r;r++)if(n=e.childNodes[r],i=1===n.nodeType&&E(n,t))return i},g=function(e,t){var n=[];if(s&&(t=t.replace(/(\s+)(<script id='([^']+)')/g,function(e,t,r,i){return n.push([i,t]),r})),e.innerHTML=t,n.length>0){var i,o=n.length;for(i=0;o>i;i++){var a=E(e,n[i][0]),u=r.createTextNode(n[i][1]);a.parentNode.insertBefore(u,a)}}},y=function(e,t){var n=v[e.tagName.toLowerCase()]||v._default,i=n[0],s=n[1],a=n[2];o&&(t="&shy;"+t);var u=r.createElement("div");g(u,s+t+a);for(var c=0;i>=c;c++)u=u.firstChild;if(o){for(var l=u;1===l.nodeType&&!l.nodeName;)l=l.firstChild;3===l.nodeType&&"Â­"===l.nodeValue.charAt(0)&&(l.nodeValue=l.nodeValue.slice(1))}return u},w=function(e){for(;""===e.parentNode.tagName;)e=e.parentNode;return e},_=function(e,t){e.parentNode!==t.parentNode&&t.parentNode.insertBefore(e,t.parentNode.firstChild)};c=function(e,t){var n,i,o,s=w(r.getElementById(this.start)),a=r.getElementById(this.end),u=a.parentNode;for(_(s,a),n=s.nextSibling;n;){if(i=n.nextSibling,o=n===a){if(!t)break;a=n.nextSibling}if(n.parentNode.removeChild(n),o)break;n=i}for(n=y(s.parentNode,e);n;)i=n.nextSibling,u.insertBefore(n,a),n=i},l=function(){var e=w(r.getElementById(this.start)),t=r.getElementById(this.end);this.html(""),e.parentNode.removeChild(e),t.parentNode.removeChild(t)},m=function(e){for(var t,r=y(e,this.outerHTML());r;)t=r.nextSibling,e.appendChild(r),r=t},f=function(e){var t,n,i=r.getElementById(this.end),o=i.nextSibling,s=i.parentNode;for(n=y(s,e);n;)t=n.nextSibling,s.insertBefore(n,o),n=t},p=function(e){var t,n,i=r.getElementById(this.start),o=i.parentNode;n=y(o,e);for(var s=i.nextSibling;n;)t=n.nextSibling,o.insertBefore(n,s),n=t}}return a.prototype.html=function(e){return this.checkRemoved(),void 0===e?this.innerHTML:(c.call(this,e),this.innerHTML=e,void 0)},a.prototype.replaceWith=function(e){this.checkRemoved(),c.call(this,e,!0)},a.prototype.remove=l,a.prototype.outerHTML=h,a.prototype.appendTo=m,a.prototype.after=f,a.prototype.prepend=p,a.prototype.startTag=d,a.prototype.endTag=b,a.prototype.isRemoved=function(){var e=r.getElementById(this.start),t=r.getElementById(this.end);return!e||!t},a.prototype.checkRemoved=function(){if(this.isRemoved())throw new Error("Cannot perform operations on a Metamorph that is not in the DOM.")},a})}(),function(){function e(e){var t=e.hash,r=e.hashTypes;for(var n in t)"ID"===r[n]&&(t[n+"Binding"]=t[n],r[n+"Binding"]="STRING",delete t[n],delete r[n])}var t=Object.create||function(e){function t(){}return t.prototype=e,new t},r=this.Handlebars||Ember.imports&&Ember.imports.Handlebars;r||"function"!=typeof require||(r=require("handlebars")),Ember.Handlebars=t(r),Ember.Handlebars.helper=function(t,r){Ember.View.detect(r)?Ember.Handlebars.registerHelper(t,function(t){return e(t),Ember.Handlebars.helpers.view.call(this,r,t)}):Ember.Handlebars.registerBoundHelper.apply(null,arguments)},Ember.Handlebars.helpers=t(r.helpers),Ember.Handlebars.Compiler=function(){},r.Compiler&&(Ember.Handlebars.Compiler.prototype=t(r.Compiler.prototype)),Ember.Handlebars.Compiler.prototype.compiler=Ember.Handlebars.Compiler,Ember.Handlebars.JavaScriptCompiler=function(){},r.JavaScriptCompiler&&(Ember.Handlebars.JavaScriptCompiler.prototype=t(r.JavaScriptCompiler.prototype),Ember.Handlebars.JavaScriptCompiler.prototype.compiler=Ember.Handlebars.JavaScriptCompiler),Ember.Handlebars.JavaScriptCompiler.prototype.namespace="Ember.Handlebars",Ember.Handlebars.JavaScriptCompiler.prototype.initializeBuffer=function(){return"''"},Ember.Handlebars.JavaScriptCompiler.prototype.appendToBuffer=function(e){return"data.buffer.push("+e+");"};var n="ember"+ +new Date,i=1;Ember.Handlebars.Compiler.prototype.mustache=function(e){if(e.isHelper&&"control"===e.id.string)e.hash=e.hash||new r.AST.HashNode([]),e.hash.pairs.push(["controlID",new r.AST.StringNode(n+i++)]);else if(e.params.length||e.hash);else{var t=new r.AST.IdNode([{part:"_triageMustache"}]);e.escaped||(e.hash=e.hash||new r.AST.HashNode([]),e.hash.pairs.push(["unescaped",new r.AST.StringNode("true")])),e=new r.AST.MustacheNode([t].concat([e.id]),e.hash,!e.escaped)}return r.Compiler.prototype.mustache.call(this,e)},Ember.Handlebars.precompile=function(e){var t=r.parse(e),n={knownHelpers:{action:!0,unbound:!0,bindAttr:!0,template:!0,view:!0,_triageMustache:!0},data:!0,stringParams:!0},i=(new Ember.Handlebars.Compiler).compile(t,n);return(new Ember.Handlebars.JavaScriptCompiler).compile(i,n,void 0,!0)},r.compile&&(Ember.Handlebars.compile=function(e){var t=r.parse(e),n={data:!0,stringParams:!0},i=(new Ember.Handlebars.Compiler).compile(t,n),o=(new Ember.Handlebars.JavaScriptCompiler).compile(i,n,void 0,!0),s=Ember.Handlebars.template(o);return s.isMethod=!1,s})}(),function(){function e(e,t,r,n){var i,o,s,a,u=[],c=n.hash,l=c.boundOptions;for(a in l)l.hasOwnProperty(a)&&(c[a]=Ember.Handlebars.get(e,l[a],n));for(i=0,o=r.length;o>i;++i)s=r[i],u.push(Ember.Handlebars.get(e,s.path,n));return u.push(n),t.apply(e,u)}var t=Array.prototype.slice,r=Ember.Handlebars.normalizePath=function(e,t,r){var n,i,o=r&&r.keywords||{};return n=t.split(".",1)[0],o.hasOwnProperty(n)&&(e=o[n],i=!0,t=t===n?"":t.substr(n.length+1)),{root:e,path:t,isKeyword:i}},n=Ember.Handlebars.get=function(e,t,n){var i,o=n&&n.data,s=r(e,t,o);return e=s.root,t=s.path,i=Ember.get(e,t),void 0===i&&e!==Ember.lookup&&Ember.isGlobalPath(t)&&(i=Ember.get(Ember.lookup,t)),i};Ember.Handlebars.getPath=Ember.deprecateFunc("`Ember.Handlebars.getPath` has been changed to `Ember.Handlebars.get` for consistency.",Ember.Handlebars.get),Ember.Handlebars.resolveParams=function(e,t,r){for(var i,o,s=[],a=r.types,u=0,c=t.length;c>u;u++)i=t[u],o=a[u],"ID"===o?s.push(n(e,i,r)):s.push(i);return s},Ember.Handlebars.resolveHash=function(e,t,r){var i,o={},s=r.hashTypes;for(var a in t)t.hasOwnProperty(a)&&(i=s[a],o[a]="ID"===i?n(e,t[a],r):t[a]);return o},Ember.Handlebars.registerHelper("helperMissing",function(e,t){var r,n="";throw r="%@ Handlebars error: Could not find property '%@' on object %@.",t.data&&(n=t.data.view),new Ember.Error(Ember.String.fmt(r,[n,e,this]))}),Ember.Handlebars.registerBoundHelper=function(n,i){function o(){var n,o,a,u,c,l=t.call(arguments,0,-1),h=l.length,m=arguments[arguments.length-1],f=[],p=m.types,d=m.data,b=m.hash,v=d.view,E=m.contexts&&m.contexts[0]||this,g="",y=Ember._SimpleHandlebarsView.prototype.normalizedValue,w=b.boundOptions={};for(a in b)Ember.IS_BINDING.test(a)&&(w[a.slice(0,-7)]=b[a]);var _=[];for(d.properties=[],n=0;h>n;++n)if(d.properties.push(l[n]),"ID"===p[n]){var C=r(E,l[n],d);f.push(C),_.push(C)}else f.push(null);if(d.isUnbound)return e(this,i,f,m);var O=new Ember._SimpleHandlebarsView(null,null,!m.hash.unescaped,m.data);O.normalizedValue=function(){var e,t=[];for(e in w)w.hasOwnProperty(e)&&(c=r(E,w[e],d),O.path=c.path,O.pathRoot=c.root,b[e]=y.call(O));for(n=0;h>n;++n)c=f[n],c?(O.path=c.path,O.pathRoot=c.root,t.push(y.call(O))):t.push(l[n]);return t.push(m),i.apply(E,t)},v.appendChild(O);for(u in w)w.hasOwnProperty(u)&&_.push(r(E,w[u],d));for(n=0,o=_.length;o>n;++n)c=_[n],v.registerObserver(c.root,c.path,O,O.rerender);if("ID"===p[0]&&0!==f.length){var A=f[0],P=A.root,V=A.path;Ember.isEmpty(V)||(g=V+".");for(var x=0,T=s.length;T>x;x++)v.registerObserver(P,g+s[x],O,O.rerender)}}var s=t.call(arguments,2);o._rawFunction=i,Ember.Handlebars.registerHelper(n,o)},Ember.Handlebars.template=function(e){var t=Handlebars.template(e);return t.isTop=!0,t}}(),function(){Ember.String.htmlSafe=function(e){return new Handlebars.SafeString(e)};var e=Ember.String.htmlSafe;(Ember.EXTEND_PROTOTYPES===!0||Ember.EXTEND_PROTOTYPES.String)&&(String.prototype.htmlSafe=function(){return e(this)})}(),function(){Ember.Handlebars.resolvePaths=function(e){for(var t=[],r=e.contexts,n=e.roots,i=e.data,o=0,s=r.length;s>o;o++)t.push(Ember.Handlebars.get(n[o],r[o],{data:i}));return t}}(),function(){function e(){Ember.run.once(Ember.View,"notifyMutationListeners")}Ember.set,Ember.get;var r=t("metamorph"),n={remove:function(t){t.morph.remove(),e()},prepend:function(t,r){t.morph.prepend(r),e()},after:function(t,r){t.morph.after(r),e()},html:function(t,r){t.morph.html(r),e()},replace:function(t){var r=t.morph;t.transitionTo("preRender"),Ember.run.schedule("render",this,function(){if(!t.isDestroying){t.clearRenderedChildren();var n=t.renderToBuffer();t.invokeRecursively(function(e){e.propertyWillChange("element")}),t.triggerRecursively("willInsertElement"),r.replaceWith(n.string()),t.transitionTo("inDOM"),t.invokeRecursively(function(e){e.propertyDidChange("element")}),t.triggerRecursively("didInsertElement"),e()}})},empty:function(t){t.morph.html(""),e()}};Ember._Metamorph=Ember.Mixin.create({isVirtual:!0,tagName:"",instrumentName:"metamorph",init:function(){this._super(),this.morph=r()},beforeRender:function(e){e.push(this.morph.startTag()),e.pushOpeningTag()},afterRender:function(e){e.pushClosingTag(),e.push(this.morph.endTag())},createElement:function(){var e=this.renderToBuffer();this.outerHTML=e.string(),this.clearBuffer()},domManager:n}),Ember._MetamorphView=Ember.View.extend(Ember._Metamorph),Ember._SimpleMetamorphView=Ember.CoreView.extend(Ember._Metamorph)}(),function(){function e(e,t,r,n){this.path=e,this.pathRoot=t,this.isEscaped=r,this.templateData=n,this.morph=o(),this.state="preRender",this.updateId=null,this._parentView=null,this.buffer=null}var r=Ember.get,n=Ember.set,i=Ember.Handlebars.get,o=t("metamorph");Ember._SimpleHandlebarsView=e,e.prototype={isVirtual:!0,isView:!0,destroy:function(){this.updateId&&(Ember.run.cancel(this.updateId),this.updateId=null),this._parentView&&this._parentView.removeChild(this),this.morph=null,this.state="destroyed"},propertyWillChange:Ember.K,propertyDidChange:Ember.K,normalizedValue:function(){var e,t,r=this.path,n=this.pathRoot;return""===r?e=n:(t=this.templateData,e=i(n,r,{data:t})),e},renderToBuffer:function(e){var t="";t+=this.morph.startTag(),t+=this.render(),t+=this.morph.endTag(),e.push(t)},render:function(){var e=this.isEscaped,t=this.normalizedValue();return null===t||void 0===t?t="":t instanceof Handlebars.SafeString||(t=String(t)),e&&(t=Handlebars.Utils.escapeExpression(t)),t},rerender:function(){switch(this.state){case"preRender":case"destroyed":break;case"inBuffer":throw new Ember.Error("Something you did tried to replace an {{expression}} before it was inserted into the DOM.");case"hasElement":case"inDOM":this.updateId=Ember.run.scheduleOnce("render",this,"update")}return this},update:function(){this.updateId=null,this.morph.html(this.render())},transitionTo:function(e){this.state=e}};var s=Ember.View.cloneStates(Ember.View.states),a=Ember.merge;a(s._default,{rerenderIfNeeded:Ember.K}),a(s.inDOM,{rerenderIfNeeded:function(e){e.normalizedValue()!==e._lastNormalizedValue&&e.rerender()}}),Ember._HandlebarsBoundView=Ember._MetamorphView.extend({instrumentName:"boundHandlebars",states:s,shouldDisplayFunc:null,preserveContext:!1,previousContext:null,displayTemplate:null,inverseTemplate:null,path:null,pathRoot:null,normalizedValue:function(){var e,t,n=r(this,"path"),o=r(this,"pathRoot"),s=r(this,"valueNormalizerFunc");return""===n?e=o:(t=r(this,"templateData"),e=i(o,n,{data:t})),s?s(e):e},rerenderIfNeeded:function(){this.currentState.rerenderIfNeeded(this)},render:function(e){var t=r(this,"isEscaped"),i=r(this,"shouldDisplayFunc"),o=r(this,"preserveContext"),s=r(this,"previousContext"),a=r(this,"inverseTemplate"),u=r(this,"displayTemplate"),c=this.normalizedValue();if(this._lastNormalizedValue=c,i(c))if(n(this,"template",u),o)n(this,"_context",s);else{if(!u)return null===c||void 0===c?c="":c instanceof Handlebars.SafeString||(c=String(c)),t&&(c=Handlebars.Utils.escapeExpression(c)),e.push(c),void 0;n(this,"_context",c)}else a?(n(this,"template",a),o?n(this,"_context",s):n(this,"_context",c)):n(this,"template",function(){return""});return this._super(e)}})}(),function(){function e(e){return!Ember.isNone(e)}function t(e,t,r,n,s,a){var u,c,l,h=t.data,m=t.fn,f=t.inverse,p=h.view,d=this;if(u=o(d,e,h),"object"==typeof this){if(h.insideGroup){c=function(){Ember.run.once(p,"rerender")};var b,v,E=i(d,e,t);E=s?s(E):E,v=r?d:E,n(E)?b=m:f&&(b=f),b(v,{data:t.data})}else{var g=p.createChildView(Ember._HandlebarsBoundView,{preserveContext:r,shouldDisplayFunc:n,valueNormalizerFunc:s,displayTemplate:m,inverseTemplate:f,path:e,pathRoot:d,previousContext:d,isEscaped:!t.hash.unescaped,templateData:t.data});p.appendChild(g),c=function(){Ember.run.scheduleOnce("render",g,"rerenderIfNeeded")}}if(""!==u.path&&(p.registerObserver(u.root,u.path,c),a))for(l=0;l<a.length;l++)p.registerObserver(u.root,u.path+"."+a[l],c)}else h.buffer.push(i(d,e,t))}function r(e,t){var r,n,s=t.data,a=s.view,u=this;if(r=o(u,e,s),"object"==typeof this){if(s.insideGroup){n=function(){Ember.run.once(a,"rerender")};var c=i(u,e,t);(null===c||void 0===c)&&(c=""),s.buffer.push(c)}else{var l=new Ember._SimpleHandlebarsView(e,u,!t.hash.unescaped,t.data);l._parentView=a,a.appendChild(l),n=function(){Ember.run.scheduleOnce("render",l,"rerender")}}""!==r.path&&a.registerObserver(r.root,r.path,n)}else s.buffer.push(i(u,e,t))}var n=Ember.get;Ember.set,Ember.String.fmt;var i=Ember.Handlebars.get,o=Ember.Handlebars.normalizePath,s=Ember.ArrayPolyfills.forEach,a=Ember.Handlebars,u=a.helpers;a.registerHelper("_triageMustache",function(e,t){return u[e]?u[e].call(this,t):u.bind.apply(this,arguments)}),a.registerHelper("bind",function(n,i){var o=i.contexts&&i.contexts[0]||this;return i.fn?t.call(o,n,i,!1,e):r.call(o,n,i)}),a.registerHelper("boundIf",function(e,r){var i=r.contexts&&r.contexts[0]||this,o=function(e){var t=e&&n(e,"isTruthy");return"boolean"==typeof t?t:Ember.isArray(e)?0!==n(e,"length"):!!e};return t.call(i,e,r,!0,o,o,["isTruthy","length"])}),a.registerHelper("with",function(r,n){if(4===arguments.length){var i,s,a,c;if(n=arguments[3],i=arguments[2],s=arguments[0],Ember.isGlobalPath(s))Ember.bind(n.data.keywords,i,s);else{c=o(this,s,n.data),s=c.path,a=c.root;var l=Ember.$.expando+Ember.guidFor(a);n.data.keywords[l]=a;var h=s?l+"."+s:l;Ember.bind(n.data.keywords,i,h)}return t.call(this,s,n,!0,e)}return u.bind.call(n.contexts[0],r,n)}),a.registerHelper("if",function(e,t){return u.boundIf.call(t.contexts[0],e,t)}),a.registerHelper("unless",function(e,t){var r=t.fn,n=t.inverse;return t.fn=n,t.inverse=r,u.boundIf.call(t.contexts[0],e,t)}),a.registerHelper("bind-attr",function(e){var t=e.hash,r=e.data.view,n=[],u=this,c=++Ember.uuid,l=t["class"];if(null!=l){var h=a.bindClasses(this,l,r,c,e);n.push('class="'+Handlebars.Utils.escapeExpression(h.join(" "))+'"'),delete t["class"]}var m=Ember.keys(t);return s.call(m,function(s){var a,l=t[s];a=o(u,l,e.data);var h,m,f="this"===l?a.root:i(u,l,e),p=Ember.typeOf(f);h=function(){var t=i(u,l,e),n=r.$("[data-bindattr-"+c+"='"+c+"']");return n&&0!==n.length?(Ember.View.applyAttributeBindings(n,s,t),void 0):(Ember.removeObserver(a.root,a.path,m),void 0)},"this"===l||a.isKeyword&&""===a.path||r.registerObserver(a.root,a.path,h),"string"===p||"number"===p&&!isNaN(f)?n.push(s+'="'+Handlebars.Utils.escapeExpression(f)+'"'):f&&"boolean"===p&&n.push(s+'="'+s+'"')},this),n.push("data-bindattr-"+c+'="'+c+'"'),new a.SafeString(n.join(" "))}),a.registerHelper("bindAttr",a.helpers["bind-attr"]),a.bindClasses=function(e,t,r,n,a){var u,c,l,h=[],m=function(e,t,r){var n,o=t.path;return n="this"===o?e:""===o?!0:i(e,o,r),Ember.View._classStringForValue(o,n,t.className,t.falsyClassName)};return s.call(t.split(" "),function(t){var i,s,f,p,d=Ember.View._parsePropertyPath(t),b=d.path,v=e;""!==b&&"this"!==b&&(p=o(e,b,a.data),v=p.root,b=p.path),s=function(){u=m(e,d,a),l=n?r.$("[data-bindattr-"+n+"='"+n+"']"):r.$(),l&&0!==l.length?(i&&l.removeClass(i),u?(l.addClass(u),i=u):i=null):Ember.removeObserver(v,b,f)},""!==b&&"this"!==b&&r.registerObserver(v,b,s),c=m(e,d,a),c&&(h.push(c),i=c)}),h}}(),function(){Ember.get,Ember.set;var e=Ember.Handlebars,t=/^[a-z]/,r=/^view\./;e.ViewHelper=Ember.Object.create({propertiesFromHTMLOptions:function(e){var t=e.hash,r=e.data,n={},i=t["class"],o=!1;t.id&&(n.elementId=t.id,o=!0),t.tag&&(n.tagName=t.tag,o=!0),i&&(i=i.split(" "),n.classNames=i,o=!0),t.classBinding&&(n.classNameBindings=t.classBinding.split(" "),o=!0),t.classNameBindings&&(void 0===n.classNameBindings&&(n.classNameBindings=[]),n.classNameBindings=n.classNameBindings.concat(t.classNameBindings.split(" ")),o=!0),t.attributeBindings&&(n.attributeBindings=null,o=!0),o&&(t=Ember.$.extend({},t),delete t.id,delete t.tag,delete t["class"],delete t.classBinding);var s;for(var a in t)t.hasOwnProperty(a)&&Ember.IS_BINDING.test(a)&&"string"==typeof t[a]&&(s=this.contextualizeBindingPath(t[a],r),s&&(t[a]=s));if(n.classNameBindings)for(var u in n.classNameBindings){var c=n.classNameBindings[u];if("string"==typeof c){var l=Ember.View._parsePropertyPath(c);s=this.contextualizeBindingPath(l.path,r),s&&(n.classNameBindings[u]=s+l.classNames)}}return Ember.$.extend(t,n)},contextualizeBindingPath:function(e,t){var r=Ember.Handlebars.normalizePath(null,e,t);return r.isKeyword?"templateData.keywords."+e:Ember.isGlobalPath(e)?null:"this"===e?"_parentView.context":"_parentView.context."+e},helper:function(n,i,o){var s,a=o.data,u=o.fn;s="string"==typeof i?"STRING"===o.types[0]&&t.test(i)&&!r.test(i)?a.view.container.lookupFactory("view:"+i):e.get(n,i,o):i;var c=this.propertiesFromHTMLOptions(o,n),l=a.view;c.templateData=a;var h=s.proto?s.proto():s;u&&(c.template=u),h.controller||h.controllerBinding||c.controller||c.controllerBinding||(c._context=n),l.appendChild(s,c)}}),e.registerHelper("view",function(t,r){return t&&t.data&&t.data.isRenderData&&(r=t,t="Ember.View"),e.ViewHelper.helper(this,t,r)})}(),function(){var e=Ember.get,t=Ember.Handlebars.get;Ember.String.fmt,Ember.Handlebars.registerHelper("collection",function(r,n){r&&r.data&&r.data.isRenderData&&(n=r,r=void 0);var i=n.fn,o=n.data,s=n.inverse;n.data.view;var a;a=r?t(this,r,n):Ember.CollectionView;var u,c,l=n.hash,h={},m=a.proto();if(l.itemView){var f=o.keywords.controller,p=f.container;c=p.resolve("view:"+Ember.String.camelize(l.itemView))}else c=l.itemViewClass?t(m,l.itemViewClass,n):m.itemViewClass;delete l.itemViewClass,delete l.itemView;for(var d in l)l.hasOwnProperty(d)&&(u=d.match(/^item(.)(.*)$/),u&&"itemController"!==d&&(h[u[1].toLowerCase()+u[2]]=l[d],delete l[d]));i&&(h.template=i,delete n.fn);var b;s&&s!==Handlebars.VM.noop?(b=e(m,"emptyViewClass"),b=b.extend({template:s,tagName:h.tagName})):l.emptyViewClass&&(b=t(this,l.emptyViewClass,n)),b&&(l.emptyView=b),l.keyword||(h._context=Ember.computed.alias("content"));var v=Ember.Handlebars.ViewHelper.propertiesFromHTMLOptions({data:o,hash:h},this);return l.itemViewClass=c.extend(v),Ember.Handlebars.helpers.view.call(this,a,n)})}(),function(){var e=Ember.Handlebars.get;Ember.Handlebars.registerHelper("unbound",function(t,r){var n,i,o,s=arguments[arguments.length-1];return arguments.length>2?(s.data.isUnbound=!0,n=Ember.Handlebars.helpers[arguments[0]]||Ember.Handlebars.helperMissing,o=n.apply(this,Array.prototype.slice.call(arguments,1)),delete s.data.isUnbound,o):(i=r.contexts&&r.contexts[0]||this,e(i,t,r))})}(),function(){var e=Ember.Handlebars.get,t=Ember.Handlebars.normalizePath;Ember.Handlebars.registerHelper("log",function(r,n){var i=n.contexts&&n.contexts[0]||this,o=t(i,r,n.data),s=o.root,a=o.path,u="this"===a?s:e(s,a,n);Ember.Logger.log(u)}),Ember.Handlebars.registerHelper("debugger",function(){})}(),function(){var e=Ember.get,t=Ember.set;Ember.Handlebars.EachView=Ember.CollectionView.extend(Ember._Metamorph,{init:function(){var r,n=e(this,"itemController");if(n){var i=e(this,"controller.container").lookupFactory("controller:array").create({parentController:e(this,"controller"),itemController:n,target:e(this,"controller"),_eachView:this});this.disableContentObservers(function(){t(this,"content",i),r=new Ember.Binding("content","_eachView.dataSource").oneWay(),r.connect(i)}),t(this,"_arrayController",i)}else this.disableContentObservers(function(){r=new Ember.Binding("content","dataSource").oneWay(),r.connect(this)});return this._super()},_assertArrayLike:function(){},disableContentObservers:function(e){Ember.removeBeforeObserver(this,"content",null,"_contentWillChange"),Ember.removeObserver(this,"content",null,"_contentDidChange"),e.call(this),Ember.addBeforeObserver(this,"content",null,"_contentWillChange"),Ember.addObserver(this,"content",null,"_contentDidChange")},itemViewClass:Ember._MetamorphView,emptyViewClass:Ember._MetamorphView,createChildView:function(r,n){r=this._super(r,n);var i=e(this,"keyword"),o=e(r,"content");if(i){var s=e(r,"templateData");s=Ember.copy(s),s.keywords=r.cloneKeywords(),t(r,"templateData",s),s.keywords[i]=o}return o&&e(o,"isController")&&t(r,"controller",o),r},destroy:function(){if(this._super()){var t=e(this,"_arrayController");return t&&t.destroy(),this}}});var r=Ember.Handlebars.GroupedEach=function(e,t,r){var n=this,i=Ember.Handlebars.normalizePath(e,t,r.data);this.context=e,this.path=t,this.options=r,this.template=r.fn,this.containingView=r.data.view,this.normalizedRoot=i.root,this.normalizedPath=i.path,this.content=this.lookupContent(),this.addContentObservers(),this.addArrayObservers(),this.containingView.on("willClearRender",function(){n.destroy()})};r.prototype={contentWillChange:function(){this.removeArrayObservers()},contentDidChange:function(){this.content=this.lookupContent(),this.addArrayObservers(),this.rerenderContainingView()},contentArrayWillChange:Ember.K,contentArrayDidChange:function(){this.rerenderContainingView()},lookupContent:function(){return Ember.Handlebars.get(this.normalizedRoot,this.normalizedPath,this.options)},addArrayObservers:function(){this.content&&this.content.addArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},removeArrayObservers:function(){this.content&&this.content.removeArrayObserver(this,{willChange:"contentArrayWillChange",didChange:"contentArrayDidChange"})},addContentObservers:function(){Ember.addBeforeObserver(this.normalizedRoot,this.normalizedPath,this,this.contentWillChange),Ember.addObserver(this.normalizedRoot,this.normalizedPath,this,this.contentDidChange)},removeContentObservers:function(){Ember.removeBeforeObserver(this.normalizedRoot,this.normalizedPath,this.contentWillChange),Ember.removeObserver(this.normalizedRoot,this.normalizedPath,this.contentDidChange)},render:function(){if(this.content){var t=this.content,r=e(t,"length"),n=this.options.data,i=this.template;n.insideEach=!0;for(var o=0;r>o;o++)i(t.objectAt(o),{data:n})}},rerenderContainingView:function(){var e=this;Ember.run.scheduleOnce("render",this,function(){e.destroyed||e.containingView.rerender()})},destroy:function(){this.removeContentObservers(),this.content&&this.removeArrayObservers(),this.destroyed=!0}},Ember.Handlebars.registerHelper("each",function(e,t){if(4===arguments.length){var r=arguments[0];t=arguments[3],e=arguments[2],""===e&&(e="this"),t.hash.keyword=r}return 1===arguments.length&&(t=e,e="this"),t.hash.dataSourceBinding=e,!t.data.insideGroup||t.hash.groupedRows||t.hash.itemViewClass?Ember.Handlebars.helpers.collection.call(this,"Ember.Handlebars.EachView",t):(new Ember.Handlebars.GroupedEach(this,e,t).render(),void 0)})}(),function(){Ember.Handlebars.registerHelper("template",function(){return Ember.Handlebars.helpers.partial.apply(this,arguments)})}(),function(){Ember.Handlebars.registerHelper("partial",function(e,t){var r=e.split("/"),n=r[r.length-1];r[r.length-1]="_"+n;var i=t.data.view,o=r.join("/"),s=i.templateForName(o),a=!s&&i.templateForName(e);s=s||a,s(this,{data:t.data})})}(),function(){var e=Ember.get;Ember.set,Ember.Handlebars.registerHelper("yield",function(t){for(var r=t.data.view;r&&!e(r,"layout");)r=r._contextView?r._contextView:e(r,"parentView");r._yield(this,t)})}(),function(){Ember.Handlebars.registerHelper("loc",function(e){return Ember.String.loc(e)})}(),function(){var e=Ember.set;Ember.get,Ember.Checkbox=Ember.View.extend({classNames:["ember-checkbox"],tagName:"input",attributeBindings:["type","checked","indeterminate","disabled","tabindex","name"],type:"checkbox",checked:!1,disabled:!1,indeterminate:!1,init:function(){this._super(),this.on("change",this,this._updateElementValue)},didInsertElement:function(){this._super(),this.get("element").indeterminate=!!this.get("indeterminate")},_updateElementValue:function(){e(this,"checked",this.$().prop("checked"))}})}(),function(){function e(e,r,n){var i=t(r,e),o=t(r,"onEvent"),s=t(r,"value");(o===e||"keyPress"===o&&"key-press"===e)&&r.sendAction("action",s),r.sendAction(e,s),(i||o===e)&&(t(r,"bubbles")||n.stopPropagation())}var t=Ember.get,r=Ember.set;Ember.TextSupport=Ember.Mixin.create({value:"",attributeBindings:["placeholder","disabled","maxlength","tabindex"],placeholder:null,disabled:!1,maxlength:null,init:function(){this._super(),this.on("focusOut",this,this._elementValueDidChange),this.on("change",this,this._elementValueDidChange),this.on("paste",this,this._elementValueDidChange),this.on("cut",this,this._elementValueDidChange),this.on("input",this,this._elementValueDidChange),this.on("keyUp",this,this.interpretKeyEvents)},action:null,onEvent:"enter",bubbles:!1,interpretKeyEvents:function(e){var t=Ember.TextSupport.KEY_EVENTS,r=t[e.keyCode];return this._elementValueDidChange(),r?this[r](e):void 0},_elementValueDidChange:function(){r(this,"value",this.$().val())},insertNewline:function(t){e("enter",this,t),e("insert-newline",this,t)},cancel:function(t){e("escape-press",this,t)},focusIn:function(t){e("focus-in",this,t)},focusOut:function(t){e("focus-out",this,t)},keyPress:function(t){e("key-press",this,t)}}),Ember.TextSupport.KEY_EVENTS={13:"insertNewline",27:"cancel"}}(),function(){Ember.get,Ember.set,Ember.TextField=Ember.Component.extend(Ember.TextSupport,{classNames:["ember-text-field"],tagName:"input",attributeBindings:["type","value","size","pattern","name"],value:"",type:"text",size:null,pattern:null})}(),function(){var e=Ember.get,t=Ember.set;Ember.Button=Ember.View.extend(Ember.TargetActionSupport,{classNames:["ember-button"],classNameBindings:["isActive"],tagName:"button",propagateEvents:!1,attributeBindings:["type","disabled","href","tabindex"],targetObject:Ember.computed(function(){var t=e(this,"target"),r=e(this,"context"),n=e(this,"templateData");return"string"!=typeof t?t:Ember.Handlebars.get(r,t,{data:n})}).property("target"),type:Ember.computed(function(){var e=this.tagName;return"input"===e||"button"===e?"button":void 0}),disabled:!1,href:Ember.computed(function(){return"a"===this.tagName?"#":null}),mouseDown:function(){return e(this,"disabled")||(t(this,"isActive",!0),this._mouseDown=!0,this._mouseEntered=!0),e(this,"propagateEvents")},mouseLeave:function(){this._mouseDown&&(t(this,"isActive",!1),this._mouseEntered=!1)},mouseEnter:function(){this._mouseDown&&(t(this,"isActive",!0),this._mouseEntered=!0)},mouseUp:function(){return e(this,"isActive")&&(this.triggerAction(),t(this,"isActive",!1)),this._mouseDown=!1,this._mouseEntered=!1,e(this,"propagateEvents")},keyDown:function(e){(13===e.keyCode||32===e.keyCode)&&this.mouseDown()},keyUp:function(e){(13===e.keyCode||32===e.keyCode)&&this.mouseUp()},touchStart:function(e){return this.mouseDown(e)},touchEnd:function(e){return this.mouseUp(e)},init:function(){this._super()}})}(),function(){var e=Ember.get;Ember.set,Ember.TextArea=Ember.Component.extend(Ember.TextSupport,{classNames:["ember-text-area"],tagName:"textarea",attributeBindings:["rows","cols","name"],rows:null,cols:null,_updateElementValue:Ember.observer(function(){var t=e(this,"value"),r=this.$();r&&t!==r.val()&&r.val(t)},"value"),init:function(){this._super(),this.on("didInsertElement",this,this._updateElementValue)}})}(),function(){var e=Ember.set,t=Ember.get,r=Ember.EnumerableUtils.indexOf,n=Ember.EnumerableUtils.indexesOf,i=Ember.EnumerableUtils.forEach,o=Ember.EnumerableUtils.replace,s=Ember.isArray;Ember.Handlebars.compile,Ember.SelectOption=Ember.View.extend({tagName:"option",attributeBindings:["value","selected"],defaultTemplate:function(e,t){t={data:t.data,hash:{}},Ember.Handlebars.helpers.bind.call(e,"view.label",t)},init:function(){this.labelPathDidChange(),this.valuePathDidChange(),this._super()},selected:Ember.computed(function(){var e=t(this,"content"),n=t(this,"parentView.selection");return t(this,"parentView.multiple")?n&&r(n,e.valueOf())>-1:e==n}).property("content","parentView.selection"),labelPathDidChange:Ember.observer(function(){var e=t(this,"parentView.optionLabelPath");e&&Ember.defineProperty(this,"label",Ember.computed(function(){return t(this,e)}).property(e))},"parentView.optionLabelPath"),valuePathDidChange:Ember.observer(function(){var e=t(this,"parentView.optionValuePath");e&&Ember.defineProperty(this,"value",Ember.computed(function(){return t(this,e)}).property(e))},"parentView.optionValuePath")}),Ember.SelectOptgroup=Ember.CollectionView.extend({tagName:"optgroup",attributeBindings:["label"],selectionBinding:"parentView.selection",multipleBinding:"parentView.multiple",optionLabelPathBinding:"parentView.optionLabelPath",optionValuePathBinding:"parentView.optionValuePath",itemViewClassBinding:"parentView.optionView"}),Ember.Select=Ember.View.extend({tagName:"select",classNames:["ember-select"],defaultTemplate:Ember.Handlebars.template(function(e,t,r,n,i){function o(e,t){var n,i,o="";return t.buffer.push('<option value="">'),n={},i={},t.buffer.push(p(r._triageMustache.call(e,"view.prompt",{hash:{},contexts:[e],types:["ID"],hashContexts:i,hashTypes:n,data:t}))),t.buffer.push("</option>"),o}function s(e,t){var n,i,o;i={},o={},n=r.each.call(e,"view.groupedContent",{hash:{},inverse:d.noop,fn:d.program(4,a,t),contexts:[e],types:["ID"],hashContexts:o,hashTypes:i,data:t}),n||0===n?t.buffer.push(n):t.buffer.push("")}function a(e,t){var n,i;n={contentBinding:e,labelBinding:e},i={contentBinding:"ID",labelBinding:"ID"},t.buffer.push(p(r.view.call(e,"view.groupView",{hash:{contentBinding:"content",labelBinding:"label"},contexts:[e],types:["ID"],hashContexts:n,hashTypes:i,data:t})))}function u(e,t){var n,i,o;i={},o={},n=r.each.call(e,"view.content",{hash:{},inverse:d.noop,fn:d.program(7,c,t),contexts:[e],types:["ID"],hashContexts:o,hashTypes:i,data:t}),n||0===n?t.buffer.push(n):t.buffer.push("")}function c(e,t){var n,i;n={contentBinding:e},i={contentBinding:"STRING"},t.buffer.push(p(r.view.call(e,"view.optionView",{hash:{contentBinding:"this"},contexts:[e],types:["ID"],hashContexts:n,hashTypes:i,data:t})))}this.compilerInfo=[4,">= 1.0.0"],r=this.merge(r,Ember.Handlebars.helpers),i=i||{};var l,h,m,f="",p=this.escapeExpression,d=this;return h={},m={},l=r["if"].call(t,"view.prompt",{hash:{},inverse:d.noop,fn:d.program(1,o,i),contexts:[t],types:["ID"],hashContexts:m,hashTypes:h,data:i}),(l||0===l)&&i.buffer.push(l),h={},m={},l=r["if"].call(t,"view.optionGroupPath",{hash:{},inverse:d.program(6,u,i),fn:d.program(3,s,i),contexts:[t],types:["ID"],hashContexts:m,hashTypes:h,data:i}),(l||0===l)&&i.buffer.push(l),f
}),attributeBindings:["multiple","disabled","tabindex","name"],multiple:!1,disabled:!1,content:null,selection:null,value:Ember.computed(function(e,r){if(2===arguments.length)return r;var n=t(this,"optionValuePath").replace(/^content\.?/,"");return n?t(this,"selection."+n):t(this,"selection")}).property("selection"),prompt:null,optionLabelPath:"content",optionValuePath:"content",optionGroupPath:null,groupView:Ember.SelectOptgroup,groupedContent:Ember.computed(function(){var e=t(this,"optionGroupPath"),r=Ember.A();return i(t(this,"content"),function(n){var i=t(n,e);t(r,"lastObject.label")!==i&&r.pushObject({label:i,content:Ember.A()}),t(r,"lastObject.content").push(n)}),r}).property("optionGroupPath","content.@each"),optionView:Ember.SelectOption,_change:function(){t(this,"multiple")?this._changeMultiple():this._changeSingle()},selectionDidChange:Ember.observer(function(){var r=t(this,"selection");if(t(this,"multiple")){if(!s(r))return e(this,"selection",Ember.A([r])),void 0;this._selectionDidChangeMultiple()}else this._selectionDidChangeSingle()},"selection.@each"),valueDidChange:Ember.observer(function(){var e,r=t(this,"content"),n=t(this,"value"),i=t(this,"optionValuePath").replace(/^content\.?/,""),o=i?t(this,"selection."+i):t(this,"selection");n!==o&&(e=r?r.find(function(e){return n===(i?t(e,i):e)}):null,this.set("selection",e))},"value"),_triggerChange:function(){var e=t(this,"selection"),r=t(this,"value");Ember.isNone(e)||this.selectionDidChange(),Ember.isNone(r)||this.valueDidChange(),this._change()},_changeSingle:function(){var r=this.$()[0].selectedIndex,n=t(this,"content"),i=t(this,"prompt");if(n&&t(n,"length")){if(i&&0===r)return e(this,"selection",null),void 0;i&&(r-=1),e(this,"selection",n.objectAt(r))}},_changeMultiple:function(){var r=this.$("option:selected"),n=t(this,"prompt"),i=n?1:0,a=t(this,"content"),u=t(this,"selection");if(a&&r){var c=r.map(function(){return this.index-i}).toArray(),l=a.objectsAt(c);s(u)?o(u,0,t(u,"length"),l):e(this,"selection",l)}},_selectionDidChangeSingle:function(){var e=this.get("element");if(e){var n=t(this,"content"),i=t(this,"selection"),o=n?r(n,i):-1,s=t(this,"prompt");s&&(o+=1),e&&(e.selectedIndex=o)}},_selectionDidChangeMultiple:function(){var e,i=t(this,"content"),o=t(this,"selection"),s=i?n(i,o):[-1],a=t(this,"prompt"),u=a?1:0,c=this.$("option");c&&c.each(function(){e=this.index>-1?this.index-u:-1,this.selected=r(s,e)>-1})},init:function(){this._super(),this.on("didInsertElement",this,this._triggerChange),this.on("change",this,this._change)}})}(),function(){function e(e,t){for(var r in e)"ID"===t[r]&&(e[r+"Binding"]=e[r],delete e[r])}Ember.Handlebars.registerHelper("input",function(t){var r=t.hash,n=t.hashTypes,i=r.type,o=r.on;return delete r.type,delete r.on,e(r,n),"checkbox"===i?Ember.Handlebars.helpers.view.call(this,Ember.Checkbox,t):(i&&(r.type=i),r.onEvent=o||"enter",Ember.Handlebars.helpers.view.call(this,Ember.TextField,t))}),Ember.Handlebars.registerHelper("textarea",function(t){var r=t.hash,n=t.hashTypes;return e(r,n),Ember.Handlebars.helpers.view.call(this,Ember.TextArea,t)})}(),function(){function e(){Ember.Handlebars.bootstrap(Ember.$(document))}function t(e){var t,n=Ember.TEMPLATES;if(n)for(var i in n)(t=i.match(/^components\/(.*)$/))&&r(e,t[1])}function r(e,t){e.injection("component:"+t,"layout","template:components/"+t);var r="component:"+t,n=e.lookupFactory(r);n||(e.register("component:"+t,Ember.Component),n=e.lookupFactory(r)),Ember.Handlebars.helper(t,n)}Ember.Handlebars.bootstrap=function(e){var t='script[type="text/x-handlebars"], script[type="text/x-raw-handlebars"]';Ember.$(t,e).each(function(){var e=Ember.$(this),t="text/x-raw-handlebars"===e.attr("type")?Ember.$.proxy(Handlebars.compile,Handlebars):Ember.$.proxy(Ember.Handlebars.compile,Ember.Handlebars),r=e.attr("data-template-name")||e.attr("id")||"application",n=t(e.html());if(void 0!==Ember.TEMPLATES[r])throw new Error('Template named "'+r+'" already exists.');Ember.TEMPLATES[r]=n,e.remove()})},Ember.onLoad("Ember.Application",function(r){r.initializer({name:"domTemplates",initialize:e}),r.initializer({name:"registerComponents",after:"domTemplates",initialize:t})})}(),function(){Ember.runLoadHooks("Ember.Handlebars",Ember.Handlebars)}(),function(){e("route-recognizer",[],function(){"use strict";function e(e){this.string=e}function t(e){this.name=e}function r(e){this.name=e}function n(){}function i(i,o,s){"/"===i.charAt(0)&&(i=i.substr(1));for(var a=i.split("/"),u=[],c=0,l=a.length;l>c;c++){var h,m=a[c];(h=m.match(/^:([^\/]+)$/))?(u.push(new t(h[1])),o.push(h[1]),s.dynamics++):(h=m.match(/^\*([^\/]+)$/))?(u.push(new r(h[1])),o.push(h[1]),s.stars++):""===m?u.push(new n):(u.push(new e(m)),s.statics++)}return u}function o(e){this.charSpec=e,this.nextStates=[]}function s(e){return e.sort(function(e,t){return e.types.stars!==t.types.stars?e.types.stars-t.types.stars:e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?e.types.statics-t.types.statics:0})}function a(e,t){for(var r=[],n=0,i=e.length;i>n;n++){var o=e[n];r=r.concat(o.match(t))}return r}function u(e,t){for(var r=e.handlers,n=e.regex,i=t.match(n),o=1,s=[],a=0,u=r.length;u>a;a++){for(var c=r[a],l=c.names,h={},m=0,f=l.length;f>m;m++)h[l[m]]=i[o++];s.push({handler:c.handler,params:h,isDynamic:!!l.length})}return s}function c(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function l(e,t,r){this.path=e,this.matcher=t,this.delegate=r}function h(e){this.routes={},this.children={},this.target=e}function m(e,t,r){return function(n,i){var o=e+n;return i?(i(m(o,t,r)),void 0):new l(e+n,t,r)}}function f(e,t,r){for(var n=0,i=0,o=e.length;o>i;i++)n+=e[i].path.length;t=t.substr(n),e.push({path:t,handler:r})}function p(e,t,r,n){var i=t.routes;for(var o in i)if(i.hasOwnProperty(o)){var s=e.slice();f(s,o,i[o]),t.children[o]?p(s,t.children[o],r,n):r.call(n,s)}}var d=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],b=new RegExp("(\\"+d.join("|\\")+")","g");e.prototype={eachChar:function(e){for(var t,r=this.string,n=0,i=r.length;i>n;n++)t=r.charAt(n),e({validChars:t})},regex:function(){return this.string.replace(b,"\\$1")},generate:function(){return this.string}},t.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},r.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},n.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},o.prototype={get:function(e){for(var t=this.nextStates,r=0,n=t.length;n>r;r++){var i=t[r],o=i.charSpec.validChars===e.validChars;if(o=o&&i.charSpec.invalidChars===e.invalidChars)return i}},put:function(e){var t;return(t=this.get(e))?t:(t=new o(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,r,n,i=this.nextStates,o=[],s=0,a=i.length;a>s;s++)t=i[s],r=t.charSpec,"undefined"!=typeof(n=r.validChars)?-1!==n.indexOf(e)&&o.push(t):"undefined"!=typeof(n=r.invalidChars)&&-1===n.indexOf(e)&&o.push(t);return o}};var v=function(){this.rootState=new o,this.names={}};return v.prototype={add:function(e,t){for(var r,o=this.rootState,s="^",a={statics:0,dynamics:0,stars:0},u=[],l=[],h=!0,m=0,f=e.length;f>m;m++){var p=e[m],d=[],b=i(p.path,d,a);l=l.concat(b);for(var v=0,E=b.length;E>v;v++){var g=b[v];g instanceof n||(h=!1,o=o.put({validChars:"/"}),s+="/",o=c(o,g),s+=g.regex())}u.push({handler:p.handler,names:d})}h&&(o=o.put({validChars:"/"}),s+="/"),o.handlers=u,o.regex=new RegExp(s+"$"),o.types=a,(r=t&&t.as)&&(this.names[r]={segments:l,handlers:u})},handlersFor:function(e){var t=this.names[e],r=[];if(!t)throw new Error("There is no route named "+e);for(var n=0,i=t.handlers.length;i>n;n++)r.push(t.handlers[n]);return r},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var r=this.names[e],i="";if(!r)throw new Error("There is no route named "+e);for(var o=r.segments,s=0,a=o.length;a>s;s++){var u=o[s];u instanceof n||(i+="/",i+=u.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),i},recognize:function(e){var t,r,n,i=[this.rootState];for("/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1)),r=0,n=e.length;n>r&&(i=a(i,e.charAt(r)),i.length);r++);var o=[];for(r=0,n=i.length;n>r;r++)i[r].handlers&&o.push(i[r]);i=s(o);var c=o[0];return c&&c.handlers?u(c,e):void 0}},l.prototype={to:function(e,t){var r=this.delegate;if(r&&r.willAddRoute&&(e=r.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}}},h.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,r,n){var i=new h(t);this.children[e]=i;var o=m(e,i,n);n&&n.contextEntered&&n.contextEntered(t,o),r(o)}},v.prototype.map=function(e,t){var r=new h;e(m("",r,this.delegate)),p([],r,function(e){t?t(this,e):this.add(e)},this)},v})}(),function(){e("router",["route-recognizer","rsvp"],function(e,t){"use strict";function r(e,t){this.router=e,this.promise=t,this.data={},this.resolvedModels={},this.providedModels={},this.providedModelsArray=[],this.sequence=++r.currentSequence,this.params={}}function n(){this.recognizer=new e}function i(e,n){return new r(e,t.reject(n))}function o(e,t,r,n){var i,o,a=t.length,u={},l=e.currentHandlerInfos||[],h={},m=e.currentParams||{},f=e.activeTransition,p={};for(r=x.call(r),c(h,n),i=t.length-1;i>=0;i--){var d=t[i],b=d.handler,v=l[i],E=!1;if(v&&v.name===d.handler||(E=!0),d.isDynamic)if(o=s(r,b,f,!0,h))E=!0,u[b]=o;else{p[b]={};for(var g in d.params)if(d.params.hasOwnProperty(g)){var y=d.params[g];m[g]!==y&&(E=!0),p[b][g]=h[g]=y}}else if(d.hasOwnProperty("names"))if(r.length&&(E=!0),o=s(r,b,f,d.names[0],h))u[b]=o;else{var w=d.names;p[b]={};for(var _=0,C=w.length;C>_;++_){var O=w[_];p[b][O]=h[O]=h[O]||m[O]}}E&&(a=i)}if(r.length>0)throw new Error("More context objects were passed than there are dynamic segments for the route: "+t[t.length-1].handler);return{matchPoint:a,providedModels:u,params:h,handlerParams:p}}function s(e,t,r,n,i){if(e.length&&n){var o=e.pop();if(!a(o))return o;i[n]=o.toString()}else if(r)return r.resolvedModels[t]||n&&r.providedModels[t]}function a(e){return"string"==typeof e||e instanceof String||!isNaN(e)}function u(e,t,r){var n,i,s,a,u,l=e.recognizer.handlersFor(t),h={},m=o(e,l,r).matchPoint;for(u=0;u<l.length;u++)i=l[u],s=e.getHandler(i.handler),a=i.names,a.length&&(n=u>=m?r.shift():s.context,c(h,V(s,n,a)));return h}function c(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}function l(e,t){var r=e.recognizer.handlersFor(t[0]);return A(e,"Attempting transition to "+t[0]),E(e,r,x.call(t,1),e.currentParams)}function h(e,t){var r=e.recognizer.recognize(t);return e.currentHandlerInfos,A(e,"Attempting URL transition to "+t),r?E(e,r,[],{}):i(e,new n.UnrecognizedURLError(t))}function m(e,t){var r=e.router,n=d(r.currentHandlerInfos||[],t);r.targetHandlerInfos=t,p(n.exited,function(e){var t=e.handler;delete t.context,t.exit&&t.exit()});var i=n.unchanged.slice();r.currentHandlerInfos=i,p(n.updatedContext,function(t){f(e,i,t,!1)}),p(n.entered,function(t){f(e,i,t,!0)})}function f(e,t,r,i){var o=r.handler,s=r.context;try{i&&o.enter&&o.enter(),C(e),v(o,s),o.setup&&o.setup(s),C(e)}catch(a){throw a instanceof n.TransitionAborted||b(e.router,t.concat(r),!0,["error",a,e]),a}t.push(r)}function p(e,t){for(var r=0,n=e.length;n>r;r++)t(e[r])}function d(e,t){var r,n,i,o,s={updatedContext:[],exited:[],entered:[],unchanged:[]};for(i=0,o=t.length;o>i;i++){var a=e[i],u=t[i];a&&a.handler===u.handler||(r=!0),r?(s.entered.push(u),a&&s.exited.unshift(a)):n||a.context!==u.context?(n=!0,s.updatedContext.push(u)):s.unchanged.push(a)}for(i=t.length,o=e.length;o>i;i++)s.exited.unshift(e[i]);return s}function b(e,t,r,n){if(e.triggerEvent)return e.triggerEvent(t,r,n),void 0;var i=n.shift();if(!t){if(r)return;throw new Error("Could not trigger event '"+i+"'. There are no active handlers")}for(var o=!1,s=t.length-1;s>=0;s--){var a=t[s],u=a.handler;if(u.events&&u.events[i]){if(u.events[i].apply(u,n)!==!0)return;o=!0}}if(!o&&!r)throw new Error("Nothing handled the event '"+i+"'.")}function v(e,t){e.context=t,e.contextDidChange&&e.contextDidChange()}function E(e,n,i,s,a){function u(){C(d);try{A(e,d.sequence,"Validation succeeded, finalizing transition;"),f&&f.length&&e.recognizer.hasRoute(f[f.length-1].name)&&f.length===l.matchPoint||w(d,v),e.didTransition&&e.didTransition(v),A(e,d.sequence,"TRANSITION COMPLETE."),p.resolve(v[v.length-1].handler)}catch(t){p.reject(t)}d.isAborted||(e.activeTransition=null)}function c(e){p.reject(e)}var l=o(e,n,i,s),h=n[n.length-1].handler,m=!1,f=e.currentHandlerInfos;if(e.activeTransition){if(y(e.activeTransition,h,i))return e.activeTransition;e.activeTransition.abort(),m=!0}var p=t.defer(),d=new r(e,p.promise);d.targetName=h,d.providedModels=l.providedModels,d.providedModelsArray=i,d.params=l.params,d.data=a||{},e.activeTransition=d;var v=g(e,n);return m||b(e,f,!0,["willTransition",d]),A(e,d.sequence,"Beginning validation for transition to "+d.targetName),_(d,v,0,l.matchPoint,l.handlerParams).then(u,c),d}function g(e,t){for(var r=[],n=0,i=t.length;i>n;++n){var o=t[n],s=o.isDynamic||o.names&&o.names.length;r.push({isDynamic:!!s,name:o.handler,handler:e.getHandler(o.handler)})}return r}function y(e,t,r){if(e.targetName!==t)return!1;var n=e.providedModelsArray;if(n.length!==r.length)return!1;for(var i=0,o=n.length;o>i;++i)if(n[i]!==r[i])return!1;return!0}function w(e,t){for(var r=e.router,n=(e.sequence,t[t.length-1].name),i=[],o=e.providedModelsArray.slice(),s=t.length-1;s>=0;--s){var c=t[s];if(c.isDynamic){var l=o.pop();i.unshift(a(l)?l.toString():c.context)}}var h=u(r,n,i);r.currentParams=h;var f=e.urlMethod;if(f){var p=r.recognizer.generate(n,h);"replace"===f?r.replaceURL(p):r.updateURL(p)}m(e,t)}function _(e,i,o,s,a){function u(r){return e.isAborted?(A(e.router,e.sequence,"detected abort."),t.reject(new n.TransitionAborted)):r}function c(r){return r instanceof n.TransitionAborted?t.reject(r):(e.abort(),A(p,g,E+": handling error: "+r),b(p,i.slice(0,o+1),!0,["error",r,e]),t.reject(r))}function l(){A(p,g,E+": calling beforeModel hook");var t=v.beforeModel&&v.beforeModel(e);return t instanceof r?null:t}function h(){A(p,g,E+": resolving model");var t=O(d,e,a[E],o>=s);return t instanceof r?null:t}function m(t){A(p,g,E+": calling afterModel hook"),e.resolvedModels[d.name]=t;var n=v.afterModel&&v.afterModel(t,e);return n instanceof r?null:n}function f(){return A(p,g,E+": validation succeeded, proceeding"),d.context=e.resolvedModels[d.name],_(e,i,o+1,s,a)}if(o===i.length)return t.resolve(e.resolvedModels);var p=e.router,d=i[o],v=d.handler,E=d.name,g=e.sequence;return s>o?(A(p,g,E+": using context from already-active handler"),e.resolvedModels[d.name]=e.providedModels[d.name]||d.handler.context,f()):t.resolve().then(u).then(l).then(u).then(h).then(u).then(m).then(u).then(null,c).then(f)}function C(e){if(e.isAborted)throw A(e.router,e.sequence,"detected abort."),new n.TransitionAborted}function O(e,t,r,n){var i=e.handler,o=e.name;if(!n&&i.hasOwnProperty("context"))return i.context;if(t.providedModels.hasOwnProperty(o)){var s=t.providedModels[o];return"function"==typeof s?s():s}return i.model&&i.model(r||{},t)}function A(e,t,r){e.log&&(3===arguments.length?e.log("Transition #"+t+": "+r):(r=t,e.log(r)))}function P(e,t){var r=t[0]||"/";return"/"===r.charAt(0)?h(e,r):l(e,t)}function V(e,t,r){var n={};if(a(t))return n[r[0]]=t,n;if(e.serialize)return e.serialize(t,r);if(1===r.length){var i=r[0];return n[i]=/_id$/.test(i)?t.id:t,n}}var x=Array.prototype.slice;return r.currentSequence=0,r.prototype={targetName:null,urlMethod:"update",providedModels:null,resolvedModels:null,params:null,promise:null,data:null,then:function(e,t){return this.promise.then(e,t)},abort:function(){return this.isAborted?this:(A(this.router,this.sequence,this.targetName+": transition was aborted"),this.isAborted=!0,this.router.activeTransition=null,this)},retry:function(){this.abort();var e=this.router.recognizer.handlersFor(this.targetName),t=E(this.router,e,this.providedModelsArray,this.params,this.data);return t},method:function(e){return this.urlMethod=e,this}},n.UnrecognizedURLError=function(e){this.message=e||"UnrecognizedURLError",this.name="UnrecognizedURLError"},n.TransitionAborted=function(e){this.message=e||"TransitionAborted",this.name="TransitionAborted"},n.prototype={map:function(e){this.recognizer.delegate=this.delegate,this.recognizer.map(e,function(e,t){var r=t[t.length-1].handler,n=[t,{as:r}];e.add.apply(e,n)})},hasRoute:function(e){return this.recognizer.hasRoute(e)},reset:function(){p(this.currentHandlerInfos||[],function(e){var t=e.handler;t.exit&&t.exit()}),this.currentHandlerInfos=null,this.targetHandlerInfos=null},activeTransition:null,handleURL:function(e){var t=x.call(arguments);return"/"!==e.charAt(0)&&(t[0]="/"+e),P(this,t).method(null)},updateURL:function(){throw new Error("updateURL is not implemented")},replaceURL:function(e){this.updateURL(e)},transitionTo:function(){return P(this,arguments)},replaceWith:function(){return P(this,arguments).method("replace")},paramsForHandler:function(e){return u(this,e,x.call(arguments,1))},generate:function(e){var t=u(this,e,x.call(arguments,1));return this.recognizer.generate(e,t)},isActive:function(e){var t,r,n=x.call(arguments,1),i=this.targetHandlerInfos,o=!1;if(!i)return!1;for(var s=this.recognizer.handlersFor(i[i.length-1].name),u=i.length-1;u>=0;u--)if(r=i[u],r.name===e&&(o=!0),o){if(0===n.length)break;if(r.isDynamic)if(t=n.pop(),a(t)){var c=s[u],l=c.names[0];if(""+t!==this.currentParams[l])return!1}else if(r.context!==t)return!1}return 0===n.length&&o},trigger:function(){var e=x.call(arguments);b(this,this.currentHandlerInfos,!1,e)},log:null},n})}(),function(){function e(e){this.parent=e,this.matches=[]}e.prototype={resource:function(t,r,n){if(2===arguments.length&&"function"==typeof r&&(n=r,r={}),1===arguments.length&&(r={}),"string"!=typeof r.path&&(r.path="/"+t),n){var i=new e(t);n.call(i),this.push(r.path,t,i.generate())}else this.push(r.path,t)},push:function(e,t,r){var n=t.split(".");(""===e||"/"===e||"index"===n[n.length-1])&&(this.explicitIndex=!0),this.matches.push([e,t,r])},route:function(e,t){t=t||{},"string"!=typeof t.path&&(t.path="/"+e),this.parent&&"application"!==this.parent&&(e=this.parent+"."+e),this.push(t.path,e)},generate:function(){var e=this.matches;return this.explicitIndex||this.route("index",{path:"/"}),function(t){for(var r=0,n=e.length;n>r;r++){var i=e[r];t(i[0]).to(i[1],i[2])}}}},e.map=function(t){var r=new e;return t.call(r),r},Ember.RouterDSL=e}(),function(){var e=Ember.get;Ember.controllerFor=function(e,t,r){return e.lookup("controller:"+t,r)},Ember.generateController=function(t,r,n){var i,o,s,a,u;return u=n&&Ember.isArray(n)?"array":n?"object":"basic",a="controller:"+u,i=t.lookupFactory(a).extend({isGenerated:!0,toString:function(){return"(generated "+r+" controller)"}}),o="controller:"+r,t.register(o,i),s=t.lookup(o),e(s,"namespace.LOG_ACTIVE_GENERATION")&&Ember.Logger.info("generated -> "+o,{fullName:o}),s}}(),function(){function e(e,t,r){var n=r.shift();if(!e){if(t)return;throw new Error("Could not trigger event '"+n+"'. There are no active handlers")}for(var i=!1,o=e.length-1;o>=0;o--){var s=e[o],a=s.handler;if(a._actions&&a._actions[n]){if(a._actions[n].apply(a,r)!==!0)return;i=!0}else if(a.events&&a.events[n]){if(a.events[n].apply(a,r)!==!0)return;i=!0}}if(!i&&!t)throw new Error("Nothing handled the event '"+n+"'.")}var r=t("router"),n=Ember.get,i=Ember.set,o=Ember.defineProperty,s=Ember._MetamorphView;Ember.Router=Ember.Object.extend({location:"hash",init:function(){this.router=this.constructor.router||this.constructor.map(Ember.K),this._activeViews={},this._setupLocation()},url:Ember.computed(function(){return n(this,"location").getURL()}),startRouting:function(){this.router=this.router||this.constructor.map(Ember.K);var e=this.router,t=n(this,"location"),r=this.container,i=this;this._setupRouter(e,t),r.register("view:default",s),r.register("view:toplevel",Ember.View.extend()),t.onUpdateURL(function(e){i.handleURL(e)}),this.handleURL(t.getURL())},didTransition:function(e){var t=this.container.lookup("controller:application"),r=Ember.Router._routePath(e);"currentPath"in t||o(t,"currentPath"),i(t,"currentPath",r),"currentRouteName"in t||o(t,"currentRouteName"),i(t,"currentRouteName",e[e.length-1].name),this.notifyPropertyChange("url"),n(this,"namespace").LOG_TRANSITIONS&&Ember.Logger.log("Transitioned into '"+r+"'")},handleURL:function(e){return this._doTransition("handleURL",[e])},transitionTo:function(){return this._doTransition("transitionTo",arguments)},replaceWith:function(){return this._doTransition("replaceWith",arguments)},generate:function(){var e=this.router.generate.apply(this.router,arguments);return this.location.formatURL(e)},isActive:function(){var e=this.router;return e.isActive.apply(e,arguments)},send:function(){this.router.trigger.apply(this.router,arguments)},hasRoute:function(e){return this.router.hasRoute(e)},reset:function(){this.router.reset()},_lookupActiveView:function(e){var t=this._activeViews[e];return t&&t[0]},_connectActiveView:function(e,t){var r=this._activeViews[e];r&&r[0].off("willDestroyElement",this,r[1]);var n=function(){delete this._activeViews[e]};this._activeViews[e]=[t,n],t.one("willDestroyElement",this,n)},_setupLocation:function(){var e=n(this,"location"),t=n(this,"rootURL"),r={};"string"==typeof t&&(r.rootURL=t),"string"==typeof e&&(r.implementation=e,e=i(this,"location",Ember.Location.create(r)))},_getHandlerFunction:function(){var e={},t=this.container,r=t.lookupFactory("route:basic"),i=this;return function(o){var s="route:"+o,a=t.lookup(s);if(e[o])return a;if(e[o]=!0,!a){if("loading"===o)return{};t.register(s,r.extend()),a=t.lookup(s),n(i,"namespace.LOG_ACTIVE_GENERATION")&&Ember.Logger.info("generated -> "+s,{fullName:s})}return"application"===o&&(a.events=a.events||{},a.events.error=a.events.error||Ember.Router._defaultErrorHandler),a.routeName=o,a}},_setupRouter:function(e,t){var r,n=this;e.getHandler=this._getHandlerFunction();var i=function(){t.setURL(r)};if(e.updateURL=function(e){r=e,Ember.run.once(i)},t.replaceURL){var o=function(){t.replaceURL(r)};e.replaceURL=function(e){r=e,Ember.run.once(o)}}e.didTransition=function(e){n.didTransition(e)}},_doTransition:function(e,t){t=[].slice.call(t),t[0]=t[0]||"/";var r,n=t[0],i=this;r="/"===n.charAt(0)?n:this.router.hasRoute(n)?n:t[0]=n+".index";var o=this.router[e].apply(this.router,t);return this.router.activeTransition&&this._scheduleLoadingStateEntry(),o.then(function(e){i._transitionCompleted(e)},function(){}),o},_scheduleLoadingStateEntry:function(){this._loadingStateActive||(this._shouldEnterLoadingState=!0,Ember.run.scheduleOnce("routerTransitions",this,this._enterLoadingState))},_enterLoadingState:function(){if(!this._loadingStateActive&&this._shouldEnterLoadingState){var e=this.router.getHandler("loading");e&&(e.enter&&e.enter(),e.setup&&e.setup(),this._loadingStateActive=!0)}},_exitLoadingState:function(){if(this._shouldEnterLoadingState=!1,this._loadingStateActive){var e=this.router.getHandler("loading");e&&e.exit&&e.exit(),this._loadingStateActive=!1}},_transitionCompleted:function(){this.notifyPropertyChange("url"),this._exitLoadingState()}}),Ember.Router.reopenClass({router:null,map:function(t){var i=this.router;i||(i=new r,i.callbacks=[],i.triggerEvent=e,this.reopenClass({router:i})),n(this,"namespace.LOG_TRANSITIONS_INTERNAL")&&(i.log=Ember.Logger.debug);var o=Ember.RouterDSL.map(function(){this.resource("application",{path:"/"},function(){for(var e=0;e<i.callbacks.length;e++)i.callbacks[e].call(this);t.call(this)})});return i.callbacks.push(t),i.map(o.generate()),i},_defaultErrorHandler:function(e){Ember.Logger.error("Error while loading route:",e),setTimeout(function(){throw e})},_routePath:function(e){for(var t=[],r=1,n=e.length;n>r;r++){var i=e[r].name,o=i.split(".");t.push(o[o.length-1])}return t.join(".")}})}(),function(){function e(e){var t=e.router.router.targetHandlerInfos;if(t)for(var r,n,i=0,o=t.length;o>i;i++){if(n=t[i].handler,n===e)return r;r=n}}function t(r){var n,i=e(r);if(i)return(n=i.lastRenderedTemplate)?n:t(i)}function r(e,r,n,i){i=i||{},i.into=i.into?i.into.replace(/\//g,"."):t(e),i.outlet=i.outlet||"main",i.name=r,i.template=n,i.LOG_VIEW_LOOKUPS=a(e.router,"namespace.LOG_VIEW_LOOKUPS");var o,s=i.controller;return s=i.controller?i.controller:(o=e.container.lookup("controller:"+r))?o:e.controllerName||e.routeName,"string"==typeof s&&(s=e.container.lookup("controller:"+s)),i.controller=s,i}function n(e,t,r){if(e)r.LOG_VIEW_LOOKUPS&&Ember.Logger.info("Rendering "+r.name+" with "+e,{fullName:"view:"+r.name});else{var n=r.into?"view:default":"view:toplevel";e=t.lookup(n),r.LOG_VIEW_LOOKUPS&&Ember.Logger.info("Rendering "+r.name+" with default view "+e,{fullName:"view:"+r.name})}return a(e,"templateName")||(u(e,"template",r.template),u(e,"_debugTemplateName",r.name)),u(e,"renderedName",r.name),u(e,"controller",r.controller),e}function i(e,t,r){if(r.into){var n=e.router._lookupActiveView(r.into),i=s(n,r.outlet);e.teardownOutletViews||(e.teardownOutletViews=[]),h(e.teardownOutletViews,0,0,[i]),n.connectOutlet(r.outlet,t)}else{var u=a(e,"router.namespace.rootElement");e.teardownTopLevelView&&e.teardownTopLevelView(),e.router._connectActiveView(r.name,t),e.teardownTopLevelView=o(t),t.appendTo(u)}}function o(e){return function(){e.destroy()}}function s(e,t){return function(){e.disconnectOutlet(t)}}var a=Ember.get,u=Ember.set,c=Ember.getProperties,l=(Ember.String.classify,Ember.String.fmt,Ember.EnumerableUtils.forEach),h=Ember.EnumerableUtils.replace;Ember.Route=Ember.Object.extend(Ember.ActionHandler,{exit:function(){this.deactivate(),this.teardownViews()},enter:function(){this.activate()},actions:null,events:null,mergedProperties:["events"],deactivate:Ember.K,activate:Ember.K,transitionTo:function(){var e=this.router;return e.transitionTo.apply(e,arguments)},replaceWith:function(){return this.router,this.router.replaceWith.apply(this.router,arguments)},send:function(){return this.router.send.apply(this.router,arguments)},setup:function(e){var t=this.controllerName||this.routeName,r=this.controllerFor(t,!0);r||(r=this.generateController(t,e)),this.controller=r,this.setupControllers?this.setupControllers(r,e):this.setupController(r,e),this.renderTemplates?this.renderTemplates(e):this.renderTemplate(r,e)},redirect:Ember.K,beforeModel:Ember.K,afterModel:function(e,t){this.redirect(e,t)},contextDidChange:function(){this.currentModel=this.context},model:function(e){var t,r,n,i;for(var o in e)(t=o.match(/^(.*)_id$/))&&(r=t[1],i=e[o]),n=!0;if(!r&&n)return e;if(r)return this.findModel(r,i)},findModel:function(){var e=a(this,"store");return e.find.apply(e,arguments)},store:Ember.computed(function(){var e=this.container;return this.routeName,a(this,"router.namespace"),{find:function(t,r){var n=e.lookupFactory("model:"+t);return n.find(r)}}}),serialize:function(e,t){if(!(t.length<1)){var r=t[0],n={};return/_id$/.test(r)&&1===t.length?n[r]=a(e,"id"):n=c(e,t),n}},setupController:function(e,t){e&&void 0!==t&&u(e,"model",t)},controllerFor:function(e){var t,r=this.container,n=r.lookup("route:"+e);return n&&n.controllerName&&(e=n.controllerName),t=r.lookup("controller:"+e)},generateController:function(e,t){var r=this.container;return t=t||this.modelFor(e),Ember.generateController(r,e,t)},modelFor:function(e){var t=this.container.lookup("route:"+e),r=this.router.router.activeTransition;if(r){var n=t&&t.routeName||e;if(r.resolvedModels.hasOwnProperty(n))return r.resolvedModels[n]}return t&&t.currentModel},renderTemplate:function(){this.render()},render:function(e,t){"object"!=typeof e||t||(t=e,e=this.routeName),t=t||{},e=e?e.replace(/\//g,"."):this.routeName;var o=t.view||this.viewName||e,s=this.templateName||e,u=this.container,c=u.lookup("view:"+o),l=c?c.get("template"):null;return l||(l=u.lookup("template:"+s)),c||l?(t=r(this,e,l,t),c=n(c,u,t),"main"===t.outlet&&(this.lastRenderedTemplate=e),i(this,c,t),void 0):(a(this.router,"namespace.LOG_VIEW_LOOKUPS")&&Ember.Logger.info('Could not find "'+e+'" template or view. Nothing will be rendered',{fullName:"template:"+e}),void 0)},disconnectOutlet:function(e){e=e||{},e.parentView=e.parentView?e.parentView.replace(/\//g,"."):t(this),e.outlet=e.outlet||"main";var r=this.router._lookupActiveView(e.parentView);r.disconnectOutlet(e.outlet)},willDestroy:function(){this.teardownViews()},teardownViews:function(){this.teardownTopLevelView&&this.teardownTopLevelView();var e=this.teardownOutletViews||[];l(e,function(e){e()}),delete this.teardownTopLevelView,delete this.teardownOutletViews,delete this.lastRenderedTemplate}})}(),function(){Ember.onLoad("Ember.Handlebars",function(){function e(e,r,i){return n.call(t(e,r,i),function(t,n){return null===t?r[n]:o(e,t,i)})}function t(e,t,o){function s(e,t){return"controller"===t?t:Ember.ControllerMixin.detect(e)?s(i(e,"model"),t?t+".model":"model"):t}var a=r(e,t,o),u=o.types;return n.call(a,function(e,r){return"ID"===u[r]?s(e,t[r]):null})}var r=Ember.Handlebars.resolveParams,n=Ember.ArrayPolyfills.map,i=Ember.get,o=Ember.Handlebars.get;Ember.Router.resolveParams=e,Ember.Router.resolvePaths=t})}(),function(){var e=Ember.get;Ember.set,Ember.String.fmt,Ember.onLoad("Ember.Handlebars",function(){function t(e,t){return e.hasRoute(t)||(t+=".index"),t}function r(e){var t=e.options.types,r=e.options.data;return i(e.context,e.params,{types:t,data:r})}var n=Ember.Router.resolveParams,i=Ember.Router.resolvePaths,o=Ember.ViewUtils.isSimpleClick,s=Ember.LinkView=Ember.View.extend({tagName:"a",currentWhen:null,title:null,rel:null,activeClass:"active",loadingClass:"loading",disabledClass:"disabled",_isDisabled:!1,replace:!1,attributeBindings:["href","title","rel"],classNameBindings:["active","loading","disabled"],eventName:"click",init:function(){this._super.apply(this,arguments);var t=e(this,"eventName");this.on(t,this,this._invoke);var n,i,o=this.parameters,s=o.context,a=r(o),u=a.length;for(i=0;u>i;i++)if(n=a[i],null!==n){var c=Ember.Handlebars.normalizePath(s,n,o.options.data);this.registerObserver(c.root,c.path,this,this._paramsChanged)}},_paramsChanged:function(){this.notifyPropertyChange("resolvedParams")},concreteView:Ember.computed(function(){return e(this,"parentView")}).property("parentView"),disabled:Ember.computed(function(t,r){return void 0!==r&&this.set("_isDisabled",r),r?e(this,"disabledClass"):!1}),active:Ember.computed(function(){if(e(this,"loading"))return!1;var t=e(this,"router"),r=e(this,"routeArgs"),n=r.slice(1),i=e(this,"resolvedParams"),o=this.currentWhen||i[0],s=o+".index",a=t.isActive.apply(t,[o].concat(n))||t.isActive.apply(t,[s].concat(n));return a?e(this,"activeClass"):void 0}).property("resolvedParams","routeArgs","router.url"),loading:Ember.computed(function(){return e(this,"routeArgs")?void 0:e(this,"loadingClass")}).property("routeArgs"),router:Ember.computed(function(){return e(this,"controller").container.lookup("router:main")}),_invoke:function(t){if(!o(t))return!0;if(t.preventDefault(),this.bubbles===!1&&t.stopPropagation(),e(this,"_isDisabled"))return!1;if(e(this,"loading"))return Ember.Logger.warn("This link-to is in an inactive loading state because at least one of its parameters presently has a null/undefined value, or the provided route name is invalid."),!1;var r=e(this,"router"),n=e(this,"routeArgs");e(this,"replace")?r.replaceWith.apply(r,n):r.transitionTo.apply(r,n)},resolvedParams:Ember.computed(function(){var e=this.parameters,t=e.options,r=t.types,i=t.data;return n(e.context,e.params,{types:r,data:i})}).property(),routeArgs:Ember.computed(function(){var r=e(this,"resolvedParams").slice(0),n=e(this,"router"),i=r[0];if(i){i=t(n,i),r[0]=i;for(var o=1,s=r.length;s>o;++o){var a=r[o];if(null===a||"undefined"==typeof a)return}return r}}).property("resolvedParams"),href:Ember.computed(function(){if("a"!==e(this,"tagName"))return!1;var t=e(this,"router"),r=e(this,"routeArgs");return r?t.generate.apply(t,r):e(this,"loadingHref")}).property("routeArgs"),loadingHref:"#"});s.toString=function(){return"LinkView"},Ember.Handlebars.registerHelper("link-to",function(){var e=[].slice.call(arguments,-1)[0],t=[].slice.call(arguments,0,-1),r=e.hash;return r.disabledBinding=r.disabledWhen,r.parameters={context:this,options:e,params:t},Ember.Handlebars.helpers.view.call(this,s,e)}),Ember.Handlebars.registerHelper("linkTo",Ember.Handlebars.helpers["link-to"])})}(),function(){Ember.get,Ember.set,Ember.onLoad("Ember.Handlebars",function(e){e.OutletView=Ember.ContainerView.extend(Ember._Metamorph),e.registerHelper("outlet",function(t,r){var n,i;
    for(t&&t.data&&t.data.isRenderData&&(r=t,t="main"),n=r.data.view;!n.get("template.isTop");)n=n.get("_parentView");return i=r.hash.viewClass||e.OutletView,r.data.view.set("outletSource",n),r.hash.currentViewBinding="_view.outletSource._outlets."+t,e.helpers.view.call(this,i,r)})})}(),function(){Ember.get,Ember.set,Ember.onLoad("Ember.Handlebars",function(){Ember.Handlebars.registerHelper("render",function(e,t,r){var n,i,o,s,a,u,c=3===arguments.length;2===arguments.length&&(r=t,t=void 0),"string"==typeof t&&(a=Ember.Handlebars.get(r.contexts[1],t,r),u={singleton:!1}),e=e.replace(/\//g,"."),n=r.data.keywords.controller.container,i=n.lookup("router:main"),s=n.lookup("view:"+e)||n.lookup("view:default");var l=r.hash.controller;o=l?n.lookup("controller:"+l,u):n.lookup("controller:"+e,u)||Ember.generateController(n,e,a),o&&c&&o.set("model",a);var h=r.contexts[1];h&&s.registerObserver(h,t,function(){o.set("model",Ember.Handlebars.get(h,t,r))}),o.set("target",r.data.keywords.controller),r.hash.viewName=Ember.String.camelize(e),r.hash.template=n.lookup("template:"+e),r.hash.controller=o,i&&!a&&i._connectActiveView(e,s),Ember.Handlebars.helpers.view.call(this,s,r)})})}(),function(){Ember.onLoad("Ember.Handlebars",function(){function e(e,r){var n=[];r&&n.push(r);var i=e.options.types.slice(1),o=e.options.data;return n.concat(t(e.context,e.params,{types:i,data:o}))}var t=Ember.Router.resolveParams,r=Ember.ViewUtils.isSimpleClick,n=Ember.Handlebars,i=n.get,o=n.SafeString,s=Ember.ArrayPolyfills.forEach,a=(Ember.get,Array.prototype.slice),u=n.ActionHelper={registeredActions:{}},c=["alt","shift","meta","ctrl"],l=function(e,t){if("undefined"==typeof t)return r(e);var n=!0;return s.call(c,function(r){e[r+"Key"]&&-1===t.indexOf(r)&&(n=!1)}),n};u.registerAction=function(t,r,n){var o=(++Ember.uuid).toString();return u.registeredActions[o]={eventName:r.eventName,handler:function(o){if(!l(o,n))return!0;o.preventDefault(),r.bubbles===!1&&o.stopPropagation();var s=r.target;s=s.target?i(s.root,s.target,s.options):s.root,Ember.run(function(){s.send?s.send.apply(s,e(r.parameters,t)):s[t].apply(s,e(r.parameters))})}},r.view.on("willClearRender",function(){delete u.registeredActions[o]}),o},n.registerHelper("action",function(e){var t,r=arguments[arguments.length-1],n=a.call(arguments,1,-1),i=r.hash,s={eventName:i.on||"click"};s.parameters={context:this,options:r,params:n},s.view=r.data.view;var c,l;i.target?(c=this,l=i.target):(t=r.data.keywords.controller)&&(c=t),s.target={root:c,target:l,options:r},s.bubbles=i.bubbles;var h=u.registerAction(e,s,i.allowedKeys);return new o('data-ember-action="'+h+'"')})})}(),function(){if(Ember.ENV.EXPERIMENTAL_CONTROL_HELPER){var e=Ember.get,t=Ember.set;Ember.Handlebars.registerHelper("control",function(r,n,i){function o(){var e=Ember.Handlebars.get(this,n,i);t(p,"model",e),f.rerender()}2===arguments.length&&(i=n,n=void 0);var s;n&&(s=Ember.Handlebars.get(this,n,i));var a,u,c=i.data.keywords.controller,l=(i.data.keywords.view,e(c,"_childContainers")),h=i.hash.controlID;l.hasOwnProperty(h)?u=l[h]:(a=e(c,"container"),u=a.child(),l[h]=u);var m=r.replace(/\//g,"."),f=u.lookup("view:"+m)||u.lookup("view:default"),p=u.lookup("controller:"+m),d=u.lookup("template:"+r);t(p,"target",c),t(p,"model",s),i.hash.template=d,i.hash.controller=p,n&&(Ember.addObserver(this,n,o),f.one("willDestroyElement",this,function(){Ember.removeObserver(this,n,o)})),Ember.Handlebars.helpers.view.call(this,f,i)})}}(),function(){var e=Ember.get;Ember.set,Ember.ControllerMixin.reopen({transitionToRoute:function(){var t=e(this,"target"),r=t.transitionToRoute||t.transitionTo;return r.apply(t,arguments)},transitionTo:function(){return this.transitionToRoute.apply(this,arguments)},replaceRoute:function(){var t=e(this,"target"),r=t.replaceRoute||t.replaceWith;return r.apply(t,arguments)},replaceWith:function(){return this.replaceRoute.apply(this,arguments)}})}(),function(){var e=Ember.get,t=Ember.set;Ember.View.reopen({init:function(){t(this,"_outlets",{}),this._super()},connectOutlet:function(r,n){if(this._pendingDisconnections&&delete this._pendingDisconnections[r],this._hasEquivalentView(r,n))return n.destroy(),void 0;var i=e(this,"_outlets"),o=e(this,"container"),s=o&&o.lookup("router:main"),a=e(n,"renderedName");t(i,r,n),s&&a&&s._connectActiveView(a,n)},_hasEquivalentView:function(t,r){var n=e(this,"_outlets."+t);return n&&n.constructor===r.constructor&&n.get("template")===r.get("template")&&n.get("context")===r.get("context")},disconnectOutlet:function(e){this._pendingDisconnections||(this._pendingDisconnections={}),this._pendingDisconnections[e]=!0,Ember.run.once(this,"_finishDisconnections")},_finishDisconnections:function(){var r=e(this,"_outlets"),n=this._pendingDisconnections;this._pendingDisconnections=null;for(var i in n)t(r,i,null)}})}(),function(){var e=Ember.run.queues,t=Ember.ArrayPolyfills.indexOf;e.splice(t.call(e,"actions")+1,0,"routerTransitions")}(),function(){Ember.get,Ember.set,Ember.Location={create:function(e){var t=e&&e.implementation,r=this.implementations[t];return r.create.apply(r,arguments)},registerImplementation:function(e,t){this.implementations[e]=t},implementations:{}}}(),function(){var e=Ember.get,t=Ember.set;Ember.NoneLocation=Ember.Object.extend({path:"",getURL:function(){return e(this,"path")},setURL:function(e){t(this,"path",e)},onUpdateURL:function(e){this.updateCallback=e},handleURL:function(e){t(this,"path",e),this.updateCallback(e)},formatURL:function(e){return e}}),Ember.Location.registerImplementation("none",Ember.NoneLocation)}(),function(){var e=Ember.get,t=Ember.set;Ember.HashLocation=Ember.Object.extend({init:function(){t(this,"location",e(this,"location")||window.location)},getURL:function(){return e(this,"location").hash.substr(1)},setURL:function(r){e(this,"location").hash=r,t(this,"lastSetURL",r)},replaceURL:function(t){e(this,"location").replace("#"+t)},onUpdateURL:function(r){var n=this,i=Ember.guidFor(this);Ember.$(window).on("hashchange.ember-location-"+i,function(){Ember.run(function(){var i=location.hash.substr(1);e(n,"lastSetURL")!==i&&(t(n,"lastSetURL",null),r(i))})})},formatURL:function(e){return"#"+e},willDestroy:function(){var e=Ember.guidFor(this);Ember.$(window).off("hashchange.ember-location-"+e)}}),Ember.Location.registerImplementation("hash",Ember.HashLocation)}(),function(){var e=Ember.get,t=Ember.set,r=!1,n=window.history&&"state"in window.history;Ember.HistoryLocation=Ember.Object.extend({init:function(){t(this,"location",e(this,"location")||window.location),this.initState()},initState:function(){t(this,"history",e(this,"history")||window.history),this.replaceState(this.formatURL(this.getURL()))},rootURL:"/",getURL:function(){var t=e(this,"rootURL"),r=e(this,"location").pathname;return t=t.replace(/\/$/,""),r=r.replace(t,"")},setURL:function(e){var t=this.getState();e=this.formatURL(e),t&&t.path!==e&&this.pushState(e)},replaceURL:function(e){var t=this.getState();e=this.formatURL(e),t&&t.path!==e&&this.replaceState(e)},getState:function(){return n?e(this,"history").state:this._historyState},pushState:function(t){var r={path:t};e(this,"history").pushState(r,null,t),n||(this._historyState=r),this._previousURL=this.getURL()},replaceState:function(t){var r={path:t};e(this,"history").replaceState(r,null,t),n||(this._historyState=r),this._previousURL=this.getURL()},onUpdateURL:function(e){var t=Ember.guidFor(this),n=this;Ember.$(window).on("popstate.ember-location-"+t,function(){(r||(r=!0,n.getURL()!==n._previousURL))&&e(n.getURL())})},formatURL:function(t){var r=e(this,"rootURL");return""!==t&&(r=r.replace(/\/$/,"")),r+t},willDestroy:function(){var e=Ember.guidFor(this);Ember.$(window).off("popstate.ember-location-"+e)}}),Ember.Location.registerImplementation("history",Ember.HistoryLocation)}(),function(){function e(t,r,n,i){var o,s=t.name,a=t.incoming,u=t.incomingNames,c=u.length;if(n||(n={}),i||(i=[]),!n.hasOwnProperty(s)){for(i.push(s),n[s]=!0,o=0;c>o;o++)e(a[u[o]],r,n,i);r(t,i),i.pop()}}function t(){this.names=[],this.vertices={}}t.prototype.add=function(e){if(e){if(this.vertices.hasOwnProperty(e))return this.vertices[e];var t={name:e,incoming:{},incomingNames:[],hasOutgoing:!1,value:null};return this.vertices[e]=t,this.names.push(e),t}},t.prototype.map=function(e,t){this.add(e).value=t},t.prototype.addEdge=function(t,r){function n(e,t){if(e.name===r)throw new Error("cycle detected: "+r+" <- "+t.join(" <- "))}if(t&&r&&t!==r){var i=this.add(t),o=this.add(r);o.incoming.hasOwnProperty(t)||(e(i,n),i.hasOutgoing=!0,o.incoming[t]=i,o.incomingNames.push(t))}},t.prototype.topsort=function(t){var r,n,i={},o=this.vertices,s=this.names,a=s.length;for(r=0;a>r;r++)n=o[s[r]],n.hasOutgoing||e(n,t,i)},t.prototype.addEdges=function(e,t,r,n){var i;if(this.map(e,t),r)if("string"==typeof r)this.addEdge(e,r);else for(i=0;i<r.length;i++)this.addEdge(e,r[i]);if(n)if("string"==typeof n)this.addEdge(n,e);else for(i=0;i<n.length;i++)this.addEdge(n[i],e)},Ember.DAG=t}(),function(){var e=Ember.get,t=Ember.String.classify,r=Ember.String.capitalize,n=Ember.String.decamelize;Ember.DefaultResolver=Ember.Object.extend({namespace:null,normalize:function(e){var t=e.split(":",2),r=t[0],n=t[1];if("template"!==r){var i=n;return i.indexOf(".")>-1&&(i=i.replace(/\.(.)/g,function(e){return e.charAt(1).toUpperCase()})),n.indexOf("_")>-1&&(i=i.replace(/_(.)/g,function(e){return e.charAt(1).toUpperCase()})),r+":"+i}return e},resolve:function(e){var t=this.parseName(e),r=this[t.resolveMethodName];if(!t.name||!t.type)throw new TypeError("Invalid fullName: `"+e+"`, must of of the form `type:name` ");if(r){var n=r.call(this,t);if(n)return n}return this.resolveOther(t)},parseName:function(n){var i=n.split(":"),o=i[0],s=i[1],a=s,u=e(this,"namespace"),c=u;if("template"!==o&&-1!==a.indexOf("/")){var l=a.split("/");a=l[l.length-1];var h=r(l.slice(0,-1).join("."));c=Ember.Namespace.byName(h)}return{fullName:n,type:o,fullNameWithoutType:s,name:a,root:c,resolveMethodName:"resolve"+t(o)}},resolveTemplate:function(e){var t=e.fullNameWithoutType.replace(/\./g,"/");return Ember.TEMPLATES[t]?Ember.TEMPLATES[t]:(t=n(t),Ember.TEMPLATES[t]?Ember.TEMPLATES[t]:void 0)},useRouterNaming:function(e){e.name=e.name.replace(/\./g,"_"),"basic"===e.name&&(e.name="")},resolveController:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveRoute:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveView:function(e){return this.useRouterNaming(e),this.resolveOther(e)},resolveModel:function(r){var n=t(r.name),i=e(r.root,n);return i?i:void 0},resolveOther:function(r){var n=t(r.name)+t(r.type),i=e(r.root,n);return i?i:void 0},lookupDescription:function(e){var r=this.parseName(e);if("template"===r.type)return"template at "+r.fullNameWithoutType.replace(/\./g,"/");var n=r.root+"."+t(r.name);return"model"!==r.type&&(n+=t(r.type)),n},makeToString:function(e){return e.toString()}})}(),function(){function e(e){this._container=e}function t(e){function t(e){return n.resolve(e)}e.get("resolver");var r=e.get("resolver")||e.get("Resolver")||Ember.DefaultResolver,n=r.create({namespace:e});return t.describe=function(e){return n.lookupDescription(e)},t.makeToString=function(e,t){return n.makeToString(e,t)},t.normalize=function(e){return n.normalize?n.normalize(e):e},t}var r=Ember.get,n=Ember.set;e.deprecate=function(e){return function(){var t=this._container;return t[e].apply(t,arguments)}},e.prototype={_container:null,lookup:e.deprecate("lookup"),resolve:e.deprecate("resolve"),register:e.deprecate("register")};var i=Ember.Application=Ember.Namespace.extend(Ember.DeferredMixin,{rootElement:"body",eventDispatcher:null,customEvents:null,_readinessDeferrals:1,init:function(){this.$||(this.$=Ember.$),this.__container__=this.buildContainer(),this.Router=this.Router||this.defaultRouter(),this.Router&&(this.Router.namespace=this),this._super(),this.scheduleInitialize(),Ember.LOG_VERSION&&(Ember.LOG_VERSION=!1)},buildContainer:function(){var e=this.__container__=i.buildContainer(this);return e},defaultRouter:function(){return void 0===this.router?Ember.Router.extend():void 0},scheduleInitialize:function(){var e=this;!this.$||this.$.isReady?Ember.run.schedule("actions",e,"_initialize"):this.$().ready(function(){Ember.run(e,"_initialize")})},deferReadiness:function(){this._readinessDeferrals++},advanceReadiness:function(){this._readinessDeferrals--,0===this._readinessDeferrals&&Ember.run.once(this,this.didBecomeReady)},register:function(){var e=this.__container__;e.register.apply(e,arguments)},inject:function(){var e=this.__container__;e.injection.apply(e,arguments)},initialize:function(){},_initialize:function(){return this.isDestroyed?void 0:(this.register("router:main",this.Router),this.runInitializers(),Ember.runLoadHooks("application",this),this.advanceReadiness(),this)},reset:function(){function e(){var e=this.__container__.lookup("router:main");e.reset(),Ember.run(this.__container__,"destroy"),this.buildContainer(),Ember.run.schedule("actions",this,function(){this._initialize()})}this._readinessDeferrals=1,Ember.run.join(this,e)},runInitializers:function(){var e,t,n=r(this.constructor,"initializers"),i=this.__container__,o=new Ember.DAG,s=this;for(e=0;e<n.length;e++)t=n[e],o.addEdges(t.name,t.initialize,t.before,t.after);o.topsort(function(e){var t=e.value;t(i,s)})},didBecomeReady:function(){this.setupEventDispatcher(),this.ready(),this.startRouting(),Ember.testing||(Ember.Namespace.processAll(),Ember.BOOTED=!0),this.resolve(this)},setupEventDispatcher:function(){var e=r(this,"customEvents"),t=r(this,"rootElement"),i=this.__container__.lookup("event_dispatcher:main");n(this,"eventDispatcher",i),i.setup(e,t)},startRouting:function(){var e=this.__container__.lookup("router:main");e&&e.startRouting()},handleURL:function(e){var t=this.__container__.lookup("router:main");t.handleURL(e)},ready:Ember.K,resolver:null,Resolver:null,willDestroy:function(){Ember.BOOTED=!1,this.__container__.destroy()},initializer:function(e){this.constructor.initializer(e)}});Ember.Application.reopenClass({concatenatedProperties:["initializers"],initializers:Ember.A(),initializer:function(e){var t=r(this,"initializers");t.push(e)},buildContainer:function(r){var n=new Ember.Container;return Ember.Container.defaultContainer=new e(n),n.set=Ember.set,n.resolver=t(r),n.normalize=n.resolver.normalize,n.describe=n.resolver.describe,n.makeToString=n.resolver.makeToString,n.optionsForType("component",{singleton:!1}),n.optionsForType("view",{singleton:!1}),n.optionsForType("template",{instantiate:!1}),n.register("application:main",r,{instantiate:!1}),n.register("controller:basic",Ember.Controller,{instantiate:!1}),n.register("controller:object",Ember.ObjectController,{instantiate:!1}),n.register("controller:array",Ember.ArrayController,{instantiate:!1}),n.register("route:basic",Ember.Route,{instantiate:!1}),n.register("event_dispatcher:main",Ember.EventDispatcher),n.injection("router:main","namespace","application:main"),n.injection("controller","target","router:main"),n.injection("controller","namespace","application:main"),n.injection("route","router","router:main"),n}}),Ember.runLoadHooks("Ember.Application",Ember.Application)}(),function(){function e(e,t,r){var n,i,o;for(i=0,o=r.length;o>i;i++)n=r[i],-1===n.indexOf(":")&&(n="controller:"+n),!t.has(n)}var t=Ember.get;Ember.set,Ember.ControllerMixin.reopen({concatenatedProperties:["needs"],needs:[],init:function(){var r=t(this,"needs"),n=t(r,"length");n>0&&(e(this,this.container,r),t(this,"controllers")),this._super.apply(this,arguments)},controllerFor:function(e){return Ember.controllerFor(t(this,"container"),e)},controllers:Ember.computed(function(){var e=this;return{needs:t(e,"needs"),container:t(e,"container"),unknownProperty:function(t){var r,n,i,o=this.needs;for(n=0,i=o.length;i>n;n++)if(r=o[n],r===t)return this.container.lookup("controller:"+t);var s=Ember.inspect(e)+"#needs does not include `"+t+"`. To access the "+t+" controller from "+Ember.inspect(e)+", "+Ember.inspect(e)+" should have a `needs` property that is an array of the controllers it has access to.";throw new ReferenceError(s)}}}).readOnly()})}(),function(){Ember.DataAdapter=Ember.Object.extend({init:function(){this._super(),this.releaseMethods=Ember.A()},container:null,attributeLimit:3,releaseMethods:Ember.A(),getFilters:function(){return Ember.A()},watchModelTypes:function(e,t){var r,n=this.getModelTypes(),i=this,o=Ember.A();r=n.map(function(e){var r=i.wrapModelType(e);return o.push(i.observeModelType(e,t)),r}),e(r);var s=function(){o.forEach(function(e){e()}),i.releaseMethods.removeObject(s)};return this.releaseMethods.pushObject(s),s},watchRecords:function(e,t,r,n){var i,o=this,s=Ember.A(),a=this.getRecords(e),u=function(e){r([e])},c=a.map(function(e){return s.push(o.observeRecord(e,u)),o.wrapRecord(e)}),l=function(e,r,i,a){for(var c=r;r+a>c;c++){var l=e.objectAt(c),h=o.wrapRecord(l);s.push(o.observeRecord(l,u)),t([h])}i&&n(r,i)},h={didChange:l,willChange:Ember.K};return a.addArrayObserver(o,h),i=function(){s.forEach(function(e){e()}),a.removeArrayObserver(o,h),o.releaseMethods.removeObject(i)},t(c),this.releaseMethods.pushObject(i),i},willDestroy:function(){this._super(),this.releaseMethods.forEach(function(e){e()})},detect:function(){return!1},columnsForType:function(){return Ember.A()},observeModelType:function(e,t){var r=this,n=this.getRecords(e),i=function(){t([r.wrapModelType(e)])},o={didChange:function(){Ember.run.scheduleOnce("actions",this,i)},willChange:Ember.K};n.addArrayObserver(this,o);var s=function(){n.removeArrayObserver(r,o)};return s},wrapModelType:function(e){var t,r=this.getRecords(e);return t={name:e.toString(),count:Ember.get(r,"length"),columns:this.columnsForType(e),object:e}},getModelTypes:function(){var e=Ember.A(Ember.Namespace.NAMESPACES),t=Ember.A(),r=this;return e.forEach(function(e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r.detect(i)&&t.push(i)}}),t},getRecords:function(){return Ember.A()},wrapRecord:function(e){var t={object:e};return t.columnValues=this.getRecordColumnValues(e),t.searchKeywords=this.getRecordKeywords(e),t.filterValues=this.getRecordFilterValues(e),t.color=this.getRecordColor(e),t},getRecordColumnValues:function(){return{}},getRecordKeywords:function(){return Ember.A()},getRecordFilterValues:function(){return{}},getRecordColor:function(){return null},observeRecord:function(){return function(){}}})}()}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||Ember.Logger.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");

// Knockout JavaScript library v2.3.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

(function() {function F(q){return function(){return q}};(function(q){var w=this||(0,eval)("this"),s=w.document,H=w.navigator,t=w.jQuery,y=w.JSON;(function(q){"function"===typeof require&&"object"===typeof exports&&"object"===typeof module?q(module.exports||exports):"function"===typeof define&&define.amd?define(["exports"],q):q(w.ko={})})(function(C){function G(b,c,d,f){a.d[b]={init:function(b){a.a.f.set(b,I,{});return{controlsDescendantBindings:!0}},update:function(b,e,m,h,k){m=a.a.f.get(b,I);e=a.a.c(e());h=!d!==!e;var l=!m.fb;if(l||c||h!==m.vb)l&&(m.fb=
    a.a.Oa(a.e.childNodes(b),!0)),h?(l||a.e.P(b,a.a.Oa(m.fb)),a.Ja(f?f(k,e):k,b)):a.e.ba(b),m.vb=h}};a.g.S[b]=!1;a.e.L[b]=!0}function J(b,c,d){d&&c!==a.h.n(b)&&a.h.W(b,c);c!==a.h.n(b)&&a.q.I(a.a.Ga,null,[b,"change"])}var a="undefined"!==typeof C?C:{};a.b=function(b,c){for(var d=b.split("."),f=a,g=0;g<d.length-1;g++)f=f[d[g]];f[d[d.length-1]]=c};a.r=function(a,c,d){a[c]=d};a.version="2.3.0";a.b("version",a.version);a.a=function(){function b(a,b){for(var e in a)a.hasOwnProperty(e)&&b(e,a[e])}function c(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          e){if("input"!==a.a.u(b)||!b.type||"click"!=e.toLowerCase())return!1;var k=b.type;return"checkbox"==k||"radio"==k}var d={},f={};d[H&&/Firefox\/2/i.test(H.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];d.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");b(d,function(a,b){if(b.length)for(var e=0,c=b.length;e<c;e++)f[b[e]]=a});var g={propertychange:!0},e=s&&function(){for(var a=3,b=s.createElement("div"),e=b.getElementsByTagName("i");b.innerHTML=
    "\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",e[0];);return 4<a?a:q}();return{Ta:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],p:function(a,b){for(var e=0,c=a.length;e<c;e++)b(a[e])},k:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var e=0,c=a.length;e<c;e++)if(a[e]===b)return e;return-1},La:function(a,b,e){for(var c=0,d=a.length;c<d;c++)if(b.call(e,a[c]))return a[c];return null},ka:function(b,e){var c=a.a.k(b,e);0<=c&&
b.splice(c,1)},Ma:function(b){b=b||[];for(var e=[],c=0,d=b.length;c<d;c++)0>a.a.k(e,b[c])&&e.push(b[c]);return e},Z:function(a,b){a=a||[];for(var e=[],c=0,d=a.length;c<d;c++)e.push(b(a[c]));return e},Y:function(a,b){a=a||[];for(var e=[],c=0,d=a.length;c<d;c++)b(a[c])&&e.push(a[c]);return e},R:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var e=0,c=b.length;e<c;e++)a.push(b[e]);return a},ja:function(b,e,c){var d=b.indexOf?b.indexOf(e):a.a.k(b,e);0>d?c&&b.push(e):c||b.splice(d,1)},
    extend:function(a,b){if(b)for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);return a},w:b,oa:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Mb:function(b){b=a.a.N(b);for(var e=s.createElement("div"),c=0,d=b.length;c<d;c++)e.appendChild(a.H(b[c]));return e},Oa:function(b,e){for(var c=0,d=b.length,g=[];c<d;c++){var f=b[c].cloneNode(!0);g.push(e?a.H(f):f)}return g},P:function(b,e){a.a.oa(b);if(e)for(var c=0,d=e.length;c<d;c++)b.appendChild(e[c])},eb:function(b,e){var c=b.nodeType?[b]:b;if(0<
        c.length){for(var d=c[0],g=d.parentNode,f=0,r=e.length;f<r;f++)g.insertBefore(e[f],d);f=0;for(r=c.length;f<r;f++)a.removeNode(c[f])}},hb:function(a,b){7>e?a.setAttribute("selected",b):a.selected=b},F:function(a){return null===a||a===q?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Wb:function(b,e){for(var c=[],d=(b||"").split(e),g=0,f=d.length;g<f;g++){var r=a.a.F(d[g]);""!==r&&c.push(r)}return c},Tb:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===
        b},yb:function(a,b){if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;null!=a;){if(a==b)return!0;a=a.parentNode}return!1},aa:function(b){return a.a.yb(b,b.ownerDocument)},pb:function(b){return!!a.a.La(b,a.a.aa)},u:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},o:function(b,d,k){var f=e&&g[d];if(f||"undefined"==typeof t)if(f||"function"!=typeof b.addEventListener)if("undefined"!=typeof b.attachEvent){var n=function(a){k.call(b,a)},p="on"+d;b.attachEvent(p,n);
        a.a.C.ia(b,function(){b.detachEvent(p,n)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else b.addEventListener(d,k,!1);else{if(c(b,d)){var r=k;k=function(a,b){var e=this.checked;b&&(this.checked=!0!==b.sb);r.call(this,a);this.checked=e}}t(b).bind(d,k)}},Ga:function(a,b){if(!a||!a.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof t){var e=[];c(a,b)&&e.push({sb:a.checked});t(a).trigger(b,e)}else if("function"==typeof s.createEvent)if("function"==
        typeof a.dispatchEvent)e=s.createEvent(f[b]||"HTMLEvents"),e.initEvent(b,!0,!0,w,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(e);else throw Error("The supplied element doesn't support dispatchEvent");else if("undefined"!=typeof a.fireEvent)c(a,b)&&(a.checked=!0!==a.checked),a.fireEvent("on"+b);else throw Error("Browser doesn't support triggering events");},c:function(b){return a.T(b)?b():b},ya:function(b){return a.T(b)?b.t():b},ga:function(b,e,c){if(e){var d=/\S+/g,g=b.className.match(d)||[];a.a.p(e.match(d),
        function(b){a.a.ja(g,b,c)});b.className=g.join(" ")}},ib:function(b,e){var c=a.a.c(e);if(null===c||c===q)c="";var d=a.e.firstChild(b);!d||3!=d.nodeType||a.e.nextSibling(d)?a.e.P(b,[s.createTextNode(c)]):d.data=c;a.a.Bb(b)},gb:function(a,b){a.name=b;if(7>=e)try{a.mergeAttributes(s.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}},Bb:function(a){9<=e&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},zb:function(a){if(e){var b=a.style.width;a.style.width=0;a.style.width=
        b}},Qb:function(b,e){b=a.a.c(b);e=a.a.c(e);for(var c=[],d=b;d<=e;d++)c.push(d);return c},N:function(a){for(var b=[],e=0,c=a.length;e<c;e++)b.push(a[e]);return b},Ub:6===e,Vb:7===e,ca:e,Ua:function(b,e){for(var c=a.a.N(b.getElementsByTagName("input")).concat(a.a.N(b.getElementsByTagName("textarea"))),d="string"==typeof e?function(a){return a.name===e}:function(a){return e.test(a.name)},g=[],f=c.length-1;0<=f;f--)d(c[f])&&g.push(c[f]);return g},Nb:function(b){return"string"==typeof b&&(b=a.a.F(b))?
        y&&y.parse?y.parse(b):(new Function("return "+b))():null},Ca:function(b,e,c){if(!y||!y.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return y.stringify(a.a.c(b),e,c)},Ob:function(e,c,d){d=d||{};var g=d.params||{},f=d.includeFields||this.Ta,p=e;if("object"==typeof e&&"form"===a.a.u(e))for(var p=e.action,r=f.length-1;0<=r;r--)for(var z=
        a.a.Ua(e,f[r]),D=z.length-1;0<=D;D--)g[z[D].name]=z[D].value;c=a.a.c(c);var q=s.createElement("form");q.style.display="none";q.action=p;q.method="post";for(var v in c)e=s.createElement("input"),e.name=v,e.value=a.a.Ca(a.a.c(c[v])),q.appendChild(e);b(g,function(a,b){var e=s.createElement("input");e.name=a;e.value=b;q.appendChild(e)});s.body.appendChild(q);d.submitter?d.submitter(q):q.submit();setTimeout(function(){q.parentNode.removeChild(q)},0)}}}();a.b("utils",a.a);a.b("utils.arrayForEach",a.a.p);
    a.b("utils.arrayFirst",a.a.La);a.b("utils.arrayFilter",a.a.Y);a.b("utils.arrayGetDistinctValues",a.a.Ma);a.b("utils.arrayIndexOf",a.a.k);a.b("utils.arrayMap",a.a.Z);a.b("utils.arrayPushAll",a.a.R);a.b("utils.arrayRemoveItem",a.a.ka);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",a.a.Ta);a.b("utils.getFormFields",a.a.Ua);a.b("utils.peekObservable",a.a.ya);a.b("utils.postJson",a.a.Ob);a.b("utils.parseJson",a.a.Nb);a.b("utils.registerEventHandler",a.a.o);a.b("utils.stringifyJson",
        a.a.Ca);a.b("utils.range",a.a.Qb);a.b("utils.toggleDomNodeCssClass",a.a.ga);a.b("utils.triggerEvent",a.a.Ga);a.b("utils.unwrapObservable",a.a.c);a.b("utils.objectForEach",a.a.w);a.b("utils.addOrRemoveItem",a.a.ja);a.b("unwrap",a.a.c);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this,d=Array.prototype.slice.call(arguments);a=d.shift();return function(){return c.apply(a,d.concat(Array.prototype.slice.call(arguments)))}});a.a.f=new function(){var b=0,c="__ko__"+(new Date).getTime(),
        d={};return{get:function(b,c){var e=a.a.f.pa(b,!1);return e===q?q:e[c]},set:function(b,c,e){if(e!==q||a.a.f.pa(b,!1)!==q)a.a.f.pa(b,!0)[c]=e},pa:function(a,g){var e=a[c];if(!e||"null"===e||!d[e]){if(!g)return q;e=a[c]="ko"+b++;d[e]={}}return d[e]},clear:function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}}};a.b("utils.domData",a.a.f);a.b("utils.domData.clear",a.a.f.clear);a.a.C=new function(){function b(b,c){var g=a.a.f.get(b,d);g===q&&c&&(g=[],a.a.f.set(b,d,g));return g}function c(e){var d=
        b(e,!1);if(d)for(var d=d.slice(0),f=0;f<d.length;f++)d[f](e);a.a.f.clear(e);"function"==typeof t&&"function"==typeof t.cleanData&&t.cleanData([e]);if(g[e.nodeType])for(d=e.firstChild;e=d;)d=e.nextSibling,8===e.nodeType&&c(e)}var d="__ko_domNodeDisposal__"+(new Date).getTime(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{ia:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},cb:function(e,c){var g=b(e,!1);g&&(a.a.ka(g,c),0==g.length&&a.a.f.set(e,d,q))},H:function(b){if(f[b.nodeType]&&
        (c(b),g[b.nodeType])){var d=[];a.a.R(d,b.getElementsByTagName("*"));for(var h=0,k=d.length;h<k;h++)c(d[h])}return b},removeNode:function(b){a.H(b);b.parentNode&&b.parentNode.removeChild(b)}}};a.H=a.a.C.H;a.removeNode=a.a.C.removeNode;a.b("cleanNode",a.H);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.C);a.b("utils.domNodeDisposal.addDisposeCallback",a.a.C.ia);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.C.cb);(function(){a.a.xa=function(b){var c;if("undefined"!=typeof t)if(t.parseHTML)c=
        t.parseHTML(b)||[];else{if((c=t.clean([b]))&&c[0]){for(b=c[0];b.parentNode&&11!==b.parentNode.nodeType;)b=b.parentNode;b.parentNode&&b.parentNode.removeChild(b)}}else{var d=a.a.F(b).toLowerCase();c=s.createElement("div");d=d.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!d.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!d.indexOf("<td")||!d.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];b="ignored<div>"+d[1]+b+d[2]+"</div>";for("function"==typeof w.innerShiv?
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 c.appendChild(w.innerShiv(b)):c.innerHTML=b;d[0]--;)c=c.lastChild;c=a.a.N(c.lastChild.childNodes)}return c};a.a.fa=function(b,c){a.a.oa(b);c=a.a.c(c);if(null!==c&&c!==q)if("string"!=typeof c&&(c=c.toString()),"undefined"!=typeof t)t(b).html(c);else for(var d=a.a.xa(c),f=0;f<d.length;f++)b.appendChild(d[f])}})();a.b("utils.parseHtmlFragment",a.a.xa);a.b("utils.setHtml",a.a.fa);a.s=function(){function b(c,f){if(c)if(8==c.nodeType){var g=a.s.$a(c.nodeValue);null!=g&&f.push({xb:c,Kb:g})}else if(1==c.nodeType)for(var g=
        0,e=c.childNodes,m=e.length;g<m;g++)b(e[g],f)}var c={};return{va:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},mb:function(a,b){var g=c[a];if(g===q)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return g.apply(null,b||[]),
        !0}finally{delete c[a]}},nb:function(c,f){var g=[];b(c,g);for(var e=0,m=g.length;e<m;e++){var h=g[e].xb,k=[h];f&&a.a.R(k,f);a.s.mb(g[e].Kb,k);h.nodeValue="";h.parentNode&&h.parentNode.removeChild(h)}},$a:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();a.b("memoization",a.s);a.b("memoization.memoize",a.s.va);a.b("memoization.unmemoize",a.s.mb);a.b("memoization.parseMemoText",a.s.$a);a.b("memoization.unmemoizeDomNodeAndDescendants",a.s.nb);a.Sa={throttle:function(b,c){b.throttleEvaluation=
        c;var d=null;return a.j({read:b,write:function(a){clearTimeout(d);d=setTimeout(function(){b(a)},c)}})},notify:function(b,c){b.equalityComparer="always"==c?F(!1):a.m.fn.equalityComparer;return b}};a.b("extenders",a.Sa);a.kb=function(b,c,d){this.target=b;this.la=c;this.wb=d;a.r(this,"dispose",this.B)};a.kb.prototype.B=function(){this.Hb=!0;this.wb()};a.V=function(){this.G={};a.a.extend(this,a.V.fn);a.r(this,"subscribe",this.Da);a.r(this,"extend",this.extend);a.r(this,"getSubscriptionsCount",this.Db)};
    a.V.fn={Da:function(b,c,d){d=d||"change";var f=new a.kb(this,c?b.bind(c):b,function(){a.a.ka(this.G[d],f)}.bind(this));this.G[d]||(this.G[d]=[]);this.G[d].push(f);return f},notifySubscribers:function(b,c){c=c||"change";this.G[c]&&a.q.I(function(){a.a.p(this.G[c].slice(0),function(a){a&&!0!==a.Hb&&a.la(b)})},this)},Db:function(){var b=0;a.a.w(this.G,function(a,d){b+=d.length});return b},extend:function(b){var c=this;b&&a.a.w(b,function(b,f){var g=a.Sa[b];"function"==typeof g&&(c=g(c,f))});return c}};
    a.Wa=function(a){return null!=a&&"function"==typeof a.Da&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.V);a.b("isSubscribable",a.Wa);a.q=function(){var b=[];return{rb:function(a){b.push({la:a,Ra:[]})},end:function(){b.pop()},bb:function(c){if(!a.Wa(c))throw Error("Only subscribable things can act as dependencies");if(0<b.length){var d=b[b.length-1];!d||0<=a.a.k(d.Ra,c)||(d.Ra.push(c),d.la(c))}},I:function(a,d,f){try{return b.push(null),a.apply(d,f||[])}finally{b.pop()}}}}();var L=
    {undefined:!0,"boolean":!0,number:!0,string:!0};a.m=function(b){function c(){if(0<arguments.length)return c.equalityComparer&&c.equalityComparer(d,arguments[0])||(c.K(),d=arguments[0],c.J()),this;a.q.bb(c);return d}var d=b;a.V.call(c);c.t=function(){return d};c.J=function(){c.notifySubscribers(d)};c.K=function(){c.notifySubscribers(d,"beforeChange")};a.a.extend(c,a.m.fn);a.r(c,"peek",c.t);a.r(c,"valueHasMutated",c.J);a.r(c,"valueWillMutate",c.K);return c};a.m.fn={equalityComparer:function(a,c){return null===
        a||typeof a in L?a===c:!1}};var A=a.m.Pb="__ko_proto__";a.m.fn[A]=a.m;a.qa=function(b,c){return null===b||b===q||b[A]===q?!1:b[A]===c?!0:a.qa(b[A],c)};a.T=function(b){return a.qa(b,a.m)};a.Xa=function(b){return"function"==typeof b&&b[A]===a.m||"function"==typeof b&&b[A]===a.j&&b.Eb?!0:!1};a.b("observable",a.m);a.b("isObservable",a.T);a.b("isWriteableObservable",a.Xa);a.U=function(b){b=b||[];if("object"!=typeof b||!("length"in b))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");
        b=a.m(b);a.a.extend(b,a.U.fn);return b};a.U.fn={remove:function(a){for(var c=this.t(),d=[],f="function"==typeof a?a:function(e){return e===a},g=0;g<c.length;g++){var e=c[g];f(e)&&(0===d.length&&this.K(),d.push(e),c.splice(g,1),g--)}d.length&&this.J();return d},removeAll:function(b){if(b===q){var c=this.t(),d=c.slice(0);this.K();c.splice(0,c.length);this.J();return d}return b?this.remove(function(c){return 0<=a.a.k(b,c)}):[]},destroy:function(a){var c=this.t(),d="function"==typeof a?a:function(c){return c===
        a};this.K();for(var f=c.length-1;0<=f;f--)d(c[f])&&(c[f]._destroy=!0);this.J()},destroyAll:function(b){return b===q?this.destroy(F(!0)):b?this.destroy(function(c){return 0<=a.a.k(b,c)}):[]},indexOf:function(b){var c=this();return a.a.k(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.K(),this.t()[d]=c,this.J())}};a.a.p("pop push reverse shift sort splice unshift".split(" "),function(b){a.U.fn[b]=function(){var a=this.t();this.K();a=a[b].apply(a,arguments);this.J();return a}});a.a.p(["slice"],
        function(b){a.U.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.b("observableArray",a.U);a.j=function(b,c,d){function f(){a.a.p(v,function(a){a.B()});v=[]}function g(){var a=m.throttleEvaluation;a&&0<=a?(clearTimeout(t),t=setTimeout(e,a)):e()}function e(){if(!n)if(l&&D())x();else{n=!0;try{var b=a.a.Z(v,function(a){return a.target});a.q.rb(function(e){var c;0<=(c=a.a.k(b,e))?b[c]=q:v.push(e.Da(g))});for(var e=p.call(c),d=b.length-1;0<=d;d--)b[d]&&v.splice(d,1)[0].B();l=!0;m.notifySubscribers(k,
        "beforeChange");k=e;m.notifySubscribers(k)}finally{a.q.end(),n=!1}v.length||x()}}function m(){if(0<arguments.length){if("function"===typeof r)r.apply(c,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}l||e();a.q.bb(m);return k}function h(){return!l||0<v.length}var k,l=!1,n=!1,p=b;p&&"object"==typeof p?(d=p,p=d.read):(d=d||{},p||(p=d.read));if("function"!=typeof p)throw Error("Pass a function that returns the value of the ko.computed");
        var r=d.write,z=d.disposeWhenNodeIsRemoved||d.$||null,D=d.disposeWhen||d.Qa||F(!1),x=f,v=[],t=null;c||(c=d.owner);m.t=function(){l||e();return k};m.Cb=function(){return v.length};m.Eb="function"===typeof d.write;m.B=function(){x()};m.ta=h;a.V.call(m);a.a.extend(m,a.j.fn);a.r(m,"peek",m.t);a.r(m,"dispose",m.B);a.r(m,"isActive",m.ta);a.r(m,"getDependenciesCount",m.Cb);!0!==d.deferEvaluation&&e();if(z&&h()){x=function(){a.a.C.cb(z,x);f()};a.a.C.ia(z,x);var s=D,D=function(){return!a.a.aa(z)||s()}}return m};
    a.Gb=function(b){return a.qa(b,a.j)};C=a.m.Pb;a.j[C]=a.m;a.j.fn={};a.j.fn[C]=a.j;a.b("dependentObservable",a.j);a.b("computed",a.j);a.b("isComputed",a.Gb);(function(){function b(a,g,e){e=e||new d;a=g(a);if("object"!=typeof a||null===a||a===q||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var m=a instanceof Array?[]:{};e.save(a,m);c(a,function(c){var d=g(a[c]);switch(typeof d){case "boolean":case "number":case "string":case "function":m[c]=d;break;case "object":case "undefined":var l=
        e.get(d);m[c]=l!==q?l:b(d,g,e)}});return m}function c(a,b){if(a instanceof Array){for(var e=0;e<a.length;e++)b(e);"function"==typeof a.toJSON&&b("toJSON")}else for(e in a)b(e)}function d(){this.keys=[];this.Ha=[]}a.lb=function(c){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(c,function(b){for(var e=0;a.T(b)&&10>e;e++)b=b();return b})};a.toJSON=function(b,c,e){b=a.lb(b);return a.a.Ca(b,c,e)};d.prototype={save:function(b,c){var e=a.a.k(this.keys,
        b);0<=e?this.Ha[e]=c:(this.keys.push(b),this.Ha.push(c))},get:function(b){b=a.a.k(this.keys,b);return 0<=b?this.Ha[b]:q}}})();a.b("toJS",a.lb);a.b("toJSON",a.toJSON);(function(){a.h={n:function(b){switch(a.a.u(b)){case "option":return!0===b.__ko__hasDomDataOptionValue__?a.a.f.get(b,a.d.options.wa):7>=a.a.ca?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case "select":return 0<=b.selectedIndex?a.h.n(b.options[b.selectedIndex]):q;default:return b.value}},W:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       c){switch(a.a.u(b)){case "option":switch(typeof c){case "string":a.a.f.set(b,a.d.options.wa,q);"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__;b.value=c;break;default:a.a.f.set(b,a.d.options.wa,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"===typeof c?c:""}break;case "select":""===c&&(c=q);if(null===c||c===q)b.selectedIndex=-1;for(var d=b.options.length-1;0<=d;d--)if(a.h.n(b.options[d])==c){b.selectedIndex=d;break}1<b.size||-1!==b.selectedIndex||(b.selectedIndex=
        0);break;default:if(null===c||c===q)c="";b.value=c}}}})();a.b("selectExtensions",a.h);a.b("selectExtensions.readValue",a.h.n);a.b("selectExtensions.writeValue",a.h.W);a.g=function(){function b(a,b){for(var d=null;a!=d;)d=a,a=a.replace(c,function(a,c){return b[c]});return a}var c=/\@ko_token_(\d+)\@/g,d=["true","false","null","undefined"],f=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;return{S:[],da:function(c){var e=a.a.F(c);if(3>e.length)return[];"{"===e.charAt(0)&&(e=e.substring(1,e.length-
        1));c=[];for(var d=null,f,k=0;k<e.length;k++){var l=e.charAt(k);if(null===d)switch(l){case '"':case "'":case "/":d=k,f=l}else if(l==f&&"\\"!==e.charAt(k-1)){l=e.substring(d,k+1);c.push(l);var n="@ko_token_"+(c.length-1)+"@",e=e.substring(0,d)+n+e.substring(k+1),k=k-(l.length-n.length),d=null}}f=d=null;for(var p=0,r=null,k=0;k<e.length;k++){l=e.charAt(k);if(null===d)switch(l){case "{":d=k;r=l;f="}";break;case "(":d=k;r=l;f=")";break;case "[":d=k,r=l,f="]"}l===r?p++:l===f&&(p--,0===p&&(l=e.substring(d,
        k+1),c.push(l),n="@ko_token_"+(c.length-1)+"@",e=e.substring(0,d)+n+e.substring(k+1),k-=l.length-n.length,d=null))}f=[];e=e.split(",");d=0;for(k=e.length;d<k;d++)p=e[d],r=p.indexOf(":"),0<r&&r<p.length-1?(l=p.substring(r+1),f.push({key:b(p.substring(0,r),c),value:b(l,c)})):f.push({unknown:b(p,c)});return f},ea:function(b){var e="string"===typeof b?a.g.da(b):b,c=[];b=[];for(var h,k=0;h=e[k];k++)if(0<c.length&&c.push(","),h.key){var l;a:{l=h.key;var n=a.a.F(l);switch(n.length&&n.charAt(0)){case "'":case '"':break a;
        default:l="'"+n+"'"}}h=h.value;c.push(l);c.push(":");c.push(h);h=a.a.F(h);0<=a.a.k(d,a.a.F(h).toLowerCase())?h=!1:(n=h.match(f),h=null===n?!1:n[1]?"Object("+n[1]+")"+n[2]:h);h&&(0<b.length&&b.push(", "),b.push(l+" : function(__ko_value) { "+h+" = __ko_value; }"))}else h.unknown&&c.push(h.unknown);e=c.join("");0<b.length&&(e=e+", '_ko_property_writers' : { "+b.join("")+" } ");return e},Jb:function(b,c){for(var d=0;d<b.length;d++)if(a.a.F(b[d].key)==c)return!0;return!1},ha:function(b,c,d,f,k){if(b&&
        a.T(b))!a.Xa(b)||k&&b.t()===f||b(f);else if((b=c()._ko_property_writers)&&b[d])b[d](f)}}}();a.b("expressionRewriting",a.g);a.b("expressionRewriting.bindingRewriteValidators",a.g.S);a.b("expressionRewriting.parseObjectLiteral",a.g.da);a.b("expressionRewriting.preProcessBindings",a.g.ea);a.b("jsonExpressionRewriting",a.g);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.g.ea);(function(){function b(a){return 8==a.nodeType&&(g?a.text:a.nodeValue).match(e)}function c(a){return 8==a.nodeType&&
        (g?a.text:a.nodeValue).match(m)}function d(a,e){for(var d=a,g=1,f=[];d=d.nextSibling;){if(c(d)&&(g--,0===g))return f;f.push(d);b(d)&&g++}if(!e)throw Error("Cannot find closing comment tag to match: "+a.nodeValue);return null}function f(a,b){var c=d(a,b);return c?0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var g=s&&"\x3c!--test--\x3e"===s.createComment("test").text,e=g?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,m=g?/^\x3c!--\s*\/ko\s*--\x3e$/:
        /^\s*\/ko\s*$/,h={ul:!0,ol:!0};a.e={L:{},childNodes:function(a){return b(a)?d(a):a.childNodes},ba:function(c){if(b(c)){c=a.e.childNodes(c);for(var e=0,d=c.length;e<d;e++)a.removeNode(c[e])}else a.a.oa(c)},P:function(c,e){if(b(c)){a.e.ba(c);for(var d=c.nextSibling,g=0,f=e.length;g<f;g++)d.parentNode.insertBefore(e[g],d)}else a.a.P(c,e)},ab:function(a,c){b(a)?a.parentNode.insertBefore(c,a.nextSibling):a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)},Va:function(c,e,d){d?b(c)?c.parentNode.insertBefore(e,
        d.nextSibling):d.nextSibling?c.insertBefore(e,d.nextSibling):c.appendChild(e):a.e.ab(c,e)},firstChild:function(a){return b(a)?!a.nextSibling||c(a.nextSibling)?null:a.nextSibling:a.firstChild},nextSibling:function(a){b(a)&&(a=f(a));return a.nextSibling&&c(a.nextSibling)?null:a.nextSibling},ob:function(a){return(a=b(a))?a[1]:null},Za:function(e){if(h[a.a.u(e)]){var d=e.firstChild;if(d){do if(1===d.nodeType){var g;g=d.firstChild;var m=null;if(g){do if(m)m.push(g);else if(b(g)){var r=f(g,!0);r?g=r:m=
        [g]}else c(g)&&(m=[g]);while(g=g.nextSibling)}if(g=m)for(m=d.nextSibling,r=0;r<g.length;r++)m?e.insertBefore(g[r],m):e.appendChild(g[r])}while(d=d.nextSibling)}}}}})();a.b("virtualElements",a.e);a.b("virtualElements.allowedBindings",a.e.L);a.b("virtualElements.emptyNode",a.e.ba);a.b("virtualElements.insertAfter",a.e.Va);a.b("virtualElements.prepend",a.e.ab);a.b("virtualElements.setDomNodeChildren",a.e.P);(function(){a.M=function(){this.Na={}};a.a.extend(a.M.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=
        b.getAttribute("data-bind");case 8:return null!=a.e.ob(b);default:return!1}},getBindings:function(a,c){var d=this.getBindingsString(a,c);return d?this.parseBindingsString(d,c,a):null},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.e.ob(b);default:return null}},parseBindingsString:function(b,c,d){try{var f;if(!(f=this.Na[b])){var g=this.Na,e,m="with($context){with($data||{}){return{"+a.g.ea(b)+"}}}";e=new Function("$context","$element",m);
        f=g[b]=e}return f(c,d)}catch(h){throw h.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+h.message,h;}}});a.M.instance=new a.M})();a.b("bindingProvider",a.M);(function(){function b(b,e,d){for(var f=a.e.firstChild(e);e=f;)f=a.e.nextSibling(e),c(b,e,d)}function c(c,e,f){var h=!0,k=1===e.nodeType;k&&a.e.Za(e);if(k&&f||a.M.instance.nodeHasBindings(e))h=d(e,null,c,f).Sb;h&&b(c,e,!k)}function d(b,c,d,h){function k(a){return function(){return p[a]}}function l(){return p}var n=0,p,r,
        z=a.a.f.get(b,f);if(!c){if(z)throw Error("You cannot apply bindings multiple times to the same element.");a.a.f.set(b,f,!0)}a.j(function(){var f=d&&d instanceof a.A?d:new a.A(a.a.c(d)),x=f.$data;!z&&h&&a.jb(b,f);if(p=("function"==typeof c?c(f,b):c)||a.M.instance.getBindings(b,f))0===n&&(n=1,a.a.w(p,function(c){var e=a.d[c];if(e&&8===b.nodeType&&!a.e.L[c])throw Error("The binding '"+c+"' cannot be used with virtual elements");if(e&&"function"==typeof e.init&&(e=(0,e.init)(b,k(c),l,x,f))&&e.controlsDescendantBindings){if(r!==
        q)throw Error("Multiple bindings ("+r+" and "+c+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");r=c}}),n=2),2===n&&a.a.w(p,function(c){var e=a.d[c];e&&"function"==typeof e.update&&(0,e.update)(b,k(c),l,x,f)})},null,{$:b});return{Sb:r===q}}a.d={};a.A=function(b,c,d){c?(a.a.extend(this,c),this.$parentContext=c,this.$parent=c.$data,this.$parents=(c.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=
        [],this.$root=b,this.ko=a);this.$data=b;d&&(this[d]=b)};a.A.prototype.createChildContext=function(b,c){return new a.A(b,this,c)};a.A.prototype.extend=function(b){var c=a.a.extend(new a.A,this);return a.a.extend(c,b)};var f="__ko_boundElement";a.jb=function(b,c){if(2==arguments.length)a.a.f.set(b,"__ko_bindingContext__",c);else return a.a.f.get(b,"__ko_bindingContext__")};a.Ka=function(b,c,f){1===b.nodeType&&a.e.Za(b);return d(b,c,f,!0)};a.Ja=function(a,c){1!==c.nodeType&&8!==c.nodeType||b(a,c,!0)};
        a.Ia=function(a,b){if(b&&1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");b=b||w.document.body;c(a,b,!0)};a.na=function(b){switch(b.nodeType){case 1:case 8:var c=a.jb(b);if(c)return c;if(b.parentNode)return a.na(b.parentNode)}return q};a.ub=function(b){return(b=a.na(b))?b.$data:q};a.b("bindingHandlers",a.d);a.b("applyBindings",a.Ia);a.b("applyBindingsToDescendants",a.Ja);a.b("applyBindingsToNode",a.Ka);
        a.b("contextFor",a.na);a.b("dataFor",a.ub)})();var K={"class":"className","for":"htmlFor"};a.d.attr={update:function(b,c){var d=a.a.c(c())||{};a.a.w(d,function(c,d){d=a.a.c(d);var e=!1===d||null===d||d===q;e&&b.removeAttribute(c);8>=a.a.ca&&c in K?(c=K[c],e?b.removeAttribute(c):b[c]=d):e||b.setAttribute(c,d.toString());"name"===c&&a.a.gb(b,e?"":d.toString())})}};a.d.checked={init:function(b,c,d){a.a.o(b,"click",function(){var f;if("checkbox"==b.type)f=b.checked;else if("radio"==b.type&&b.checked)f=
        b.value;else return;var g=c(),e=a.a.c(g);"checkbox"==b.type&&e instanceof Array?a.a.ja(g,b.value,b.checked):a.g.ha(g,d,"checked",f,!0)});"radio"!=b.type||b.name||a.d.uniqueName.init(b,F(!0))},update:function(b,c){var d=a.a.c(c());"checkbox"==b.type?b.checked=d instanceof Array?0<=a.a.k(d,b.value):d:"radio"==b.type&&(b.checked=b.value==d)}};a.d.css={update:function(b,c){var d=a.a.c(c());"object"==typeof d?a.a.w(d,function(c,d){d=a.a.c(d);a.a.ga(b,c,d)}):(d=String(d||""),a.a.ga(b,b.__ko__cssValue,!1),
        b.__ko__cssValue=d,a.a.ga(b,d,!0))}};a.d.enable={update:function(b,c){var d=a.a.c(c());d&&b.disabled?b.removeAttribute("disabled"):d||b.disabled||(b.disabled=!0)}};a.d.disable={update:function(b,c){a.d.enable.update(b,function(){return!a.a.c(c())})}};a.d.event={init:function(b,c,d,f){var g=c()||{};a.a.w(g,function(e){"string"==typeof e&&a.a.o(b,e,function(b){var g,k=c()[e];if(k){var l=d();try{var n=a.a.N(arguments);n.unshift(f);g=k.apply(f,n)}finally{!0!==g&&(b.preventDefault?b.preventDefault():b.returnValue=
        !1)}!1===l[e+"Bubble"]&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.d.foreach={Ya:function(b){return function(){var c=b(),d=a.a.ya(c);if(!d||"number"==typeof d.length)return{foreach:c,templateEngine:a.D.sa};a.a.c(c);return{foreach:d.data,as:d.as,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.D.sa}}},init:function(b,c){return a.d.template.init(b,a.d.foreach.Ya(c))},
        update:function(b,c,d,f,g){return a.d.template.update(b,a.d.foreach.Ya(c),d,f,g)}};a.g.S.foreach=!1;a.e.L.foreach=!0;a.d.hasfocus={init:function(b,c,d){function f(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if("activeElement"in f){var g;try{g=f.activeElement}catch(l){g=f.body}e=g===b}f=c();a.g.ha(f,d,"hasfocus",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var g=f.bind(null,!0),e=f.bind(null,!1);a.a.o(b,"focus",g);a.a.o(b,"focusin",g);a.a.o(b,"blur",e);a.a.o(b,"focusout",e)},
        update:function(b,c){var d=!!a.a.c(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===d||(d?b.focus():b.blur(),a.q.I(a.a.Ga,null,[b,d?"focusin":"focusout"]))}};a.d.hasFocus=a.d.hasfocus;a.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.fa(b,c())}};var I="__ko_withIfBindingData";G("if");G("ifnot",!1,!0);G("with",!0,!1,function(a,c){return a.createChildContext(c)});a.d.options={init:function(b){if("select"!==a.a.u(b))throw Error("options binding applies only to SELECT elements");
        for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(b,c){if(p){var d=0<=a.a.k(p,a.h.n(c[0]));a.a.hb(c[0],d)}}var e=0==b.length,m=!e&&b.multiple?b.scrollTop:null;c=a.a.c(c());var h=d(),k=h.optionsIncludeDestroyed,l={},n,p;b.multiple?p=a.a.Z(b.selectedOptions||a.a.Y(b.childNodes,function(b){return b.tagName&&"option"===a.a.u(b)&&b.selected}),function(b){return a.h.n(b)}):0<=
        b.selectedIndex&&(p=[a.h.n(b.options[b.selectedIndex])]);if(c){"undefined"==typeof c.length&&(c=[c]);var r=a.a.Y(c,function(b){return k||b===q||null===b||!a.a.c(b._destroy)});"optionsCaption"in h&&(n=a.a.c(h.optionsCaption),null!==n&&n!==q&&r.unshift(l))}else c=[];d=g;h.optionsAfterRender&&(d=function(b,c){g(0,c);a.q.I(h.optionsAfterRender,null,[c[0],b!==l?b:q])});a.a.Aa(b,r,function(b,c,d){d.length&&(p=d[0].selected&&[a.h.n(d[0])]);c=s.createElement("option");b===l?(a.a.fa(c,n),a.h.W(c,q)):(d=f(b,
        h.optionsValue,b),a.h.W(c,a.a.c(d)),b=f(b,h.optionsText,d),a.a.ib(c,b));return[c]},null,d);p=null;e&&"value"in h&&J(b,a.a.ya(h.value),!0);a.a.zb(b);m&&20<Math.abs(m-b.scrollTop)&&(b.scrollTop=m)}};a.d.options.wa="__ko.optionValueDomData__";a.d.selectedOptions={init:function(b,c,d){a.a.o(b,"change",function(){var f=c(),g=[];a.a.p(b.getElementsByTagName("option"),function(b){b.selected&&g.push(a.h.n(b))});a.g.ha(f,d,"selectedOptions",g)})},update:function(b,c){if("select"!=a.a.u(b))throw Error("values binding applies only to SELECT elements");
        var d=a.a.c(c());d&&"number"==typeof d.length&&a.a.p(b.getElementsByTagName("option"),function(b){var c=0<=a.a.k(d,a.h.n(b));a.a.hb(b,c)})}};a.d.style={update:function(b,c){var d=a.a.c(c()||{});a.a.w(d,function(c,d){d=a.a.c(d);b.style[c]=d||""})}};a.d.submit={init:function(b,c,d,f){if("function"!=typeof c())throw Error("The value for a submit binding must be a function");a.a.o(b,"submit",function(a){var d,m=c();try{d=m.call(f,b)}finally{!0!==d&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}})}};
    a.d.text={update:function(b,c){a.a.ib(b,c())}};a.e.L.text=!0;a.d.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.d.uniqueName.tb;a.a.gb(b,d)}}};a.d.uniqueName.tb=0;a.d.value={init:function(b,c,d){function f(){m=!1;var e=c(),f=a.h.n(b);a.g.ha(e,d,"value",f)}var g=["change"],e=d().valueUpdate,m=!1;e&&("string"==typeof e&&(e=[e]),a.a.R(g,e),g=a.a.Ma(g));!a.a.ca||("input"!=b.tagName.toLowerCase()||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete)||-1!=a.a.k(g,"propertychange")||
    (a.a.o(b,"propertychange",function(){m=!0}),a.a.o(b,"blur",function(){m&&f()}));a.a.p(g,function(c){var d=f;a.a.Tb(c,"after")&&(d=function(){setTimeout(f,0)},c=c.substring(5));a.a.o(b,c,d)})},update:function(b,c){var d="select"===a.a.u(b),f=a.a.c(c()),g=a.h.n(b);f!==g&&(g=function(){a.h.W(b,f)},g(),d&&setTimeout(g,0));d&&0<b.length&&J(b,f,!1)}};a.d.visible={update:function(b,c){var d=a.a.c(c()),f="none"!=b.style.display;d&&!f?b.style.display="":!d&&f&&(b.style.display="none")}};(function(b){a.d[b]=
    {init:function(c,d,f,g){return a.d.event.init.call(this,c,function(){var a={};a[b]=d();return a},f,g)}}})("click");a.v=function(){};a.v.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");};a.v.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};a.v.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||s;var d=c.getElementById(b);if(!d)throw Error("Cannot find template with ID "+b);return new a.l.i(d)}if(1==
        b.nodeType||8==b.nodeType)return new a.l.Q(b);throw Error("Unknown template type: "+b);};a.v.prototype.renderTemplate=function(a,c,d,f){a=this.makeTemplateSource(a,f);return this.renderTemplateSource(a,c,d)};a.v.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data("isRewritten")};a.v.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data("isRewritten",!0)};a.b("templateEngine",a.v);
    a.Ea=function(){function b(b,c,d,m){b=a.g.da(b);for(var h=a.g.S,k=0;k<b.length;k++){var l=b[k].key;if(h.hasOwnProperty(l)){var n=h[l];if("function"===typeof n){if(l=n(b[k].value))throw Error(l);}else if(!n)throw Error("This template engine does not support the '"+l+"' binding within its templates");}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.g.ea(b)+" } })()},'"+d.toLowerCase()+"')";return m.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,
        d=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ab:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.Ea.Lb(b,c)},d)},Lb:function(a,g){return a.replace(c,function(a,c,d,f,l){return b(l,c,d,g)}).replace(d,function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",g)})},qb:function(b,c){return a.s.va(function(d,m){var h=d.nextSibling;h&&h.nodeName.toLowerCase()===c&&a.Ka(h,b,m)})}}}();a.b("__tr_ambtns",a.Ea.qb);(function(){a.l={};a.l.i=function(a){this.i=a};a.l.i.prototype.text=
        function(){var b=a.a.u(this.i),b="script"===b?"text":"textarea"===b?"value":"innerHTML";if(0==arguments.length)return this.i[b];var c=arguments[0];"innerHTML"===b?a.a.fa(this.i,c):this.i[b]=c};a.l.i.prototype.data=function(b){if(1===arguments.length)return a.a.f.get(this.i,"templateSourceData_"+b);a.a.f.set(this.i,"templateSourceData_"+b,arguments[1])};a.l.Q=function(a){this.i=a};a.l.Q.prototype=new a.l.i;a.l.Q.prototype.text=function(){if(0==arguments.length){var b=a.a.f.get(this.i,"__ko_anon_template__")||
    {};b.Fa===q&&b.ma&&(b.Fa=b.ma.innerHTML);return b.Fa}a.a.f.set(this.i,"__ko_anon_template__",{Fa:arguments[0]})};a.l.i.prototype.nodes=function(){if(0==arguments.length)return(a.a.f.get(this.i,"__ko_anon_template__")||{}).ma;a.a.f.set(this.i,"__ko_anon_template__",{ma:arguments[0]})};a.b("templateSources",a.l);a.b("templateSources.domElement",a.l.i);a.b("templateSources.anonymousTemplate",a.l.Q)})();(function(){function b(b,c,d){var f;for(c=a.e.nextSibling(c);b&&(f=b)!==c;)b=a.e.nextSibling(f),1!==
        f.nodeType&&8!==f.nodeType||d(f)}function c(c,d){if(c.length){var f=c[0],g=c[c.length-1];b(f,g,function(b){a.Ia(d,b)});b(f,g,function(b){a.s.nb(b,[d])})}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function f(b,f,h,k,l){l=l||{};var n=b&&d(b),n=n&&n.ownerDocument,p=l.templateEngine||g;a.Ea.Ab(h,p,n);h=p.renderTemplate(h,k,l,n);if("number"!=typeof h.length||0<h.length&&"number"!=typeof h[0].nodeType)throw Error("Template engine must return an array of DOM nodes");n=!1;switch(f){case "replaceChildren":a.e.P(b,
        h);n=!0;break;case "replaceNode":a.a.eb(b,h);n=!0;break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+f);}n&&(c(h,k),l.afterRender&&a.q.I(l.afterRender,null,[h,k.$data]));return h}var g;a.Ba=function(b){if(b!=q&&!(b instanceof a.v))throw Error("templateEngine must inherit from ko.templateEngine");g=b};a.za=function(b,c,h,k,l){h=h||{};if((h.templateEngine||g)==q)throw Error("Set a template engine before calling renderTemplate");l=l||"replaceChildren";if(k){var n=d(k);return a.j(function(){var g=
        c&&c instanceof a.A?c:new a.A(a.a.c(c)),r="function"==typeof b?b(g.$data,g):b,g=f(k,l,r,g,h);"replaceNode"==l&&(k=g,n=d(k))},null,{Qa:function(){return!n||!a.a.aa(n)},$:n&&"replaceNode"==l?n.parentNode:n})}return a.s.va(function(d){a.za(b,c,h,d,"replaceNode")})};a.Rb=function(b,d,g,k,l){function n(a,b){c(b,r);g.afterRender&&g.afterRender(b,a)}function p(c,d){r=l.createChildContext(a.a.c(c),g.as);r.$index=d;var k="function"==typeof b?b(c,r):b;return f(null,"ignoreTargetNode",k,r,g)}var r;return a.j(function(){var b=
        a.a.c(d)||[];"undefined"==typeof b.length&&(b=[b]);b=a.a.Y(b,function(b){return g.includeDestroyed||b===q||null===b||!a.a.c(b._destroy)});a.q.I(a.a.Aa,null,[k,b,p,g,n])},null,{$:k})};a.d.template={init:function(b,c){var d=a.a.c(c());"string"==typeof d||(d.name||1!=b.nodeType&&8!=b.nodeType)||(d=1==b.nodeType?b.childNodes:a.e.childNodes(b),d=a.a.Mb(d),(new a.l.Q(b)).nodes(d));return{controlsDescendantBindings:!0}},update:function(b,c,d,f,g){c=a.a.c(c());d={};f=!0;var n,p=null;"string"!=typeof c&&(d=
        c,c=a.a.c(d.name),"if"in d&&(f=a.a.c(d["if"])),f&&"ifnot"in d&&(f=!a.a.c(d.ifnot)),n=a.a.c(d.data));"foreach"in d?p=a.Rb(c||b,f&&d.foreach||[],d,b,g):f?(g="data"in d?g.createChildContext(n,d.as):g,p=a.za(c||b,g,d,b)):a.e.ba(b);g=p;(n=a.a.f.get(b,"__ko__templateComputedDomDataKey__"))&&"function"==typeof n.B&&n.B();a.a.f.set(b,"__ko__templateComputedDomDataKey__",g&&g.ta()?g:q)}};a.g.S.template=function(b){b=a.g.da(b);return 1==b.length&&b[0].unknown||a.g.Jb(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};
        a.e.L.template=!0})();a.b("setTemplateEngine",a.Ba);a.b("renderTemplate",a.za);a.a.Pa=function(){function a(b,d,f,g,e){var m=Math.min,h=Math.max,k=[],l,n=b.length,p,r=d.length,q=r-n||1,t=n+r+1,s,v,w;for(l=0;l<=n;l++)for(v=s,k.push(s=[]),w=m(r,l+q),p=h(0,l-1);p<=w;p++)s[p]=p?l?b[l-1]===d[p-1]?v[p-1]:m(v[p]||t,s[p-1]||t)+1:p+1:l+1;m=[];h=[];q=[];l=n;for(p=r;l||p;)r=k[l][p]-1,p&&r===k[l][p-1]?h.push(m[m.length]={status:f,value:d[--p],index:p}):l&&r===k[l-1][p]?q.push(m[m.length]={status:g,value:b[--l],
        index:l}):(m.push({status:"retained",value:d[--p]}),--l);if(h.length&&q.length){b=10*n;var E;for(d=f=0;(e||d<b)&&(E=h[f]);f++){for(g=0;k=q[g];g++)if(E.value===k.value){E.moved=k.index;k.moved=E.index;q.splice(g,1);d=g=0;break}d+=g}}return m.reverse()}return function(c,d,f){c=c||[];d=d||[];return c.length<=d.length?a(c,d,"added","deleted",f):a(d,c,"deleted","added",f)}}();a.b("utils.compareArrays",a.a.Pa);(function(){function b(b){for(;b.length&&!a.a.aa(b[0]);)b.splice(0,1);if(1<b.length){for(var c=
        b[0],g=b[b.length-1],e=[c];c!==g;){c=c.nextSibling;if(!c)return;e.push(c)}Array.prototype.splice.apply(b,[0,b.length].concat(e))}return b}function c(c,f,g,e,m){var h=[];c=a.j(function(){var c=f(g,m,b(h))||[];0<h.length&&(a.a.eb(h,c),e&&a.q.I(e,null,[g,c,m]));h.splice(0,h.length);a.a.R(h,c)},null,{$:c,Qa:function(){return!a.a.pb(h)}});return{O:h,j:c.ta()?c:q}}a.a.Aa=function(d,f,g,e,m){function h(a,c){u=n[c];x!==c&&(E[a]=u);u.ra(x++);b(u.O);t.push(u);w.push(u)}function k(b,c){if(b)for(var d=0,e=c.length;d<
        e;d++)c[d]&&a.a.p(c[d].O,function(a){b(a,d,c[d].X)})}f=f||[];e=e||{};var l=a.a.f.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===q,n=a.a.f.get(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],p=a.a.Z(n,function(a){return a.X}),r=a.a.Pa(p,f,e.dontLimitMoves),t=[],s=0,x=0,v=[],w=[];f=[];for(var E=[],p=[],u,B=0,y,A;y=r[B];B++)switch(A=y.moved,y.status){case "deleted":A===q&&(u=n[s],u.j&&u.j.B(),v.push.apply(v,b(u.O)),e.beforeRemove&&(f[B]=u,w.push(u)));s++;break;case "retained":h(B,
        s++);break;case "added":A!==q?h(B,A):(u={X:y.value,ra:a.m(x++)},t.push(u),w.push(u),l||(p[B]=u))}k(e.beforeMove,E);a.a.p(v,e.beforeRemove?a.H:a.removeNode);for(var B=0,l=a.e.firstChild(d),C;u=w[B];B++){u.O||a.a.extend(u,c(d,g,u.X,m,u.ra));for(s=0;r=u.O[s];l=r.nextSibling,C=r,s++)r!==l&&a.e.Va(d,r,C);!u.Fb&&m&&(m(u.X,u.O,u.ra),u.Fb=!0)}k(e.beforeRemove,f);k(e.afterMove,E);k(e.afterAdd,p);a.a.f.set(d,"setDomNodeChildrenFromArrayMapping_lastMappingResult",t)}})();a.b("utils.setDomNodeChildrenFromArrayMapping",
        a.a.Aa);a.D=function(){this.allowTemplateRewriting=!1};a.D.prototype=new a.v;a.D.prototype.renderTemplateSource=function(b){var c=(9>a.a.ca?0:b.nodes)?b.nodes():null;if(c)return a.a.N(c.cloneNode(!0).childNodes);b=b.text();return a.a.xa(b)};a.D.sa=new a.D;a.Ba(a.D.sa);a.b("nativeTemplateEngine",a.D);(function(){a.ua=function(){var a=this.Ib=function(){if("undefined"==typeof t||!t.tmpl)return 0;try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();this.renderTemplateSource=
        function(b,f,g){g=g||{};if(2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var e=b.data("precompiled");e||(e=b.text()||"",e=t.template(null,"{{ko_with $item.koBindingContext}}"+e+"{{/ko_with}}"),b.data("precompiled",e));b=[f.$data];f=t.extend({koBindingContext:f},g.templateOptions);f=t.tmpl(e,b,f);f.appendTo(s.createElement("div"));t.fragments={};return f};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+
        a+" })()) }}"};this.addTemplate=function(a,b){s.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.ua.prototype=new a.v;var b=new a.ua;0<b.Ib&&a.Ba(b);a.b("jqueryTmplTemplateEngine",a.ua)})()})})();
})();